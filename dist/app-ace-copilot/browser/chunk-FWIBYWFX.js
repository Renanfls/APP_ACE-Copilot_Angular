import{a as Ce,b as ke,c as we,d as Ee,e as Ie,f as Te,g as Me,h as Pe,i as Oe,j as Ve,k as Ne,l as Fe,m as Le,n as De}from"./chunk-QX5LECDH.js";import{a as qe}from"./chunk-C7XEMY5Y.js";import{a as je,b as Be,c as Re,d as Ue}from"./chunk-RJPSEO76.js";import{$ as O,$a as D,Bb as ue,C as q,Cb as ve,Db as fe,Ea as K,Eb as ge,F as T,Fb as be,Gb as he,Ha as X,Hb as xe,I as o,Ia as Z,Ib as _e,Ja as N,Jb as ye,K as y,Ka as ee,La as te,Lb as Ae,M,Nb as R,Ob as Se,Pa as F,Q as u,T as l,V as k,Wa as ae,X as a,Y as n,Z as c,_ as P,_a as L,aa as h,ab as j,ba as v,c as I,ca as m,cb as ie,da as $,ea as G,fa as Y,gb as re,ib as ne,ja as s,ka as _,kb as oe,la as b,lb as se,m as z,mb as le,na as J,oa as Q,pa as W,pb as ce,qa as V,qb as me,s as f,t as g,ub as B,va as H,vb as de,wb as pe,x as U}from"./chunk-RVYV3GKE.js";import{a as A,b as S}from"./chunk-4CLCTAJ7.js";var Ye=[{id:"m1",image:"assets/avatars/adventurer-avatar-m1.svg",category:"male",style:"adventurer",type:"free"},{id:"f1",image:"assets/avatars/adventurer-avatar-f1.svg",category:"female",style:"adventurer",type:"free"},{id:"n1",image:"assets/avatars/adventurer-avatar-n1.svg",category:"neutral",style:"adventurer",type:"free"}],Je=[{id:"m2",image:"assets/avatars/premium/adventurer-avatar-m2.svg",category:"male",style:"adventurer",type:"premium",price:40},{id:"m3",image:"assets/avatars/premium/adventurer-avatar-m3.svg",category:"male",style:"adventurer",type:"premium",price:45},{id:"m4",image:"assets/avatars/premium/adventurer-avatar-m4.svg",category:"male",style:"adventurer",type:"premium",price:50},{id:"f2",image:"assets/avatars/premium/adventurer-avatar-f2.svg",category:"female",style:"adventurer",type:"premium",price:40},{id:"f3",image:"assets/avatars/premium/adventurer-avatar-f3.svg",category:"female",style:"adventurer",type:"premium",price:45},{id:"f4",image:"assets/avatars/premium/adventurer-avatar-f4.svg",category:"female",style:"adventurer",type:"premium",price:50},{id:"n2",image:"assets/avatars/premium/adventurer-avatar-n2.svg",category:"neutral",style:"adventurer",type:"premium",price:40},{id:"n3",image:"assets/avatars/premium/adventurer-avatar-n3.svg",category:"neutral",style:"adventurer",type:"premium",price:45},{id:"n4",image:"assets/avatars/premium/adventurer-avatar-n4.svg",category:"neutral",style:"adventurer",type:"premium",price:50}],Qe=[{id:"cm1",image:"assets/avatars/custom/adventurer-avatar-cm1.svg",category:"male",style:"adventurer",type:"custom",price:100},{id:"cm2",image:"assets/avatars/custom/adventurer-avatar-cm2.svg",category:"male",style:"adventurer",type:"custom",price:150},{id:"cf1",image:"assets/avatars/custom/adventurer-avatar-cf1.svg",category:"female",style:"adventurer",type:"custom",price:100},{id:"cf2",image:"assets/avatars/custom/adventurer-avatar-cf2.svg",category:"female",style:"adventurer",type:"custom",price:150},{id:"cn1",image:"assets/avatars/custom/adventurer-avatar-cn1.svg",category:"neutral",style:"adventurer",type:"custom",price:100},{id:"cn2",image:"assets/avatars/custom/adventurer-avatar-cn2.svg",category:"neutral",style:"adventurer",type:"custom",price:150}],E=[...Ye,...Je,...Qe];var $e=(()=>{class r{availableCoupons=new I(0);userAvatars=new I([]);selectedAvatar=new I(null);lockedAvatars=new Set;constructor(){let e=localStorage.getItem("availableCoupons");e&&this.availableCoupons.next(Number(e));let t=localStorage.getItem("userAvatars");t&&this.userAvatars.next(JSON.parse(t));let i=localStorage.getItem("selectedAvatarId");if(i){let x=this.userAvatars.value.find(C=>C.id===i);x&&this.selectedAvatar.next(x)}let p=localStorage.getItem("lockedAvatars");if(p){let x=JSON.parse(p);this.lockedAvatars=new Set(x)}}getUserAvatars(){return this.userAvatars.asObservable()}getAvailableCoupons(){return this.availableCoupons.asObservable()}getSelectedAvatar(){return this.selectedAvatar.asObservable()}resetUserProfile(){let e=E.find(t=>t.id==="default");if(e){let t=S(A({},e),{purchasedAt:new Date});this.userAvatars.next([t]),this.selectedAvatar.next(t),localStorage.setItem("userAvatars",JSON.stringify([t])),localStorage.setItem("selectedAvatarId",t.id)}this.availableCoupons.next(0),localStorage.setItem("availableCoupons","0")}purchaseAvatar(e){if(this.userAvatars.value.find(C=>C.id===e))return!1;let i=E.find(C=>C.id===e);if(!i||!i.price||this.availableCoupons.value<i.price)return!1;this.availableCoupons.next(this.availableCoupons.value-i.price),localStorage.setItem("availableCoupons",this.availableCoupons.value.toString());let p=S(A({},i),{purchasedAt:new Date}),x=[...this.userAvatars.value,p];return this.userAvatars.next(x),localStorage.setItem("userAvatars",JSON.stringify(x)),!0}selectAvatar(e){let t=this.userAvatars.value.find(i=>i.id===e);return t?(this.selectedAvatar.next(t),localStorage.setItem("selectedAvatarId",e),!0):!1}isAvatarAvailable(e){return this.lockedAvatars.has(e)?!1:this.userAvatars.value.some(t=>t.id===e)}getAvatarPrice(e){return E.find(i=>i.id===e)?.price||null}addCoupons(e){if(e>0){let t=this.availableCoupons.value+e;this.availableCoupons.next(t),localStorage.setItem("availableCoupons",t.toString())}}lockAvatar(e){this.lockedAvatars.add(e),localStorage.setItem("lockedAvatars",JSON.stringify(Array.from(this.lockedAvatars)))}unlockAvatar(e){this.lockedAvatars.delete(e),localStorage.setItem("lockedAvatars",JSON.stringify(Array.from(this.lockedAvatars)))}static \u0275fac=function(t){return new(t||r)};static \u0275prov=z({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function Ke(r,d){if(r&1&&(a(0,"div",23),c(1,"ng-icon",24),s(2),n()),r&2){let e=m(2);k("bg-green-500",e.notification.type==="success")("bg-red-500",e.notification.type==="error")("text-white",!0),o(),l("name",e.notification.type==="success"?"matCheckCircle":"matError"),o(),b(" ",e.notification.message," ")}}function Xe(r,d){if(r&1){let e=h();a(0,"div",25)(1,"button",26),v("click",function(){f(e);let i=m(2);return g(i.resetProfile())}),c(2,"ng-icon",27),s(3," Resetar Perfil "),n(),a(4,"button",28),v("click",function(){f(e);let i=m(2);return g(i.addCoupons())}),c(5,"ng-icon",29),s(6," Adicionar Cupons "),n()()}}function Ze(r,d){if(r&1&&(a(0,"div",30)(1,"div",31)(2,"p",32),s(3,"Total de Avatares"),n(),a(4,"p",33),s(5),n()(),a(6,"div",31)(7,"p",32),s(8,"Avatares Dispon\xEDveis"),n(),a(9,"p",34),s(10),n()(),a(11,"div",31)(12,"p",32),s(13,"Avatares Bloqueados"),n(),a(14,"p",35),s(15),n()()()),r&2){let e=m(2);o(5),_(e.filteredAvatars.length),o(5),_(e.getAvailableAvatarsCount()),o(5),_(e.getLockedAvatarsCount())}}function et(r,d){if(r&1){let e=h();a(0,"button",41),v("click",function(){let i=f(e).$implicit,p=m(3);return g(p.selectCategory(i))}),s(1),n()}if(r&2){let e=d.$implicit,t=m(3);k("bg-amber-400",t.selectedCategory===e),l("variant",t.selectedCategory===e?"default":"ghost"),o(),b(" ",t.getCategoryLabel(e)," ")}}function tt(r,d){if(r&1){let e=h();a(0,"button",41),v("click",function(){let i=f(e).$implicit,p=m(3);return g(p.selectType(i))}),s(1),n()}if(r&2){let e=d.$implicit,t=m(3);k("bg-amber-400",t.selectedType===e),l("variant",t.selectedType===e?"default":"ghost"),o(),b(" ",t.getTypeLabel(e)," ")}}function at(r,d){if(r&1){let e=h();a(0,"div",36)(1,"div",37)(2,"div",38),c(3,"ng-icon",39),s(4," Categorias "),n(),a(5,"div",40)(6,"button",41),v("click",function(){f(e);let i=m(2);return g(i.selectCategory("all"))}),s(7),n(),u(8,et,2,4,"button",42),n()(),a(9,"div",37)(10,"div",38),c(11,"ng-icon",43),s(12," Tipos "),n(),a(13,"div",40)(14,"button",41),v("click",function(){f(e);let i=m(2);return g(i.selectType("all"))}),s(15),n(),u(16,tt,2,4,"button",42),n()()()}if(r&2){let e=m(2);o(6),k("bg-amber-400",e.selectedCategory==="all"),l("variant",e.selectedCategory==="all"?"default":"ghost"),o(),b(" ",e.getCategoryLabel("all")," "),o(),l("ngForOf",e.categories),o(6),k("bg-amber-400",e.selectedType==="all"),l("variant",e.selectedType==="all"?"default":"ghost"),o(),b(" ",e.getTypeLabel("all")," "),o(),l("ngForOf",e.types)}}function it(r,d){if(r&1&&(a(0,"p",57),c(1,"ng-icon",58),s(2),n()),r&2){let e=m(2).$implicit;o(2),b(" ",e.price," ")}}function rt(r,d){if(r&1&&(a(0,"div",53)(1,"div",54),c(2,"ng-icon",55),u(3,it,3,1,"p",56),n()()),r&2){let e=m().$implicit;o(2),l("name",e.price?"matShoppingCart":"matLock"),o(),l("ngIf",e.price)}}function nt(r,d){r&1&&(a(0,"span",59),s(1,"\u2605"),n())}function ot(r,d){r&1&&(a(0,"span",59),s(1,"\u26A1"),n())}function st(r,d){if(r&1&&(a(0,"div",60)(1,"div",61)(2,"span"),s(3),n(),a(4,"span"),s(5),n()()()),r&2){let e=m().$implicit;o(3),b("ID: ",e.id,""),o(2),_(e.price?e.price+" cupons":"Gr\xE1tis")}}function lt(r,d){if(r&1){let e=h();a(0,"div",44),v("click",function(){let i=f(e).$implicit,p=m(2);return g(p.onAvatarClick(i))}),a(1,"div",45),c(2,"img",46),n(),u(3,rt,4,2,"div",47),a(4,"div",48),P(5,49),u(6,nt,2,0,"span",50)(7,ot,2,0,"span",50),O(),n(),a(8,"div",51),s(9),n(),u(10,st,6,2,"div",52),n()}if(r&2){let e=d.$implicit,t=m(2);k("border-amber-400",(t.selectedAvatar==null?null:t.selectedAvatar.id)===e.id)("border-transparent",(t.selectedAvatar==null?null:t.selectedAvatar.id)!==e.id)("opacity-75",!t.isAdmin&&!t.isAvatarAvailable(e.id)),o(2),l("src",e.image,T)("alt","Avatar "+e.id),o(),l("ngIf",!t.isAdmin&&!t.isAvatarAvailable(e.id)),o(2),l("ngSwitch",e.type),o(),l("ngSwitchCase","premium"),o(),l("ngSwitchCase","custom"),o(2),b(" ",t.getCategoryLabel(e.category)," "),o(),l("ngIf",t.isAdmin)}}function ct(r,d){r&1&&(a(0,"div",62)(1,"span",63),s(2,"Voc\xEA tem altera\xE7\xF5es n\xE3o salvas"),n()())}function mt(r,d){if(r&1){let e=h();a(0,"button",66),v("click",function(){f(e);let i=m(3);return g(i.purchaseSelected())}),c(1,"ng-icon",67),s(2),n()}if(r&2){let e=m(3);l("disabled",!e.canPurchaseSelected()),o(2),b(" Comprar (",e.selectedAvatar.price," cupons) ")}}function dt(r,d){if(r&1){let e=h();a(0,"button",68),v("click",function(){f(e);let i=m(3);return g(i.saveChanges())}),c(1,"ng-icon",69),s(2," Salvar Altera\xE7\xF5es "),n()}}function pt(r,d){if(r&1&&(P(0),u(1,mt,3,2,"button",64)(2,dt,3,0,"button",65),O()),r&2){let e=m(2);o(),l("ngIf",e.selectedAvatar&&!e.isAvatarAvailable(e.selectedAvatar.id)),o(),l("ngIf",e.selectedAvatar&&e.isAvatarAvailable(e.selectedAvatar.id))}}function ut(r,d){if(r&1){let e=h();a(0,"button",68),v("click",function(){f(e);let i=m(3);return g(i.toggleAvatarAvailability())}),c(1,"ng-icon",70),s(2),n()}if(r&2){let e=m(3);o(),l("name",e.isAvatarAvailable(e.selectedAvatar.id)?"matLock":"matLockOpen"),o(),b(" ",e.isAvatarAvailable(e.selectedAvatar.id)?"Bloquear":"Desbloquear"," ")}}function vt(r,d){if(r&1&&(P(0),u(1,ut,3,2,"button",65),O()),r&2){let e=m(2);o(),l("ngIf",e.selectedAvatar)}}function ft(r,d){if(r&1){let e=h();a(0,"div",1),u(1,Ke,3,8,"div",2),a(2,"div",3)(3,"div",4)(4,"div",5)(5,"div")(6,"h2",6),s(7),n(),a(8,"div",7),c(9,"ng-icon",8),a(10,"p",9),s(11),n()()(),a(12,"div",10),u(13,Xe,7,0,"div",11),a(14,"button",12),v("click",function(){f(e);let i=m();return g(i.close())}),c(15,"ng-icon",13),n()()(),u(16,Ze,16,3,"div",14)(17,at,17,10,"div",15),n(),a(18,"div",16)(19,"div",17),u(20,lt,11,14,"div",18),n()(),a(21,"div",19)(22,"div",5),u(23,ct,3,0,"div",20),a(24,"div",10)(25,"button",21),v("click",function(){f(e);let i=m();return g(i.close())}),s(26," Cancelar "),n(),u(27,pt,3,2,"ng-container",22)(28,vt,2,1,"ng-container",22),n()()()()()}if(r&2){let e=m();o(),l("ngIf",e.notification),o(6),b(" ",e.isAdmin?"Gerenciar Avatares":"Escolha seu Avatar"," "),o(4),b(" Cupons dispon\xEDveis: ",e.availableCoupons," "),o(2),l("ngIf",e.isAdmin),o(3),l("ngIf",e.isAdmin),o(),l("ngIf",!e.isAdmin),o(3),l("ngForOf",e.filteredAvatars),o(3),l("ngIf",e.hasUnsavedChanges),o(4),l("ngIf",!e.isAdmin),o(),l("ngIf",e.isAdmin)}}var Ge=(()=>{class r{avatarService;isOpen=!1;isAdmin=!1;closeModal=new U;avatarSelected=new U;availableCoupons=0;selectedAvatar=null;currentAvatar=null;hasUnsavedChanges=!1;notification=null;categories=["male","female","neutral"];selectedCategory="all";types=["free","premium","custom"];selectedType="all";constructor(e){this.avatarService=e}ngOnInit(){this.avatarService.getAvailableCoupons().subscribe(e=>{this.availableCoupons=e}),this.avatarService.getSelectedAvatar().subscribe(e=>{this.currentAvatar=e,e&&!this.selectedAvatar&&(this.selectedAvatar=e)})}get filteredAvatars(){return E.filter(e=>{let t=this.selectedCategory==="all"||e.category===this.selectedCategory,i=this.selectedType==="all"||e.type===this.selectedType;return t&&i})}getCategoryLabel(e){return{all:"Todos",male:"Masculino",female:"Feminino",neutral:"Neutro"}[e]}getTypeLabel(e){return{all:"Todos",free:"Gratuitos",premium:"Premium",custom:"Exclusivos"}[e]}selectCategory(e){this.selectedCategory=e}selectType(e){this.selectedType=e}onAvatarClick(e){this.selectedAvatar=e,this.hasUnsavedChanges=this.currentAvatar?.id!==e.id}isAvatarAvailable(e){return this.avatarService.isAvatarAvailable(e)}canPurchaseSelected(){return!this.selectedAvatar||!this.selectedAvatar.price?!1:this.availableCoupons>=this.selectedAvatar.price}showNotification(e,t){this.notification={type:e,message:t},setTimeout(()=>{this.notification=null},3e3)}saveChanges(){if(this.selectedAvatar&&this.isAvatarAvailable(this.selectedAvatar.id)&&this.avatarService.selectAvatar(this.selectedAvatar.id)){this.avatarSelected.emit(this.selectedAvatar);let e=this.getTypeLabel(this.selectedAvatar.type).toLowerCase();this.showNotification("success",`Avatar ${e} salvo com sucesso!`),this.hasUnsavedChanges=!1,this.close()}}purchaseSelected(){if(this.selectedAvatar)if(this.avatarService.purchaseAvatar(this.selectedAvatar.id)){let e=this.getTypeLabel(this.selectedAvatar.type).toLowerCase();this.showNotification("success",`Avatar ${e} comprado com sucesso! Selecione-o e salve para utiliz\xE1-lo.`),this.hasUnsavedChanges=!0}else this.showNotification("error","N\xE3o foi poss\xEDvel comprar o avatar. Verifique se voc\xEA tem cupons suficientes.")}close(){this.hasUnsavedChanges?confirm("Voc\xEA tem altera\xE7\xF5es n\xE3o salvas. Deseja realmente sair sem salvar?")&&(this.closeModal.emit(),this.resetState()):(this.closeModal.emit(),this.resetState())}resetState(){this.selectedAvatar=this.currentAvatar,this.selectedCategory="all",this.selectedType="all",this.hasUnsavedChanges=!1}resetProfile(){confirm("Tem certeza que deseja resetar seu perfil? Todos os avatares premium e exclusivos ser\xE3o removidos.")&&(this.avatarService.resetUserProfile(),this.showNotification("success","Perfil resetado com sucesso!"),this.close())}getAvailableAvatarsCount(){return this.filteredAvatars.filter(e=>this.isAvatarAvailable(e.id)).length}getLockedAvatarsCount(){return this.filteredAvatars.filter(e=>!this.isAvatarAvailable(e.id)).length}addCoupons(){let e=prompt("Quantidade de cupons a adicionar:");if(e&&!isNaN(Number(e))){let t=Number(e);t>0?(this.avatarService.addCoupons(t),this.showNotification("success",`${e} cupons adicionados com sucesso!`)):this.showNotification("error","A quantidade deve ser maior que zero")}}toggleAvatarAvailability(){if(!this.selectedAvatar)return;this.isAvatarAvailable(this.selectedAvatar.id)?(this.avatarService.lockAvatar(this.selectedAvatar.id),this.showNotification("success","Avatar bloqueado com sucesso!")):(this.avatarService.unlockAvatar(this.selectedAvatar.id),this.showNotification("success","Avatar desbloqueado com sucesso!"))}static \u0275fac=function(t){return new(t||r)(y($e))};static \u0275cmp=M({type:r,selectors:[["app-avatar-selector"]],inputs:{isOpen:"isOpen",isAdmin:"isAdmin"},outputs:{closeModal:"closeModal",avatarSelected:"avatarSelected"},features:[V([],[L({matClose:le,matLock:pe,matLockOpen:de,matShoppingCart:xe,matLocalOffer:B,matCategory:oe,matStyle:ye,matStarRate:_e,matCheckCircle:se,matError:me,matAdd:j,matSave:be})])],decls:1,vars:1,consts:[["class","fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",4,"ngIf"],[1,"fixed","inset-0","bg-black/60","backdrop-blur-sm","z-50","flex","items-center","justify-center","p-4"],["class","fixed top-4 right-4 p-4 rounded-lg shadow-lg flex items-center gap-3 text-sm animate-fade-in",3,"bg-green-500","bg-red-500","text-white",4,"ngIf"],[1,"bg-white","dark:bg-[#141416]","rounded-xl","shadow-2xl","w-full","max-w-4xl","flex","flex-col","max-h-[90vh]","border","border-gray-200","dark:border-gray-700"],[1,"p-6","border-b","border-gray-200","dark:border-gray-700"],[1,"flex","justify-between","items-center"],[1,"text-3xl","font-bold","dark:text-white","flex","items-center","gap-2"],[1,"mt-2","flex","items-center","gap-2"],["name","matLocalOffer",1,"text-amber-400"],[1,"text-amber-400","text-sm","font-medium"],[1,"flex","items-center","gap-4"],["class","flex items-center gap-2",4,"ngIf"],["hlmBtn","","variant","ghost",1,"rounded-full","p-2","hover:bg-gray-100","dark:hover:bg-gray-800","transition-colors",3,"click"],["name","matClose",1,"text-xl","text-gray-500","dark:text-gray-400"],["class","mt-4 grid grid-cols-3 gap-4",4,"ngIf"],["class","mt-6 space-y-4",4,"ngIf"],[1,"p-6","overflow-y-auto","flex-grow"],[1,"grid","grid-cols-2","sm:grid-cols-3","gap-4"],["class","relative group cursor-pointer rounded-xl overflow-hidden transition-all duration-300 hover:scale-105 bg-gray-100 dark:bg-gray-800 border-2",3,"border-amber-400","border-transparent","opacity-75","click",4,"ngFor","ngForOf"],[1,"p-6","border-t","border-gray-200","dark:border-gray-700","bg-white/80","dark:bg-[#141416]/80","backdrop-blur-sm"],["class","flex items-center gap-2 text-gray-500 dark:text-gray-400",4,"ngIf"],["hlmBtn","","variant","ghost",1,"px-6","py-2","rounded-full",3,"click"],[4,"ngIf"],[1,"fixed","top-4","right-4","p-4","rounded-lg","shadow-lg","flex","items-center","gap-3","text-sm","animate-fade-in"],[1,"text-xl",3,"name"],[1,"flex","items-center","gap-2"],["hlmBtn","","variant","destructive",1,"px-4","py-2","rounded-lg","flex","items-center","gap-2",3,"click"],["name","matRefresh"],["hlmBtn","",1,"px-4","py-2","bg-amber-400","text-black","hover:bg-amber-500","rounded-lg","flex","items-center","gap-2",3,"click"],["name","matAdd"],[1,"mt-4","grid","grid-cols-3","gap-4"],[1,"bg-gray-100","dark:bg-gray-800","p-4","rounded-lg","text-center"],[1,"text-sm","text-gray-500","dark:text-gray-400"],[1,"text-2xl","font-bold","text-amber-400"],[1,"text-2xl","font-bold","text-green-500"],[1,"text-2xl","font-bold","text-red-500"],[1,"mt-6","space-y-4"],[1,"space-y-2"],[1,"flex","items-center","gap-2","text-sm","font-medium","text-gray-500","dark:text-gray-400"],["name","matCategory"],[1,"flex","flex-wrap","gap-2"],["hlmBtn","",1,"rounded-full","px-4","py-2","text-sm",3,"click","variant"],["hlmBtn","","class","rounded-full px-4 py-2 text-sm",3,"variant","bg-amber-400","click",4,"ngFor","ngForOf"],["name","matStyle"],[1,"relative","group","cursor-pointer","rounded-xl","overflow-hidden","transition-all","duration-300","hover:scale-105","bg-gray-100","dark:bg-gray-800","border-2",3,"click"],[1,"aspect-square","w-full","p-4","flex","items-center","justify-center"],[1,"w-24","h-24","object-contain","transition-transform","duration-300","group-hover:scale-110",3,"src","alt"],["class","absolute inset-0 bg-[#1d1d1d] bg-opacity-70 flex items-center justify-center backdrop-blur-sm",4,"ngIf"],[1,"absolute","top-2","right-2"],[3,"ngSwitch"],["class","text-amber-400 text-lg",4,"ngSwitchCase"],[1,"absolute","bottom-2","left-2","text-xs","font-medium","text-gray-500","dark:text-gray-400"],["class","absolute bottom-0 left-0 right-0 bg-black/60 text-white p-2 text-xs",4,"ngIf"],[1,"absolute","inset-0","bg-[#1d1d1d]","bg-opacity-70","flex","items-center","justify-center","backdrop-blur-sm"],[1,"text-center","p-2"],[1,"text-amber-400","text-2xl","mb-1",3,"name"],["class","text-amber-400 text-sm font-medium flex items-center justify-center gap-1",4,"ngIf"],[1,"text-amber-400","text-sm","font-medium","flex","items-center","justify-center","gap-1"],["name","matLocalOffer",1,"text-base"],[1,"text-amber-400","text-lg"],[1,"absolute","bottom-0","left-0","right-0","bg-black/60","text-white","p-2","text-xs"],[1,"flex","justify-between"],[1,"flex","items-center","gap-2","text-gray-500","dark:text-gray-400"],[1,"text-sm"],["hlmBtn","","class","px-6 py-2 bg-amber-400 text-black hover:bg-amber-500 rounded-full flex items-center gap-2",3,"disabled","click",4,"ngIf"],["hlmBtn","","class","px-6 py-2 bg-amber-400 text-black hover:bg-amber-500 rounded-full flex items-center gap-2",3,"click",4,"ngIf"],["hlmBtn","",1,"px-6","py-2","bg-amber-400","text-black","hover:bg-amber-500","rounded-full","flex","items-center","gap-2",3,"click","disabled"],["name","matShoppingCart"],["hlmBtn","",1,"px-6","py-2","bg-amber-400","text-black","hover:bg-amber-500","rounded-full","flex","items-center","gap-2",3,"click"],["name","matSave"],[3,"name"]],template:function(t,i){t&1&&u(0,ft,29,10,"div",0),t&2&&l("ngIf",i.isOpen)},dependencies:[F,Z,N,ee,te,D,R],styles:["[_nghost-%COMP%]{display:block}.avatar-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:1rem}img[_ngcontent-%COMP%]{filter:drop-shadow(0 4px 6px rgba(0,0,0,.1))}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#9ca3af80;border-radius:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#9ca3afb3}*[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:rgba(156,163,175,.5) transparent}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0;transform:translateY(-1rem)}to{opacity:1;transform:translateY(0)}}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .3s ease-out}"]})}return r})();var gt=["fileInput"],bt=(r,d,e,t)=>({"bg-amber-700 text-black":r,"bg-amber-400 text-black":d,"bg-gray-400 text-white":e,"bg-orange-700 text-white":t});function ht(r,d){if(r&1&&(a(0,"div",47),c(1,"ng-icon",48),s(2),n()),r&2){let e=m();o(2),b(" ",e.user().phone," ")}}function xt(r,d){if(r&1){let e=h();a(0,"div",49)(1,"h3",34),c(2,"ng-icon",35),s(3),n(),a(4,"div",50)(5,"div",51)(6,"h4",52),c(7,"ng-icon",53),s(8," Gerenciar Cupons "),n(),a(9,"div",54)(10,"div",55)(11,"label",21),s(12," Quantidade de Cupons "),n(),a(13,"input",56),W("ngModelChange",function(i){f(e);let p=m();return Q(p.couponAmount,i)||(p.couponAmount=i),g(i)}),n()(),a(14,"button",57),v("click",function(){f(e);let i=m();return g(i.addCoupons())}),c(15,"ng-icon",58),s(16," Adicionar Cupons "),n()(),a(17,"div",59)(18,"div",60)(19,"p",61),s(20,"Total"),n(),a(21,"p",62),s(22),n()(),a(23,"div",60)(24,"p",61),s(25,"Dispon\xEDveis"),n(),a(26,"p",63),s(27),n()(),a(28,"div",60)(29,"p",61),s(30,"Utilizados"),n(),a(31,"p",64),s(32),n()()()(),a(33,"button",65),v("click",function(){f(e);let i=m();return g(i.resetProfile())}),c(34,"ng-icon",66),s(35," Resetar Perfil "),n()()()}if(r&2){let e=m();o(3),b(" Administra\xE7\xE3o (",e.authService.isAdmin()?"Admin":"N\xE3o Admin",") "),o(10),J("ngModel",e.couponAmount),o(9),_(e.couponStats().total),o(5),_(e.couponStats().available),o(5),_(e.couponStats().used)}}var ca=(()=>{class r{fb;router;themeService;notificationService;authService;couponService;fileInput;originalThemeState=!1;isAvatarSelectorOpen=!1;couponAmount=1;couponStats=q({total:0,available:0,used:0});user=q({id:"1",name:"Anabelle",email:"anabelle@example.com",phase:"Ouro",avatar:localStorage.getItem("userAvatar")||"",phone:"(21) 98765-4321",company:"Novacap",role:"Motorista",registration:"123456",preferences:{darkMode:!0,notifications:!0}});profileForm;constructor(e,t,i,p,x,C){this.fb=e,this.router=t,this.themeService=i,this.notificationService=p,this.authService=x,this.couponService=C,this.originalThemeState=this.themeService.isDarkMode(),this.profileForm=this.fb.group({name:["",we.required],registration:[{value:"",disabled:!0}],phone:[{value:"",disabled:!0}],company:[{value:"",disabled:!0}],role:[{value:"",disabled:!0}],darkMode:[this.themeService.isDarkMode()],notifications:[this.notificationService.isNotificationsEnabled()]}),K(()=>{let w=this.themeService.isDarkMode();this.profileForm.dirty||(this.profileForm.patchValue({darkMode:w},{emitEvent:!1}),this.originalThemeState=w)}),this.profileForm.get("darkMode")?.valueChanges.subscribe(w=>{w?this.themeService.enableDarkMode():this.themeService.disableDarkMode()}),this.couponService.getCouponStats().subscribe(w=>{this.couponStats.set(w)})}ngOnInit(){let e=localStorage.getItem("userAvatar");e&&this.user.update(t=>S(A({},t),{avatar:e})),console.log("User Role:",localStorage.getItem("userRole")),console.log("User Registration:",localStorage.getItem("registration")),this.profileForm.patchValue({name:this.user().name,registration:this.user().registration,phone:this.user().phone,company:this.user().company,role:this.user().role,darkMode:this.themeService.isDarkMode(),notifications:this.notificationService.isNotificationsEnabled()})}openAvatarSelector(){this.isAvatarSelectorOpen=!0}closeAvatarSelector(){this.isAvatarSelectorOpen=!1}onAvatarSelected(e){localStorage.setItem("userAvatar",e.image),this.user.update(t=>S(A({},t),{avatar:e.image})),this.showToast("Avatar atualizado com sucesso!","success")}onSubmit(){if(this.profileForm.valid){let e=this.profileForm.value;this.originalThemeState=e.darkMode,e.notifications?this.notificationService.enableNotifications():this.notificationService.disableNotifications(),this.user.update(t=>S(A({},t),{name:e.name,registration:e.registration,phone:e.phone,company:e.company,role:e.role,preferences:{darkMode:e.darkMode,notifications:e.notifications}})),console.log("Profile updated:",this.user()),this.profileForm.markAsPristine(),this.showToast("Perfil atualizado com sucesso!","success")}}revertThemeChanges(){this.originalThemeState?this.themeService.enableDarkMode():this.themeService.disableDarkMode(),this.profileForm.patchValue({darkMode:this.originalThemeState},{emitEvent:!1})}canDeactivate(){if(this.profileForm.dirty){let e=window.confirm("Voc\xEA tem altera\xE7\xF5es n\xE3o salvas. Deseja descartar as altera\xE7\xF5es?");return e&&this.revertThemeChanges(),e}return!0}showToast(e,t){let i=document.createElement("div");i.className=`fixed bottom-6 right-6 px-6 py-3 rounded-lg shadow-lg text-white font-medium ${t==="success"?"bg-green-600":"bg-red-600"} animate-fade-in-up`,i.textContent=e,document.body.appendChild(i),setTimeout(()=>{i.classList.add("animate-fade-out"),setTimeout(()=>{document.body.removeChild(i)},300)},3e3)}isAdmin(){let e=this.authService.isAdmin();return console.log("isAdmin check:",e),e}resetProfile(){confirm("Tem certeza que deseja resetar este perfil? Esta a\xE7\xE3o n\xE3o pode ser desfeita.")&&(this.user.update(e=>S(A({},e),{avatar:"",preferences:{darkMode:!1,notifications:!0}})),localStorage.removeItem("userAvatar"),this.profileForm.reset({name:this.user().name,registration:this.user().registration,phone:this.user().phone,company:this.user().company,role:this.user().role,darkMode:!1,notifications:!0}),this.themeService.disableDarkMode(),this.originalThemeState=!1,this.showToast("Perfil resetado com sucesso!","success"))}addCoupons(){if(this.couponAmount<1){this.showToast("A quantidade deve ser maior que zero","error");return}this.couponService.addCoupons(this.couponAmount),this.showToast(`${this.couponAmount} cupons adicionados com sucesso!`,"success"),this.couponAmount=1}static \u0275fac=function(t){return new(t||r)(y(Fe),y(ae),y(Re),y(Be),y(Se),y(qe))};static \u0275cmp=M({type:r,selectors:[["app-profile"]],viewQuery:function(t,i){if(t&1&&$(gt,5),t&2){let p;G(p=Y())&&(i.fileInput=p.first)}},features:[V([],[L({matArrowBack:ie,matPhotoCamera:fe,matPerson:ue,matBadge:re,matEmail:ce,matPhone:ve,matBusiness:ne,matWork:Ae,matSettings:he,matRefresh:ge,matAdd:j,matLocalOffer:B})])],decls:84,vars:16,consts:[[1,"min-h-screen","bg-white","dark:bg-[#09090B]"],[1,"container","mx-auto","py-28"],[1,"bg-white","dark:bg-[#141416]","overflow-hidden"],[1,"relative","p-8"],[1,"flex","flex-col","md:flex-row","items-center"],[1,"relative","mb-0","md:mr-8"],[1,"profile-avatar","w-40","h-40","rounded-full","overflow-hidden","border-4","border-amber-400","shadow-lg","hover:scale-105","transition-transform"],[1,"w-full","h-full","object-cover",3,"src","alt"],["hlmBtn","","variant","ghost",1,"absolute","bottom-2","right-2","bg-amber-400","hover:bg-amber-500","text-white","rounded-full","p-3","shadow-md","transition-colors",3,"click"],["name","matPhotoCamera",1,"text-lg"],[1,"text-center","md:text-left"],[1,"text-2xl","font-bold","text-white"],[1,"mt-2"],[1,"phase-badge","inline-block","px-4","py-1","rounded-full","text-sm","font-medium",3,"ngClass"],[1,"mt-4","flex","flex-wrap","justify-center","md:justify-start","gap-4"],["class","flex items-center text-md dark:text-gray-400",4,"ngIf"],[1,"p-8"],[1,"space-y-8",3,"ngSubmit","formGroup"],[1,"text-xl","font-semibold","mb-6","pb-2","border-b","border-gray-700","flex","items-center"],["name","matPerson",1,"mr-3"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"block","text-sm","font-medium","dark:text-gray-300","mb-2"],[1,"relative"],["type","text","formControlName","name",1,"input-field","w-full","px-4","py-3","rounded-lg","dark:bg-[#1a1a1a]","dark:text-white","border","border-gray-700","focus:border-amber-400","focus:ring-1","focus:ring-amber-400","transition-all"],[1,"absolute","right-3","top-3","text-gray-500"],["name","matPerson"],["type","text","formControlName","registration",1,"input-field","w-full","px-4","py-3","rounded-lg","dark:bg-[#1a1a1a]","dark:text-white","border","border-gray-700","focus:border-amber-400","focus:ring-1","focus:ring-amber-400","transition-all","cursor-not-allowed","opacity-75"],["name","matBadge"],["type","tel","formControlName","phone",1,"input-field","w-full","px-4","py-3","rounded-lg","dark:bg-[#1a1a1a]","dark:text-white","border","border-gray-700","focus:border-amber-400","focus:ring-1","focus:ring-amber-400","transition-all","cursor-not-allowed","opacity-75"],["name","matPhone"],["type","text","formControlName","company",1,"input-field","w-full","px-4","py-3","rounded-lg","dark:bg-[#1a1a1a]","dark:text-white","border","border-gray-700","focus:border-amber-400","focus:ring-1","focus:ring-amber-400","transition-all","cursor-not-allowed","opacity-75"],["name","matBusiness"],["type","text","formControlName","role",1,"input-field","w-full","px-4","py-3","rounded-lg","dark:bg-[#1a1a1a]","dark:text-white","border","border-gray-700","focus:border-amber-400","focus:ring-1","focus:ring-amber-400","transition-all","cursor-not-allowed","opacity-75"],["name","matWork"],[1,"text-xl","font-semibold","mb-6","pb-2","border-b","border-gray-700","dark:text-amber-400","flex","items-center"],["name","matSettings",1,"mr-3"],[1,"space-y-4"],[1,"flex","items-center"],[1,"relative","inline-flex","items-center","cursor-pointer"],["type","checkbox","formControlName","darkMode",1,"sr-only","peer"],[1,"w-11","h-6","bg-[#1a1a1a]","peer-focus:outline-none","rounded-full","peer","peer-checked:after:translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-[2px]","after:left-[2px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","peer-checked:bg-amber-400"],[1,"ml-3","text-sm","font-medium","dark:text-gray-300"],["type","checkbox","formControlName","notifications",1,"sr-only","peer"],["class","border-t border-gray-700 mt-8 pt-8",4,"ngIf"],[1,"flex","justify-end","pt-6"],["hlmBtn","","type","submit",1,"save-btn","bg-gradient-to-r","from-amber-400","to-amber-500","hover:from-amber-500","hover:to-amber-600","text-black","font-medium","py-3","px-8","rounded-lg","shadow-md","transition-all","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[3,"closeModal","avatarSelected","isOpen","isAdmin"],[1,"flex","items-center","text-md","dark:text-gray-400"],["name","matPhone",1,"mr-2","text-amber-400"],[1,"border-t","border-gray-700","mt-8","pt-8"],[1,"space-y-6"],[1,"bg-gray-100","dark:bg-gray-800","p-6","rounded-lg"],[1,"text-lg","font-medium","mb-4","flex","items-center","gap-2"],["name","matLocalOffer",1,"text-amber-400"],[1,"flex","items-center","gap-4","mb-4"],[1,"flex-1"],["type","number","min","1",1,"w-full","px-4","py-2","rounded-lg","dark:bg-[#1a1a1a]","dark:text-white","border","border-gray-700","focus:border-amber-400","focus:ring-1","focus:ring-amber-400",3,"ngModelChange","ngModel"],["hlmBtn","",1,"bg-amber-400","hover:bg-amber-500","text-black","font-medium","py-3","px-6","rounded-lg","shadow-md","transition-all","flex","items-center","gap-2","self-end",3,"click"],["name","matAdd"],[1,"grid","grid-cols-3","gap-4","mt-6"],[1,"bg-white","dark:bg-[#1a1a1a]","p-4","rounded-lg","text-center"],[1,"text-sm","text-gray-500","dark:text-gray-400"],[1,"text-2xl","font-bold","text-amber-400"],[1,"text-2xl","font-bold","text-green-500"],[1,"text-2xl","font-bold","text-blue-500"],["hlmBtn","","variant","destructive",1,"w-full","bg-red-500","hover:bg-red-600","text-white","font-medium","py-3","px-8","rounded-lg","shadow-md","transition-all","flex","items-center","gap-2","justify-center",3,"click"],["name","matRefresh"]],template:function(t,i){t&1&&(a(0,"div",0),c(1,"app-header"),a(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6),c(8,"img",7),n(),a(9,"button",8),v("click",function(){return i.openAvatarSelector()}),c(10,"ng-icon",9),n()(),a(11,"div",10)(12,"h2",11),s(13),n(),a(14,"div",12)(15,"span",13),s(16),n()(),a(17,"div",14),u(18,ht,3,1,"div",15),n()()()(),a(19,"div",16)(20,"form",17),v("ngSubmit",function(){return i.onSubmit()}),a(21,"div")(22,"h3",18),c(23,"ng-icon",19),s(24," Informa\xE7\xF5es Pessoais "),n(),a(25,"div",20)(26,"div")(27,"label",21),s(28," Nome "),n(),a(29,"div",22),c(30,"input",23),a(31,"div",24),c(32,"ng-icon",25),n()()(),a(33,"div")(34,"label",21),s(35," Matr\xEDcula "),n(),a(36,"div",22),c(37,"input",26),a(38,"div",24),c(39,"ng-icon",27),n()()(),a(40,"div")(41,"label",21),s(42," Telefone "),n(),a(43,"div",22),c(44,"input",28),a(45,"div",24),c(46,"ng-icon",29),n()()(),a(47,"div")(48,"label",21),s(49," Empresa "),n(),a(50,"div",22),c(51,"input",30),a(52,"div",24),c(53,"ng-icon",31),n()()(),a(54,"div")(55,"label",21),s(56," Cargo "),n(),a(57,"div",22),c(58,"input",32),a(59,"div",24),c(60,"ng-icon",33),n()()()()(),a(61,"div")(62,"h3",34),c(63,"ng-icon",35),s(64," Prefer\xEAncias "),n(),a(65,"div",36)(66,"div",37)(67,"label",38),c(68,"input",39)(69,"div",40),a(70,"span",41),s(71,"Modo Escuro"),n()()(),a(72,"div",37)(73,"label",38),c(74,"input",42)(75,"div",40),a(76,"span",41),s(77,"Ativar Notifica\xE7\xF5es"),n()()()()(),u(78,xt,36,5,"div",43),a(79,"div",44)(80,"button",45),s(81," Salvar Altera\xE7\xF5es "),n()()()()()(),c(82,"app-footer"),n(),a(83,"app-avatar-selector",46),v("closeModal",function(){return i.closeAvatarSelector()})("avatarSelected",function(x){return i.onAvatarSelected(x)}),n()),t&2&&(o(8),l("src",i.user().avatar||"assets/Logo_AceCopilot 1.png",T)("alt",i.user().name),o(5),_(i.user().name),o(2),l("ngClass",H(11,bt,i.user().phase==="Ouro C",i.user().phase==="Ouro",i.user().phase==="Prata",i.user().phase==="Bronze")),o(),b(" Fase: ",i.user().phase," "),o(2),l("ngIf",i.user().phone),o(2),l("formGroup",i.profileForm),o(58),l("ngIf",i.isAdmin()),o(2),l("disabled",!i.profileForm.valid||!i.profileForm.dirty),o(3),l("isOpen",i.isAvatarSelectorOpen)("isAdmin",i.authService.isAdmin()))},dependencies:[F,X,N,De,Me,ke,Pe,Ce,Ee,Ie,Ne,Oe,Ve,Le,Te,D,R,Ue,je,Ge],styles:["[_nghost-%COMP%]{display:block}:is()   .bg-background[_ngcontent-%COMP%]{background-color:#09090b}.profile-avatar[_ngcontent-%COMP%]{transition:all .3s ease}.profile-avatar[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.phase-badge[_ngcontent-%COMP%]{transition:all .3s ease}.phase-badge[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 6px #0000001a}.input-field[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #f59e0b4d}.save-btn[_ngcontent-%COMP%]{transition:all .3s ease}.save-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 6px #f59e0b4d}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeOut{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-20px)}}.animate-fade-in-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .3s ease-out forwards}.animate-fade-out[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOut .3s ease-out forwards}"]})}return r})();export{ca as ProfileComponent};
