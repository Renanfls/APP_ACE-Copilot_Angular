import{b as K,c,d as Q,e as X,g as Y,h as Z,i as ee,j as te,k as re,l as ne,n as ie}from"./chunk-ANADZTML.js";import{Ab as $,Bb as H,H as l,Ia as L,J as k,Kb as W,L as M,Mb as J,Nb as U,Oa as z,P as u,S as m,U as v,Va as A,W as o,X as n,Y as g,Za as B,_a as V,aa as I,ba as _,hb as O,ia as a,ka as P,ob as j,pa as q,t as N,vb as G}from"./chunk-2AUNN7MY.js";import{a as R,b as T,d as D}from"./chunk-4CLCTAJ7.js";function oe(t,s){t&1&&(o(0,"span"),a(1,"Nome \xE9 obrigat\xF3rio"),n())}function le(t,s){t&1&&(o(0,"span"),a(1,"Nome deve ter no m\xEDnimo 3 caracteres"),n())}function ae(t,s){if(t&1&&(o(0,"div",37),u(1,oe,2,0,"span",32)(2,le,2,0,"span",32),n()),t&2){let e,i,r=_();l(),m("ngIf",(e=r.registerForm.get("name"))==null||e.errors==null?null:e.errors.required),l(),m("ngIf",(i=r.registerForm.get("name"))==null||i.errors==null?null:i.errors.minlength)}}function me(t,s){t&1&&(o(0,"span"),a(1,"Email \xE9 obrigat\xF3rio"),n())}function se(t,s){t&1&&(o(0,"span"),a(1,"Email inv\xE1lido"),n())}function de(t,s){if(t&1&&(o(0,"div",37),u(1,me,2,0,"span",32)(2,se,2,0,"span",32),n()),t&2){let e,i,r=_();l(),m("ngIf",(e=r.registerForm.get("email"))==null||e.errors==null?null:e.errors.required),l(),m("ngIf",(i=r.registerForm.get("email"))==null||i.errors==null?null:i.errors.email)}}function pe(t,s){t&1&&(o(0,"span"),a(1,"Telefone \xE9 obrigat\xF3rio"),n())}function ue(t,s){t&1&&(o(0,"span"),a(1,"Formato inv\xE1lido. Use (99) 99999-9999"),n())}function ge(t,s){if(t&1&&(o(0,"div",37),u(1,pe,2,0,"span",32)(2,ue,2,0,"span",32),n()),t&2){let e,i,r=_();l(),m("ngIf",(e=r.registerForm.get("phone"))==null||e.errors==null?null:e.errors.required),l(),m("ngIf",(i=r.registerForm.get("phone"))==null||i.errors==null?null:i.errors.pattern)}}function ce(t,s){t&1&&(o(0,"span"),a(1,"C\xF3digo da empresa \xE9 obrigat\xF3rio"),n())}function fe(t,s){t&1&&(o(0,"span"),a(1,"C\xF3digo deve ter no m\xEDnimo 4 d\xEDgitos"),n())}function _e(t,s){if(t&1&&(o(0,"div",37),u(1,ce,2,0,"span",32)(2,fe,2,0,"span",32),n()),t&2){let e,i,r=_();l(),m("ngIf",(e=r.registerForm.get("companyCode"))==null||e.errors==null?null:e.errors.required),l(),m("ngIf",(i=r.registerForm.get("companyCode"))==null||i.errors==null?null:i.errors.minlength)}}function ve(t,s){t&1&&(o(0,"span"),a(1,"Matr\xEDcula \xE9 obrigat\xF3ria"),n())}function he(t,s){t&1&&(o(0,"span"),a(1,"Matr\xEDcula deve ter no m\xEDnimo 6 d\xEDgitos"),n())}function be(t,s){t&1&&(o(0,"span"),a(1,"Matr\xEDcula deve conter apenas n\xFAmeros"),n())}function ye(t,s){if(t&1&&(o(0,"div",37),u(1,ve,2,0,"span",32)(2,he,2,0,"span",32)(3,be,2,0,"span",32),n()),t&2){let e,i,r,p=_();l(),m("ngIf",(e=p.registerForm.get("registration"))==null||e.errors==null?null:e.errors.required),l(),m("ngIf",(i=p.registerForm.get("registration"))==null||i.errors==null?null:i.errors.minlength),l(),m("ngIf",(r=p.registerForm.get("registration"))==null||r.errors==null?null:r.errors.pattern)}}function xe(t,s){t&1&&(o(0,"span"),a(1,"Senha \xE9 obrigat\xF3ria"),n())}function Ee(t,s){t&1&&(o(0,"span"),a(1,"Senha deve ter no m\xEDnimo 6 caracteres"),n())}function Ce(t,s){if(t&1&&(o(0,"div",37),u(1,xe,2,0,"span",32)(2,Ee,2,0,"span",32),n()),t&2){let e,i,r=_();l(),m("ngIf",(e=r.registerForm.get("password"))==null||e.errors==null?null:e.errors.required),l(),m("ngIf",(i=r.registerForm.get("password"))==null||i.errors==null?null:i.errors.minlength)}}function we(t,s){if(t&1&&(o(0,"div",38),a(1),n()),t&2){let e=_();l(),P(" ",e.registerError," ")}}function Se(t,s){t&1&&(o(0,"span"),a(1,"Solicitar Acesso"),n())}function Fe(t,s){t&1&&(o(0,"div",39),N(),o(1,"svg",40),g(2,"circle",41)(3,"path",42),n(),a(4," Enviando... "),n())}var Ve=(()=>{class t{fb;router;authService;registerForm;isLoading=!1;registerError=null;constructor(e,i,r){this.fb=e,this.router=i,this.authService=r,this.registerForm=this.fb.group({name:["",[c.required,c.minLength(3)]],email:["",[c.required,c.email]],phone:["",[c.required]],companyCode:["",[c.required,c.minLength(4)]],registration:["",[c.required,c.minLength(6),c.pattern("^[0-9]*$")]],password:["",[c.required,c.minLength(6)]]}),this.registerForm.get("phone")?.valueChanges.subscribe(p=>{if(p){let d=p.replace(/\D/g,""),f=d;d.length>=2&&(f=`(${d.substring(0,2)}`,d.length>2&&(f+=`) ${d.substring(2,7)}`,d.length>7&&(f+=`-${d.substring(7,11)}`))),f!==p&&this.registerForm.patchValue({phone:f},{emitEvent:!1})}})}onlyNumbers(e){let i=e.which?e.which:e.keyCode;return i>31&&(i<48||i>57)?(e.preventDefault(),!1):!0}formatCompanyCode(e){return e.padStart(4,"0")}onSubmit(){return D(this,null,function*(){if(this.registerForm.valid){this.isLoading=!0,this.registerError=null;try{let e=this.registerForm.value;e.companyCode=this.formatCompanyCode(e.companyCode.toString()),e.phone=e.phone.replace(/\D/g,""),e.registration=e.registration.toString().padStart(6,"0"),console.log("Enviando dados de registro:",T(R({},e),{password:"***"})),yield this.authService.register(e);try{yield this.authService.login({companyCode:e.companyCode,registration:e.registration,password:e.password}),this.router.navigate(["/awaiting-approval"])}catch(i){console.error("Erro ao fazer login autom\xE1tico:",i),this.router.navigate(["/login"])}}catch(e){console.error("Erro no registro:",e),this.registerError=e.message||"Erro ao enviar solicita\xE7\xE3o. Tente novamente."}finally{this.isLoading=!1}}else{let e="",i=this.registerForm.controls;i.name.errors?.required?e="Nome \xE9 obrigat\xF3rio":i.name.errors?.minlength?e="Nome deve ter no m\xEDnimo 3 caracteres":i.email.errors?.required?e="Email \xE9 obrigat\xF3rio":i.email.errors?.email?e="Email inv\xE1lido":i.phone.errors?.required?e="Telefone \xE9 obrigat\xF3rio":i.companyCode.errors?.required?e="C\xF3digo da empresa \xE9 obrigat\xF3rio":i.companyCode.errors?.minlength?e="C\xF3digo da empresa deve ter no m\xEDnimo 4 d\xEDgitos":i.registration.errors?.required?e="Matr\xEDcula \xE9 obrigat\xF3ria":i.registration.errors?.minlength?e="Matr\xEDcula deve ter no m\xEDnimo 6 d\xEDgitos":i.registration.errors?.pattern?e="Matr\xEDcula deve conter apenas n\xFAmeros":i.password.errors?.required?e="Senha \xE9 obrigat\xF3ria":i.password.errors?.minlength&&(e="Senha deve ter no m\xEDnimo 6 caracteres"),this.registerError=e||"Por favor, preencha todos os campos corretamente"}})}static \u0275fac=function(i){return new(i||t)(k(ne),k(A),k(U))};static \u0275cmp=M({type:t,selectors:[["app-register"]],features:[q([],[B({matPerson:$,matLock:G,matBusiness:O,matPhone:H,matEmail:j,matWork:W})])],decls:68,vars:23,consts:[[1,"min-h-screen","relative","flex","items-center","justify-center","p-4"],[1,"absolute","inset-0","z-0"],["src","/assets/Background-login.png","alt","Background",1,"w-full","h-full","object-cover"],[1,"absolute","inset-0","bg-black/40","dark:bg-black/40"],[1,"max-w-md","w-full","p-8","z-10"],[1,"text-center"],["src","/assets/Logo_.png","alt","Ace Copilot Logo",1,"mx-auto","w-auto"],[1,"mt-4","text-2xl","font-bold","text-white"],[1,"mt-8","space-y-6",3,"ngSubmit","formGroup"],["for","name",1,"pl-4","block","text-sm","font-medium","text-white"],[1,"mt-2","relative"],[1,"absolute","inset-y-0","left-0","pl-4","flex","items-center","pointer-events-none"],["name","matPerson",1,"h-5","w-5","text-gray-400"],["id","name","type","text","formControlName","name","placeholder","Digite seu nome completo",1,"block","w-full","pl-11","pr-3","py-2","border","border-gray-300","rounded-full","dark:border-gray-600","shadow-sm","dark:bg-zinc-800","dark:text-white","focus:ring-amber-500","focus:border-amber-500"],["class","mt-1 text-sm text-red-500 pl-4",4,"ngIf"],["for","email",1,"pl-4","block","text-sm","font-medium","text-white"],["name","matEmail",1,"h-5","w-5","text-gray-400"],["id","email","type","email","formControlName","email","placeholder","Digite seu email",1,"block","w-full","pl-11","pr-3","py-2","border","border-gray-300","rounded-full","dark:border-gray-600","shadow-sm","dark:bg-zinc-800","dark:text-white","focus:ring-amber-500","focus:border-amber-500"],["for","phone",1,"pl-4","block","text-sm","font-medium","text-white"],["name","matPhone",1,"h-5","w-5","text-gray-400"],["id","phone","type","tel","formControlName","phone","placeholder","(00) 00000-0000",1,"block","w-full","pl-11","pr-3","py-2","border","border-gray-300","rounded-full","dark:border-gray-600","shadow-sm","dark:bg-zinc-800","dark:text-white","focus:ring-amber-500","focus:border-amber-500"],["for","companyCode",1,"pl-4","block","text-sm","font-medium","text-white"],["name","matBusiness",1,"h-5","w-5","text-gray-400"],["id","companyCode","type","number","formControlName","companyCode","placeholder","Digite o c\xF3digo da empresa","min","0",1,"block","w-full","pl-11","pr-3","py-2","border","border-gray-300","rounded-full","dark:border-gray-600","shadow-sm","dark:bg-zinc-800","dark:text-white","focus:ring-amber-500","focus:border-amber-500",3,"keypress"],["for","registration",1,"pl-4","block","text-sm","font-medium","text-white"],["name","matWork",1,"h-5","w-5","text-gray-400"],["id","registration","type","number","formControlName","registration","placeholder","Digite sua matr\xEDcula","min","0",1,"block","w-full","pl-11","pr-3","py-2","border","border-gray-300","rounded-full","dark:border-gray-600","shadow-sm","dark:bg-zinc-800","dark:text-white","focus:ring-amber-500","focus:border-amber-500",3,"keypress"],["for","password",1,"pl-4","block","text-sm","font-medium","text-white"],["name","matLock",1,"h-5","w-5","text-gray-400"],["id","password","type","password","formControlName","password","placeholder","Digite sua senha",1,"block","w-full","pl-11","pr-3","py-2","border","border-gray-300","rounded-full","dark:border-gray-600","shadow-sm","dark:bg-zinc-800","dark:text-white","focus:ring-amber-500","focus:border-amber-500"],["class","text-red-500 text-sm text-center",4,"ngIf"],["hlmBtn","","type","submit",1,"w-full","flex","justify-center","py-2","px-4","border","border-transparent","rounded-full","shadow-sm","text-sm","font-medium","text-white","bg-amber-400","hover:bg-amber-600","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-amber-500","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[4,"ngIf"],["class","flex items-center",4,"ngIf"],[1,"text-center","mt-4"],[1,"text-sm","text-white"],["routerLink","/login",1,"font-medium","text-amber-400","hover:text-amber-300"],[1,"mt-1","text-sm","text-red-500","pl-4"],[1,"text-red-500","text-sm","text-center"],[1,"flex","items-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(i,r){if(i&1&&(o(0,"div",0)(1,"div",1),g(2,"img",2)(3,"div",3),n(),o(4,"div",4)(5,"div",5),g(6,"img",6),o(7,"h2",7),a(8,"Solicitar Acesso"),n()(),o(9,"form",8),I("ngSubmit",function(){return r.onSubmit()}),o(10,"div")(11,"label",9),a(12," Nome "),n(),o(13,"div",10)(14,"div",11),g(15,"ng-icon",12),n(),g(16,"input",13),n(),u(17,ae,3,2,"div",14),n(),o(18,"div")(19,"label",15),a(20," Email "),n(),o(21,"div",10)(22,"div",11),g(23,"ng-icon",16),n(),g(24,"input",17),n(),u(25,de,3,2,"div",14),n(),o(26,"div")(27,"label",18),a(28," Telefone "),n(),o(29,"div",10)(30,"div",11),g(31,"ng-icon",19),n(),g(32,"input",20),n(),u(33,ge,3,2,"div",14),n(),o(34,"div")(35,"label",21),a(36," C\xF3digo da Empresa "),n(),o(37,"div",10)(38,"div",11),g(39,"ng-icon",22),n(),o(40,"input",23),I("keypress",function(d){return r.onlyNumbers(d)}),n()(),u(41,_e,3,2,"div",14),n(),o(42,"div")(43,"label",24),a(44," Matr\xEDcula "),n(),o(45,"div",10)(46,"div",11),g(47,"ng-icon",25),n(),o(48,"input",26),I("keypress",function(d){return r.onlyNumbers(d)}),n()(),u(49,ye,4,3,"div",14),n(),o(50,"div")(51,"label",27),a(52," Senha "),n(),o(53,"div",10)(54,"div",11),g(55,"ng-icon",28),n(),g(56,"input",29),n(),u(57,Ce,3,2,"div",14),n(),u(58,we,2,1,"div",30),o(59,"div")(60,"button",31),u(61,Se,2,0,"span",32)(62,Fe,5,0,"div",33),n()()(),o(63,"div",34)(64,"p",35),a(65," J\xE1 tem uma conta? "),o(66,"a",36),a(67," Fa\xE7a login "),n()()()()()),i&2){let p,d,f,h,b,y,x,E,C,w,S,F;l(9),m("formGroup",r.registerForm),l(7),v("border-red-500",((p=r.registerForm.get("name"))==null?null:p.invalid)&&((p=r.registerForm.get("name"))==null?null:p.touched)),l(),m("ngIf",((d=r.registerForm.get("name"))==null?null:d.invalid)&&((d=r.registerForm.get("name"))==null?null:d.touched)),l(7),v("border-red-500",((f=r.registerForm.get("email"))==null?null:f.invalid)&&((f=r.registerForm.get("email"))==null?null:f.touched)),l(),m("ngIf",((h=r.registerForm.get("email"))==null?null:h.invalid)&&((h=r.registerForm.get("email"))==null?null:h.touched)),l(7),v("border-red-500",((b=r.registerForm.get("phone"))==null?null:b.invalid)&&((b=r.registerForm.get("phone"))==null?null:b.touched)),l(),m("ngIf",((y=r.registerForm.get("phone"))==null?null:y.invalid)&&((y=r.registerForm.get("phone"))==null?null:y.touched)),l(7),v("border-red-500",((x=r.registerForm.get("companyCode"))==null?null:x.invalid)&&((x=r.registerForm.get("companyCode"))==null?null:x.touched)),l(),m("ngIf",((E=r.registerForm.get("companyCode"))==null?null:E.invalid)&&((E=r.registerForm.get("companyCode"))==null?null:E.touched)),l(7),v("border-red-500",((C=r.registerForm.get("registration"))==null?null:C.invalid)&&((C=r.registerForm.get("registration"))==null?null:C.touched)),l(),m("ngIf",((w=r.registerForm.get("registration"))==null?null:w.invalid)&&((w=r.registerForm.get("registration"))==null?null:w.touched)),l(7),v("border-red-500",((S=r.registerForm.get("password"))==null?null:S.invalid)&&((S=r.registerForm.get("password"))==null?null:S.touched)),l(),m("ngIf",((F=r.registerForm.get("password"))==null?null:F.invalid)&&((F=r.registerForm.get("password"))==null?null:F.touched)),l(),m("ngIf",r.registerError),l(2),m("disabled",!r.registerForm.valid||r.isLoading),l(),m("ngIf",!r.isLoading),l(),m("ngIf",r.isLoading)}},dependencies:[z,L,ie,Y,K,Z,Q,X,re,ee,te,V,J],styles:["[_nghost-%COMP%]{display:block}.animate-spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}"]})}return t})();export{Ve as RegisterComponent};
