import{a as O,b as j,c as s,d as A,e as G,g as R,h as T,i as q,j as H,k as $,l as U,n as J}from"./chunk-ANADZTML.js";import{Ab as B,H as l,Ia as k,J as g,L as y,Mb as V,Nb as z,Oa as _,P as b,S as d,U as f,Va as L,W as e,Wa as F,X as t,Y as o,Ya as M,Za as I,_a as P,aa as w,ba as C,hb as N,ia as a,ka as S,pa as E,t as x,vb as D}from"./chunk-2AUNN7MY.js";import{d as v}from"./chunk-4CLCTAJ7.js";function K(n,h){if(n&1&&(e(0,"div",33),a(1),t()),n&2){let i=C();l(),S(" ",i.loginError," ")}}function Q(n,h){n&1&&(e(0,"span"),a(1,"Entrar"),t())}function W(n,h){n&1&&(e(0,"div",21),x(),e(1,"svg",34),o(2,"circle",35)(3,"path",36),t(),a(4," Entrando... "),t())}var pe=(()=>{class n{fb;router;authService;loginForm;isLoading=!1;loginError=null;constructor(i,m,r){this.fb=i,this.router=m,this.authService=r,this.loginForm=this.fb.group({companyCode:["",[s.required,s.minLength(4),s.pattern("^[0-9]*$")]],registration:["",[s.required,s.minLength(6),s.pattern("^[0-9]*$")]],password:["",[s.required,s.minLength(6)]],rememberMe:[!1]})}ngOnInit(){location.hostname==="localhost"&&this.loginForm.patchValue({companyCode:"0123",registration:"000000",password:"admin123"})}onSubmit(){return v(this,null,function*(){if(this.loginForm.valid){this.isLoading=!0,this.loginError=null;try{let i=this.loginForm.value;i.companyCode=i.companyCode.toString().padStart(4,"0"),i.registration=i.registration.toString().padStart(6,"0"),yield this.authService.login(i);let m=this.authService.getCurrentUser();m&&m.status==="pending"?this.router.navigate(["/awaiting-approval"]):this.router.navigate(["/home"])}catch(i){console.error("Erro no login:",i),this.loginError=i.message}finally{this.isLoading=!1}}else this.showErrorMessage("Por favor, preencha todos os campos corretamente")})}showErrorMessage(i){this.loginError=i,this.isLoading=!1}static \u0275fac=function(m){return new(m||n)(g(U),g(L),g(z))};static \u0275cmp=y({type:n,selectors:[["app-login"]],features:[E([],[I({matPerson:B,matLock:D,matBusiness:N})])],decls:47,vars:11,consts:[[1,"min-h-screen","relative","flex","items-center","justify-center","p-4"],[1,"absolute","inset-0","z-0"],["src","/assets/Background-login.png","alt","Background",1,"w-full","h-full","object-cover"],[1,"absolute","inset-0","bg-black/40","dark:bg-black/40"],[1,"max-w-md","w-full","p-8","z-10"],[1,"text-center"],["src","/assets/Logo_.png","alt","Ace Copilot Logo",1,"mx-auto","w-auto"],[1,"mt-4","space-y-6",3,"ngSubmit","formGroup"],["for","companyCode",1,"pl-4","block","text-sm","font-medium","text-white"],[1,"mt-2","relative"],[1,"absolute","inset-y-0","left-0","pl-4","flex","items-center","pointer-events-none"],["name","matBusiness",1,"h-5","w-5","text-gray-400"],["id","companyCode","type","number","formControlName","companyCode","placeholder","Digite o c\xF3digo da empresa","min","0","oninput","this.value = this.value.replace(/[^0-9]/g, '')",1,"block","w-full","pl-11","pr-3","py-2","border","border-gray-300","rounded-full","dark:border-gray-600","shadow-sm","dark:bg-zinc-800","dark:text-white","focus:ring-amber-500","focus:border-amber-500"],["for","registration",1,"pl-4","block","text-sm","font-medium","text-white"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],["name","matPerson",1,"h-5","w-5","text-gray-400"],["id","registration","type","number","formControlName","registration","placeholder","Digite sua matr\xEDcula","min","0","oninput","this.value = this.value.replace(/[^0-9]/g, '')",1,"block","w-full","pl-11","pr-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-full","shadow-sm","dark:bg-zinc-800","dark:text-white","focus:ring-amber-500","focus:border-amber-500"],["for","password",1,"pl-4","block","text-sm","font-medium","text-white"],["name","matLock",1,"h-5","w-5","text-gray-400"],["id","password","type","password","formControlName","password","placeholder","Digite sua senha",1,"block","w-full","pl-11","pr-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-full","shadow-sm","dark:bg-zinc-800","dark:text-white","focus:ring-amber-500","focus:border-amber-500"],[1,"flex","items-center","justify-between"],[1,"flex","items-center"],["id","remember_me","type","checkbox","formControlName","rememberMe",1,"h-4","w-4","text-amber-500","focus:ring-amber-500","border-gray-300","rounded","cursor-pointer"],["for","remember_me",1,"ml-2","block","text-sm","text-white","cursor-pointer"],[1,"text-sm"],["href","#",1,"font-medium","text-amber-400","hover:text-amber-300"],["class","text-red-500 text-sm text-center",4,"ngIf"],["hlmBtn","","type","submit",1,"w-full","flex","justify-center","py-2","px-4","border","border-transparent","rounded-full","shadow-sm","text-sm","font-medium","text-white","bg-amber-400","hover:bg-amber-600","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-amber-500","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[4,"ngIf"],["class","flex items-center",4,"ngIf"],[1,"text-center","mt-4"],[1,"text-sm","text-white"],["routerLink","/register",1,"font-medium","text-amber-400","hover:text-amber-300"],[1,"text-red-500","text-sm","text-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(m,r){if(m&1&&(e(0,"div",0)(1,"div",1),o(2,"img",2)(3,"div",3),t(),e(4,"div",4)(5,"div",5),o(6,"img",6),t(),e(7,"form",7),w("ngSubmit",function(){return r.onSubmit()}),e(8,"div")(9,"label",8),a(10," C\xF3digo da Empresa "),t(),e(11,"div",9)(12,"div",10),o(13,"ng-icon",11),t(),o(14,"input",12),t()(),e(15,"div")(16,"label",13),a(17," Matr\xEDcula "),t(),e(18,"div",9)(19,"div",14),o(20,"ng-icon",15),t(),o(21,"input",16),t()(),e(22,"div")(23,"label",17),a(24," Senha "),t(),e(25,"div",9)(26,"div",10),o(27,"ng-icon",18),t(),o(28,"input",19),t()(),e(29,"div",20)(30,"div",21),o(31,"input",22),e(32,"label",23),a(33," Lembrar-me "),t()(),e(34,"div",24)(35,"a",25),a(36," Esqueceu sua senha? "),t()()(),b(37,K,2,1,"div",26),e(38,"div")(39,"button",27),b(40,Q,2,0,"span",28)(41,W,5,0,"div",29),t()()(),e(42,"div",30)(43,"p",31),a(44," N\xE3o tem uma conta? "),e(45,"a",32),a(46," Cadastrar "),t()()()()()),m&2){let u,p,c;l(7),d("formGroup",r.loginForm),l(7),f("border-red-500",((u=r.loginForm.get("companyCode"))==null?null:u.invalid)&&((u=r.loginForm.get("companyCode"))==null?null:u.touched)),l(7),f("border-red-500",((p=r.loginForm.get("registration"))==null?null:p.invalid)&&((p=r.loginForm.get("registration"))==null?null:p.touched)),l(7),f("border-red-500",((c=r.loginForm.get("password"))==null?null:c.invalid)&&((c=r.loginForm.get("password"))==null?null:c.touched)),l(9),d("ngIf",r.loginError),l(2),d("disabled",!r.loginForm.valid||r.isLoading),l(),d("ngIf",!r.isLoading),l(),d("ngIf",r.isLoading)}},dependencies:[_,k,J,R,j,T,O,A,G,$,q,H,P,V,M,F],styles:["[_nghost-%COMP%]{display:block}.animate-spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}"]})}return n})();export{pe as LoginComponent};
