import{$ as k,Ab as ae,B as g,Ea as W,F as I,G as P,Ga as G,H as a,Ha as J,Ia as K,J as F,L as y,Ma as $,Mb as se,Nb as le,Oa as q,P as _,S as d,Ta as Q,U as C,Va as X,W as n,Wa as w,X as r,Y as p,Ya as M,Za as E,_a as Y,a as j,aa as c,ba as u,c as L,i as B,ia as l,ja as A,ka as O,l as v,lb as Z,mb as ee,p as S,pa as x,r as b,rb as te,s as h,sa as f,sb as ie,ta as V,ua as U,va as z,wa as R,xb as oe,yb as ne,zb as re}from"./chunk-2AUNN7MY.js";import{a as D,b as H}from"./chunk-4CLCTAJ7.js";var Ie=(()=>{class i{scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}static \u0275fac=function(o){return new(o||i)};static \u0275cmp=y({type:i,selectors:[["app-footer"]],features:[x([],[E({matHome:te})])],decls:18,vars:0,consts:[[1,"container","py-3","flex","items-center","justify-evenly","z-40","relative","text-xs","md:text-sm","font-bold","text-white"],[1,"py-6","flex","items-center","justify-evenly","w-full","fixed","bottom-0",2,"background-color","#141416"],["hlmBtn","","variant","ghost","routerLink","/home",1,"flex","flex-col","justify-center","items-center","h-14","hover:opacity-100","focus:opacity-100","opacity-25",3,"click"],["src","assets/home.svg","alt","Icone Home",1,"h-6","md:h-8"],[1,"mt-2","md:mt-3"],["hlmBtn","","variant","ghost","routerLink","/as-no-ace",1,"flex","flex-col","justify-center","items-center","h-14","hover:opacity-100","focus:opacity-100","opacity-25",3,"click"],["src","assets/Vector (1).svg","alt","Icone Home",1,"h-6","md:h-8"],["hlmBtn","","variant","ghost",1,"flex","flex-col","justify-center","items-center","h-14","focus:opacity-100","hover:opacity-100","opacity-25",3,"click"],["src","assets/animated_images (1).svg","alt","Icone Home",1,"h-6","md:h-8"],["src","assets/Medalha.svg","alt","Icone Home",1,"h-6","md:h-8"]],template:function(o,e){o&1&&(n(0,"footer",0)(1,"div",1)(2,"button",2),c("click",function(){return e.scrollToTop()}),p(3,"img",3),n(4,"small",4),l(5,"Home"),r()(),n(6,"button",5),c("click",function(){return e.scrollToTop()}),p(7,"img",6),n(8,"small",4),l(9,"\xC1s no ACE"),r()(),n(10,"button",7),c("click",function(){return e.scrollToTop()}),p(11,"img",8),n(12,"small",4),l(13,"Treinamento"),r()(),n(14,"button",7),c("click",function(){return e.scrollToTop()}),p(15,"img",9),n(16,"small",4),l(17,"Ranking"),r()()()())},dependencies:[M,w],encapsulation:2})}return i})();var ce=(()=>{class i{notificationsEnabled=g(!0);constructor(){this.loadNotificationPreference()}loadNotificationPreference(){localStorage.getItem("notificationsEnabled")==="false"&&this.notificationsEnabled.set(!1)}isNotificationsEnabled(){return this.notificationsEnabled()}enableNotifications(){this.notificationsEnabled.set(!0),localStorage.setItem("notificationsEnabled","true")}disableNotifications(){this.notificationsEnabled.set(!1),localStorage.setItem("notificationsEnabled","false")}toggleNotifications(){this.notificationsEnabled()?this.disableNotifications():this.enableNotifications()}static \u0275fac=function(o){return new(o||i)};static \u0275prov=v({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var de=(()=>{class i{isDarkMode=g(!1);constructor(){this.loadThemePreference()}loadThemePreference(){let t=localStorage.getItem("darkMode");t==="true"?this.enableDarkMode():t==="false"?this.disableDarkMode():window.matchMedia("(prefers-color-scheme: dark)").matches&&this.enableDarkMode()}toggleDarkMode(){this.isDarkMode()?this.disableDarkMode():this.enableDarkMode()}enableDarkMode(){this.isDarkMode.set(!0),document.documentElement.classList.add("dark"),localStorage.setItem("darkMode","true")}disableDarkMode(){this.isDarkMode.set(!1),document.documentElement.classList.remove("dark"),localStorage.setItem("darkMode","false")}static \u0275fac=function(o){return new(o||i)};static \u0275prov=v({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var be=(i,s)=>({"bg-[#141416]":i,"bg-white":s}),he=(i,s,t)=>({"bg-sidebar":i,"bg-[#242427]":s,"opacity-50":t}),ge=(i,s,t,o)=>({"translate-x-0":i,"-translate-x-full":s,"bg-[#141416] text-white":t,"bg-white text-gray-900":o}),ve=(i,s)=>({"border-gray-700":i,"border-gray-200":s}),_e=(i,s)=>({"border-gray-900":i,"border-white":s}),N=(i,s)=>({"hover:bg-gray-800":i,"hover:bg-gray-100":s}),ke=(i,s)=>({"bg-gray-800":i,"bg-gray-100":s}),Se=(i,s)=>({"text-amber-400":i,"text-gray-900":s}),ye=(i,s,t)=>({"bg-amber-400":i,"bg-red-500":s,"bg-blue-500":t});function Ce(i,s){if(i&1&&(n(0,"span",31),l(1),r()),i&2){let t=u();a(),A(t.unreadNotifications)}}function xe(i,s){i&1&&(n(0,"div",41),l(1," Nenhuma notifica\xE7\xE3o "),r())}function we(i,s){if(i&1){let t=k();n(0,"div",42),c("click",function(){let e=b(t).$implicit,m=u(2);return h(m.handleNotificationClick(e))}),n(1,"div",43),p(2,"div",44),n(3,"div",45)(4,"h4",17),l(5),r(),n(6,"p",46),l(7),r(),n(8,"span",47),l(9),z(10,"date"),r()()()()}if(i&2){let t=s.$implicit;C("opacity-60",t.read),a(2),d("ngClass",V(11,ye,t.type==="warning",t.type==="error",t.type==="info")),a(2),C("text-amber-400",!t.read),a(),O(" ",t.title," "),a(2),A(t.message),a(2),O(" ",R(10,8,t.timestamp,"dd/MM/yyyy HH:mm")," ")}}function Me(i,s){if(i&1){let t=k();n(0,"div",32),c("clickOutside",function(){b(t);let e=u();return h(e.closeNotifications())}),n(1,"div",33)(2,"h3",34),l(3,"Notifica\xE7\xF5es"),r(),n(4,"button",35),c("click",function(){b(t);let e=u();return h(e.markAllAsRead())}),l(5," Marcar todas como lidas "),r()(),n(6,"div",36),_(7,xe,2,0,"div",37)(8,we,11,15,"div",38),r(),n(9,"div",39)(10,"button",40),c("click",function(){b(t);let e=u();return h(e.closeNotifications())}),l(11," Ver todas as notifica\xE7\xF5es "),r()()()}if(i&2){let t=u();a(7),d("ngIf",t.notifications.length===0),a(),d("ngForOf",t.notifications)}}function Ee(i,s){if(i&1){let t=k();n(0,"div",48),c("click",function(){b(t);let e=u();return h(e.closeSidebar())})("keydown.escape",function(){b(t);let e=u();return h(e.closeSidebar())}),r()}}function Te(i,s){if(i&1){let t=k();n(0,"div",49),p(1,"div",50),n(2,"div",51)(3,"div",52),l(4," \xC1rea Administrativa "),r(),n(5,"a",53),c("click",function(){b(t);let e=u();return e.scrollToTop(),h(e.closeSidebar())}),l(6," Gerenciar Usu\xE1rios "),r()(),p(7,"div",50),r()}}var Ze=(()=>{class i{themeService;notificationService;document=S(W);router=S(X);routerSubscription;authSubscription;adminSubscription;authService=S(le);currentUser=null;isUserAdmin=g(!1);isSidebarOpen=g(!1);isDarkMode;showNotifications=!1;notifications=[{id:1,title:"Alerta de Velocidade",message:"Ve\xEDculo 51540 ultrapassou o limite de velocidade",type:"warning",timestamp:new Date,read:!1},{id:2,title:"Manuten\xE7\xE3o Preventiva",message:"Agendamento de manuten\xE7\xE3o para o ve\xEDculo 51542",type:"info",timestamp:new Date(Date.now()-36e5),read:!1}];constructor(t,o){this.themeService=t,this.notificationService=o,this.isDarkMode=this.themeService.isDarkMode}get areNotificationsEnabled(){return this.notificationService.isNotificationsEnabled()}get unreadNotifications(){return this.areNotificationsEnabled?this.notifications.filter(t=>!t.read).length:0}ngOnInit(){console.log("=== Inicializando HeaderComponent ==="),this.routerSubscription=this.router.events.pipe(B(o=>o instanceof Q)).subscribe(()=>{this.closeSidebar(),this.closeNotifications(),this.scrollToTop()}),this.authSubscription=this.authService.onAuthStateChanged().subscribe(o=>{console.log("=== Mudan\xE7a no estado de autentica\xE7\xE3o ===",{isAuthenticated:o,currentUser:this.authService.getCurrentUser(),isAdmin:this.authService.isAdmin()})}),this.adminSubscription=this.authService.onAdminStateChanged().subscribe(o=>{console.log("=== Mudan\xE7a no estado de admin ===",{isAdmin:o,currentUser:this.authService.getCurrentUser()}),this.isUserAdmin.set(o)});let t=this.authService.isAdmin();console.log("=== Estado inicial de admin ===",{isAdmin:t,currentUser:this.authService.getCurrentUser()}),this.isUserAdmin.set(t)}ngOnDestroy(){this.routerSubscription?.unsubscribe(),this.authSubscription?.unsubscribe(),this.adminSubscription?.unsubscribe()}toggleNotifications(){this.areNotificationsEnabled&&(this.showNotifications=!this.showNotifications,this.showNotifications&&this.closeSidebar())}closeNotifications(){this.showNotifications=!1}markAllAsRead(){this.notifications.forEach(t=>t.read=!0)}handleNotificationClick(t){t.read=!0}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)}toggleSidebar(){this.isSidebarOpen.update(t=>!t),this.isSidebarOpen()?(this.closeNotifications(),this.document.body.classList.add("overflow-hidden")):this.document.body.classList.remove("overflow-hidden")}closeSidebar(){this.isSidebarOpen()&&(this.isSidebarOpen.set(!1),this.document.body.classList.remove("overflow-hidden"))}toggleDarkMode(){this.themeService.toggleDarkMode()}handleEscapeKey(){this.closeSidebar(),this.closeNotifications()}handleResize(){window.innerWidth>1024&&this.closeSidebar()}handleClickOutside(t){let o=t.target;!o.closest(".notifications-dropdown")&&!o.closest("button")&&this.closeNotifications()}logout(){this.closeSidebar(),this.routerSubscription&&this.routerSubscription.unsubscribe(),this.authService.logout()}shouldShowAdminSection(){let t=this.isUserAdmin();return console.log("=== Verificando visibilidade da se\xE7\xE3o admin ===",{signalValue:t,directCheck:this.authService.isAdmin(),currentUser:this.authService.getCurrentUser()}),t}static \u0275fac=function(o){return new(o||i)(F(de),F(ce))};static \u0275cmp=y({type:i,selectors:[["app-header"]],hostBindings:function(o,e){o&1&&c("keydown.escape",function(){return e.handleEscapeKey()},!1,I)("resize",function(){return e.handleResize()},!1,I)("click",function(me){return e.handleClickOutside(me)},!1,P)},features:[x([],[E({matNotificationsNone:re,matNotificationsActive:ne,matDarkMode:ee,matLightMode:ie,matClose:Z,matPerson:ae,matMoreVert:oe})])],decls:41,vars:55,consts:[[1,"w-full","py-8","pe-8","md:px-20","flex","items-center","justify-between","fixed","z-50",3,"ngClass"],["hlmBtn","","variant","ghost",1,"p-4","py-3",3,"click"],["name","matMoreVert",1,"text-4xl","h-6","md:rotate-90"],["hlmBtn","","variant","ghost","routerLink","/home",1,"p-0",3,"click"],["src","assets/Logo_AceCopilot 1.png","alt","Logo da ACE Copilot",1,"h-10"],[1,"flex","items-center","text-white","gap-4"],[1,"relative"],["hlmBtn","","variant","ghost",1,"rounded-full","md:h-14","relative",3,"click","ngClass"],["class","font-bold text-xs bg-red-500 px-2 md:px-3 py-1 rounded-full absolute -top-2 -right-2",4,"ngIf"],[1,"text-2xl",3,"name"],["class","absolute right-0 mt-2 w-80 bg-[#1a1a1a] rounded-lg shadow-lg overflow-hidden z-50",3,"clickOutside",4,"ngIf"],["class","fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity","tabindex","0","role","button","aria-label","Close sidebar",3,"click","keydown.escape",4,"ngIf"],[1,"fixed","inset-y-0","left-0","z-50","w-64","md:w-80","transform","transition-transform","duration-300","ease-in-out",3,"ngClass"],[1,"flex","justify-between","items-center","p-4","border-b",3,"ngClass"],[1,"flex","items-center","space-x-4"],["name","matPerson",2,"font-size","24px"],[1,"absolute","bottom-0","right-0","w-3","h-3","bg-green-500","rounded-full","border-2",3,"ngClass"],[1,"font-medium"],[1,"text-sm","opacity-70"],["hlmBtn","","variant","ghost",1,"p-2",3,"click"],["name","matClose",1,"text-xl"],[1,"p-4","flex","flex-col","justify-between"],[1,"space-y-2"],["routerLink","/home",1,"block","p-3","rounded-lg","transition-colors",3,"click","ngClass"],["routerLink","/as-no-ace",1,"block","p-3","rounded-lg","transition-colors",3,"click","ngClass"],["routerLink","/profile",1,"block","p-3","rounded-lg","transition-colors",3,"click","ngClass"],["class","mt-6 mb-4",4,"ngIf"],[1,"block","p-3","rounded-lg","transition-colors","cursor-pointer","mt-4",3,"click","ngClass"],[1,"flex","items-center","justify-between","p-2","mb-4","rounded-lg",3,"ngClass"],["hlmBtn","","variant","ghost",1,"p-2",3,"click","ngClass"],[1,"text-xl",3,"name"],[1,"font-bold","text-xs","bg-red-500","px-2","md:px-3","py-1","rounded-full","absolute","-top-2","-right-2"],[1,"absolute","right-0","mt-2","w-80","bg-[#1a1a1a]","rounded-lg","shadow-lg","overflow-hidden","z-50",3,"clickOutside"],[1,"p-4","border-b","border-gray-700","flex","justify-between","items-center"],[1,"text-lg","font-semibold"],["hlmBtn","","variant","ghost",1,"text-xs","text-amber-400","hover:text-amber-500",3,"click"],[1,"max-h-96","overflow-y-auto"],["class","p-4 text-center text-gray-400",4,"ngIf"],["class","p-4 border-b border-gray-700 hover:bg-gray-800 transition-colors cursor-pointer",3,"opacity-60","click",4,"ngFor","ngForOf"],[1,"p-3","bg-[#242427]","text-center"],["hlmBtn","","variant","ghost","routerLink","/notifications",1,"text-sm","text-amber-400","hover:text-amber-500",3,"click"],[1,"p-4","text-center","text-gray-400"],[1,"p-4","border-b","border-gray-700","hover:bg-gray-800","transition-colors","cursor-pointer",3,"click"],[1,"flex","items-start","gap-3"],[1,"w-2","h-2","rounded-full","mt-2",3,"ngClass"],[1,"flex-1"],[1,"text-sm","text-gray-400","mt-1"],[1,"text-xs","text-gray-500","mt-2","block"],["tabindex","0","role","button","aria-label","Close sidebar",1,"fixed","inset-0","bg-black","bg-opacity-50","z-40","transition-opacity",3,"click","keydown.escape"],[1,"mt-6","mb-4"],[1,"h-px","bg-gradient-to-r","from-transparent","via-amber-500","to-transparent","opacity-50"],[1,"my-4"],[1,"px-3","py-2","text-sm","font-semibold","text-amber-500"],["routerLink","/user-management",1,"block","p-3","rounded-lg","transition-colors","bg-amber-500","hover:bg-amber-600","text-black","font-medium",3,"click"]],template:function(o,e){o&1&&(n(0,"header",0)(1,"button",1),c("click",function(){return e.toggleSidebar()}),p(2,"ng-icon",2),r(),n(3,"button",3),c("click",function(){return e.scrollToTop()}),p(4,"img",4),r(),n(5,"div",5)(6,"div",6)(7,"button",7),c("click",function(){return e.toggleNotifications()}),_(8,Ce,2,1,"span",8),p(9,"ng-icon",9),r(),_(10,Me,12,2,"div",10),r()()(),_(11,Ee,1,0,"div",11),n(12,"div",12)(13,"div",13)(14,"div",14)(15,"div",6),p(16,"ng-icon",15)(17,"span",16),r(),n(18,"div")(19,"p",17),l(20,"Anabelle"),r(),n(21,"p",18),l(22,"Fase: Ouro"),r()()(),n(23,"button",19),c("click",function(){return e.closeSidebar()}),p(24,"ng-icon",20),r()(),n(25,"div",21)(26,"nav",22)(27,"a",23),c("click",function(){return e.scrollToTop(),e.closeSidebar()}),l(28," Home "),r(),n(29,"a",24),c("click",function(){return e.scrollToTop(),e.closeSidebar()}),l(30," Game "),r(),n(31,"a",25),c("click",function(){return e.scrollToTop(),e.closeSidebar()}),l(32," Perfil "),r(),_(33,Te,8,0,"div",26),n(34,"a",27),c("click",function(){return e.logout()}),l(35," Sair "),r()(),n(36,"div",28)(37,"span"),l(38,"Tema"),r(),n(39,"button",29),c("click",function(){return e.toggleDarkMode()}),p(40,"ng-icon",30),r()()()()),o&2&&(d("ngClass",f(19,be,e.isDarkMode(),!e.isDarkMode())),a(7),d("ngClass",V(22,he,e.isDarkMode(),!e.isDarkMode(),!e.areNotificationsEnabled)),a(),d("ngIf",e.unreadNotifications>0&&e.areNotificationsEnabled),a(),C("text-amber-400",e.unreadNotifications>0&&e.areNotificationsEnabled),d("name",e.areNotificationsEnabled&&e.unreadNotifications>0?"matNotificationsActive":"matNotificationsNone"),a(),d("ngIf",e.showNotifications&&e.areNotificationsEnabled),a(),d("ngIf",e.isSidebarOpen()),a(),d("ngClass",U(26,ge,e.isSidebarOpen(),!e.isSidebarOpen(),e.isDarkMode(),!e.isDarkMode())),a(),d("ngClass",f(31,ve,e.isDarkMode(),!e.isDarkMode())),a(4),d("ngClass",f(34,_e,e.isDarkMode(),!e.isDarkMode())),a(10),d("ngClass",f(37,N,e.isDarkMode(),!e.isDarkMode())),a(2),d("ngClass",f(40,N,e.isDarkMode(),!e.isDarkMode())),a(2),d("ngClass",f(43,N,e.isDarkMode(),!e.isDarkMode())),a(2),d("ngIf",e.shouldShowAdminSection()),a(),d("ngClass",f(46,N,e.isDarkMode(),!e.isDarkMode())),a(2),d("ngClass",f(49,ke,e.isDarkMode(),!e.isDarkMode())),a(3),d("ngClass",f(52,Se,e.isDarkMode(),!e.isDarkMode())),a(),d("name",e.isDarkMode()?"matLightMode":"matDarkMode"))},dependencies:[se,Y,q,G,J,K,$,M,w],styles:["[_nghost-%COMP%]{display:block}.notifications-dropdown[_ngcontent-%COMP%]{max-height:calc(100vh - 200px)}"]})}return i})();var it=(()=>{class i{couponStats=new L({total:0,available:0,used:0});constructor(){this.loadCouponStats()}loadCouponStats(){let t=localStorage.getItem("couponStats");if(t)this.couponStats.next(JSON.parse(t));else{let o={total:15,available:10,used:5};this.couponStats.next(o),this.saveCouponStats()}}saveCouponStats(){localStorage.setItem("couponStats",JSON.stringify(this.couponStats.value))}getCouponStats(){return this.couponStats.asObservable()}getAvailableCoupons(){return new j(t=>{this.couponStats.subscribe(o=>{t.next(o.available)})})}addCoupons(t){let o=this.couponStats.value,e=H(D({},o),{total:o.total+t,available:o.available+t});this.couponStats.next(e),this.saveCouponStats()}useCoupons(t){let o=this.couponStats.value;if(o.available<t)return!1;let e=H(D({},o),{available:o.available-t,used:o.used+t});return this.couponStats.next(e),this.saveCouponStats(),!0}rewardDailyTasks(t=1){this.addCoupons(t)}static \u0275fac=function(o){return new(o||i)};static \u0275prov=v({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();export{Ie as a,ce as b,de as c,Ze as d,it as e};
