import{a as Ht,e as Bt,i as Lt,k as $t}from"./chunk-C533JVKV.js";import{b as G,d as Y,f as Z,l as Rt,m as H,n as Nt}from"./chunk-ANADZTML.js";import{a as ce,c as Ut,d as de,e as qt}from"./chunk-5TJTTSEC.js";import{$ as b,Ab as It,B as tt,Bb as Mt,C as it,Db as Ft,E as T,G as F,Ga as P,H as a,Ha as E,I as R,Ia as S,J as w,Jb as At,K as ot,Kb as Pt,L as y,La as U,Lb as jt,M as nt,Ma as Fe,Mb as le,Nb as se,Oa as V,P as p,Pa as ut,Qa as pt,R as N,Ra as J,S as s,Sa as ht,T as fe,Ta as Ae,U as B,Ua as gt,V as Ue,Va as ne,W as n,Wa as Pe,X as r,Xa as xt,Y as u,Ya as ie,Z as rt,Za as W,_ as at,_a as re,aa as f,ab as ft,ba as d,ca as De,cb as vt,d as Ye,da as Ie,db as _t,ea as Me,eb as bt,fa as lt,ga as st,gb as Ct,h as Re,ha as He,hb as wt,i as Te,ia as l,ib as yt,ja as x,ka as _,kb as Vt,l as ke,la as ct,lb as St,m as Ze,ma as L,na as $,nb as Ot,o as xe,oa as q,ob as Et,p as Ne,pa as z,q as Qe,qa as ve,r as h,ra as C,rb as Tt,s as g,sa as D,ua as K,va as ye,wa as Ve,wb as kt,x as Xe,xa as dt,y as et,ya as mt,z as O,za as j,zb as Dt}from"./chunk-2AUNN7MY.js";import{a as I,b as M,d as te}from"./chunk-4CLCTAJ7.js";var zt=(()=>{class i{router;authService;isChecking=!1;message="Aguardando Libera\xE7\xE3o";subMessage="O acesso ao aplicativo ser\xE1 liberado por nossa equipe ap\xF3s seu treinamento.";constructor(e,t){this.router=e,this.authService=t}ngOnInit(){return te(this,null,function*(){yield this.checkInitialStatus()})}checkInitialStatus(){return te(this,null,function*(){if(this.authService.isAdmin()){this.router.navigate(["/home"]);return}let e=yield this.authService.checkRegistrationStatus();this.updateMessageBasedOnStatus(e),e==="approved"?this.router.navigate(["/home"]):(e==="rejected"||e==="blocked")&&this.authService.logout()})}updateMessageBasedOnStatus(e){switch(e){case"pending":this.message="Aguardando Libera\xE7\xE3o",this.subMessage="O acesso ao aplicativo ser\xE1 liberado por nossa equipe ap\xF3s seu treinamento.";break;case"rejected":this.message="Acesso Negado",this.subMessage="Sua solicita\xE7\xE3o de acesso foi negada.";break;case"blocked":this.message="Acesso Bloqueado",this.subMessage="Sua conta est\xE1 bloqueada. Entre em contato com o administrador.";break;case"approved":this.message="Acesso Liberado",this.subMessage="Redirecionando para a p\xE1gina inicial...";break}}checkAccess(){return te(this,null,function*(){if(!this.isChecking){this.isChecking=!0,this.message="Verificando Status",this.subMessage="Aguarde enquanto verificamos seu status...";try{let e=yield this.authService.checkRegistrationStatus();console.log("Status atual:",e),this.updateMessageBasedOnStatus(e),e==="approved"?(yield this.authService.updateUserAccess(),this.router.navigate(["/home"])):(e==="rejected"||e==="blocked")&&(yield new Promise(t=>setTimeout(t,2e3)),this.authService.logout())}catch(e){console.error("Erro ao verificar status:",e),this.message="Erro ao Verificar Status",this.subMessage="Ocorreu um erro ao verificar seu status. Tente novamente."}finally{setTimeout(()=>{this.isChecking=!1},500)}}})}logout(){this.authService.logout()}static \u0275fac=function(t){return new(t||i)(w(ne),w(se))};static \u0275cmp=y({type:i,selectors:[["app-awaiting-approval"]],features:[z([],[W({matLogout:kt,matRefresh:Ft})])],decls:19,vars:6,consts:[[1,"min-h-screen","relative","flex","items-center","justify-center","p-4","bg-[#1D1D1D]"],[1,"absolute","inset-0","z-0"],["src","/assets/Background-login.png","alt","Background",1,"w-full","h-full","object-cover"],[1,"absolute","inset-0","bg-black/60"],[1,"max-w-lg","w-full","space-y-8","p-8","rounded-xl","text-center","z-10"],[1,"flex","justify-center"],["src","/assets/liberacao-acesso.png","alt","Libera\xE7\xE3o de Acesso",1,"w-64","h-64","object-contain"],[1,"text-2xl","font-bold","text-white"],[1,"mt-4","text-gray-400","text-lg"],[1,"flex","flex-col","sm:flex-row","justify-center","items-center","space-y-4","sm:space-y-0","sm:space-x-4"],["hlmBtn","",1,"w-full","sm:w-auto","inline-flex","items-center","justify-center","px-6","py-3","text-base","font-medium","text-white","bg-gradient-to-r","from-amber-400","to-amber-500","hover:from-amber-500","hover:to-amber-600","rounded-lg","transition-all","duration-200","ease-in-out","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-amber-500","disabled:opacity-50","disabled:cursor-not-allowed","shadow-md","hover:shadow-lg","transform","hover:-translate-y-0.5",3,"click","disabled"],["name","matRefresh",1,"h-5","w-5","mr-2"],["hlmBtn","",1,"w-full","sm:w-auto","inline-flex","items-center","justify-center","px-6","py-3","text-base","font-medium","border-2","border-amber-400","text-amber-400","hover:bg-amber-400","hover:text-[#1D1D1D]","rounded-lg","transition-all","duration-200","ease-in-out","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-amber-400","shadow-md","hover:shadow-lg","transform","hover:-translate-y-0.5","bg-[#1D1D1D]",3,"click"],["name","matLogout",1,"h-5","w-5","mr-2"]],template:function(t,o){t&1&&(n(0,"div",0)(1,"div",1),u(2,"img",2)(3,"div",3),r(),n(4,"div",4)(5,"div",5),u(6,"img",6),r(),n(7,"div")(8,"h2",7),l(9),r(),n(10,"p",8),l(11),r()(),n(12,"div",9)(13,"button",10),f("click",function(){return o.checkAccess()}),u(14,"ng-icon",11),l(15),r(),n(16,"button",12),f("click",function(){return o.logout()}),u(17,"ng-icon",13),l(18," Sair "),r()()()()),t&2&&(a(9),_(" ",o.message," "),a(2),_(" ",o.subMessage," "),a(2),s("disabled",o.isChecking),a(),B("animate-spin",o.isChecking),a(),_(" ",o.isChecking?"Verificando...":"Atualizar"," "))},dependencies:[V,re,le],styles:["[_nghost-%COMP%]{display:block}.animate-spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}button[_ngcontent-%COMP%]{transition:all .2s ease-in-out}button[_ngcontent-%COMP%]:active{transform:scale(.98)}"]})}return i})();var be=function(i){return i[i.State=0]="State",i[i.Transition=1]="Transition",i[i.Sequence=2]="Sequence",i[i.Group=3]="Group",i[i.Animate=4]="Animate",i[i.Keyframes=5]="Keyframes",i[i.Style=6]="Style",i[i.Trigger=7]="Trigger",i[i.Reference=8]="Reference",i[i.AnimateChild=9]="AnimateChild",i[i.AnimateRef=10]="AnimateRef",i[i.Query=11]="Query",i[i.Stagger=12]="Stagger",i}(be||{});function Se(i,c){return{type:be.Trigger,name:i,definitions:c,options:{}}}function me(i,c=null){return{type:be.Animate,styles:c,timings:i}}function oe(i){return{type:be.Style,styles:i,offset:null}}function ue(i,c,e=null){return{type:be.Transition,expr:i,animation:c,options:e}}function Ci(i,c){if(i&1&&(n(0,"div",4),u(1,"span",5),n(2,"small",6),l(3),r()()),i&2){let e=c.$implicit;a(),fe("background-color",e.color),a(2),x(e.label)}}function wi(i,c){if(i&1&&(n(0,"div",2),p(1,Ci,4,3,"div",3),r()),i&2){let e=d();a(),s("ngForOf",e.legendItems)}}var X=(()=>{class i{router;pageTitle="DashBus";showLegend=!1;legendItems=[];url="";routerSubscription;constructor(e){this.router=e}ngOnInit(){this.routerSubscription=this.router.events.pipe(Te(e=>e instanceof Ae)).subscribe(e=>{this.url=e.urlAfterRedirects,this.updateTitle(this.url),this.updateLegend(this.url)}),this.url=this.router.url,this.updateTitle(this.url),this.updateLegend(this.url)}ngOnDestroy(){this.routerSubscription&&this.routerSubscription.unsubscribe()}updateTitle(e){e.includes("/dsb-carros-temp")?this.pageTitle="Temperatura":e.includes("/dsb-carros-torque")?this.pageTitle="Torque":e.includes("/dsb-carros-turbina")?this.pageTitle="Press\xE3o Turbina":e.includes("/dsb-carros-pedal")?this.pageTitle="Pedal":e.includes("/dsb-carros-ar-comprimido")?this.pageTitle="Ar Comprimido":e.includes("/dsb-carros-velocidade")?this.pageTitle="M\xE1x. Velocidade":this.pageTitle="Home"}updateLegend(e){this.showLegend=!1,this.legendItems=[],e.includes("/dsb-carros")?(this.showLegend=!0,this.legendItems=[{color:"#B9B9B9",label:"Inativo"},{color:"#387E38",label:"OK"},{color:"#F56B15",label:"M\xE9dio"},{color:"#AE2724",label:"Alto"},{color:"#6224AE",label:"Muito Alto"}]):e.includes("/dsbcarros")&&(this.showLegend=!0,this.legendItems=[{color:"#B9B9B9",label:"Inativo"},{color:"white",label:"OK"},{color:"#FF9858",label:"Oficina"},{color:"#E25652",label:"Sem Comunicar"}])}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}static \u0275fac=function(t){return new(t||i)(w(ne))};static \u0275cmp=y({type:i,selectors:[["app-footer-dsveiculos"]],features:[z([],[W({matHome:Tt})])],decls:2,vars:1,consts:[[1,"container","py-3","flex","items-center","justify-evenly","z-40","relative","text-xs","md:text-sm","font-bold"],["class","py-6 flex items-center justify-center gap-16 w-full fixed bottom-0 text-white","style","background-color: #141416;",4,"ngIf"],[1,"py-6","flex","items-center","justify-center","gap-16","w-full","fixed","bottom-0","text-white",2,"background-color","#141416"],["class","flex items-center gap-3",4,"ngFor","ngForOf"],[1,"flex","items-center","gap-3"],[1,"w-10","h-4","rounded-full"],[1,"text-2xl"]],template:function(t,o){t&1&&(n(0,"footer",0),p(1,wi,2,1,"div",1),r()),t&2&&(a(),s("ngIf",o.showLegend))},dependencies:[ie,V,E,S],encapsulation:2})}return i})();function yi(i,c){if(i&1&&(n(0,"div",1),u(1,"img",2),n(2,"h2",3),l(3,"Carregando..."),r(),n(4,"h3",4),l(5),r()()),i&2){let e=d();a(5),x(e.nextPageTitle)}}var Kt=(()=>{class i{showLoading=!1;nextPageTitle="";static \u0275fac=function(t){return new(t||i)};static \u0275cmp=y({type:i,selectors:[["app-loading-screen"]],inputs:{showLoading:"showLoading",nextPageTitle:"nextPageTitle"},decls:1,vars:1,consts:[["class","fixed top-0 left-0 w-full h-full flex flex-col items-center justify-center z-[100]","style","background-color: #141416;",4,"ngIf"],[1,"fixed","top-0","left-0","w-full","h-full","flex","flex-col","items-center","justify-center","z-[100]",2,"background-color","#141416"],["src","assets/Logo_.png","alt","Logo da ACE Copilot",1,"h-3/12","w-3/12"],[1,"text-4xl","mt-2","font-bold","text-white"],[1,"text-4xl","mt-4","pe-4","font-bold","text-amber-400"]],template:function(t,o){t&1&&p(0,yi,6,1,"div",0),t&2&&s("ngIf",o.showLoading)},dependencies:[V,S],encapsulation:2})}return i})();var pe=(i,c)=>({"opacity-100":i,"opacity-25":c}),ee=(()=>{class i{router;pageTitle="DashBus";currentTime=new Date;currentUrl="";showLoading=!1;nextPageTitle="";routerSubscription;clockSubscription;urlRotationSubscription;routes=["/dsbcarros","/dsb-carros-temp","/dsb-carros-torque","/dsb-carros-turbina","/dsb-carros-pedal","/dsb-carros-ar-comprimido","/dsb-carros-velocidade"];routeTitles={"/dsbcarros":"Home","/dsb-carros-temp":"Temperatura","/dsb-carros-torque":"Torque","/dsb-carros-turbina":"Press\xE3o Turbina","/dsb-carros-pedal":"Pedal","/dsb-carros-ar-comprimido":"Ar Comprimido","/dsb-carros-velocidade":"M\xE1x. Velocidade"};currentRouteIndex=0;constructor(e){this.router=e}ngOnInit(){this.routerSubscription=this.router.events.pipe(Te(e=>e instanceof Ae)).subscribe(e=>{this.currentUrl=e.urlAfterRedirects,this.updateTitle(e.urlAfterRedirects);let t=this.routes.indexOf(this.currentUrl);t!==-1&&(this.currentRouteIndex=t)}),this.currentUrl=this.router.url,this.updateTitle(this.router.url),this.clockSubscription=Re(1e3).subscribe(()=>{this.currentTime=new Date}),this.urlRotationSubscription=Re(12e4).subscribe(()=>{this.rotateToNextRoute()})}ngOnDestroy(){this.routerSubscription&&this.routerSubscription.unsubscribe(),this.clockSubscription&&this.clockSubscription.unsubscribe(),this.urlRotationSubscription&&this.urlRotationSubscription.unsubscribe()}rotateToNextRoute(){let e=(this.currentRouteIndex+1)%this.routes.length,t=this.routes[e];this.nextPageTitle=this.routeTitles[t],this.showLoading=!0,setTimeout(()=>{this.router.navigate([t]),setTimeout(()=>{this.showLoading=!1},1e3)},2e3),this.currentRouteIndex=e}updateTitle(e){this.pageTitle=this.routeTitles[e]||"Home"}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}static \u0275fac=function(t){return new(t||i)(w(ne))};static \u0275cmp=y({type:i,selectors:[["app-header-dsveiculos"]],decls:44,vars:39,consts:[[3,"showLoading","nextPageTitle"],[1,"w-full","p-10","md:px-20","flex","items-center","justify-between","fixed","z-50",2,"background-color","#141416"],[1,"flex","items-center"],["src","assets/Logo_AceCopilot 1.png","alt","Logo da ACE Copilot",1,"h-12"],[1,"text-3xl","2xl:text-4xl","ms-3","font-semibold","text-white"],[1,"text-amber-400"],[1,"absolute","left-1/2","transform","-translate-x-1/2","text-white","font-bold","text-center","my-3"],[2,"font-size","1.25rem","line-height",".25"],[2,"font-size","4.5rem","line-height","1"],[1,"flex","items-center","justify-between","text-white"],["routerLink","/dsbcarros",1,"flex","flex-col","justify-center","items-center","h-14","focus:outline-none",2,"background-color","transparent",3,"click","ngClass"],["src","assets/home.svg","alt","Icone Home",1,"h-6","md:h-8"],[1,"text-lg","mt-2","md:mt-3"],["hlmBtn","","variant","ghost","routerLink","/dsb-carros-temp",1,"flex","flex-col","justify-center","items-center","h-14",2,"background-color","transparent",3,"click","ngClass"],["src","assets/device_thermostat.svg","alt","Icone Temperatura",1,"w-6","h-6","md:h-8"],["hlmBtn","","variant","ghost","routerLink","/dsb-carros-torque",1,"flex","flex-col","justify-center","items-center","h-14",2,"background-color","transparent",3,"click","ngClass"],["src","assets/shutter_speed_minus.svg","alt","Icone Torque",1,"w-8","h-6","md:h-8"],["hlmBtn","","variant","ghost","routerLink","/dsb-carros-turbina",1,"flex","flex-col","justify-center","items-center","h-14",2,"background-color","transparent",3,"click","ngClass"],["src","assets/compress.svg","alt","Icone Press\xE3o turbina",1,"w-6","h-6","md:h-8"],["hlmBtn","","variant","ghost","routerLink","/dsb-carros-pedal",1,"flex","flex-col","justify-center","items-center","h-14",2,"background-color","transparent",3,"click","ngClass"],["src","assets/do_not_step.svg","alt","Icone Pedal",1,"w-8","h-6","md:h-8"],["hlmBtn","","variant","ghost","routerLink","/dsb-carros-ar-comprimido",1,"flex","flex-col","justify-center","items-center","h-14",2,"background-color","transparent",3,"click","ngClass"],["src","assets/air.svg","alt","Icone Ar Comprimido",1,"w-8","h-6","md:h-8"],["hlmBtn","","variant","ghost","routerLink","/dsb-carros-velocidade",1,"flex","flex-col","justify-center","items-center","h-14",2,"background-color","transparent",3,"click","ngClass"],["src","assets/speed.svg","alt","Icone Max. Velocidade",1,"w-8","h-6","md:h-8"]],template:function(t,o){t&1&&(u(0,"app-loading-screen",0),n(1,"header",1)(2,"div",2),u(3,"img",3),n(4,"h1",4),l(5," DashBus - "),n(6,"span",5),l(7),r()()(),n(8,"div",6)(9,"small",7),l(10),ye(11,"date"),r(),n(12,"div",8),l(13),ye(14,"date"),r()(),n(15,"div",9)(16,"button",10),f("click",function(){return o.scrollToTop()}),u(17,"img",11),n(18,"small",12),l(19,"Home"),r()(),n(20,"button",13),f("click",function(){return o.scrollToTop()}),u(21,"img",14),n(22,"small",12),l(23,"Temperatura"),r()(),n(24,"button",15),f("click",function(){return o.scrollToTop()}),u(25,"img",16),n(26,"small",12),l(27,"Torque"),r()(),n(28,"button",17),f("click",function(){return o.scrollToTop()}),u(29,"img",18),n(30,"small",12),l(31,"P.Turbina"),r()(),n(32,"button",19),f("click",function(){return o.scrollToTop()}),u(33,"img",20),n(34,"small",12),l(35,"Pedal"),r()(),n(36,"button",21),f("click",function(){return o.scrollToTop()}),u(37,"img",22),n(38,"small",12),l(39,"Ar Comp."),r()(),n(40,"button",23),f("click",function(){return o.scrollToTop()}),u(41,"img",24),n(42,"small",12),l(43,"Velocidade"),r()()()()),t&2&&(s("showLoading",o.showLoading)("nextPageTitle",o.nextPageTitle),a(7),x(o.pageTitle),a(3),x(Ve(11,12,o.currentTime,"dd/MM/yyyy")),a(3),_(" ",Ve(14,15,o.currentTime,"HH:mm:ss")," "),a(3),s("ngClass",D(18,pe,o.currentUrl==="/dsbcarros",o.currentUrl!=="/dsbcarros")),a(4),s("ngClass",D(21,pe,o.currentUrl==="/dsb-carros-temp",o.currentUrl!=="/dsb-carros-temp")),a(4),s("ngClass",D(24,pe,o.currentUrl==="/dsb-carros-torque",o.currentUrl!=="/dsb-carros-torque")),a(4),s("ngClass",D(27,pe,o.currentUrl==="/dsb-carros-turbina",o.currentUrl!=="/dsb-carros-turbina")),a(4),s("ngClass",D(30,pe,o.currentUrl==="/dsb-carros-pedal",o.currentUrl!=="/dsb-carros-pedal")),a(4),s("ngClass",D(33,pe,o.currentUrl==="/dsb-carros-ar-comprimido",o.currentUrl!=="/dsb-carros-ar-comprimido")),a(4),s("ngClass",D(36,pe,o.currentUrl==="/dsb-carros-velocidade",o.currentUrl!=="/dsb-carros-velocidade")))},dependencies:[le,V,P,Fe,ie,Pe,Kt],encapsulation:2})}return i})();var Le=i=>({"background-color":i}),Vi=i=>({"text-red-400":i}),Si=(i,c,e,t)=>({"text-green-400":i,"text-orange-400":c,"text-red-400":e,"text-gray-400":t}),Oi=(i,c)=>({"text-red-400":i,"text-green-400":c}),Jt=i=>({"bg-amber-700":i});function Ei(i,c){if(i&1&&(n(0,"div",21),l(1),r()),i&2){let e=d().$implicit;a(),_(" ",e.comentarios.length," ")}}function Ti(i,c){i&1&&(n(0,"div",22),u(1,"img",23),r())}function ki(i,c){if(i&1&&(n(0,"span",24),u(1,"img",25),r()),i&2){let e=c.$implicit,t=c.index,o=d(4);s("ngStyle",C(3,Le,e.cor)),a(),s("src",e.icone,T)("alt",o.getAttributeName(t))}}function Di(i,c){if(i&1){let e=b();n(0,"div",15),f("click",function(){let o=h(e).$implicit,m=d(3);return g(m.openHelpDialog(o))})("keydown.enter",function(){let o=h(e).$implicit,m=d(3);return g(m.openHelpDialog(o))})("keydown.space",function(o){let m=h(e).$implicit;return d(3).openHelpDialog(m),g(o.preventDefault())}),p(1,Ei,2,1,"div",16)(2,Ti,2,0,"div",17),n(3,"h3",18),l(4),r(),n(5,"div",19),p(6,ki,2,5,"span",20),r()()}if(i&2){let e=c.$implicit,t=d(3);s("ngStyle",C(6,Le,e.atributos[4].cor+"99")),N("aria-label","Mostrar detalhes do ve\xEDculo "+e.id),a(),s("ngIf",e.comentarios&&e.comentarios.length>0),a(),s("ngIf",t.shouldShowOilChangeAlert(e)),a(2),x(e.id),a(2),s("ngForOf",e.atributos)}}function Ii(i,c){if(i&1&&(n(0,"div",12)(1,"div",13),p(2,Di,7,8,"div",14),r()()),i&2){let e=c.$implicit;a(2),s("ngForOf",e)}}function Mi(i,c){if(i&1){let e=b();n(0,"button",26),f("click",function(){let o=h(e).index,m=d(2);return g(m.goToSlide(o))}),r()}if(i&2){let e=c.index,t=d(2);B("bg-amber-600",t.currentSlide===e)("bg-gray-400",t.currentSlide!==e),N("aria-label","Ir para slide "+(e+1))}}function Fi(i,c){if(i&1){let e=b();n(0,"div",3)(1,"button",4),f("click",function(){h(e);let o=d();return g(o.previousSlide())}),u(2,"img",5),r(),n(3,"button",6),f("click",function(){h(e);let o=d();return g(o.nextSlide())}),u(4,"img",7),r(),n(5,"div",8),p(6,Ii,3,1,"div",9),r(),n(7,"div",10),p(8,Mi,1,5,"button",11),r()()}if(i&2){let e=d();a(5),fe("transform","translateX("+-e.currentSlide*100+"%)"),a(),s("ngForOf",e.vehicleGroups),a(2),s("ngForOf",e.vehicleGroups)}}function Ai(i,c){if(i&1&&(n(0,"div",65)(1,"div",66)(2,"span",67),u(3,"img",68),r(),n(4,"div",69)(5,"span",70),l(6),r(),n(7,"span",71),l(8,"0"),r()()()()),i&2){let e=c.$implicit,t=c.index,o=d(2);a(2),s("ngStyle",C(4,Le,e.cor)),a(),s("src",e.icone,T)("alt",o.getAttributeName(t)),a(3),x(o.getAttributeName(t))}}function Pi(i,c){i&1&&u(0,"span",72)}function ji(i,c){if(i&1){let e=b();n(0,"button",73),f("click",function(){h(e);let o=d(2);return g(o.toggleOilChangeForm())}),l(1," Registrar troca "),r()}}function Ri(i,c){if(i&1){let e=b();n(0,"div",74)(1,"h4",75),l(2," Registrar Troca de \xD3leo "),r(),n(3,"div",76)(4,"div",77)(5,"p",40),l(6),r(),n(7,"div",78)(8,"button",79),f("click",function(){h(e);let o=d(2);return g(o.toggleOilChangeForm())}),l(9," Cancelar "),r(),n(10,"button",80),f("click",function(){h(e);let o=d(2);return g(o.registrarTrocaOleo())}),l(11," Confirmar "),r()()()()()}if(i&2){let e=d(2);a(6),_(" Confirma a troca de \xF3leo para o ve\xEDculo ",e.selectedVehicle.id,"? ")}}function Ni(i,c){if(i&1&&(n(0,"div",49)(1,"span"),l(2,"UltPedidoID:"),r(),n(3,"span"),l(4),r()()),i&2){let e=d(2);a(4),x(e.selectedVehicle.ultPedidoID)}}function Ui(i,c){if(i&1&&(n(0,"div",49)(1,"span"),l(2,"Integra\xE7\xE3o:"),r(),n(3,"span"),l(4),r()()),i&2){let e=d(2);a(4),x(e.selectedVehicle.ultIntegracao)}}function Hi(i,c){if(i&1&&(n(0,"div",87)(1,"div",88)(2,"span",89),l(3),r(),n(4,"span",90),l(5),r()(),n(6,"p",40),l(7),r()()),i&2){let e=c.$implicit;a(3),x(e.author),a(2),x(e.date),a(2),x(e.text)}}function Bi(i,c){if(i&1){let e=b();n(0,"div",81)(1,"h4",75),l(2," Coment\xE1rios "),r(),n(3,"div",82),p(4,Hi,8,3,"div",83),r(),n(5,"div",84)(6,"input",85),q("ngModelChange",function(o){h(e);let m=d(2);return $(m.newComment,o)||(m.newComment=o),g(o)}),r(),n(7,"button",86),f("click",function(){h(e);let o=d(2);return g(o.addComment())}),l(8," Enviar "),r()()()}if(i&2){let e=d(2);s("@slideUpDown",e.showComments?"open":"closed"),a(4),s("ngForOf",e.selectedVehicle.comentarios),a(2),L("ngModel",e.newComment)}}function Li(i,c){if(i&1&&(n(0,"div",87)(1,"div",88)(2,"span",89),l(3),r(),n(4,"span",90),l(5),r()(),n(6,"p",40),l(7),r()()),i&2){let e=c.$implicit;a(3),x(e.author),a(2),x(e.date),a(2),x(e.text)}}function $i(i,c){i&1&&(n(0,"div",92),l(1," Nenhum registro de troca de \xF3leo encontrado. "),r())}function qi(i,c){if(i&1&&(n(0,"div",81)(1,"h4",75),l(2," Registros "),r(),n(3,"div",82),p(4,Li,8,3,"div",83)(5,$i,2,0,"div",91),r()()),i&2){let e=d(2);s("@slideUpDown",e.showOilChangeRecords?"open":"closed"),a(4),s("ngForOf",e.selectedVehicle.trocasOleo),a(),s("ngIf",!e.selectedVehicle.trocasOleo||e.selectedVehicle.trocasOleo.length===0)}}function zi(i,c){if(i&1&&(n(0,"div",93),l(1),r()),i&2){let e=d(2);a(),_(" ",e.selectedVehicle.trocasOleo.length," ")}}function Ki(i,c){if(i&1&&(n(0,"div",94),l(1),r()),i&2){let e=d(2);a(),_(" ",e.selectedVehicle.comentarios.length," ")}}function Ji(i,c){if(i&1){let e=b();n(0,"div",27)(1,"div",28)(2,"div",29)(3,"button",30),f("click",function(){h(e);let o=d();return g(o.closeHelpDialog())})("keydown.enter",function(){h(e);let o=d();return g(o.closeHelpDialog())}),l(4," \u2715 "),r()(),n(5,"div",31)(6,"div",32),p(7,Ai,9,6,"div",33),r(),n(8,"div",34)(9,"div",35)(10,"h3",36),l(11),r(),n(12,"div",37)(13,"span"),l(14,"Euro 5"),r(),n(15,"span"),l(16,"1721"),r()()(),n(17,"div",38)(18,"div")(19,"p",39),l(20," Od\xF4metro: "),n(21,"span",40),l(22),r()(),n(23,"span",41),l(24,"Registro: 24/04/2025 03:00"),r()(),n(25,"div")(26,"p",42),l(27," KM desde \xFAltima troca: "),n(28,"span",40),l(29),r(),p(30,Pi,1,0,"span",43),r(),n(31,"div",44)(32,"span",41),l(33),r(),p(34,ji,2,0,"button",45),r()()(),p(35,Ri,12,1,"div",46),n(36,"div",47)(37,"div",48)(38,"div",49)(39,"span"),l(40,"Status:"),r(),n(41,"span",50),l(42),r()(),p(43,Ni,5,1,"div",51)(44,Ui,5,1,"div",51),n(45,"div",49)(46,"span"),l(47,"Troca de \xD3leo:"),r(),n(48,"span",50),l(49),r()()(),p(50,Bi,9,3,"div",52)(51,qi,6,3,"div",52),n(52,"div",53)(53,"div",54)(54,"button",55),f("click",function(){h(e);let o=d();return g(o.cancelChanges())}),l(55," Cancelar "),r(),n(56,"button",56),f("click",function(){h(e);let o=d();return g(o.saveChanges())}),l(57," Salvar "),r()(),n(58,"div",54)(59,"button",57),u(60,"img",58),r(),n(61,"button",59),f("click",function(){h(e);let o=d();return g(o.toggleOilChangeRecords())}),u(62,"img",60),p(63,zi,2,1,"div",61),r(),n(64,"button",62),f("click",function(){h(e);let o=d();return g(o.toggleComments())}),u(65,"img",63),p(66,Ki,2,1,"div",64),r()()()()()()()()}if(i&2){let e=d();a(7),s("ngForOf",e.selectedVehicle.atributos),a(4),_(" ",e.selectedVehicle.id," "),a(11),x(e.selectedVehicle.odoAtual),a(4),s("ngClass",C(21,Vi,e.selectedVehicle.precisaTrocaOleo)),a(3),x(e.selectedVehicle.odoDesdeUltimaTroca||0),a(),s("ngIf",e.selectedVehicle.precisaTrocaOleo),a(3),_("\xDAltima troca de \xF3leo: ",e.selectedVehicle.ultimaTrocaOleo||"N\xE3o registrada",""),a(),s("ngIf",e.selectedVehicle.precisaTrocaOleo),a(),s("ngIf",e.showOilChangeForm),a(6),s("ngClass",K(23,Si,e.selectedVehicle.status==="OK",e.selectedVehicle.status==="Oficina",e.selectedVehicle.status==="Sem Comunicar",e.selectedVehicle.status==="Inativo")),a(),x(e.selectedVehicle.status),a(),s("ngIf",e.selectedVehicle.ultPedidoID),a(),s("ngIf",e.selectedVehicle.ultIntegracao),a(4),s("ngClass",D(28,Oi,e.selectedVehicle.precisaTrocaOleo,!e.selectedVehicle.precisaTrocaOleo)),a(),_(" ",e.selectedVehicle.precisaTrocaOleo?"Necess\xE1ria":"OK"," "),a(),s("ngIf",e.showComments),a(),s("ngIf",e.showOilChangeRecords),a(10),s("ngClass",C(31,Jt,e.showOilChangeRecords)),a(2),s("ngIf",e.selectedVehicle.trocasOleo&&e.selectedVehicle.trocasOleo.length>0),a(),s("ngClass",C(33,Jt,e.showComments)),a(2),s("ngIf",e.selectedVehicle.comentarios&&e.selectedVehicle.comentarios.length>0)}}var Wt=(()=>{class i{http;renderer;cdRef;veiculos=[];selectedVehicle=null;isHelpDialogOpen=!1;originalData=null;originalVehicleState=null;showComments=!1;newComment="";showOilChangeForm=!1;lastOilChangeDate="";showOilChangeRecords=!1;currentSlide=0;vehicleGroups=[];itemsPerSlide=8;autoSlideInterval;icones=["assets/device_thermostat.svg","assets/shutter_speed_minus.svg","assets/compress.svg","assets/do_not_step.svg","assets/air.svg","assets/speed.svg"];constructor(e,t,o){this.http=e,this.renderer=t,this.cdRef=o}ngOnInit(){console.log("CardVeiculoComponent initialized"),this.loadVehicleData(),this.initializeCarousel(),this.startAutoSlide()}ngOnDestroy(){this.stopAutoSlide()}loadVehicleData(){this.http.get("assets/mocks/veiculos_mock.json").subscribe({next:e=>{console.log("Data loaded:",e),this.originalData=JSON.parse(JSON.stringify(e)),this.veiculos=e.veiculos.map(t=>M(I({},t),{atributos:t.cores.map((o,m)=>({cor:o,icone:this.icones[m]||""})),comentarios:t.comentarios||[],odoAtual:t.odoAtual||0,ultimaTrocaOleo:t.ultimaTrocaOleo||null,odoNaUltimaTroca:t.odoNaUltimaTroca||0,trocasOleo:t.trocasOleo||[]})),this.veiculos.forEach(t=>{t.atributos.forEach((o,m)=>{o.cor=this.getClosestColorMatch(o.cor)}),this.calcularodoDesdeUltimaTroca(t)})},error:e=>{console.error("Erro ao carregar o JSON:",e)}})}calcularodoDesdeUltimaTroca(e){e.odoAtual&&e.odoNaUltimaTroca?e.odoDesdeUltimaTroca=e.odoAtual-e.odoNaUltimaTroca:e.odoDesdeUltimaTroca=e.odoAtual||0,e.precisaTrocaOleo=e.odoDesdeUltimaTroca>=1e4}registrarTrocaOleo(){if(!this.selectedVehicle)return;let e=new Date,t=`${e.toLocaleDateString("pt-BR")} ${e.getHours()}:${e.getMinutes().toString().padStart(2,"0")}`;this.selectedVehicle.ultimaTrocaOleo=e.toLocaleDateString("pt-BR"),this.selectedVehicle.odoNaUltimaTroca=this.selectedVehicle.odoAtual,this.selectedVehicle.odoDesdeUltimaTroca=0,this.selectedVehicle.precisaTrocaOleo=!1,this.selectedVehicle.trocasOleo||(this.selectedVehicle.trocasOleo=[]),this.selectedVehicle.trocasOleo.unshift({author:"Sistema",date:t,text:`Troca de \xF3leo realizada com od\xF4metro ${this.selectedVehicle.odoAtual}.`}),this.showOilChangeForm=!1,this.showOilChangeRecords=!0,this.cdRef.detectChanges()}toggleOilChangeForm(){this.showOilChangeForm=!this.showOilChangeForm}toggleOilChangeRecords(){this.showOilChangeRecords=!this.showOilChangeRecords,this.showOilChangeRecords&&(this.showComments=!1,this.selectedVehicle.trocasOleo||(this.selectedVehicle.trocasOleo=[]),this.cdRef.detectChanges())}shouldShowOilChangeAlert(e){return e.precisaTrocaOleo===!0}getClosestColorMatch(e){let t=this.getAllAttributeColors();return t.includes(e)?e:t[0]}getBackgroundColor(e){switch(e){case"OK":return"white";case"Oficina":return"#FF9858";case"Sem Comunicar":return"#E25652";case"Inativo":return"#B9B9B9";default:return"white"}}getIconPath(e){return this.icones[e]||""}getAttributeName(e){return["Temperatura","Torque","Press\xE3o Turbina","Pedal","Ar Comprimido","Max. Velocidade"][e]||`Atributo ${e+1}`}getColorOptions(){return[{label:"Inativo",value:"#242427"},{label:"Verde",value:"#387E38"},{label:"Laranja",value:"#F56B15"},{label:"Vermelho",value:"#AE2724"},{label:"Roxo",value:"#6224AE"}]}openHelpDialog(e){this.selectedVehicle=JSON.parse(JSON.stringify(e)),this.originalVehicleState=JSON.parse(JSON.stringify(e)),this.selectedVehicle.atributos.forEach(t=>{t.cor=this.getClosestColorMatch(t.cor)}),this.selectedVehicle.comentarios||(this.selectedVehicle.comentarios=[]),this.selectedVehicle.trocasOleo||(this.selectedVehicle.trocasOleo=[]),this.isHelpDialogOpen=!0,this.renderer.addClass(document.body,"overflow-hidden"),this.showComments=!1,this.showOilChangeRecords=!1,this.showOilChangeForm=!1,this.newComment="",setTimeout(()=>{let t=document.querySelector("#modal-close-button");t&&t.focus()},100)}closeHelpDialog(){this.isHelpDialogOpen=!1,this.renderer.removeClass(document.body,"overflow-hidden"),this.selectedVehicle=null,this.originalVehicleState=null,this.showComments=!1,this.showOilChangeForm=!1,this.showOilChangeRecords=!1,this.newComment=""}toggleComments(){this.showComments=!this.showComments,this.showComments&&(this.showOilChangeRecords=!1,this.cdRef.detectChanges())}addComment(){if(this.newComment.trim()&&this.selectedVehicle){let e=new Date,t=`${e.toLocaleDateString("pt-BR")} ${e.getHours()}:${e.getMinutes().toString().padStart(2,"0")}`;this.selectedVehicle.comentarios||(this.selectedVehicle.comentarios=[]),this.selectedVehicle.comentarios.unshift({author:"Usu\xE1rio Atual",date:t,text:this.newComment.trim()});let o=this.veiculos.findIndex(m=>m.id===this.selectedVehicle.id);o!==-1&&(this.veiculos[o].comentarios||(this.veiculos[o].comentarios=[]),this.veiculos[o].comentarios=[...this.selectedVehicle.comentarios]),this.newComment="",this.cdRef.detectChanges()}}getAllAttributeColors(){return this.getColorOptions().map(e=>e.value)}updateAttributeColor(e,t){if(!this.selectedVehicle)return;let m=t.target.value;this.selectedVehicle.atributos[e].cor=m}cancelChanges(){this.closeHelpDialog()}saveChanges(){if(this.selectedVehicle){let e=this.veiculos.findIndex(t=>t.id===this.selectedVehicle.id);e!==-1&&(this.veiculos[e].atributos.forEach((t,o)=>{o<this.selectedVehicle.atributos.length&&(t.cor=this.selectedVehicle.atributos[o].cor)}),this.veiculos[e].comentarios=[...this.selectedVehicle.comentarios],this.veiculos[e].trocasOleo=[...this.selectedVehicle.trocasOleo||[]],this.veiculos[e].ultimaTrocaOleo=this.selectedVehicle.ultimaTrocaOleo,this.veiculos[e].odoNaUltimaTroca=this.selectedVehicle.odoNaUltimaTroca,this.veiculos[e].odoDesdeUltimaTroca=this.selectedVehicle.odoDesdeUltimaTroca,this.veiculos[e].precisaTrocaOleo=this.selectedVehicle.precisaTrocaOleo,this.originalData&&this.originalData.veiculos&&this.originalData.veiculos[e]&&(this.originalData.veiculos[e].cores&&this.selectedVehicle.atributos.forEach((t,o)=>{o<this.originalData.veiculos[e].cores.length&&(this.originalData.veiculos[e].cores[o]=t.cor)}),this.originalData.veiculos[e].comentarios=[...this.selectedVehicle.comentarios],this.originalData.veiculos[e].trocasOleo=[...this.selectedVehicle.trocasOleo||[]],this.originalData.veiculos[e].ultimaTrocaOleo=this.selectedVehicle.ultimaTrocaOleo,this.originalData.veiculos[e].odoNaUltimaTroca=this.selectedVehicle.odoNaUltimaTroca),this.calcularodoDesdeUltimaTroca(this.veiculos[e]),this.saveChangesToJson())}this.closeHelpDialog()}saveChangesToJson(){console.log("Salvando altera\xE7\xF5es:",this.originalData)}handleEscapeKey(){this.isHelpDialogOpen&&this.closeHelpDialog()}handleTabKey(e){if(!this.isHelpDialogOpen)return;let t=document.querySelector('[role="dialog"]');if(!t)return;let o=t.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(o.length===0)return;let m=o[0],v=o[o.length-1];e.shiftKey&&document.activeElement===m?(v.focus(),e.preventDefault()):!e.shiftKey&&document.activeElement===v&&(m.focus(),e.preventDefault())}initializeCarousel(){this.vehicleGroups=[];for(let e=0;e<this.veiculos.length;e+=this.itemsPerSlide)this.vehicleGroups.push(this.veiculos.slice(e,e+this.itemsPerSlide));this.adjustItemsPerSlide(),window.addEventListener("resize",()=>{this.adjustItemsPerSlide()})}adjustItemsPerSlide(){let e=window.innerWidth;e>=2560?this.itemsPerSlide=12:e>=1920?this.itemsPerSlide=8:e>=1280?this.itemsPerSlide=6:this.itemsPerSlide=4,this.regroupVehicles()}regroupVehicles(){this.vehicleGroups=[];for(let e=0;e<this.veiculos.length;e+=this.itemsPerSlide)this.vehicleGroups.push(this.veiculos.slice(e,e+this.itemsPerSlide));this.currentSlide=Math.min(this.currentSlide,this.vehicleGroups.length-1)}nextSlide(){this.currentSlide=(this.currentSlide+1)%this.vehicleGroups.length,this.resetAutoSlideTimer()}previousSlide(){this.currentSlide=this.currentSlide===0?this.vehicleGroups.length-1:this.currentSlide-1,this.resetAutoSlideTimer()}goToSlide(e){this.currentSlide=e,this.resetAutoSlideTimer()}startAutoSlide(){this.autoSlideInterval=setInterval(()=>{this.nextSlide()},5e3)}stopAutoSlide(){this.autoSlideInterval&&clearInterval(this.autoSlideInterval)}resetAutoSlideTimer(){this.stopAutoSlide(),this.startAutoSlide()}static \u0275fac=function(t){return new(t||i)(w(J),w(R),w(j))};static \u0275cmp=y({type:i,selectors:[["app-card-veiculo-ar-comprimido"]],hostBindings:function(t,o){t&1&&f("keydown.escape",function(){return o.handleEscapeKey()},!1,F)("keydown.tab",function(v){return o.handleTabKey(v)},!1,F)},decls:5,vars:2,consts:[[1,"pb-28","pt-44"],["class","relative w-full overflow-hidden",4,"ngIf"],["class","fixed inset-0 z-50 md:p-4 flex items-center justify-center bg-black bg-opacity-50 overflow-y-scroll","role","dialog","aria-modal","true","aria-labelledby","modal-title",4,"ngIf"],[1,"relative","w-full","overflow-hidden"],["aria-label","Slide anterior",1,"absolute","left-4","top-1/2","-translate-y-1/2","z-10","bg-amber-600","hover:bg-amber-700","text-white","rounded-full","p-4","shadow-lg",3,"click"],["src","assets/chevron_left.svg","alt","Anterior",1,"w-8","h-8"],["aria-label","Pr\xF3ximo slide",1,"absolute","right-4","top-1/2","-translate-y-1/2","z-10","bg-amber-600","hover:bg-amber-700","text-white","rounded-full","p-4","shadow-lg",3,"click"],["src","assets/chevron_right.svg","alt","Pr\xF3ximo",1,"w-8","h-8"],[1,"flex","transition-transform","duration-500","ease-in-out"],["class","flex-none w-full px-8",4,"ngFor","ngForOf"],[1,"absolute","bottom-4","left-1/2","transform","-translate-x-1/2","flex","space-x-3"],["class","w-4 h-4 rounded-full transition-all duration-300",3,"bg-amber-600","bg-gray-400","click",4,"ngFor","ngForOf"],[1,"flex-none","w-full","px-8"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","2xl:grid-cols-4","gap-8"],["class","shadow-2xl p-6 rounded-3xl flex flex-col items-center justify-center cursor-pointer border-2 relative transition-all duration-300 hover:scale-105 hover:shadow-amber-400/20 min-h-[300px]","tabindex","0","role","button",3,"ngStyle","click","keydown.enter","keydown.space",4,"ngFor","ngForOf"],["tabindex","0","role","button",1,"shadow-2xl","p-6","rounded-3xl","flex","flex-col","items-center","justify-center","cursor-pointer","border-2","relative","transition-all","duration-300","hover:scale-105","hover:shadow-amber-400/20","min-h-[300px]",3,"click","keydown.enter","keydown.space","ngStyle"],["class","absolute -top-3 -right-3 bg-red-500 text-white rounded-full w-10 h-10 flex items-center justify-center text-lg shadow-lg","aria-label","Este ve\xEDculo possui coment\xE1rios",4,"ngIf"],["class","absolute top-3 left-3 bg-amber-500 text-white rounded-full w-10 h-10 flex items-center justify-center shadow-lg","aria-label","Este ve\xEDculo precisa de troca de \xF3leo",4,"ngIf"],[1,"text-black","font-bold","mb-4","text-4xl","2xl:text-5xl"],[1,"p-3","rounded-2xl","w-full","flex","justify-center","gap-3",2,"background-color","#141416"],["class","w-12 h-12 2xl:w-16 2xl:h-16 rounded-full flex items-center justify-center shadow-lg transition-transform hover:scale-110",3,"ngStyle",4,"ngFor","ngForOf"],["aria-label","Este ve\xEDculo possui coment\xE1rios",1,"absolute","-top-3","-right-3","bg-red-500","text-white","rounded-full","w-10","h-10","flex","items-center","justify-center","text-lg","shadow-lg"],["aria-label","Este ve\xEDculo precisa de troca de \xF3leo",1,"absolute","top-3","left-3","bg-amber-500","text-white","rounded-full","w-10","h-10","flex","items-center","justify-center","shadow-lg"],["src","assets/water_drop.svg","alt","Alerta de troca de \xF3leo",1,"w-6","h-6"],[1,"w-12","h-12","2xl:w-16","2xl:h-16","rounded-full","flex","items-center","justify-center","shadow-lg","transition-transform","hover:scale-110",3,"ngStyle"],[1,"w-8","h-8","2xl:w-10","2xl:h-10",3,"src","alt"],[1,"w-4","h-4","rounded-full","transition-all","duration-300",3,"click"],["role","dialog","aria-modal","true","aria-labelledby","modal-title",1,"fixed","inset-0","z-50","md:p-4","flex","items-center","justify-center","bg-black","bg-opacity-50","overflow-y-scroll"],[1,"rounded-3xl","shadow-lg","w-max","max-w-[90vw]","h-max","2xl:max-w-[100vw]","2xl:max-h-[100vh]","overflow-y-auto","animate-fade-in","relative",2,"background-color","#141416"],[1,"absolute","right-6","top-6","2xl:top-12","2xl:right-12"],["id","modal-close-button","aria-label","Fechar modal",1,"text-lg","xl:text-4xl","font-semibold","text-gray-500","hover:text-amber-400",3,"click","keydown.enter"],[1,"rounded-3xl","flex","flex-col-reverse","lg:flex-row","justify-center","w-max","2xl:max-w-[100vw]","h-max","2xl:max-h-[100vh]"],[1,"grid","grid-cols-1","md:grid-cols-3","lg:grid-cols-1","lg:flex","lg:flex-col","justify-center","rounded-3xl","gap-3","w-full","2xl:max-h-[100vh]","p-6","2xl:p-24",2,"background-color","#242427"],["class","flex flex-col lg:flex-row justify-between gap-3 2xl:gap-8 p-2 rounded-lg",4,"ngFor","ngForOf"],[1,"p-8","2xl:p-20","flex","flex-col","justify-between","w-full","2xl:max-w-[100vw]","2xl:max-h-[100vh]"],[1,"flex","flex-col","mb-10"],[1,"font-bold","text-2xl","lg:text-4xl","2xl:text-6xl","text-amber-400"],[1,"flex","gap-4","text-sm","2xl:text-2xl","mb-1","font-bold","text-white"],[1,"flex","flex-col","justify-between","gap-6","mb-4"],[1,"text-amber-400","text-md","lg:text-lg","2xl:text-3xl","font-bold","mb-2"],[1,"text-white"],[1,"text-lg","text-white"],[1,"text-amber-400","text-md","lg:text-lg","2xl:text-2xl","font-bold","mb-2",3,"ngClass"],["class","ml-2 text-red-400",4,"ngIf"],[1,"flex","items-center","gap-2"],["class","ml-2 bg-amber-600 text-white text-xs px-2 py-1 rounded hover:bg-amber-700","aria-label","Registrar troca de \xF3leo",3,"click",4,"ngIf"],["class","mt-4 mb-4 w-full bg-gray-800 rounded-lg p-4 border border-gray-700 animate-fade-in",4,"ngIf"],[1,"pt-10"],[1,"w-full","text-gray-300","flex","flex-col","gap-4","pb-6"],[1,"flex","justify-between","py-2","border-b","border-gray-700","2xl:text-2xl"],[3,"ngClass"],["class","flex justify-between py-2 border-b border-gray-700 2xl:text-2xl",4,"ngIf"],["class","mt-4 w-full bg-gray-800 rounded-lg p-4 border border-gray-700",4,"ngIf"],[1,"flex","justify-between","mt-4","gap-4","w-full"],[1,"flex","gap-4"],["aria-label","Cancelar altera\xE7\xF5es",1,"px-4","py-2","bg-gray-600","text-white","rounded-2xl","hover:bg-gray-700","transition","2xl:text-xl",3,"click"],["aria-label","Salvar altera\xE7\xF5es",1,"px-4","py-2","bg-amber-600","text-white","rounded-2xl","hover:bg-amber-700","transition","2xl:text-xl",3,"click"],["title","Gr\xE1fico",1,"px-4","py-2","text-white","rounded-2xl","hover:bg-amber-600","transition","2xl:text-xl",2,"background-color","#242427"],["src","assets/bar_chart.svg","alt","gr\xE1fico",1,"2xl:w-20"],["title","Registros","aria-label","Mostrar registros",1,"px-4","py-4","text-white","rounded-2xl","hover:bg-amber-600","transition","2xl:text-xl","relative",2,"background-color","#242427",3,"click","ngClass"],["src","assets/overview.svg","alt","vis\xE3o geral",1,"2xl:w-20"],["class","absolute -top-2 -right-2 bg-amber-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm",4,"ngIf"],["title","Coment\xE1rios","aria-label","Mostrar coment\xE1rios",1,"px-4","py-4","text-white","rounded-2xl","hover:bg-amber-600","transition","2xl:text-xl","relative",2,"background-color","#242427",3,"click","ngClass"],["src","assets/chat.svg","alt","chat",1,"2xl:w-20"],["class","absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm",4,"ngIf"],[1,"flex","flex-col","lg:flex-row","justify-between","gap-3","2xl:gap-8","p-2","rounded-lg"],[1,"flex","items-center","gap-3","xl:gap-8"],[1,"w-8","h-8","lg:w-14","lg:h-14","2xl:w-20","2xl:h-20","rounded-full","flex","items-center","justify-center",3,"ngStyle"],[1,"w-4","h-4","lg:w-7","lg:h-7","2xl:w-10","2xl:h-10",3,"src","alt"],[1,"flex","flex-col"],[1,"text-white","text-sm","2xl:text-2xl","lg:text-nowrap","font-bold"],[1,"text-amber-500","2xl:text-2xl","font-bold"],[1,"ml-2","text-red-400"],["aria-label","Registrar troca de \xF3leo",1,"ml-2","bg-amber-600","text-white","text-xs","px-2","py-1","rounded","hover:bg-amber-700",3,"click"],[1,"mt-4","mb-4","w-full","bg-gray-800","rounded-lg","p-4","border","border-gray-700","animate-fade-in"],[1,"text-amber-400","text-lg","2xl:text-3xl","font-bold","mb-3"],[1,"flex","flex-col","gap-3"],[1,"flex","gap-3","justify-between","items-center"],[1,"flex","gap-2"],[1,"bg-gray-600","text-white","px-4","py-1","rounded","hover:bg-gray-700",3,"click"],[1,"bg-amber-600","text-white","px-4","py-1","rounded","hover:bg-amber-700",3,"click"],[1,"mt-4","w-full","bg-gray-800","rounded-lg","p-4","border","border-gray-700"],[1,"flex","flex-col","gap-3","max-h-44","overflow-y-auto"],["class","bg-gray-900 p-3 mb-2 rounded-md",4,"ngFor","ngForOf"],[1,"mt-2","flex","gap-2"],["type","text","placeholder","Adicionar coment\xE1rio...",1,"w-full","bg-gray-900","border","border-gray-700","rounded-lg","px-3","py-2","text-white",3,"ngModelChange","ngModel"],[1,"bg-amber-600","text-white","rounded-lg","px-4","py-2","hover:bg-amber-700",3,"click"],[1,"bg-gray-900","p-3","mb-2","rounded-md"],[1,"flex","justify-between","mb-1"],[1,"text-amber-400","font-semibold"],[1,"text-gray-500","text-sm"],["class","text-gray-400 text-center p-4",4,"ngIf"],[1,"text-gray-400","text-center","p-4"],[1,"absolute","-top-2","-right-2","bg-amber-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"],[1,"absolute","-top-2","-right-2","bg-red-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"]],template:function(t,o){t&1&&(u(0,"app-header-dsveiculos"),n(1,"section",0),p(2,Fi,9,4,"div",1),r(),u(3,"app-footer-dsveiculos"),p(4,Ji,67,35,"div",2)),t&2&&(a(2),s("ngIf",o.veiculos.length>0),a(2),s("ngIf",o.isHelpDialogOpen&&o.selectedVehicle))},dependencies:[V,P,E,S,U,H,G,Y,Z,ee,X],styles:["@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out forwards}.bg-gray-800[_ngcontent-%COMP%]{background-color:#242427}.bg-gray-900[_ngcontent-%COMP%]{background-color:#1a1a1d}.bg-amber-500[_ngcontent-%COMP%]{background-color:#f59e0b}.bg-amber-600[_ngcontent-%COMP%]{background-color:#d97706}.bg-amber-700[_ngcontent-%COMP%]{background-color:#b45309}.hover\\:bg-amber-600[_ngcontent-%COMP%]:hover{background-color:#d97706}button[_ngcontent-%COMP%]:focus, input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{outline:2px solid #F59E0B;outline-offset:2px}button[_ngcontent-%COMP%]{transition:background-color .2s,transform .1s}button[_ngcontent-%COMP%]:active{transform:scale(.98)}.carousel-container[_ngcontent-%COMP%]{position:relative;width:100%;overflow:hidden}.carousel-slide[_ngcontent-%COMP%]{transition:transform .5s ease-in-out}.carousel-nav-button[_ngcontent-%COMP%]{opacity:.7;transition:opacity .3s ease-in-out}.carousel-nav-button[_ngcontent-%COMP%]:hover{opacity:1}.vehicle-card[_ngcontent-%COMP%]{transform-origin:center;transition:all .3s ease-in-out}.vehicle-card[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 20px 25px -5px #fbbf241a,0 8px 10px -6px #fbbf241a}.carousel-indicator[_ngcontent-%COMP%]{transition:all .3s ease-in-out}.carousel-indicator[_ngcontent-%COMP%]:hover{transform:scale(1.2)}@media (min-width: 1920px){.vehicle-card[_ngcontent-%COMP%]{min-height:350px}.vehicle-icon[_ngcontent-%COMP%]{width:4rem;height:4rem}.vehicle-id[_ngcontent-%COMP%]{font-size:2.5rem}}@media (min-width: 2560px){.vehicle-card[_ngcontent-%COMP%]{min-height:400px}.vehicle-icon[_ngcontent-%COMP%]{width:5rem;height:5rem}.vehicle-id[_ngcontent-%COMP%]{font-size:3rem}}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-out forwards}.attribute-icon[_ngcontent-%COMP%]{filter:drop-shadow(0 4px 6px rgba(0,0,0,.1))}.status-indicator[_ngcontent-%COMP%]{box-shadow:0 4px 6px #0000001a}@media (prefers-color-scheme: dark){.vehicle-card[_ngcontent-%COMP%]{border-color:#fbbf2433}.status-indicator[_ngcontent-%COMP%]{box-shadow:0 4px 6px #fbbf241a}}"],data:{animation:[Se("slideUpDown",[ue(":enter",[oe({height:0,opacity:0}),me("300ms ease-out",oe({height:"*",opacity:1}))]),ue(":leave",[oe({height:"*",opacity:1}),me("300ms ease-in",oe({height:0,opacity:0}))])])]}})}return i})();var $e=i=>({"background-color":i}),Wi=i=>({"text-red-400":i}),Gi=(i,c,e,t)=>({"text-green-400":i,"text-orange-400":c,"text-red-400":e,"text-gray-400":t}),Yi=(i,c)=>({"text-red-400":i,"text-green-400":c}),Gt=i=>({"bg-amber-700":i});function Zi(i,c){if(i&1&&(n(0,"div",11),l(1),r()),i&2){let e=d().$implicit;a(),_(" ",e.comentarios.length," ")}}function Qi(i,c){i&1&&(n(0,"div",12)(1,"span",13),u(2,"img",14),r()())}function Xi(i,c){if(i&1&&(n(0,"span",15),u(1,"img",16),r()),i&2){let e=c.$implicit,t=c.index,o=d(3);s("ngStyle",C(3,$e,e.cor)),a(),s("src",e.icone,T)("alt",o.getAttributeName(t))}}function eo(i,c){if(i&1){let e=b();n(0,"div",5),f("click",function(){let o=h(e).$implicit,m=d(2);return g(m.openHelpDialog(o))})("keydown.enter",function(){let o=h(e).$implicit,m=d(2);return g(m.openHelpDialog(o))})("keydown.space",function(o){let m=h(e).$implicit;return d(2).openHelpDialog(m),g(o.preventDefault())}),p(1,Zi,2,1,"div",6)(2,Qi,3,0,"div",7),n(3,"h3",8),l(4),r(),n(5,"div",9),p(6,Xi,2,5,"span",10),r()()}if(i&2){let e=c.$implicit,t=d(2);s("ngStyle",C(6,$e,e.atributos[3].cor+"99")),N("aria-label","Mostrar detalhes do ve\xEDculo "+e.id),a(),s("ngIf",e.comentarios&&e.comentarios.length>0),a(),s("ngIf",t.shouldShowOilChangeAlert(e)),a(2),x(e.id),a(2),s("ngForOf",e.atributos)}}function to(i,c){if(i&1&&(n(0,"div",3),p(1,eo,7,8,"div",4),r()),i&2){let e=d();a(),s("ngForOf",e.veiculos)}}function io(i,c){if(i&1&&(n(0,"div",55)(1,"div",56)(2,"span",57),u(3,"img",58),r(),n(4,"div",59)(5,"span",60),l(6),r(),n(7,"span",61),l(8,"0"),r()()()()),i&2){let e=c.$implicit,t=c.index,o=d(2);a(2),s("ngStyle",C(4,$e,e.cor)),a(),s("src",e.icone,T)("alt",o.getAttributeName(t)),a(3),x(o.getAttributeName(t))}}function oo(i,c){i&1&&u(0,"span",62)}function no(i,c){if(i&1){let e=b();n(0,"button",63),f("click",function(){h(e);let o=d(2);return g(o.toggleOilChangeForm())}),l(1," Registrar troca "),r()}}function ro(i,c){if(i&1){let e=b();n(0,"div",64)(1,"h4",65),l(2," Registrar Troca de \xD3leo "),r(),n(3,"div",66)(4,"div",67)(5,"p",30),l(6),r(),n(7,"div",68)(8,"button",69),f("click",function(){h(e);let o=d(2);return g(o.toggleOilChangeForm())}),l(9," Cancelar "),r(),n(10,"button",70),f("click",function(){h(e);let o=d(2);return g(o.registrarTrocaOleo())}),l(11," Confirmar "),r()()()()()}if(i&2){let e=d(2);a(6),_(" Confirma a troca de \xF3leo para o ve\xEDculo ",e.selectedVehicle.id,"? ")}}function ao(i,c){if(i&1&&(n(0,"div",39)(1,"span"),l(2,"UltPedidoID:"),r(),n(3,"span"),l(4),r()()),i&2){let e=d(2);a(4),x(e.selectedVehicle.ultPedidoID)}}function lo(i,c){if(i&1&&(n(0,"div",39)(1,"span"),l(2,"Integra\xE7\xE3o:"),r(),n(3,"span"),l(4),r()()),i&2){let e=d(2);a(4),x(e.selectedVehicle.ultIntegracao)}}function so(i,c){if(i&1&&(n(0,"div",77)(1,"div",78)(2,"span",79),l(3),r(),n(4,"span",80),l(5),r()(),n(6,"p",30),l(7),r()()),i&2){let e=c.$implicit;a(3),x(e.author),a(2),x(e.date),a(2),x(e.text)}}function co(i,c){if(i&1){let e=b();n(0,"div",71)(1,"h4",65),l(2," Coment\xE1rios "),r(),n(3,"div",72),p(4,so,8,3,"div",73),r(),n(5,"div",74)(6,"input",75),q("ngModelChange",function(o){h(e);let m=d(2);return $(m.newComment,o)||(m.newComment=o),g(o)}),r(),n(7,"button",76),f("click",function(){h(e);let o=d(2);return g(o.addComment())}),l(8," Enviar "),r()()()}if(i&2){let e=d(2);s("@slideUpDown",e.showComments?"open":"closed"),a(4),s("ngForOf",e.selectedVehicle.comentarios),a(2),L("ngModel",e.newComment)}}function mo(i,c){if(i&1&&(n(0,"div",77)(1,"div",78)(2,"span",79),l(3),r(),n(4,"span",80),l(5),r()(),n(6,"p",30),l(7),r()()),i&2){let e=c.$implicit;a(3),x(e.author),a(2),x(e.date),a(2),x(e.text)}}function uo(i,c){i&1&&(n(0,"div",82),l(1," Nenhum registro de troca de \xF3leo encontrado. "),r())}function po(i,c){if(i&1&&(n(0,"div",71)(1,"h4",65),l(2," Registros "),r(),n(3,"div",72),p(4,mo,8,3,"div",73)(5,uo,2,0,"div",81),r()()),i&2){let e=d(2);s("@slideUpDown",e.showOilChangeRecords?"open":"closed"),a(4),s("ngForOf",e.selectedVehicle.trocasOleo),a(),s("ngIf",!e.selectedVehicle.trocasOleo||e.selectedVehicle.trocasOleo.length===0)}}function ho(i,c){if(i&1&&(n(0,"div",83),l(1),r()),i&2){let e=d(2);a(),_(" ",e.selectedVehicle.trocasOleo.length," ")}}function go(i,c){if(i&1&&(n(0,"div",84),l(1),r()),i&2){let e=d(2);a(),_(" ",e.selectedVehicle.comentarios.length," ")}}function xo(i,c){if(i&1){let e=b();n(0,"div",17)(1,"div",18)(2,"div",19)(3,"button",20),f("click",function(){h(e);let o=d();return g(o.closeHelpDialog())})("keydown.enter",function(){h(e);let o=d();return g(o.closeHelpDialog())}),l(4," \u2715 "),r()(),n(5,"div",21)(6,"div",22),p(7,io,9,6,"div",23),r(),n(8,"div",24)(9,"div",25)(10,"h3",26),l(11),r(),n(12,"div",27)(13,"span"),l(14,"Euro 5"),r(),n(15,"span"),l(16,"1721"),r()()(),n(17,"div",28)(18,"div")(19,"p",29),l(20," Od\xF4metro: "),n(21,"span",30),l(22),r()(),n(23,"span",31),l(24,"Registro: 24/04/2025 03:00"),r()(),n(25,"div")(26,"p",32),l(27," KM desde \xFAltima troca: "),n(28,"span",30),l(29),r(),p(30,oo,1,0,"span",33),r(),n(31,"div",34)(32,"span",31),l(33),r(),p(34,no,2,0,"button",35),r()()(),p(35,ro,12,1,"div",36),n(36,"div",37)(37,"div",38)(38,"div",39)(39,"span"),l(40,"Status:"),r(),n(41,"span",40),l(42),r()(),p(43,ao,5,1,"div",41)(44,lo,5,1,"div",41),n(45,"div",39)(46,"span"),l(47,"Troca de \xD3leo:"),r(),n(48,"span",40),l(49),r()()(),p(50,co,9,3,"div",42)(51,po,6,3,"div",42),n(52,"div",43)(53,"div",44)(54,"button",45),f("click",function(){h(e);let o=d();return g(o.cancelChanges())}),l(55," Cancelar "),r(),n(56,"button",46),f("click",function(){h(e);let o=d();return g(o.saveChanges())}),l(57," Salvar "),r()(),n(58,"div",44)(59,"button",47),u(60,"img",48),r(),n(61,"button",49),f("click",function(){h(e);let o=d();return g(o.toggleOilChangeRecords())}),u(62,"img",50),p(63,ho,2,1,"div",51),r(),n(64,"button",52),f("click",function(){h(e);let o=d();return g(o.toggleComments())}),u(65,"img",53),p(66,go,2,1,"div",54),r()()()()()()()()}if(i&2){let e=d();a(7),s("ngForOf",e.selectedVehicle.atributos),a(4),_(" ",e.selectedVehicle.id," "),a(11),x(e.selectedVehicle.odoAtual),a(4),s("ngClass",C(21,Wi,e.selectedVehicle.precisaTrocaOleo)),a(3),x(e.selectedVehicle.odoDesdeUltimaTroca||0),a(),s("ngIf",e.selectedVehicle.precisaTrocaOleo),a(3),_("\xDAltima troca de \xF3leo: ",e.selectedVehicle.ultimaTrocaOleo||"N\xE3o registrada",""),a(),s("ngIf",e.selectedVehicle.precisaTrocaOleo),a(),s("ngIf",e.showOilChangeForm),a(6),s("ngClass",K(23,Gi,e.selectedVehicle.status==="OK",e.selectedVehicle.status==="Oficina",e.selectedVehicle.status==="Sem Comunicar",e.selectedVehicle.status==="Inativo")),a(),x(e.selectedVehicle.status),a(),s("ngIf",e.selectedVehicle.ultPedidoID),a(),s("ngIf",e.selectedVehicle.ultIntegracao),a(4),s("ngClass",D(28,Yi,e.selectedVehicle.precisaTrocaOleo,!e.selectedVehicle.precisaTrocaOleo)),a(),_(" ",e.selectedVehicle.precisaTrocaOleo?"Necess\xE1ria":"OK"," "),a(),s("ngIf",e.showComments),a(),s("ngIf",e.showOilChangeRecords),a(10),s("ngClass",C(31,Gt,e.showOilChangeRecords)),a(2),s("ngIf",e.selectedVehicle.trocasOleo&&e.selectedVehicle.trocasOleo.length>0),a(),s("ngClass",C(33,Gt,e.showComments)),a(2),s("ngIf",e.selectedVehicle.comentarios&&e.selectedVehicle.comentarios.length>0)}}var Yt=(()=>{class i{http;renderer;cdRef;veiculos=[];selectedVehicle=null;isHelpDialogOpen=!1;originalData=null;originalVehicleState=null;showComments=!1;newComment="";showOilChangeForm=!1;lastOilChangeDate="";showOilChangeRecords=!1;icones=["assets/device_thermostat.svg","assets/shutter_speed_minus.svg","assets/compress.svg","assets/do_not_step.svg","assets/air.svg","assets/speed.svg"];constructor(e,t,o){this.http=e,this.renderer=t,this.cdRef=o}ngOnInit(){console.log("CardVeiculoComponent initialized"),this.loadVehicleData()}loadVehicleData(){this.http.get("assets/mocks/veiculos_mock.json").subscribe({next:e=>{console.log("Data loaded:",e),this.originalData=JSON.parse(JSON.stringify(e)),this.veiculos=e.veiculos.map(t=>M(I({},t),{atributos:t.cores.map((o,m)=>({cor:o,icone:this.icones[m]||""})),comentarios:t.comentarios||[],odoAtual:t.odoAtual||0,ultimaTrocaOleo:t.ultimaTrocaOleo||null,odoNaUltimaTroca:t.odoNaUltimaTroca||0,trocasOleo:t.trocasOleo||[]})),this.veiculos.forEach(t=>{t.atributos.forEach((o,m)=>{o.cor=this.getClosestColorMatch(o.cor)}),this.calcularodoDesdeUltimaTroca(t)})},error:e=>{console.error("Erro ao carregar o JSON:",e)}})}calcularodoDesdeUltimaTroca(e){e.odoAtual&&e.odoNaUltimaTroca?e.odoDesdeUltimaTroca=e.odoAtual-e.odoNaUltimaTroca:e.odoDesdeUltimaTroca=e.odoAtual||0,e.precisaTrocaOleo=e.odoDesdeUltimaTroca>=1e4}registrarTrocaOleo(){if(!this.selectedVehicle)return;let e=new Date,t=`${e.toLocaleDateString("pt-BR")} ${e.getHours()}:${e.getMinutes().toString().padStart(2,"0")}`;this.selectedVehicle.ultimaTrocaOleo=e.toLocaleDateString("pt-BR"),this.selectedVehicle.odoNaUltimaTroca=this.selectedVehicle.odoAtual,this.selectedVehicle.odoDesdeUltimaTroca=0,this.selectedVehicle.precisaTrocaOleo=!1,this.selectedVehicle.trocasOleo||(this.selectedVehicle.trocasOleo=[]),this.selectedVehicle.trocasOleo.unshift({author:"Sistema",date:t,text:`Troca de \xF3leo realizada com od\xF4metro ${this.selectedVehicle.odoAtual}.`}),this.showOilChangeForm=!1,this.showOilChangeRecords=!0,this.cdRef.detectChanges()}toggleOilChangeForm(){this.showOilChangeForm=!this.showOilChangeForm}toggleOilChangeRecords(){this.showOilChangeRecords=!this.showOilChangeRecords,this.showOilChangeRecords&&(this.showComments=!1,this.selectedVehicle.trocasOleo||(this.selectedVehicle.trocasOleo=[]),this.cdRef.detectChanges())}shouldShowOilChangeAlert(e){return e.precisaTrocaOleo===!0}getClosestColorMatch(e){let t=this.getAllAttributeColors();return t.includes(e)?e:t[0]}getBackgroundColor(e){switch(e){case"OK":return"white";case"Oficina":return"#FF9858";case"Sem Comunicar":return"#E25652";case"Inativo":return"#B9B9B9";default:return"white"}}getIconPath(e){return this.icones[e]||""}getAttributeName(e){return["Temperatura","Torque","Press\xE3o Turbina","Pedal","Ar Comprimido","Max. Velocidade"][e]||`Atributo ${e+1}`}getColorOptions(){return[{label:"Inativo",value:"#242427"},{label:"Verde",value:"#387E38"},{label:"Laranja",value:"#F56B15"},{label:"Vermelho",value:"#AE2724"},{label:"Roxo",value:"#6224AE"}]}openHelpDialog(e){this.selectedVehicle=JSON.parse(JSON.stringify(e)),this.originalVehicleState=JSON.parse(JSON.stringify(e)),this.selectedVehicle.atributos.forEach(t=>{t.cor=this.getClosestColorMatch(t.cor)}),this.selectedVehicle.comentarios||(this.selectedVehicle.comentarios=[]),this.selectedVehicle.trocasOleo||(this.selectedVehicle.trocasOleo=[]),this.isHelpDialogOpen=!0,this.renderer.addClass(document.body,"overflow-hidden"),this.showComments=!1,this.showOilChangeRecords=!1,this.showOilChangeForm=!1,this.newComment="",setTimeout(()=>{let t=document.querySelector("#modal-close-button");t&&t.focus()},100)}closeHelpDialog(){this.isHelpDialogOpen=!1,this.renderer.removeClass(document.body,"overflow-hidden"),this.selectedVehicle=null,this.originalVehicleState=null,this.showComments=!1,this.showOilChangeForm=!1,this.showOilChangeRecords=!1,this.newComment=""}toggleComments(){this.showComments=!this.showComments,this.showComments&&(this.showOilChangeRecords=!1,this.cdRef.detectChanges())}addComment(){if(this.newComment.trim()&&this.selectedVehicle){let e=new Date,t=`${e.toLocaleDateString("pt-BR")} ${e.getHours()}:${e.getMinutes().toString().padStart(2,"0")}`;this.selectedVehicle.comentarios||(this.selectedVehicle.comentarios=[]),this.selectedVehicle.comentarios.unshift({author:"Usu\xE1rio Atual",date:t,text:this.newComment.trim()});let o=this.veiculos.findIndex(m=>m.id===this.selectedVehicle.id);o!==-1&&(this.veiculos[o].comentarios||(this.veiculos[o].comentarios=[]),this.veiculos[o].comentarios=[...this.selectedVehicle.comentarios]),this.newComment="",this.cdRef.detectChanges()}}getAllAttributeColors(){return this.getColorOptions().map(e=>e.value)}updateAttributeColor(e,t){if(!this.selectedVehicle)return;let m=t.target.value;this.selectedVehicle.atributos[e].cor=m}cancelChanges(){this.closeHelpDialog()}saveChanges(){if(this.selectedVehicle){let e=this.veiculos.findIndex(t=>t.id===this.selectedVehicle.id);e!==-1&&(this.veiculos[e].atributos.forEach((t,o)=>{o<this.selectedVehicle.atributos.length&&(t.cor=this.selectedVehicle.atributos[o].cor)}),this.veiculos[e].comentarios=[...this.selectedVehicle.comentarios],this.veiculos[e].trocasOleo=[...this.selectedVehicle.trocasOleo||[]],this.veiculos[e].ultimaTrocaOleo=this.selectedVehicle.ultimaTrocaOleo,this.veiculos[e].odoNaUltimaTroca=this.selectedVehicle.odoNaUltimaTroca,this.veiculos[e].odoDesdeUltimaTroca=this.selectedVehicle.odoDesdeUltimaTroca,this.veiculos[e].precisaTrocaOleo=this.selectedVehicle.precisaTrocaOleo,this.originalData&&this.originalData.veiculos&&this.originalData.veiculos[e]&&(this.originalData.veiculos[e].cores&&this.selectedVehicle.atributos.forEach((t,o)=>{o<this.originalData.veiculos[e].cores.length&&(this.originalData.veiculos[e].cores[o]=t.cor)}),this.originalData.veiculos[e].comentarios=[...this.selectedVehicle.comentarios],this.originalData.veiculos[e].trocasOleo=[...this.selectedVehicle.trocasOleo||[]],this.originalData.veiculos[e].ultimaTrocaOleo=this.selectedVehicle.ultimaTrocaOleo,this.originalData.veiculos[e].odoNaUltimaTroca=this.selectedVehicle.odoNaUltimaTroca),this.calcularodoDesdeUltimaTroca(this.veiculos[e]),this.saveChangesToJson())}this.closeHelpDialog()}saveChangesToJson(){console.log("Salvando altera\xE7\xF5es:",this.originalData)}handleEscapeKey(){this.isHelpDialogOpen&&this.closeHelpDialog()}handleTabKey(e){if(!this.isHelpDialogOpen)return;let t=document.querySelector('[role="dialog"]');if(!t)return;let o=t.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(o.length===0)return;let m=o[0],v=o[o.length-1];e.shiftKey&&document.activeElement===m?(v.focus(),e.preventDefault()):!e.shiftKey&&document.activeElement===v&&(m.focus(),e.preventDefault())}static \u0275fac=function(t){return new(t||i)(w(J),w(R),w(j))};static \u0275cmp=y({type:i,selectors:[["app-card-veiculo-pedal"]],hostBindings:function(t,o){t&1&&f("keydown.escape",function(){return o.handleEscapeKey()},!1,F)("keydown.tab",function(v){return o.handleTabKey(v)},!1,F)},decls:5,vars:2,consts:[[1,"pb-28","pt-44"],["class","grid grid-cols-1 md:grid-cols-4 lg:grid-cols-12 lg:flex flex-wrap items-center justify-center gap-4",4,"ngIf"],["class","fixed inset-0 z-50 md:p-4 flex items-center justify-center bg-black bg-opacity-50 overflow-y-scroll","role","dialog","aria-modal","true","aria-labelledby","modal-title",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-4","lg:grid-cols-12","lg:flex","flex-wrap","items-center","justify-center","gap-4"],["class","shadow-2xl p-3 rounded-2xl flex flex-col items-center justify-center cursor-pointer border-2 relative transition-transform duration-300 hover:scale-105 hover:opacity-50","tabindex","0","role","button",3,"ngStyle","click","keydown.enter","keydown.space",4,"ngFor","ngForOf"],["tabindex","0","role","button",1,"shadow-2xl","p-3","rounded-2xl","flex","flex-col","items-center","justify-center","cursor-pointer","border-2","relative","transition-transform","duration-300","hover:scale-105","hover:opacity-50",3,"click","keydown.enter","keydown.space","ngStyle"],["class","absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm","aria-label","Este ve\xEDculo possui coment\xE1rios",4,"ngIf"],["class","absolute top-2 left-2 bg-amber-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm","aria-label","Este ve\xEDculo precisa de troca de \xF3leo",4,"ngIf"],[1,"text-black","font-bold","mb-2","text-3xl"],[1,"p-1.5","rounded-xl","w-full","flex","justify-center","gap-1",2,"background-color","#141416"],["class","w-7 h-7 rounded-full flex items-center justify-center",3,"ngStyle",4,"ngFor","ngForOf"],["aria-label","Este ve\xEDculo possui coment\xE1rios",1,"absolute","-top-2","-right-2","bg-red-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"],["aria-label","Este ve\xEDculo precisa de troca de \xF3leo",1,"absolute","top-2","left-2","bg-amber-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"],[1,"text-xs"],["src","assets/water_drop.svg","alt","Alerta de troca de \xF3leo"],[1,"w-7","h-7","rounded-full","flex","items-center","justify-center",3,"ngStyle"],[3,"src","alt"],["role","dialog","aria-modal","true","aria-labelledby","modal-title",1,"fixed","inset-0","z-50","md:p-4","flex","items-center","justify-center","bg-black","bg-opacity-50","overflow-y-scroll"],[1,"rounded-3xl","shadow-lg","w-max","max-w-[90vw]","h-max","2xl:max-w-[100vw]","2xl:max-h-[100vh]","overflow-y-auto","animate-fade-in","relative",2,"background-color","#141416"],[1,"absolute","right-6","top-6","2xl:top-12","2xl:right-12"],["id","modal-close-button","aria-label","Fechar modal",1,"text-lg","xl:text-4xl","font-semibold","text-gray-500","hover:text-amber-400",3,"click","keydown.enter"],[1,"rounded-3xl","flex","flex-col-reverse","lg:flex-row","justify-center","w-max","2xl:max-w-[100vw]","h-max","2xl:max-h-[100vh]"],[1,"grid","grid-cols-1","md:grid-cols-3","lg:grid-cols-1","lg:flex","lg:flex-col","justify-center","rounded-3xl","gap-3","w-full","2xl:max-h-[100vh]","p-6","2xl:p-24",2,"background-color","#242427"],["class","flex flex-col lg:flex-row justify-between gap-3 2xl:gap-8 p-2 rounded-lg",4,"ngFor","ngForOf"],[1,"p-8","2xl:p-20","flex","flex-col","justify-between","w-full","2xl:max-w-[100vw]","2xl:max-h-[100vh]"],[1,"flex","flex-col","mb-10"],[1,"font-bold","text-2xl","lg:text-4xl","2xl:text-6xl","text-amber-400"],[1,"flex","gap-4","text-sm","2xl:text-2xl","mb-1","font-bold","text-white"],[1,"flex","flex-col","justify-between","gap-6","mb-4"],[1,"text-amber-400","text-md","lg:text-lg","2xl:text-3xl","font-bold","mb-2"],[1,"text-white"],[1,"text-lg","text-white"],[1,"text-amber-400","text-md","lg:text-lg","2xl:text-2xl","font-bold","mb-2",3,"ngClass"],["class","ml-2 text-red-400",4,"ngIf"],[1,"flex","items-center","gap-2"],["class","ml-2 bg-amber-600 text-white text-xs px-2 py-1 rounded hover:bg-amber-700","aria-label","Registrar troca de \xF3leo",3,"click",4,"ngIf"],["class","mt-4 mb-4 w-full bg-gray-800 rounded-lg p-4 border border-gray-700 animate-fade-in",4,"ngIf"],[1,"pt-10"],[1,"w-full","text-gray-300","flex","flex-col","gap-4","pb-6"],[1,"flex","justify-between","py-2","border-b","border-gray-700","2xl:text-2xl"],[3,"ngClass"],["class","flex justify-between py-2 border-b border-gray-700 2xl:text-2xl",4,"ngIf"],["class","mt-4 w-full bg-gray-800 rounded-lg p-4 border border-gray-700",4,"ngIf"],[1,"flex","justify-between","mt-4","gap-4","w-full"],[1,"flex","gap-4"],["aria-label","Cancelar altera\xE7\xF5es",1,"px-4","py-2","bg-gray-600","text-white","rounded-2xl","hover:bg-gray-700","transition","2xl:text-xl",3,"click"],["aria-label","Salvar altera\xE7\xF5es",1,"px-4","py-2","bg-amber-600","text-white","rounded-2xl","hover:bg-amber-700","transition","2xl:text-xl",3,"click"],["title","Gr\xE1fico",1,"px-4","py-2","text-white","rounded-2xl","hover:bg-amber-600","transition","2xl:text-xl",2,"background-color","#242427"],["src","assets/bar_chart.svg","alt","gr\xE1fico",1,"2xl:w-20"],["title","Registros","aria-label","Mostrar registros",1,"px-4","py-4","text-white","rounded-2xl","hover:bg-amber-600","transition","2xl:text-xl","relative",2,"background-color","#242427",3,"click","ngClass"],["src","assets/overview.svg","alt","vis\xE3o geral",1,"2xl:w-20"],["class","absolute -top-2 -right-2 bg-amber-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm",4,"ngIf"],["title","Coment\xE1rios","aria-label","Mostrar coment\xE1rios",1,"px-4","py-4","text-white","rounded-2xl","hover:bg-amber-600","transition","2xl:text-xl","relative",2,"background-color","#242427",3,"click","ngClass"],["src","assets/chat.svg","alt","chat",1,"2xl:w-20"],["class","absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm",4,"ngIf"],[1,"flex","flex-col","lg:flex-row","justify-between","gap-3","2xl:gap-8","p-2","rounded-lg"],[1,"flex","items-center","gap-3","xl:gap-8"],[1,"w-8","h-8","lg:w-14","lg:h-14","2xl:w-20","2xl:h-20","rounded-full","flex","items-center","justify-center",3,"ngStyle"],[1,"w-4","h-4","lg:w-7","lg:h-7","2xl:w-10","2xl:h-10",3,"src","alt"],[1,"flex","flex-col"],[1,"text-white","text-sm","2xl:text-2xl","lg:text-nowrap","font-bold"],[1,"text-amber-500","2xl:text-2xl","font-bold"],[1,"ml-2","text-red-400"],["aria-label","Registrar troca de \xF3leo",1,"ml-2","bg-amber-600","text-white","text-xs","px-2","py-1","rounded","hover:bg-amber-700",3,"click"],[1,"mt-4","mb-4","w-full","bg-gray-800","rounded-lg","p-4","border","border-gray-700","animate-fade-in"],[1,"text-amber-400","text-lg","2xl:text-3xl","font-bold","mb-3"],[1,"flex","flex-col","gap-3"],[1,"flex","gap-3","justify-between","items-center"],[1,"flex","gap-2"],[1,"bg-gray-600","text-white","px-4","py-1","rounded","hover:bg-gray-700",3,"click"],[1,"bg-amber-600","text-white","px-4","py-1","rounded","hover:bg-amber-700",3,"click"],[1,"mt-4","w-full","bg-gray-800","rounded-lg","p-4","border","border-gray-700"],[1,"flex","flex-col","gap-3","max-h-44","overflow-y-auto"],["class","bg-gray-900 p-3 mb-2 rounded-md",4,"ngFor","ngForOf"],[1,"mt-2","flex","gap-2"],["type","text","placeholder","Adicionar coment\xE1rio...",1,"w-full","bg-gray-900","border","border-gray-700","rounded-lg","px-3","py-2","text-white",3,"ngModelChange","ngModel"],[1,"bg-amber-600","text-white","rounded-lg","px-4","py-2","hover:bg-amber-700",3,"click"],[1,"bg-gray-900","p-3","mb-2","rounded-md"],[1,"flex","justify-between","mb-1"],[1,"text-amber-400","font-semibold"],[1,"text-gray-500","text-sm"],["class","text-gray-400 text-center p-4",4,"ngIf"],[1,"text-gray-400","text-center","p-4"],[1,"absolute","-top-2","-right-2","bg-amber-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"],[1,"absolute","-top-2","-right-2","bg-red-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"]],template:function(t,o){t&1&&(u(0,"app-header-dsveiculos"),n(1,"section",0),p(2,to,2,1,"div",1),r(),u(3,"app-footer-dsveiculos"),p(4,xo,67,35,"div",2)),t&2&&(a(2),s("ngIf",o.veiculos.length>0),a(2),s("ngIf",o.isHelpDialogOpen&&o.selectedVehicle))},dependencies:[V,P,E,S,U,H,G,Y,Z,ee,X],styles:["@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out forwards}.bg-gray-800[_ngcontent-%COMP%]{background-color:#242427}.bg-gray-900[_ngcontent-%COMP%]{background-color:#1a1a1d}.bg-amber-500[_ngcontent-%COMP%]{background-color:#f59e0b}.bg-amber-600[_ngcontent-%COMP%]{background-color:#d97706}.bg-amber-700[_ngcontent-%COMP%]{background-color:#b45309}.hover\\:bg-amber-600[_ngcontent-%COMP%]:hover{background-color:#d97706}button[_ngcontent-%COMP%]:focus, input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{outline:2px solid #F59E0B;outline-offset:2px}button[_ngcontent-%COMP%]{transition:background-color .2s,transform .1s}button[_ngcontent-%COMP%]:active{transform:scale(.98)}"]})}return i})();var qe=i=>({"background-color":i}),fo=i=>({"text-red-400":i}),vo=(i,c,e,t)=>({"text-green-400":i,"text-orange-400":c,"text-red-400":e,"text-gray-400":t}),_o=(i,c)=>({"text-red-400":i,"text-green-400":c}),Zt=i=>({"bg-amber-700":i});function bo(i,c){if(i&1&&(n(0,"div",11),l(1),r()),i&2){let e=d().$implicit;a(),_(" ",e.comentarios.length," ")}}function Co(i,c){i&1&&(n(0,"div",12)(1,"span",13),u(2,"img",14),r()())}function wo(i,c){if(i&1&&(n(0,"span",15),u(1,"img",16),r()),i&2){let e=c.$implicit,t=c.index,o=d(3);s("ngStyle",C(3,qe,e.cor)),a(),s("src",e.icone,T)("alt",o.getAttributeName(t))}}function yo(i,c){if(i&1){let e=b();n(0,"div",5),f("click",function(){let o=h(e).$implicit,m=d(2);return g(m.openHelpDialog(o))})("keydown.enter",function(){let o=h(e).$implicit,m=d(2);return g(m.openHelpDialog(o))})("keydown.space",function(o){let m=h(e).$implicit;return d(2).openHelpDialog(m),g(o.preventDefault())}),p(1,bo,2,1,"div",6)(2,Co,3,0,"div",7),n(3,"h3",8),l(4),r(),n(5,"div",9),p(6,wo,2,5,"span",10),r()()}if(i&2){let e=c.$implicit,t=d(2);s("ngStyle",C(6,qe,e.atributos[0].cor+"99")),N("aria-label","Mostrar detalhes do ve\xEDculo "+e.id),a(),s("ngIf",e.comentarios&&e.comentarios.length>0),a(),s("ngIf",t.shouldShowOilChangeAlert(e)),a(2),x(e.id),a(2),s("ngForOf",e.atributos)}}function Vo(i,c){if(i&1&&(n(0,"div",3),p(1,yo,7,8,"div",4),r()),i&2){let e=d();a(),s("ngForOf",e.veiculos)}}function So(i,c){if(i&1&&(n(0,"div",55)(1,"div",56)(2,"span",57),u(3,"img",58),r(),n(4,"div",59)(5,"span",60),l(6),r(),n(7,"span",61),l(8,"0"),r()()()()),i&2){let e=c.$implicit,t=c.index,o=d(2);a(2),s("ngStyle",C(4,qe,e.cor)),a(),s("src",e.icone,T)("alt",o.getAttributeName(t)),a(3),x(o.getAttributeName(t))}}function Oo(i,c){i&1&&u(0,"span",62)}function Eo(i,c){if(i&1){let e=b();n(0,"button",63),f("click",function(){h(e);let o=d(2);return g(o.toggleOilChangeForm())}),l(1," Registrar troca "),r()}}function To(i,c){if(i&1){let e=b();n(0,"div",64)(1,"h4",65),l(2," Registrar Troca de \xD3leo "),r(),n(3,"div",66)(4,"div",67)(5,"p",30),l(6),r(),n(7,"div",68)(8,"button",69),f("click",function(){h(e);let o=d(2);return g(o.toggleOilChangeForm())}),l(9," Cancelar "),r(),n(10,"button",70),f("click",function(){h(e);let o=d(2);return g(o.registrarTrocaOleo())}),l(11," Confirmar "),r()()()()()}if(i&2){let e=d(2);a(6),_(" Confirma a troca de \xF3leo para o ve\xEDculo ",e.selectedVehicle.id,"? ")}}function ko(i,c){if(i&1&&(n(0,"div",39)(1,"span"),l(2,"UltPedidoID:"),r(),n(3,"span"),l(4),r()()),i&2){let e=d(2);a(4),x(e.selectedVehicle.ultPedidoID)}}function Do(i,c){if(i&1&&(n(0,"div",39)(1,"span"),l(2,"Integra\xE7\xE3o:"),r(),n(3,"span"),l(4),r()()),i&2){let e=d(2);a(4),x(e.selectedVehicle.ultIntegracao)}}function Io(i,c){if(i&1&&(n(0,"div",77)(1,"div",78)(2,"span",79),l(3),r(),n(4,"span",80),l(5),r()(),n(6,"p",30),l(7),r()()),i&2){let e=c.$implicit;a(3),x(e.author),a(2),x(e.date),a(2),x(e.text)}}function Mo(i,c){if(i&1){let e=b();n(0,"div",71)(1,"h4",65),l(2," Coment\xE1rios "),r(),n(3,"div",72),p(4,Io,8,3,"div",73),r(),n(5,"div",74)(6,"input",75),q("ngModelChange",function(o){h(e);let m=d(2);return $(m.newComment,o)||(m.newComment=o),g(o)}),r(),n(7,"button",76),f("click",function(){h(e);let o=d(2);return g(o.addComment())}),l(8," Enviar "),r()()()}if(i&2){let e=d(2);s("@slideUpDown",e.showComments?"open":"closed"),a(4),s("ngForOf",e.selectedVehicle.comentarios),a(2),L("ngModel",e.newComment)}}function Fo(i,c){if(i&1&&(n(0,"div",77)(1,"div",78)(2,"span",79),l(3),r(),n(4,"span",80),l(5),r()(),n(6,"p",30),l(7),r()()),i&2){let e=c.$implicit;a(3),x(e.author),a(2),x(e.date),a(2),x(e.text)}}function Ao(i,c){i&1&&(n(0,"div",82),l(1," Nenhum registro de troca de \xF3leo encontrado. "),r())}function Po(i,c){if(i&1&&(n(0,"div",71)(1,"h4",65),l(2," Registros "),r(),n(3,"div",72),p(4,Fo,8,3,"div",73)(5,Ao,2,0,"div",81),r()()),i&2){let e=d(2);s("@slideUpDown",e.showOilChangeRecords?"open":"closed"),a(4),s("ngForOf",e.selectedVehicle.trocasOleo),a(),s("ngIf",!e.selectedVehicle.trocasOleo||e.selectedVehicle.trocasOleo.length===0)}}function jo(i,c){if(i&1&&(n(0,"div",83),l(1),r()),i&2){let e=d(2);a(),_(" ",e.selectedVehicle.trocasOleo.length," ")}}function Ro(i,c){if(i&1&&(n(0,"div",84),l(1),r()),i&2){let e=d(2);a(),_(" ",e.selectedVehicle.comentarios.length," ")}}function No(i,c){if(i&1){let e=b();n(0,"div",17)(1,"div",18)(2,"div",19)(3,"button",20),f("click",function(){h(e);let o=d();return g(o.closeHelpDialog())})("keydown.enter",function(){h(e);let o=d();return g(o.closeHelpDialog())}),l(4," \u2715 "),r()(),n(5,"div",21)(6,"div",22),p(7,So,9,6,"div",23),r(),n(8,"div",24)(9,"div",25)(10,"h3",26),l(11),r(),n(12,"div",27)(13,"span"),l(14,"Euro 5"),r(),n(15,"span"),l(16,"1721"),r()()(),n(17,"div",28)(18,"div")(19,"p",29),l(20," Od\xF4metro: "),n(21,"span",30),l(22),r()(),n(23,"span",31),l(24,"Registro: 24/04/2025 03:00"),r()(),n(25,"div")(26,"p",32),l(27," KM desde \xFAltima troca: "),n(28,"span",30),l(29),r(),p(30,Oo,1,0,"span",33),r(),n(31,"div",34)(32,"span",31),l(33),r(),p(34,Eo,2,0,"button",35),r()()(),p(35,To,12,1,"div",36),n(36,"div",37)(37,"div",38)(38,"div",39)(39,"span"),l(40,"Status:"),r(),n(41,"span",40),l(42),r()(),p(43,ko,5,1,"div",41)(44,Do,5,1,"div",41),n(45,"div",39)(46,"span"),l(47,"Troca de \xD3leo:"),r(),n(48,"span",40),l(49),r()()(),p(50,Mo,9,3,"div",42)(51,Po,6,3,"div",42),n(52,"div",43)(53,"div",44)(54,"button",45),f("click",function(){h(e);let o=d();return g(o.cancelChanges())}),l(55," Cancelar "),r(),n(56,"button",46),f("click",function(){h(e);let o=d();return g(o.saveChanges())}),l(57," Salvar "),r()(),n(58,"div",44)(59,"button",47),u(60,"img",48),r(),n(61,"button",49),f("click",function(){h(e);let o=d();return g(o.toggleOilChangeRecords())}),u(62,"img",50),p(63,jo,2,1,"div",51),r(),n(64,"button",52),f("click",function(){h(e);let o=d();return g(o.toggleComments())}),u(65,"img",53),p(66,Ro,2,1,"div",54),r()()()()()()()()}if(i&2){let e=d();a(7),s("ngForOf",e.selectedVehicle.atributos),a(4),_(" ",e.selectedVehicle.id," "),a(11),x(e.selectedVehicle.odoAtual),a(4),s("ngClass",C(21,fo,e.selectedVehicle.precisaTrocaOleo)),a(3),x(e.selectedVehicle.odoDesdeUltimaTroca||0),a(),s("ngIf",e.selectedVehicle.precisaTrocaOleo),a(3),_("\xDAltima troca de \xF3leo: ",e.selectedVehicle.ultimaTrocaOleo||"N\xE3o registrada",""),a(),s("ngIf",e.selectedVehicle.precisaTrocaOleo),a(),s("ngIf",e.showOilChangeForm),a(6),s("ngClass",K(23,vo,e.selectedVehicle.status==="OK",e.selectedVehicle.status==="Oficina",e.selectedVehicle.status==="Sem Comunicar",e.selectedVehicle.status==="Inativo")),a(),x(e.selectedVehicle.status),a(),s("ngIf",e.selectedVehicle.ultPedidoID),a(),s("ngIf",e.selectedVehicle.ultIntegracao),a(4),s("ngClass",D(28,_o,e.selectedVehicle.precisaTrocaOleo,!e.selectedVehicle.precisaTrocaOleo)),a(),_(" ",e.selectedVehicle.precisaTrocaOleo?"Necess\xE1ria":"OK"," "),a(),s("ngIf",e.showComments),a(),s("ngIf",e.showOilChangeRecords),a(10),s("ngClass",C(31,Zt,e.showOilChangeRecords)),a(2),s("ngIf",e.selectedVehicle.trocasOleo&&e.selectedVehicle.trocasOleo.length>0),a(),s("ngClass",C(33,Zt,e.showComments)),a(2),s("ngIf",e.selectedVehicle.comentarios&&e.selectedVehicle.comentarios.length>0)}}var Qt=(()=>{class i{http;renderer;cdRef;veiculos=[];selectedVehicle=null;isHelpDialogOpen=!1;originalData=null;originalVehicleState=null;showComments=!1;newComment="";showOilChangeForm=!1;lastOilChangeDate="";showOilChangeRecords=!1;icones=["assets/device_thermostat.svg","assets/shutter_speed_minus.svg","assets/compress.svg","assets/do_not_step.svg","assets/air.svg","assets/speed.svg"];constructor(e,t,o){this.http=e,this.renderer=t,this.cdRef=o}ngOnInit(){console.log("CardVeiculoComponent initialized"),this.loadVehicleData()}loadVehicleData(){this.http.get("assets/mocks/veiculos_mock.json").subscribe({next:e=>{console.log("Data loaded:",e),this.originalData=JSON.parse(JSON.stringify(e)),this.veiculos=e.veiculos.map(t=>M(I({},t),{atributos:t.cores.map((o,m)=>({cor:o,icone:this.icones[m]||""})),comentarios:t.comentarios||[],odoAtual:t.odoAtual||0,ultimaTrocaOleo:t.ultimaTrocaOleo||null,odoNaUltimaTroca:t.odoNaUltimaTroca||0,trocasOleo:t.trocasOleo||[]})),this.veiculos.forEach(t=>{t.atributos.forEach((o,m)=>{o.cor=this.getClosestColorMatch(o.cor)}),this.calcularodoDesdeUltimaTroca(t)})},error:e=>{console.error("Erro ao carregar o JSON:",e)}})}calcularodoDesdeUltimaTroca(e){e.odoAtual&&e.odoNaUltimaTroca?e.odoDesdeUltimaTroca=e.odoAtual-e.odoNaUltimaTroca:e.odoDesdeUltimaTroca=e.odoAtual||0,e.precisaTrocaOleo=e.odoDesdeUltimaTroca>=1e4}registrarTrocaOleo(){if(!this.selectedVehicle)return;let e=new Date,t=`${e.toLocaleDateString("pt-BR")} ${e.getHours()}:${e.getMinutes().toString().padStart(2,"0")}`;this.selectedVehicle.ultimaTrocaOleo=e.toLocaleDateString("pt-BR"),this.selectedVehicle.odoNaUltimaTroca=this.selectedVehicle.odoAtual,this.selectedVehicle.odoDesdeUltimaTroca=0,this.selectedVehicle.precisaTrocaOleo=!1,this.selectedVehicle.trocasOleo||(this.selectedVehicle.trocasOleo=[]),this.selectedVehicle.trocasOleo.unshift({author:"Sistema",date:t,text:`Troca de \xF3leo realizada com od\xF4metro ${this.selectedVehicle.odoAtual}.`}),this.showOilChangeForm=!1,this.showOilChangeRecords=!0,this.cdRef.detectChanges()}toggleOilChangeForm(){this.showOilChangeForm=!this.showOilChangeForm}toggleOilChangeRecords(){this.showOilChangeRecords=!this.showOilChangeRecords,this.showOilChangeRecords&&(this.showComments=!1,this.selectedVehicle.trocasOleo||(this.selectedVehicle.trocasOleo=[]),this.cdRef.detectChanges())}shouldShowOilChangeAlert(e){return e.precisaTrocaOleo===!0}getClosestColorMatch(e){let t=this.getAllAttributeColors();return t.includes(e)?e:t[0]}getBackgroundColor(e){switch(e){case"OK":return"white";case"Oficina":return"#FF9858";case"Sem Comunicar":return"#E25652";case"Inativo":return"#B9B9B9";default:return"white"}}getIconPath(e){return this.icones[e]||""}getAttributeName(e){return["Temperatura","Torque","Press\xE3o Turbina","Pedal","Ar Comprimido","Max. Velocidade"][e]||`Atributo ${e+1}`}getColorOptions(){return[{label:"Inativo",value:"#242427"},{label:"Verde",value:"#387E38"},{label:"Laranja",value:"#F56B15"},{label:"Vermelho",value:"#AE2724"},{label:"Roxo",value:"#6224AE"}]}openHelpDialog(e){this.selectedVehicle=JSON.parse(JSON.stringify(e)),this.originalVehicleState=JSON.parse(JSON.stringify(e)),this.selectedVehicle.atributos.forEach(t=>{t.cor=this.getClosestColorMatch(t.cor)}),this.selectedVehicle.comentarios||(this.selectedVehicle.comentarios=[]),this.selectedVehicle.trocasOleo||(this.selectedVehicle.trocasOleo=[]),this.isHelpDialogOpen=!0,this.renderer.addClass(document.body,"overflow-hidden"),this.showComments=!1,this.showOilChangeRecords=!1,this.showOilChangeForm=!1,this.newComment="",setTimeout(()=>{let t=document.querySelector("#modal-close-button");t&&t.focus()},100)}closeHelpDialog(){this.isHelpDialogOpen=!1,this.renderer.removeClass(document.body,"overflow-hidden"),this.selectedVehicle=null,this.originalVehicleState=null,this.showComments=!1,this.showOilChangeForm=!1,this.showOilChangeRecords=!1,this.newComment=""}toggleComments(){this.showComments=!this.showComments,this.showComments&&(this.showOilChangeRecords=!1,this.cdRef.detectChanges())}addComment(){if(this.newComment.trim()&&this.selectedVehicle){let e=new Date,t=`${e.toLocaleDateString("pt-BR")} ${e.getHours()}:${e.getMinutes().toString().padStart(2,"0")}`;this.selectedVehicle.comentarios||(this.selectedVehicle.comentarios=[]),this.selectedVehicle.comentarios.unshift({author:"Usu\xE1rio Atual",date:t,text:this.newComment.trim()});let o=this.veiculos.findIndex(m=>m.id===this.selectedVehicle.id);o!==-1&&(this.veiculos[o].comentarios||(this.veiculos[o].comentarios=[]),this.veiculos[o].comentarios=[...this.selectedVehicle.comentarios]),this.newComment="",this.cdRef.detectChanges()}}getAllAttributeColors(){return this.getColorOptions().map(e=>e.value)}updateAttributeColor(e,t){if(!this.selectedVehicle)return;let m=t.target.value;this.selectedVehicle.atributos[e].cor=m}cancelChanges(){this.closeHelpDialog()}saveChanges(){if(this.selectedVehicle){let e=this.veiculos.findIndex(t=>t.id===this.selectedVehicle.id);e!==-1&&(this.veiculos[e].atributos.forEach((t,o)=>{o<this.selectedVehicle.atributos.length&&(t.cor=this.selectedVehicle.atributos[o].cor)}),this.veiculos[e].comentarios=[...this.selectedVehicle.comentarios],this.veiculos[e].trocasOleo=[...this.selectedVehicle.trocasOleo||[]],this.veiculos[e].ultimaTrocaOleo=this.selectedVehicle.ultimaTrocaOleo,this.veiculos[e].odoNaUltimaTroca=this.selectedVehicle.odoNaUltimaTroca,this.veiculos[e].odoDesdeUltimaTroca=this.selectedVehicle.odoDesdeUltimaTroca,this.veiculos[e].precisaTrocaOleo=this.selectedVehicle.precisaTrocaOleo,this.originalData&&this.originalData.veiculos&&this.originalData.veiculos[e]&&(this.originalData.veiculos[e].cores&&this.selectedVehicle.atributos.forEach((t,o)=>{o<this.originalData.veiculos[e].cores.length&&(this.originalData.veiculos[e].cores[o]=t.cor)}),this.originalData.veiculos[e].comentarios=[...this.selectedVehicle.comentarios],this.originalData.veiculos[e].trocasOleo=[...this.selectedVehicle.trocasOleo||[]],this.originalData.veiculos[e].ultimaTrocaOleo=this.selectedVehicle.ultimaTrocaOleo,this.originalData.veiculos[e].odoNaUltimaTroca=this.selectedVehicle.odoNaUltimaTroca),this.calcularodoDesdeUltimaTroca(this.veiculos[e]),this.saveChangesToJson())}this.closeHelpDialog()}saveChangesToJson(){console.log("Salvando altera\xE7\xF5es:",this.originalData)}handleEscapeKey(){this.isHelpDialogOpen&&this.closeHelpDialog()}handleTabKey(e){if(!this.isHelpDialogOpen)return;let t=document.querySelector('[role="dialog"]');if(!t)return;let o=t.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(o.length===0)return;let m=o[0],v=o[o.length-1];e.shiftKey&&document.activeElement===m?(v.focus(),e.preventDefault()):!e.shiftKey&&document.activeElement===v&&(m.focus(),e.preventDefault())}static \u0275fac=function(t){return new(t||i)(w(J),w(R),w(j))};static \u0275cmp=y({type:i,selectors:[["app-card-veiculo-temperatura"]],hostBindings:function(t,o){t&1&&f("keydown.escape",function(){return o.handleEscapeKey()},!1,F)("keydown.tab",function(v){return o.handleTabKey(v)},!1,F)},decls:5,vars:2,consts:[[1,"pb-28","pt-44"],["class","grid grid-cols-1 md:grid-cols-4 lg:grid-cols-12 lg:flex flex-wrap items-center justify-center gap-4",4,"ngIf"],["class","fixed inset-0 z-50 md:p-4 flex items-center justify-center bg-black bg-opacity-50 overflow-y-scroll","role","dialog","aria-modal","true","aria-labelledby","modal-title",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-4","lg:grid-cols-12","lg:flex","flex-wrap","items-center","justify-center","gap-4"],["class","shadow-2xl p-3 rounded-2xl flex flex-col items-center justify-center cursor-pointer border-2 relative transition-transform duration-300 hover:scale-105 hover:opacity-50","tabindex","0","role","button",3,"ngStyle","click","keydown.enter","keydown.space",4,"ngFor","ngForOf"],["tabindex","0","role","button",1,"shadow-2xl","p-3","rounded-2xl","flex","flex-col","items-center","justify-center","cursor-pointer","border-2","relative","transition-transform","duration-300","hover:scale-105","hover:opacity-50",3,"click","keydown.enter","keydown.space","ngStyle"],["class","absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm","aria-label","Este ve\xEDculo possui coment\xE1rios",4,"ngIf"],["class","absolute top-2 left-2 bg-amber-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm","aria-label","Este ve\xEDculo precisa de troca de \xF3leo",4,"ngIf"],[1,"text-black","font-bold","mb-2","text-3xl"],[1,"p-1.5","rounded-xl","w-full","flex","justify-center","gap-1",2,"background-color","#141416"],["class","w-7 h-7 rounded-full flex items-center justify-center",3,"ngStyle",4,"ngFor","ngForOf"],["aria-label","Este ve\xEDculo possui coment\xE1rios",1,"absolute","-top-2","-right-2","bg-red-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"],["aria-label","Este ve\xEDculo precisa de troca de \xF3leo",1,"absolute","top-2","left-2","bg-amber-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"],[1,"text-xs"],["src","assets/water_drop.svg","alt","Alerta de troca de \xF3leo"],[1,"w-7","h-7","rounded-full","flex","items-center","justify-center",3,"ngStyle"],[3,"src","alt"],["role","dialog","aria-modal","true","aria-labelledby","modal-title",1,"fixed","inset-0","z-50","md:p-4","flex","items-center","justify-center","bg-black","bg-opacity-50","overflow-y-scroll"],[1,"rounded-3xl","shadow-lg","w-max","max-w-[90vw]","h-max","2xl:max-w-[100vw]","2xl:max-h-[100vh]","overflow-y-auto","animate-fade-in","relative",2,"background-color","#141416"],[1,"absolute","right-6","top-6","2xl:top-12","2xl:right-12"],["id","modal-close-button","aria-label","Fechar modal",1,"text-lg","xl:text-4xl","font-semibold","text-gray-500","hover:text-amber-400",3,"click","keydown.enter"],[1,"rounded-3xl","flex","flex-col-reverse","lg:flex-row","justify-center","w-max","2xl:max-w-[100vw]","h-max","2xl:max-h-[100vh]"],[1,"grid","grid-cols-1","md:grid-cols-3","lg:grid-cols-1","lg:flex","lg:flex-col","justify-center","rounded-3xl","gap-3","w-full","2xl:max-h-[100vh]","p-6","2xl:p-24",2,"background-color","#242427"],["class","flex flex-col lg:flex-row justify-between gap-3 2xl:gap-8 p-2 rounded-lg",4,"ngFor","ngForOf"],[1,"p-8","2xl:p-20","flex","flex-col","justify-between","w-full","2xl:max-w-[100vw]","2xl:max-h-[100vh]"],[1,"flex","flex-col","mb-10"],[1,"font-bold","text-2xl","lg:text-4xl","2xl:text-6xl","text-amber-400"],[1,"flex","gap-4","text-sm","2xl:text-2xl","mb-1","font-bold","text-white"],[1,"flex","flex-col","justify-between","gap-6","mb-4"],[1,"text-amber-400","text-md","lg:text-lg","2xl:text-3xl","font-bold","mb-2"],[1,"text-white"],[1,"text-lg","text-white"],[1,"text-amber-400","text-md","lg:text-lg","2xl:text-2xl","font-bold","mb-2",3,"ngClass"],["class","ml-2 text-red-400",4,"ngIf"],[1,"flex","items-center","gap-2"],["class","ml-2 bg-amber-600 text-white text-xs px-2 py-1 rounded hover:bg-amber-700","aria-label","Registrar troca de \xF3leo",3,"click",4,"ngIf"],["class","mt-4 mb-4 w-full bg-gray-800 rounded-lg p-4 border border-gray-700 animate-fade-in",4,"ngIf"],[1,"pt-10"],[1,"w-full","text-gray-300","flex","flex-col","gap-4","pb-6"],[1,"flex","justify-between","py-2","border-b","border-gray-700","2xl:text-2xl"],[3,"ngClass"],["class","flex justify-between py-2 border-b border-gray-700 2xl:text-2xl",4,"ngIf"],["class","mt-4 w-full bg-gray-800 rounded-lg p-4 border border-gray-700",4,"ngIf"],[1,"flex","justify-between","mt-4","gap-4","w-full"],[1,"flex","gap-4"],["aria-label","Cancelar altera\xE7\xF5es",1,"px-4","py-2","bg-gray-600","text-white","rounded-2xl","hover:bg-gray-700","transition","2xl:text-xl",3,"click"],["aria-label","Salvar altera\xE7\xF5es",1,"px-4","py-2","bg-amber-600","text-white","rounded-2xl","hover:bg-amber-700","transition","2xl:text-xl",3,"click"],["title","Gr\xE1fico",1,"px-4","py-2","text-white","rounded-2xl","hover:bg-amber-600","transition","2xl:text-xl",2,"background-color","#242427"],["src","assets/bar_chart.svg","alt","gr\xE1fico",1,"2xl:w-20"],["title","Registros","aria-label","Mostrar registros",1,"px-4","py-4","text-white","rounded-2xl","hover:bg-amber-600","transition","2xl:text-xl","relative",2,"background-color","#242427",3,"click","ngClass"],["src","assets/overview.svg","alt","vis\xE3o geral",1,"2xl:w-20"],["class","absolute -top-2 -right-2 bg-amber-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm",4,"ngIf"],["title","Coment\xE1rios","aria-label","Mostrar coment\xE1rios",1,"px-4","py-4","text-white","rounded-2xl","hover:bg-amber-600","transition","2xl:text-xl","relative",2,"background-color","#242427",3,"click","ngClass"],["src","assets/chat.svg","alt","chat",1,"2xl:w-20"],["class","absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm",4,"ngIf"],[1,"flex","flex-col","lg:flex-row","justify-between","gap-3","2xl:gap-8","p-2","rounded-lg"],[1,"flex","items-center","gap-3","xl:gap-8"],[1,"w-8","h-8","lg:w-14","lg:h-14","2xl:w-20","2xl:h-20","rounded-full","flex","items-center","justify-center",3,"ngStyle"],[1,"w-4","h-4","lg:w-7","lg:h-7","2xl:w-10","2xl:h-10",3,"src","alt"],[1,"flex","flex-col"],[1,"text-white","text-sm","2xl:text-2xl","lg:text-nowrap","font-bold"],[1,"text-amber-500","2xl:text-2xl","font-bold"],[1,"ml-2","text-red-400"],["aria-label","Registrar troca de \xF3leo",1,"ml-2","bg-amber-600","text-white","text-xs","px-2","py-1","rounded","hover:bg-amber-700",3,"click"],[1,"mt-4","mb-4","w-full","bg-gray-800","rounded-lg","p-4","border","border-gray-700","animate-fade-in"],[1,"text-amber-400","text-lg","2xl:text-3xl","font-bold","mb-3"],[1,"flex","flex-col","gap-3"],[1,"flex","gap-3","justify-between","items-center"],[1,"flex","gap-2"],[1,"bg-gray-600","text-white","px-4","py-1","rounded","hover:bg-gray-700",3,"click"],[1,"bg-amber-600","text-white","px-4","py-1","rounded","hover:bg-amber-700",3,"click"],[1,"mt-4","w-full","bg-gray-800","rounded-lg","p-4","border","border-gray-700"],[1,"flex","flex-col","gap-3","max-h-44","overflow-y-auto"],["class","bg-gray-900 p-3 mb-2 rounded-md",4,"ngFor","ngForOf"],[1,"mt-2","flex","gap-2"],["type","text","placeholder","Adicionar coment\xE1rio...",1,"w-full","bg-gray-900","border","border-gray-700","rounded-lg","px-3","py-2","text-white",3,"ngModelChange","ngModel"],[1,"bg-amber-600","text-white","rounded-lg","px-4","py-2","hover:bg-amber-700",3,"click"],[1,"bg-gray-900","p-3","mb-2","rounded-md"],[1,"flex","justify-between","mb-1"],[1,"text-amber-400","font-semibold"],[1,"text-gray-500","text-sm"],["class","text-gray-400 text-center p-4",4,"ngIf"],[1,"text-gray-400","text-center","p-4"],[1,"absolute","-top-2","-right-2","bg-amber-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"],[1,"absolute","-top-2","-right-2","bg-red-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"]],template:function(t,o){t&1&&(u(0,"app-header-dsveiculos"),n(1,"section",0),p(2,Vo,2,1,"div",1),r(),u(3,"app-footer-dsveiculos"),p(4,No,67,35,"div",2)),t&2&&(a(2),s("ngIf",o.veiculos.length>0),a(2),s("ngIf",o.isHelpDialogOpen&&o.selectedVehicle))},dependencies:[V,P,E,S,U,H,G,Y,Z,ee,X],styles:["@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out forwards}.bg-gray-800[_ngcontent-%COMP%]{background-color:#242427}.bg-gray-900[_ngcontent-%COMP%]{background-color:#1a1a1d}.bg-amber-500[_ngcontent-%COMP%]{background-color:#f59e0b}.bg-amber-600[_ngcontent-%COMP%]{background-color:#d97706}.bg-amber-700[_ngcontent-%COMP%]{background-color:#b45309}.hover\\:bg-amber-600[_ngcontent-%COMP%]:hover{background-color:#d97706}button[_ngcontent-%COMP%]:focus, input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{outline:2px solid #F59E0B;outline-offset:2px}button[_ngcontent-%COMP%]{transition:background-color .2s,transform .1s}button[_ngcontent-%COMP%]:active{transform:scale(.98)}"]})}return i})();var ze=i=>({"background-color":i}),Uo=i=>({"text-red-400":i}),Ho=(i,c,e,t)=>({"text-green-400":i,"text-orange-400":c,"text-red-400":e,"text-gray-400":t}),Bo=(i,c)=>({"text-red-400":i,"text-green-400":c}),Xt=i=>({"bg-amber-700":i});function Lo(i,c){if(i&1&&(n(0,"div",11),l(1),r()),i&2){let e=d().$implicit;a(),_(" ",e.comentarios.length," ")}}function $o(i,c){i&1&&(n(0,"div",12)(1,"span",13),u(2,"img",14),r()())}function qo(i,c){if(i&1&&(n(0,"span",15),u(1,"img",16),r()),i&2){let e=c.$implicit,t=c.index,o=d(3);s("ngStyle",C(3,ze,e.cor)),a(),s("src",e.icone,T)("alt",o.getAttributeName(t))}}function zo(i,c){if(i&1){let e=b();n(0,"div",5),f("click",function(){let o=h(e).$implicit,m=d(2);return g(m.openHelpDialog(o))})("keydown.enter",function(){let o=h(e).$implicit,m=d(2);return g(m.openHelpDialog(o))})("keydown.space",function(o){let m=h(e).$implicit;return d(2).openHelpDialog(m),g(o.preventDefault())}),p(1,Lo,2,1,"div",6)(2,$o,3,0,"div",7),n(3,"h3",8),l(4),r(),n(5,"div",9),p(6,qo,2,5,"span",10),r()()}if(i&2){let e=c.$implicit,t=d(2);s("ngStyle",C(6,ze,e.atributos[1].cor+"99")),N("aria-label","Mostrar detalhes do ve\xEDculo "+e.id),a(),s("ngIf",e.comentarios&&e.comentarios.length>0),a(),s("ngIf",t.shouldShowOilChangeAlert(e)),a(2),x(e.id),a(2),s("ngForOf",e.atributos)}}function Ko(i,c){if(i&1&&(n(0,"div",3),p(1,zo,7,8,"div",4),r()),i&2){let e=d();a(),s("ngForOf",e.veiculos)}}function Jo(i,c){if(i&1&&(n(0,"div",55)(1,"div",56)(2,"span",57),u(3,"img",58),r(),n(4,"div",59)(5,"span",60),l(6),r(),n(7,"span",61),l(8,"0"),r()()()()),i&2){let e=c.$implicit,t=c.index,o=d(2);a(2),s("ngStyle",C(4,ze,e.cor)),a(),s("src",e.icone,T)("alt",o.getAttributeName(t)),a(3),x(o.getAttributeName(t))}}function Wo(i,c){i&1&&u(0,"span",62)}function Go(i,c){if(i&1){let e=b();n(0,"button",63),f("click",function(){h(e);let o=d(2);return g(o.toggleOilChangeForm())}),l(1," Registrar troca "),r()}}function Yo(i,c){if(i&1){let e=b();n(0,"div",64)(1,"h4",65),l(2," Registrar Troca de \xD3leo "),r(),n(3,"div",66)(4,"div",67)(5,"p",30),l(6),r(),n(7,"div",68)(8,"button",69),f("click",function(){h(e);let o=d(2);return g(o.toggleOilChangeForm())}),l(9," Cancelar "),r(),n(10,"button",70),f("click",function(){h(e);let o=d(2);return g(o.registrarTrocaOleo())}),l(11," Confirmar "),r()()()()()}if(i&2){let e=d(2);a(6),_(" Confirma a troca de \xF3leo para o ve\xEDculo ",e.selectedVehicle.id,"? ")}}function Zo(i,c){if(i&1&&(n(0,"div",39)(1,"span"),l(2,"UltPedidoID:"),r(),n(3,"span"),l(4),r()()),i&2){let e=d(2);a(4),x(e.selectedVehicle.ultPedidoID)}}function Qo(i,c){if(i&1&&(n(0,"div",39)(1,"span"),l(2,"Integra\xE7\xE3o:"),r(),n(3,"span"),l(4),r()()),i&2){let e=d(2);a(4),x(e.selectedVehicle.ultIntegracao)}}function Xo(i,c){if(i&1&&(n(0,"div",77)(1,"div",78)(2,"span",79),l(3),r(),n(4,"span",80),l(5),r()(),n(6,"p",30),l(7),r()()),i&2){let e=c.$implicit;a(3),x(e.author),a(2),x(e.date),a(2),x(e.text)}}function en(i,c){if(i&1){let e=b();n(0,"div",71)(1,"h4",65),l(2," Coment\xE1rios "),r(),n(3,"div",72),p(4,Xo,8,3,"div",73),r(),n(5,"div",74)(6,"input",75),q("ngModelChange",function(o){h(e);let m=d(2);return $(m.newComment,o)||(m.newComment=o),g(o)}),r(),n(7,"button",76),f("click",function(){h(e);let o=d(2);return g(o.addComment())}),l(8," Enviar "),r()()()}if(i&2){let e=d(2);s("@slideUpDown",e.showComments?"open":"closed"),a(4),s("ngForOf",e.selectedVehicle.comentarios),a(2),L("ngModel",e.newComment)}}function tn(i,c){if(i&1&&(n(0,"div",77)(1,"div",78)(2,"span",79),l(3),r(),n(4,"span",80),l(5),r()(),n(6,"p",30),l(7),r()()),i&2){let e=c.$implicit;a(3),x(e.author),a(2),x(e.date),a(2),x(e.text)}}function on(i,c){i&1&&(n(0,"div",82),l(1," Nenhum registro de troca de \xF3leo encontrado. "),r())}function nn(i,c){if(i&1&&(n(0,"div",71)(1,"h4",65),l(2," Registros "),r(),n(3,"div",72),p(4,tn,8,3,"div",73)(5,on,2,0,"div",81),r()()),i&2){let e=d(2);s("@slideUpDown",e.showOilChangeRecords?"open":"closed"),a(4),s("ngForOf",e.selectedVehicle.trocasOleo),a(),s("ngIf",!e.selectedVehicle.trocasOleo||e.selectedVehicle.trocasOleo.length===0)}}function rn(i,c){if(i&1&&(n(0,"div",83),l(1),r()),i&2){let e=d(2);a(),_(" ",e.selectedVehicle.trocasOleo.length," ")}}function an(i,c){if(i&1&&(n(0,"div",84),l(1),r()),i&2){let e=d(2);a(),_(" ",e.selectedVehicle.comentarios.length," ")}}function ln(i,c){if(i&1){let e=b();n(0,"div",17)(1,"div",18)(2,"div",19)(3,"button",20),f("click",function(){h(e);let o=d();return g(o.closeHelpDialog())})("keydown.enter",function(){h(e);let o=d();return g(o.closeHelpDialog())}),l(4," \u2715 "),r()(),n(5,"div",21)(6,"div",22),p(7,Jo,9,6,"div",23),r(),n(8,"div",24)(9,"div",25)(10,"h3",26),l(11),r(),n(12,"div",27)(13,"span"),l(14,"Euro 5"),r(),n(15,"span"),l(16,"1721"),r()()(),n(17,"div",28)(18,"div")(19,"p",29),l(20," Od\xF4metro: "),n(21,"span",30),l(22),r()(),n(23,"span",31),l(24,"Registro: 24/04/2025 03:00"),r()(),n(25,"div")(26,"p",32),l(27," KM desde \xFAltima troca: "),n(28,"span",30),l(29),r(),p(30,Wo,1,0,"span",33),r(),n(31,"div",34)(32,"span",31),l(33),r(),p(34,Go,2,0,"button",35),r()()(),p(35,Yo,12,1,"div",36),n(36,"div",37)(37,"div",38)(38,"div",39)(39,"span"),l(40,"Status:"),r(),n(41,"span",40),l(42),r()(),p(43,Zo,5,1,"div",41)(44,Qo,5,1,"div",41),n(45,"div",39)(46,"span"),l(47,"Troca de \xD3leo:"),r(),n(48,"span",40),l(49),r()()(),p(50,en,9,3,"div",42)(51,nn,6,3,"div",42),n(52,"div",43)(53,"div",44)(54,"button",45),f("click",function(){h(e);let o=d();return g(o.cancelChanges())}),l(55," Cancelar "),r(),n(56,"button",46),f("click",function(){h(e);let o=d();return g(o.saveChanges())}),l(57," Salvar "),r()(),n(58,"div",44)(59,"button",47),u(60,"img",48),r(),n(61,"button",49),f("click",function(){h(e);let o=d();return g(o.toggleOilChangeRecords())}),u(62,"img",50),p(63,rn,2,1,"div",51),r(),n(64,"button",52),f("click",function(){h(e);let o=d();return g(o.toggleComments())}),u(65,"img",53),p(66,an,2,1,"div",54),r()()()()()()()()}if(i&2){let e=d();a(7),s("ngForOf",e.selectedVehicle.atributos),a(4),_(" ",e.selectedVehicle.id," "),a(11),x(e.selectedVehicle.odoAtual),a(4),s("ngClass",C(21,Uo,e.selectedVehicle.precisaTrocaOleo)),a(3),x(e.selectedVehicle.odoDesdeUltimaTroca||0),a(),s("ngIf",e.selectedVehicle.precisaTrocaOleo),a(3),_("\xDAltima troca de \xF3leo: ",e.selectedVehicle.ultimaTrocaOleo||"N\xE3o registrada",""),a(),s("ngIf",e.selectedVehicle.precisaTrocaOleo),a(),s("ngIf",e.showOilChangeForm),a(6),s("ngClass",K(23,Ho,e.selectedVehicle.status==="OK",e.selectedVehicle.status==="Oficina",e.selectedVehicle.status==="Sem Comunicar",e.selectedVehicle.status==="Inativo")),a(),x(e.selectedVehicle.status),a(),s("ngIf",e.selectedVehicle.ultPedidoID),a(),s("ngIf",e.selectedVehicle.ultIntegracao),a(4),s("ngClass",D(28,Bo,e.selectedVehicle.precisaTrocaOleo,!e.selectedVehicle.precisaTrocaOleo)),a(),_(" ",e.selectedVehicle.precisaTrocaOleo?"Necess\xE1ria":"OK"," "),a(),s("ngIf",e.showComments),a(),s("ngIf",e.showOilChangeRecords),a(10),s("ngClass",C(31,Xt,e.showOilChangeRecords)),a(2),s("ngIf",e.selectedVehicle.trocasOleo&&e.selectedVehicle.trocasOleo.length>0),a(),s("ngClass",C(33,Xt,e.showComments)),a(2),s("ngIf",e.selectedVehicle.comentarios&&e.selectedVehicle.comentarios.length>0)}}var ei=(()=>{class i{http;renderer;cdRef;veiculos=[];selectedVehicle=null;isHelpDialogOpen=!1;originalData=null;originalVehicleState=null;showComments=!1;newComment="";showOilChangeForm=!1;lastOilChangeDate="";showOilChangeRecords=!1;icones=["assets/device_thermostat.svg","assets/shutter_speed_minus.svg","assets/compress.svg","assets/do_not_step.svg","assets/air.svg","assets/speed.svg"];constructor(e,t,o){this.http=e,this.renderer=t,this.cdRef=o}ngOnInit(){console.log("CardVeiculoComponent initialized"),this.loadVehicleData()}loadVehicleData(){this.http.get("assets/mocks/veiculos_mock.json").subscribe({next:e=>{console.log("Data loaded:",e),this.originalData=JSON.parse(JSON.stringify(e)),this.veiculos=e.veiculos.map(t=>M(I({},t),{atributos:t.cores.map((o,m)=>({cor:o,icone:this.icones[m]||""})),comentarios:t.comentarios||[],odoAtual:t.odoAtual||0,ultimaTrocaOleo:t.ultimaTrocaOleo||null,odoNaUltimaTroca:t.odoNaUltimaTroca||0,trocasOleo:t.trocasOleo||[]})),this.veiculos.forEach(t=>{t.atributos.forEach((o,m)=>{o.cor=this.getClosestColorMatch(o.cor)}),this.calcularodoDesdeUltimaTroca(t)})},error:e=>{console.error("Erro ao carregar o JSON:",e)}})}calcularodoDesdeUltimaTroca(e){e.odoAtual&&e.odoNaUltimaTroca?e.odoDesdeUltimaTroca=e.odoAtual-e.odoNaUltimaTroca:e.odoDesdeUltimaTroca=e.odoAtual||0,e.precisaTrocaOleo=e.odoDesdeUltimaTroca>=1e4}registrarTrocaOleo(){if(!this.selectedVehicle)return;let e=new Date,t=`${e.toLocaleDateString("pt-BR")} ${e.getHours()}:${e.getMinutes().toString().padStart(2,"0")}`;this.selectedVehicle.ultimaTrocaOleo=e.toLocaleDateString("pt-BR"),this.selectedVehicle.odoNaUltimaTroca=this.selectedVehicle.odoAtual,this.selectedVehicle.odoDesdeUltimaTroca=0,this.selectedVehicle.precisaTrocaOleo=!1,this.selectedVehicle.trocasOleo||(this.selectedVehicle.trocasOleo=[]),this.selectedVehicle.trocasOleo.unshift({author:"Sistema",date:t,text:`Troca de \xF3leo realizada com od\xF4metro ${this.selectedVehicle.odoAtual}.`}),this.showOilChangeForm=!1,this.showOilChangeRecords=!0,this.cdRef.detectChanges()}toggleOilChangeForm(){this.showOilChangeForm=!this.showOilChangeForm}toggleOilChangeRecords(){this.showOilChangeRecords=!this.showOilChangeRecords,this.showOilChangeRecords&&(this.showComments=!1,this.selectedVehicle.trocasOleo||(this.selectedVehicle.trocasOleo=[]),this.cdRef.detectChanges())}shouldShowOilChangeAlert(e){return e.precisaTrocaOleo===!0}getClosestColorMatch(e){let t=this.getAllAttributeColors();return t.includes(e)?e:t[0]}getBackgroundColor(e){switch(e){case"OK":return"white";case"Oficina":return"#FF9858";case"Sem Comunicar":return"#E25652";case"Inativo":return"#B9B9B9";default:return"white"}}getIconPath(e){return this.icones[e]||""}getAttributeName(e){return["Temperatura","Torque","Press\xE3o Turbina","Pedal","Ar Comprimido","Max. Velocidade"][e]||`Atributo ${e+1}`}getColorOptions(){return[{label:"Inativo",value:"#242427"},{label:"Verde",value:"#387E38"},{label:"Laranja",value:"#F56B15"},{label:"Vermelho",value:"#AE2724"},{label:"Roxo",value:"#6224AE"}]}openHelpDialog(e){this.selectedVehicle=JSON.parse(JSON.stringify(e)),this.originalVehicleState=JSON.parse(JSON.stringify(e)),this.selectedVehicle.atributos.forEach(t=>{t.cor=this.getClosestColorMatch(t.cor)}),this.selectedVehicle.comentarios||(this.selectedVehicle.comentarios=[]),this.selectedVehicle.trocasOleo||(this.selectedVehicle.trocasOleo=[]),this.isHelpDialogOpen=!0,this.renderer.addClass(document.body,"overflow-hidden"),this.showComments=!1,this.showOilChangeRecords=!1,this.showOilChangeForm=!1,this.newComment="",setTimeout(()=>{let t=document.querySelector("#modal-close-button");t&&t.focus()},100)}closeHelpDialog(){this.isHelpDialogOpen=!1,this.renderer.removeClass(document.body,"overflow-hidden"),this.selectedVehicle=null,this.originalVehicleState=null,this.showComments=!1,this.showOilChangeForm=!1,this.showOilChangeRecords=!1,this.newComment=""}toggleComments(){this.showComments=!this.showComments,this.showComments&&(this.showOilChangeRecords=!1,this.cdRef.detectChanges())}addComment(){if(this.newComment.trim()&&this.selectedVehicle){let e=new Date,t=`${e.toLocaleDateString("pt-BR")} ${e.getHours()}:${e.getMinutes().toString().padStart(2,"0")}`;this.selectedVehicle.comentarios||(this.selectedVehicle.comentarios=[]),this.selectedVehicle.comentarios.unshift({author:"Usu\xE1rio Atual",date:t,text:this.newComment.trim()});let o=this.veiculos.findIndex(m=>m.id===this.selectedVehicle.id);o!==-1&&(this.veiculos[o].comentarios||(this.veiculos[o].comentarios=[]),this.veiculos[o].comentarios=[...this.selectedVehicle.comentarios]),this.newComment="",this.cdRef.detectChanges()}}getAllAttributeColors(){return this.getColorOptions().map(e=>e.value)}updateAttributeColor(e,t){if(!this.selectedVehicle)return;let m=t.target.value;this.selectedVehicle.atributos[e].cor=m}cancelChanges(){this.closeHelpDialog()}saveChanges(){if(this.selectedVehicle){let e=this.veiculos.findIndex(t=>t.id===this.selectedVehicle.id);e!==-1&&(this.veiculos[e].atributos.forEach((t,o)=>{o<this.selectedVehicle.atributos.length&&(t.cor=this.selectedVehicle.atributos[o].cor)}),this.veiculos[e].comentarios=[...this.selectedVehicle.comentarios],this.veiculos[e].trocasOleo=[...this.selectedVehicle.trocasOleo||[]],this.veiculos[e].ultimaTrocaOleo=this.selectedVehicle.ultimaTrocaOleo,this.veiculos[e].odoNaUltimaTroca=this.selectedVehicle.odoNaUltimaTroca,this.veiculos[e].odoDesdeUltimaTroca=this.selectedVehicle.odoDesdeUltimaTroca,this.veiculos[e].precisaTrocaOleo=this.selectedVehicle.precisaTrocaOleo,this.originalData&&this.originalData.veiculos&&this.originalData.veiculos[e]&&(this.originalData.veiculos[e].cores&&this.selectedVehicle.atributos.forEach((t,o)=>{o<this.originalData.veiculos[e].cores.length&&(this.originalData.veiculos[e].cores[o]=t.cor)}),this.originalData.veiculos[e].comentarios=[...this.selectedVehicle.comentarios],this.originalData.veiculos[e].trocasOleo=[...this.selectedVehicle.trocasOleo||[]],this.originalData.veiculos[e].ultimaTrocaOleo=this.selectedVehicle.ultimaTrocaOleo,this.originalData.veiculos[e].odoNaUltimaTroca=this.selectedVehicle.odoNaUltimaTroca),this.calcularodoDesdeUltimaTroca(this.veiculos[e]),this.saveChangesToJson())}this.closeHelpDialog()}saveChangesToJson(){console.log("Salvando altera\xE7\xF5es:",this.originalData)}handleEscapeKey(){this.isHelpDialogOpen&&this.closeHelpDialog()}handleTabKey(e){if(!this.isHelpDialogOpen)return;let t=document.querySelector('[role="dialog"]');if(!t)return;let o=t.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(o.length===0)return;let m=o[0],v=o[o.length-1];e.shiftKey&&document.activeElement===m?(v.focus(),e.preventDefault()):!e.shiftKey&&document.activeElement===v&&(m.focus(),e.preventDefault())}static \u0275fac=function(t){return new(t||i)(w(J),w(R),w(j))};static \u0275cmp=y({type:i,selectors:[["app-card-veiculo-torque"]],hostBindings:function(t,o){t&1&&f("keydown.escape",function(){return o.handleEscapeKey()},!1,F)("keydown.tab",function(v){return o.handleTabKey(v)},!1,F)},decls:5,vars:2,consts:[[1,"pb-28","pt-44"],["class","grid grid-cols-1 md:grid-cols-4 lg:grid-cols-12 lg:flex flex-wrap items-center justify-center gap-4",4,"ngIf"],["class","fixed inset-0 z-50 md:p-4 flex items-center justify-center bg-black bg-opacity-50 overflow-y-scroll","role","dialog","aria-modal","true","aria-labelledby","modal-title",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-4","lg:grid-cols-12","lg:flex","flex-wrap","items-center","justify-center","gap-4"],["class","shadow-2xl p-3 rounded-2xl flex flex-col items-center justify-center cursor-pointer border-2 relative transition-transform duration-300 hover:scale-105 hover:opacity-50","tabindex","0","role","button",3,"ngStyle","click","keydown.enter","keydown.space",4,"ngFor","ngForOf"],["tabindex","0","role","button",1,"shadow-2xl","p-3","rounded-2xl","flex","flex-col","items-center","justify-center","cursor-pointer","border-2","relative","transition-transform","duration-300","hover:scale-105","hover:opacity-50",3,"click","keydown.enter","keydown.space","ngStyle"],["class","absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm","aria-label","Este ve\xEDculo possui coment\xE1rios",4,"ngIf"],["class","absolute top-2 left-2 bg-amber-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm","aria-label","Este ve\xEDculo precisa de troca de \xF3leo",4,"ngIf"],[1,"text-black","font-bold","mb-2","text-3xl"],[1,"p-1.5","rounded-xl","w-full","flex","justify-center","gap-1",2,"background-color","#141416"],["class","w-7 h-7 rounded-full flex items-center justify-center",3,"ngStyle",4,"ngFor","ngForOf"],["aria-label","Este ve\xEDculo possui coment\xE1rios",1,"absolute","-top-2","-right-2","bg-red-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"],["aria-label","Este ve\xEDculo precisa de troca de \xF3leo",1,"absolute","top-2","left-2","bg-amber-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"],[1,"text-xs"],["src","assets/water_drop.svg","alt","Alerta de troca de \xF3leo"],[1,"w-7","h-7","rounded-full","flex","items-center","justify-center",3,"ngStyle"],[3,"src","alt"],["role","dialog","aria-modal","true","aria-labelledby","modal-title",1,"fixed","inset-0","z-50","md:p-4","flex","items-center","justify-center","bg-black","bg-opacity-50","overflow-y-scroll"],[1,"rounded-3xl","shadow-lg","w-max","max-w-[90vw]","h-max","2xl:max-w-[100vw]","2xl:max-h-[100vh]","overflow-y-auto","animate-fade-in","relative",2,"background-color","#141416"],[1,"absolute","right-6","top-6","2xl:top-12","2xl:right-12"],["id","modal-close-button","aria-label","Fechar modal",1,"text-lg","xl:text-4xl","font-semibold","text-gray-500","hover:text-amber-400",3,"click","keydown.enter"],[1,"rounded-3xl","flex","flex-col-reverse","lg:flex-row","justify-center","w-max","2xl:max-w-[100vw]","h-max","2xl:max-h-[100vh]"],[1,"grid","grid-cols-1","md:grid-cols-3","lg:grid-cols-1","lg:flex","lg:flex-col","justify-center","rounded-3xl","gap-3","w-full","2xl:max-h-[100vh]","p-6","2xl:p-24",2,"background-color","#242427"],["class","flex flex-col lg:flex-row justify-between gap-3 2xl:gap-8 p-2 rounded-lg",4,"ngFor","ngForOf"],[1,"p-8","2xl:p-20","flex","flex-col","justify-between","w-full","2xl:max-w-[100vw]","2xl:max-h-[100vh]"],[1,"flex","flex-col","mb-10"],[1,"font-bold","text-2xl","lg:text-4xl","2xl:text-6xl","text-amber-400"],[1,"flex","gap-4","text-sm","2xl:text-2xl","mb-1","font-bold","text-white"],[1,"flex","flex-col","justify-between","gap-6","mb-4"],[1,"text-amber-400","text-md","lg:text-lg","2xl:text-3xl","font-bold","mb-2"],[1,"text-white"],[1,"text-lg","text-white"],[1,"text-amber-400","text-md","lg:text-lg","2xl:text-2xl","font-bold","mb-2",3,"ngClass"],["class","ml-2 text-red-400",4,"ngIf"],[1,"flex","items-center","gap-2"],["class","ml-2 bg-amber-600 text-white text-xs px-2 py-1 rounded hover:bg-amber-700","aria-label","Registrar troca de \xF3leo",3,"click",4,"ngIf"],["class","mt-4 mb-4 w-full bg-gray-800 rounded-lg p-4 border border-gray-700 animate-fade-in",4,"ngIf"],[1,"pt-10"],[1,"w-full","text-gray-300","flex","flex-col","gap-4","pb-6"],[1,"flex","justify-between","py-2","border-b","border-gray-700","2xl:text-2xl"],[3,"ngClass"],["class","flex justify-between py-2 border-b border-gray-700 2xl:text-2xl",4,"ngIf"],["class","mt-4 w-full bg-gray-800 rounded-lg p-4 border border-gray-700",4,"ngIf"],[1,"flex","justify-between","mt-4","gap-4","w-full"],[1,"flex","gap-4"],["aria-label","Cancelar altera\xE7\xF5es",1,"px-4","py-2","bg-gray-600","text-white","rounded-2xl","hover:bg-gray-700","transition","2xl:text-xl",3,"click"],["aria-label","Salvar altera\xE7\xF5es",1,"px-4","py-2","bg-amber-600","text-white","rounded-2xl","hover:bg-amber-700","transition","2xl:text-xl",3,"click"],["title","Gr\xE1fico",1,"px-4","py-2","text-white","rounded-2xl","hover:bg-amber-600","transition","2xl:text-xl",2,"background-color","#242427"],["src","assets/bar_chart.svg","alt","gr\xE1fico",1,"2xl:w-20"],["title","Registros","aria-label","Mostrar registros",1,"px-4","py-4","text-white","rounded-2xl","hover:bg-amber-600","transition","2xl:text-xl","relative",2,"background-color","#242427",3,"click","ngClass"],["src","assets/overview.svg","alt","vis\xE3o geral",1,"2xl:w-20"],["class","absolute -top-2 -right-2 bg-amber-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm",4,"ngIf"],["title","Coment\xE1rios","aria-label","Mostrar coment\xE1rios",1,"px-4","py-4","text-white","rounded-2xl","hover:bg-amber-600","transition","2xl:text-xl","relative",2,"background-color","#242427",3,"click","ngClass"],["src","assets/chat.svg","alt","chat",1,"2xl:w-20"],["class","absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm",4,"ngIf"],[1,"flex","flex-col","lg:flex-row","justify-between","gap-3","2xl:gap-8","p-2","rounded-lg"],[1,"flex","items-center","gap-3","xl:gap-8"],[1,"w-8","h-8","lg:w-14","lg:h-14","2xl:w-20","2xl:h-20","rounded-full","flex","items-center","justify-center",3,"ngStyle"],[1,"w-4","h-4","lg:w-7","lg:h-7","2xl:w-10","2xl:h-10",3,"src","alt"],[1,"flex","flex-col"],[1,"text-white","text-sm","2xl:text-2xl","lg:text-nowrap","font-bold"],[1,"text-amber-500","2xl:text-2xl","font-bold"],[1,"ml-2","text-red-400"],["aria-label","Registrar troca de \xF3leo",1,"ml-2","bg-amber-600","text-white","text-xs","px-2","py-1","rounded","hover:bg-amber-700",3,"click"],[1,"mt-4","mb-4","w-full","bg-gray-800","rounded-lg","p-4","border","border-gray-700","animate-fade-in"],[1,"text-amber-400","text-lg","2xl:text-3xl","font-bold","mb-3"],[1,"flex","flex-col","gap-3"],[1,"flex","gap-3","justify-between","items-center"],[1,"flex","gap-2"],[1,"bg-gray-600","text-white","px-4","py-1","rounded","hover:bg-gray-700",3,"click"],[1,"bg-amber-600","text-white","px-4","py-1","rounded","hover:bg-amber-700",3,"click"],[1,"mt-4","w-full","bg-gray-800","rounded-lg","p-4","border","border-gray-700"],[1,"flex","flex-col","gap-3","max-h-44","overflow-y-auto"],["class","bg-gray-900 p-3 mb-2 rounded-md",4,"ngFor","ngForOf"],[1,"mt-2","flex","gap-2"],["type","text","placeholder","Adicionar coment\xE1rio...",1,"w-full","bg-gray-900","border","border-gray-700","rounded-lg","px-3","py-2","text-white",3,"ngModelChange","ngModel"],[1,"bg-amber-600","text-white","rounded-lg","px-4","py-2","hover:bg-amber-700",3,"click"],[1,"bg-gray-900","p-3","mb-2","rounded-md"],[1,"flex","justify-between","mb-1"],[1,"text-amber-400","font-semibold"],[1,"text-gray-500","text-sm"],["class","text-gray-400 text-center p-4",4,"ngIf"],[1,"text-gray-400","text-center","p-4"],[1,"absolute","-top-2","-right-2","bg-amber-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"],[1,"absolute","-top-2","-right-2","bg-red-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"]],template:function(t,o){t&1&&(u(0,"app-header-dsveiculos"),n(1,"section",0),p(2,Ko,2,1,"div",1),r(),u(3,"app-footer-dsveiculos"),p(4,ln,67,35,"div",2)),t&2&&(a(2),s("ngIf",o.veiculos.length>0),a(2),s("ngIf",o.isHelpDialogOpen&&o.selectedVehicle))},dependencies:[V,P,E,S,U,H,G,Y,Z,ee,X],styles:["@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out forwards}.bg-gray-800[_ngcontent-%COMP%]{background-color:#242427}.bg-gray-900[_ngcontent-%COMP%]{background-color:#1a1a1d}.bg-amber-500[_ngcontent-%COMP%]{background-color:#f59e0b}.bg-amber-600[_ngcontent-%COMP%]{background-color:#d97706}.bg-amber-700[_ngcontent-%COMP%]{background-color:#b45309}.hover\\:bg-amber-600[_ngcontent-%COMP%]:hover{background-color:#d97706}button[_ngcontent-%COMP%]:focus, input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{outline:2px solid #F59E0B;outline-offset:2px}button[_ngcontent-%COMP%]{transition:background-color .2s,transform .1s}button[_ngcontent-%COMP%]:active{transform:scale(.98)}"]})}return i})();var Ke=i=>({"background-color":i}),sn=i=>({"text-red-400":i}),cn=(i,c,e,t)=>({"text-green-400":i,"text-orange-400":c,"text-red-400":e,"text-gray-400":t}),dn=(i,c)=>({"text-red-400":i,"text-green-400":c}),ti=i=>({"bg-amber-700":i});function mn(i,c){if(i&1&&(n(0,"div",11),l(1),r()),i&2){let e=d().$implicit;a(),_(" ",e.comentarios.length," ")}}function un(i,c){i&1&&(n(0,"div",12)(1,"span",13),u(2,"img",14),r()())}function pn(i,c){if(i&1&&(n(0,"span",15),u(1,"img",16),r()),i&2){let e=c.$implicit,t=c.index,o=d(3);s("ngStyle",C(3,Ke,e.cor)),a(),s("src",e.icone,T)("alt",o.getAttributeName(t))}}function hn(i,c){if(i&1){let e=b();n(0,"div",5),f("click",function(){let o=h(e).$implicit,m=d(2);return g(m.openHelpDialog(o))})("keydown.enter",function(){let o=h(e).$implicit,m=d(2);return g(m.openHelpDialog(o))})("keydown.space",function(o){let m=h(e).$implicit;return d(2).openHelpDialog(m),g(o.preventDefault())}),p(1,mn,2,1,"div",6)(2,un,3,0,"div",7),n(3,"h3",8),l(4),r(),n(5,"div",9),p(6,pn,2,5,"span",10),r()()}if(i&2){let e=c.$implicit,t=d(2);s("ngStyle",C(6,Ke,e.atributos[2].cor+"99")),N("aria-label","Mostrar detalhes do ve\xEDculo "+e.id),a(),s("ngIf",e.comentarios&&e.comentarios.length>0),a(),s("ngIf",t.shouldShowOilChangeAlert(e)),a(2),x(e.id),a(2),s("ngForOf",e.atributos)}}function gn(i,c){if(i&1&&(n(0,"div",3),p(1,hn,7,8,"div",4),r()),i&2){let e=d();a(),s("ngForOf",e.veiculos)}}function xn(i,c){if(i&1&&(n(0,"div",55)(1,"div",56)(2,"span",57),u(3,"img",58),r(),n(4,"div",59)(5,"span",60),l(6),r(),n(7,"span",61),l(8,"0"),r()()()()),i&2){let e=c.$implicit,t=c.index,o=d(2);a(2),s("ngStyle",C(4,Ke,e.cor)),a(),s("src",e.icone,T)("alt",o.getAttributeName(t)),a(3),x(o.getAttributeName(t))}}function fn(i,c){i&1&&u(0,"span",62)}function vn(i,c){if(i&1){let e=b();n(0,"button",63),f("click",function(){h(e);let o=d(2);return g(o.toggleOilChangeForm())}),l(1," Registrar troca "),r()}}function _n(i,c){if(i&1){let e=b();n(0,"div",64)(1,"h4",65),l(2," Registrar Troca de \xD3leo "),r(),n(3,"div",66)(4,"div",67)(5,"p",30),l(6),r(),n(7,"div",68)(8,"button",69),f("click",function(){h(e);let o=d(2);return g(o.toggleOilChangeForm())}),l(9," Cancelar "),r(),n(10,"button",70),f("click",function(){h(e);let o=d(2);return g(o.registrarTrocaOleo())}),l(11," Confirmar "),r()()()()()}if(i&2){let e=d(2);a(6),_(" Confirma a troca de \xF3leo para o ve\xEDculo ",e.selectedVehicle.id,"? ")}}function bn(i,c){if(i&1&&(n(0,"div",39)(1,"span"),l(2,"UltPedidoID:"),r(),n(3,"span"),l(4),r()()),i&2){let e=d(2);a(4),x(e.selectedVehicle.ultPedidoID)}}function Cn(i,c){if(i&1&&(n(0,"div",39)(1,"span"),l(2,"Integra\xE7\xE3o:"),r(),n(3,"span"),l(4),r()()),i&2){let e=d(2);a(4),x(e.selectedVehicle.ultIntegracao)}}function wn(i,c){if(i&1&&(n(0,"div",77)(1,"div",78)(2,"span",79),l(3),r(),n(4,"span",80),l(5),r()(),n(6,"p",30),l(7),r()()),i&2){let e=c.$implicit;a(3),x(e.author),a(2),x(e.date),a(2),x(e.text)}}function yn(i,c){if(i&1){let e=b();n(0,"div",71)(1,"h4",65),l(2," Coment\xE1rios "),r(),n(3,"div",72),p(4,wn,8,3,"div",73),r(),n(5,"div",74)(6,"input",75),q("ngModelChange",function(o){h(e);let m=d(2);return $(m.newComment,o)||(m.newComment=o),g(o)}),r(),n(7,"button",76),f("click",function(){h(e);let o=d(2);return g(o.addComment())}),l(8," Enviar "),r()()()}if(i&2){let e=d(2);s("@slideUpDown",e.showComments?"open":"closed"),a(4),s("ngForOf",e.selectedVehicle.comentarios),a(2),L("ngModel",e.newComment)}}function Vn(i,c){if(i&1&&(n(0,"div",77)(1,"div",78)(2,"span",79),l(3),r(),n(4,"span",80),l(5),r()(),n(6,"p",30),l(7),r()()),i&2){let e=c.$implicit;a(3),x(e.author),a(2),x(e.date),a(2),x(e.text)}}function Sn(i,c){i&1&&(n(0,"div",82),l(1," Nenhum registro de troca de \xF3leo encontrado. "),r())}function On(i,c){if(i&1&&(n(0,"div",71)(1,"h4",65),l(2," Registros "),r(),n(3,"div",72),p(4,Vn,8,3,"div",73)(5,Sn,2,0,"div",81),r()()),i&2){let e=d(2);s("@slideUpDown",e.showOilChangeRecords?"open":"closed"),a(4),s("ngForOf",e.selectedVehicle.trocasOleo),a(),s("ngIf",!e.selectedVehicle.trocasOleo||e.selectedVehicle.trocasOleo.length===0)}}function En(i,c){if(i&1&&(n(0,"div",83),l(1),r()),i&2){let e=d(2);a(),_(" ",e.selectedVehicle.trocasOleo.length," ")}}function Tn(i,c){if(i&1&&(n(0,"div",84),l(1),r()),i&2){let e=d(2);a(),_(" ",e.selectedVehicle.comentarios.length," ")}}function kn(i,c){if(i&1){let e=b();n(0,"div",17)(1,"div",18)(2,"div",19)(3,"button",20),f("click",function(){h(e);let o=d();return g(o.closeHelpDialog())})("keydown.enter",function(){h(e);let o=d();return g(o.closeHelpDialog())}),l(4," \u2715 "),r()(),n(5,"div",21)(6,"div",22),p(7,xn,9,6,"div",23),r(),n(8,"div",24)(9,"div",25)(10,"h3",26),l(11),r(),n(12,"div",27)(13,"span"),l(14,"Euro 5"),r(),n(15,"span"),l(16,"1721"),r()()(),n(17,"div",28)(18,"div")(19,"p",29),l(20," Od\xF4metro: "),n(21,"span",30),l(22),r()(),n(23,"span",31),l(24,"Registro: 24/04/2025 03:00"),r()(),n(25,"div")(26,"p",32),l(27," KM desde \xFAltima troca: "),n(28,"span",30),l(29),r(),p(30,fn,1,0,"span",33),r(),n(31,"div",34)(32,"span",31),l(33),r(),p(34,vn,2,0,"button",35),r()()(),p(35,_n,12,1,"div",36),n(36,"div",37)(37,"div",38)(38,"div",39)(39,"span"),l(40,"Status:"),r(),n(41,"span",40),l(42),r()(),p(43,bn,5,1,"div",41)(44,Cn,5,1,"div",41),n(45,"div",39)(46,"span"),l(47,"Troca de \xD3leo:"),r(),n(48,"span",40),l(49),r()()(),p(50,yn,9,3,"div",42)(51,On,6,3,"div",42),n(52,"div",43)(53,"div",44)(54,"button",45),f("click",function(){h(e);let o=d();return g(o.cancelChanges())}),l(55," Cancelar "),r(),n(56,"button",46),f("click",function(){h(e);let o=d();return g(o.saveChanges())}),l(57," Salvar "),r()(),n(58,"div",44)(59,"button",47),u(60,"img",48),r(),n(61,"button",49),f("click",function(){h(e);let o=d();return g(o.toggleOilChangeRecords())}),u(62,"img",50),p(63,En,2,1,"div",51),r(),n(64,"button",52),f("click",function(){h(e);let o=d();return g(o.toggleComments())}),u(65,"img",53),p(66,Tn,2,1,"div",54),r()()()()()()()()}if(i&2){let e=d();a(7),s("ngForOf",e.selectedVehicle.atributos),a(4),_(" ",e.selectedVehicle.id," "),a(11),x(e.selectedVehicle.odoAtual),a(4),s("ngClass",C(21,sn,e.selectedVehicle.precisaTrocaOleo)),a(3),x(e.selectedVehicle.odoDesdeUltimaTroca||0),a(),s("ngIf",e.selectedVehicle.precisaTrocaOleo),a(3),_("\xDAltima troca de \xF3leo: ",e.selectedVehicle.ultimaTrocaOleo||"N\xE3o registrada",""),a(),s("ngIf",e.selectedVehicle.precisaTrocaOleo),a(),s("ngIf",e.showOilChangeForm),a(6),s("ngClass",K(23,cn,e.selectedVehicle.status==="OK",e.selectedVehicle.status==="Oficina",e.selectedVehicle.status==="Sem Comunicar",e.selectedVehicle.status==="Inativo")),a(),x(e.selectedVehicle.status),a(),s("ngIf",e.selectedVehicle.ultPedidoID),a(),s("ngIf",e.selectedVehicle.ultIntegracao),a(4),s("ngClass",D(28,dn,e.selectedVehicle.precisaTrocaOleo,!e.selectedVehicle.precisaTrocaOleo)),a(),_(" ",e.selectedVehicle.precisaTrocaOleo?"Necess\xE1ria":"OK"," "),a(),s("ngIf",e.showComments),a(),s("ngIf",e.showOilChangeRecords),a(10),s("ngClass",C(31,ti,e.showOilChangeRecords)),a(2),s("ngIf",e.selectedVehicle.trocasOleo&&e.selectedVehicle.trocasOleo.length>0),a(),s("ngClass",C(33,ti,e.showComments)),a(2),s("ngIf",e.selectedVehicle.comentarios&&e.selectedVehicle.comentarios.length>0)}}var ii=(()=>{class i{http;renderer;cdRef;veiculos=[];selectedVehicle=null;isHelpDialogOpen=!1;originalData=null;originalVehicleState=null;showComments=!1;newComment="";showOilChangeForm=!1;lastOilChangeDate="";showOilChangeRecords=!1;icones=["assets/device_thermostat.svg","assets/shutter_speed_minus.svg","assets/compress.svg","assets/do_not_step.svg","assets/air.svg","assets/speed.svg"];constructor(e,t,o){this.http=e,this.renderer=t,this.cdRef=o}ngOnInit(){console.log("CardVeiculoComponent initialized"),this.loadVehicleData()}loadVehicleData(){this.http.get("assets/mocks/veiculos_mock.json").subscribe({next:e=>{console.log("Data loaded:",e),this.originalData=JSON.parse(JSON.stringify(e)),this.veiculos=e.veiculos.map(t=>M(I({},t),{atributos:t.cores.map((o,m)=>({cor:o,icone:this.icones[m]||""})),comentarios:t.comentarios||[],odoAtual:t.odoAtual||0,ultimaTrocaOleo:t.ultimaTrocaOleo||null,odoNaUltimaTroca:t.odoNaUltimaTroca||0,trocasOleo:t.trocasOleo||[]})),this.veiculos.forEach(t=>{t.atributos.forEach((o,m)=>{o.cor=this.getClosestColorMatch(o.cor)}),this.calcularodoDesdeUltimaTroca(t)})},error:e=>{console.error("Erro ao carregar o JSON:",e)}})}calcularodoDesdeUltimaTroca(e){e.odoAtual&&e.odoNaUltimaTroca?e.odoDesdeUltimaTroca=e.odoAtual-e.odoNaUltimaTroca:e.odoDesdeUltimaTroca=e.odoAtual||0,e.precisaTrocaOleo=e.odoDesdeUltimaTroca>=1e4}registrarTrocaOleo(){if(!this.selectedVehicle)return;let e=new Date,t=`${e.toLocaleDateString("pt-BR")} ${e.getHours()}:${e.getMinutes().toString().padStart(2,"0")}`;this.selectedVehicle.ultimaTrocaOleo=e.toLocaleDateString("pt-BR"),this.selectedVehicle.odoNaUltimaTroca=this.selectedVehicle.odoAtual,this.selectedVehicle.odoDesdeUltimaTroca=0,this.selectedVehicle.precisaTrocaOleo=!1,this.selectedVehicle.trocasOleo||(this.selectedVehicle.trocasOleo=[]),this.selectedVehicle.trocasOleo.unshift({author:"Sistema",date:t,text:`Troca de \xF3leo realizada com od\xF4metro ${this.selectedVehicle.odoAtual}.`}),this.showOilChangeForm=!1,this.showOilChangeRecords=!0,this.cdRef.detectChanges()}toggleOilChangeForm(){this.showOilChangeForm=!this.showOilChangeForm}toggleOilChangeRecords(){this.showOilChangeRecords=!this.showOilChangeRecords,this.showOilChangeRecords&&(this.showComments=!1,this.selectedVehicle.trocasOleo||(this.selectedVehicle.trocasOleo=[]),this.cdRef.detectChanges())}shouldShowOilChangeAlert(e){return e.precisaTrocaOleo===!0}getClosestColorMatch(e){let t=this.getAllAttributeColors();return t.includes(e)?e:t[0]}getBackgroundColor(e){switch(e){case"OK":return"white";case"Oficina":return"#FF9858";case"Sem Comunicar":return"#E25652";case"Inativo":return"#B9B9B9";default:return"white"}}getIconPath(e){return this.icones[e]||""}getAttributeName(e){return["Temperatura","Torque","Press\xE3o Turbina","Pedal","Ar Comprimido","Max. Velocidade"][e]||`Atributo ${e+1}`}getColorOptions(){return[{label:"Inativo",value:"#242427"},{label:"Verde",value:"#387E38"},{label:"Laranja",value:"#F56B15"},{label:"Vermelho",value:"#AE2724"},{label:"Roxo",value:"#6224AE"}]}openHelpDialog(e){this.selectedVehicle=JSON.parse(JSON.stringify(e)),this.originalVehicleState=JSON.parse(JSON.stringify(e)),this.selectedVehicle.atributos.forEach(t=>{t.cor=this.getClosestColorMatch(t.cor)}),this.selectedVehicle.comentarios||(this.selectedVehicle.comentarios=[]),this.selectedVehicle.trocasOleo||(this.selectedVehicle.trocasOleo=[]),this.isHelpDialogOpen=!0,this.renderer.addClass(document.body,"overflow-hidden"),this.showComments=!1,this.showOilChangeRecords=!1,this.showOilChangeForm=!1,this.newComment="",setTimeout(()=>{let t=document.querySelector("#modal-close-button");t&&t.focus()},100)}closeHelpDialog(){this.isHelpDialogOpen=!1,this.renderer.removeClass(document.body,"overflow-hidden"),this.selectedVehicle=null,this.originalVehicleState=null,this.showComments=!1,this.showOilChangeForm=!1,this.showOilChangeRecords=!1,this.newComment=""}toggleComments(){this.showComments=!this.showComments,this.showComments&&(this.showOilChangeRecords=!1,this.cdRef.detectChanges())}addComment(){if(this.newComment.trim()&&this.selectedVehicle){let e=new Date,t=`${e.toLocaleDateString("pt-BR")} ${e.getHours()}:${e.getMinutes().toString().padStart(2,"0")}`;this.selectedVehicle.comentarios||(this.selectedVehicle.comentarios=[]),this.selectedVehicle.comentarios.unshift({author:"Usu\xE1rio Atual",date:t,text:this.newComment.trim()});let o=this.veiculos.findIndex(m=>m.id===this.selectedVehicle.id);o!==-1&&(this.veiculos[o].comentarios||(this.veiculos[o].comentarios=[]),this.veiculos[o].comentarios=[...this.selectedVehicle.comentarios]),this.newComment="",this.cdRef.detectChanges()}}getAllAttributeColors(){return this.getColorOptions().map(e=>e.value)}updateAttributeColor(e,t){if(!this.selectedVehicle)return;let m=t.target.value;this.selectedVehicle.atributos[e].cor=m}cancelChanges(){this.closeHelpDialog()}saveChanges(){if(this.selectedVehicle){let e=this.veiculos.findIndex(t=>t.id===this.selectedVehicle.id);e!==-1&&(this.veiculos[e].atributos.forEach((t,o)=>{o<this.selectedVehicle.atributos.length&&(t.cor=this.selectedVehicle.atributos[o].cor)}),this.veiculos[e].comentarios=[...this.selectedVehicle.comentarios],this.veiculos[e].trocasOleo=[...this.selectedVehicle.trocasOleo||[]],this.veiculos[e].ultimaTrocaOleo=this.selectedVehicle.ultimaTrocaOleo,this.veiculos[e].odoNaUltimaTroca=this.selectedVehicle.odoNaUltimaTroca,this.veiculos[e].odoDesdeUltimaTroca=this.selectedVehicle.odoDesdeUltimaTroca,this.veiculos[e].precisaTrocaOleo=this.selectedVehicle.precisaTrocaOleo,this.originalData&&this.originalData.veiculos&&this.originalData.veiculos[e]&&(this.originalData.veiculos[e].cores&&this.selectedVehicle.atributos.forEach((t,o)=>{o<this.originalData.veiculos[e].cores.length&&(this.originalData.veiculos[e].cores[o]=t.cor)}),this.originalData.veiculos[e].comentarios=[...this.selectedVehicle.comentarios],this.originalData.veiculos[e].trocasOleo=[...this.selectedVehicle.trocasOleo||[]],this.originalData.veiculos[e].ultimaTrocaOleo=this.selectedVehicle.ultimaTrocaOleo,this.originalData.veiculos[e].odoNaUltimaTroca=this.selectedVehicle.odoNaUltimaTroca),this.calcularodoDesdeUltimaTroca(this.veiculos[e]),this.saveChangesToJson())}this.closeHelpDialog()}saveChangesToJson(){console.log("Salvando altera\xE7\xF5es:",this.originalData)}handleEscapeKey(){this.isHelpDialogOpen&&this.closeHelpDialog()}handleTabKey(e){if(!this.isHelpDialogOpen)return;let t=document.querySelector('[role="dialog"]');if(!t)return;let o=t.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(o.length===0)return;let m=o[0],v=o[o.length-1];e.shiftKey&&document.activeElement===m?(v.focus(),e.preventDefault()):!e.shiftKey&&document.activeElement===v&&(m.focus(),e.preventDefault())}static \u0275fac=function(t){return new(t||i)(w(J),w(R),w(j))};static \u0275cmp=y({type:i,selectors:[["app-card-veiculo-turbina"]],hostBindings:function(t,o){t&1&&f("keydown.escape",function(){return o.handleEscapeKey()},!1,F)("keydown.tab",function(v){return o.handleTabKey(v)},!1,F)},decls:5,vars:2,consts:[[1,"pb-28","pt-44"],["class","grid grid-cols-1 md:grid-cols-4 lg:grid-cols-12 lg:flex flex-wrap items-center justify-center gap-4",4,"ngIf"],["class","fixed inset-0 z-50 md:p-4 flex items-center justify-center bg-black bg-opacity-50 overflow-y-scroll","role","dialog","aria-modal","true","aria-labelledby","modal-title",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-4","lg:grid-cols-12","lg:flex","flex-wrap","items-center","justify-center","gap-4"],["class","shadow-2xl p-3 rounded-2xl flex flex-col items-center justify-center cursor-pointer border-2 relative transition-transform duration-300 hover:scale-105 hover:opacity-50","tabindex","0","role","button",3,"ngStyle","click","keydown.enter","keydown.space",4,"ngFor","ngForOf"],["tabindex","0","role","button",1,"shadow-2xl","p-3","rounded-2xl","flex","flex-col","items-center","justify-center","cursor-pointer","border-2","relative","transition-transform","duration-300","hover:scale-105","hover:opacity-50",3,"click","keydown.enter","keydown.space","ngStyle"],["class","absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm","aria-label","Este ve\xEDculo possui coment\xE1rios",4,"ngIf"],["class","absolute top-2 left-2 bg-amber-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm","aria-label","Este ve\xEDculo precisa de troca de \xF3leo",4,"ngIf"],[1,"text-black","font-bold","mb-2","text-3xl"],[1,"p-1.5","rounded-xl","w-full","flex","justify-center","gap-1",2,"background-color","#141416"],["class","w-7 h-7 rounded-full flex items-center justify-center",3,"ngStyle",4,"ngFor","ngForOf"],["aria-label","Este ve\xEDculo possui coment\xE1rios",1,"absolute","-top-2","-right-2","bg-red-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"],["aria-label","Este ve\xEDculo precisa de troca de \xF3leo",1,"absolute","top-2","left-2","bg-amber-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"],[1,"text-xs"],["src","assets/water_drop.svg","alt","Alerta de troca de \xF3leo"],[1,"w-7","h-7","rounded-full","flex","items-center","justify-center",3,"ngStyle"],[3,"src","alt"],["role","dialog","aria-modal","true","aria-labelledby","modal-title",1,"fixed","inset-0","z-50","md:p-4","flex","items-center","justify-center","bg-black","bg-opacity-50","overflow-y-scroll"],[1,"rounded-3xl","shadow-lg","w-max","max-w-[90vw]","h-max","2xl:max-w-[100vw]","2xl:max-h-[100vh]","overflow-y-auto","animate-fade-in","relative",2,"background-color","#141416"],[1,"absolute","right-6","top-6","2xl:top-12","2xl:right-12"],["id","modal-close-button","aria-label","Fechar modal",1,"text-lg","xl:text-4xl","font-semibold","text-gray-500","hover:text-amber-400",3,"click","keydown.enter"],[1,"rounded-3xl","flex","flex-col-reverse","lg:flex-row","justify-center","w-max","2xl:max-w-[100vw]","h-max","2xl:max-h-[100vh]"],[1,"grid","grid-cols-1","md:grid-cols-3","lg:grid-cols-1","lg:flex","lg:flex-col","justify-center","rounded-3xl","gap-3","w-full","2xl:max-h-[100vh]","p-6","2xl:p-24",2,"background-color","#242427"],["class","flex flex-col lg:flex-row justify-between gap-3 2xl:gap-8 p-2 rounded-lg",4,"ngFor","ngForOf"],[1,"p-8","2xl:p-20","flex","flex-col","justify-between","w-full","2xl:max-w-[100vw]","2xl:max-h-[100vh]"],[1,"flex","flex-col","mb-10"],[1,"font-bold","text-2xl","lg:text-4xl","2xl:text-6xl","text-amber-400"],[1,"flex","gap-4","text-sm","2xl:text-2xl","mb-1","font-bold","text-white"],[1,"flex","flex-col","justify-between","gap-6","mb-4"],[1,"text-amber-400","text-md","lg:text-lg","2xl:text-3xl","font-bold","mb-2"],[1,"text-white"],[1,"text-lg","text-white"],[1,"text-amber-400","text-md","lg:text-lg","2xl:text-2xl","font-bold","mb-2",3,"ngClass"],["class","ml-2 text-red-400",4,"ngIf"],[1,"flex","items-center","gap-2"],["class","ml-2 bg-amber-600 text-white text-xs px-2 py-1 rounded hover:bg-amber-700","aria-label","Registrar troca de \xF3leo",3,"click",4,"ngIf"],["class","mt-4 mb-4 w-full bg-gray-800 rounded-lg p-4 border border-gray-700 animate-fade-in",4,"ngIf"],[1,"pt-10"],[1,"w-full","text-gray-300","flex","flex-col","gap-4","pb-6"],[1,"flex","justify-between","py-2","border-b","border-gray-700","2xl:text-2xl"],[3,"ngClass"],["class","flex justify-between py-2 border-b border-gray-700 2xl:text-2xl",4,"ngIf"],["class","mt-4 w-full bg-gray-800 rounded-lg p-4 border border-gray-700",4,"ngIf"],[1,"flex","justify-between","mt-4","gap-4","w-full"],[1,"flex","gap-4"],["aria-label","Cancelar altera\xE7\xF5es",1,"px-4","py-2","bg-gray-600","text-white","rounded-2xl","hover:bg-gray-700","transition","2xl:text-xl",3,"click"],["aria-label","Salvar altera\xE7\xF5es",1,"px-4","py-2","bg-amber-600","text-white","rounded-2xl","hover:bg-amber-700","transition","2xl:text-xl",3,"click"],["title","Gr\xE1fico",1,"px-4","py-2","text-white","rounded-2xl","hover:bg-amber-600","transition","2xl:text-xl",2,"background-color","#242427"],["src","assets/bar_chart.svg","alt","gr\xE1fico",1,"2xl:w-20"],["title","Registros","aria-label","Mostrar registros",1,"px-4","py-4","text-white","rounded-2xl","hover:bg-amber-600","transition","2xl:text-xl","relative",2,"background-color","#242427",3,"click","ngClass"],["src","assets/overview.svg","alt","vis\xE3o geral",1,"2xl:w-20"],["class","absolute -top-2 -right-2 bg-amber-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm",4,"ngIf"],["title","Coment\xE1rios","aria-label","Mostrar coment\xE1rios",1,"px-4","py-4","text-white","rounded-2xl","hover:bg-amber-600","transition","2xl:text-xl","relative",2,"background-color","#242427",3,"click","ngClass"],["src","assets/chat.svg","alt","chat",1,"2xl:w-20"],["class","absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm",4,"ngIf"],[1,"flex","flex-col","lg:flex-row","justify-between","gap-3","2xl:gap-8","p-2","rounded-lg"],[1,"flex","items-center","gap-3","xl:gap-8"],[1,"w-8","h-8","lg:w-14","lg:h-14","2xl:w-20","2xl:h-20","rounded-full","flex","items-center","justify-center",3,"ngStyle"],[1,"w-4","h-4","lg:w-7","lg:h-7","2xl:w-10","2xl:h-10",3,"src","alt"],[1,"flex","flex-col"],[1,"text-white","text-sm","2xl:text-2xl","lg:text-nowrap","font-bold"],[1,"text-amber-500","2xl:text-2xl","font-bold"],[1,"ml-2","text-red-400"],["aria-label","Registrar troca de \xF3leo",1,"ml-2","bg-amber-600","text-white","text-xs","px-2","py-1","rounded","hover:bg-amber-700",3,"click"],[1,"mt-4","mb-4","w-full","bg-gray-800","rounded-lg","p-4","border","border-gray-700","animate-fade-in"],[1,"text-amber-400","text-lg","2xl:text-3xl","font-bold","mb-3"],[1,"flex","flex-col","gap-3"],[1,"flex","gap-3","justify-between","items-center"],[1,"flex","gap-2"],[1,"bg-gray-600","text-white","px-4","py-1","rounded","hover:bg-gray-700",3,"click"],[1,"bg-amber-600","text-white","px-4","py-1","rounded","hover:bg-amber-700",3,"click"],[1,"mt-4","w-full","bg-gray-800","rounded-lg","p-4","border","border-gray-700"],[1,"flex","flex-col","gap-3","max-h-44","overflow-y-auto"],["class","bg-gray-900 p-3 mb-2 rounded-md",4,"ngFor","ngForOf"],[1,"mt-2","flex","gap-2"],["type","text","placeholder","Adicionar coment\xE1rio...",1,"w-full","bg-gray-900","border","border-gray-700","rounded-lg","px-3","py-2","text-white",3,"ngModelChange","ngModel"],[1,"bg-amber-600","text-white","rounded-lg","px-4","py-2","hover:bg-amber-700",3,"click"],[1,"bg-gray-900","p-3","mb-2","rounded-md"],[1,"flex","justify-between","mb-1"],[1,"text-amber-400","font-semibold"],[1,"text-gray-500","text-sm"],["class","text-gray-400 text-center p-4",4,"ngIf"],[1,"text-gray-400","text-center","p-4"],[1,"absolute","-top-2","-right-2","bg-amber-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"],[1,"absolute","-top-2","-right-2","bg-red-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"]],template:function(t,o){t&1&&(u(0,"app-header-dsveiculos"),n(1,"section",0),p(2,gn,2,1,"div",1),r(),u(3,"app-footer-dsveiculos"),p(4,kn,67,35,"div",2)),t&2&&(a(2),s("ngIf",o.veiculos.length>0),a(2),s("ngIf",o.isHelpDialogOpen&&o.selectedVehicle))},dependencies:[V,P,E,S,U,H,G,Y,Z,ee,X],styles:["@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out forwards}.bg-gray-800[_ngcontent-%COMP%]{background-color:#242427}.bg-gray-900[_ngcontent-%COMP%]{background-color:#1a1a1d}.bg-amber-500[_ngcontent-%COMP%]{background-color:#f59e0b}.bg-amber-600[_ngcontent-%COMP%]{background-color:#d97706}.bg-amber-700[_ngcontent-%COMP%]{background-color:#b45309}.hover\\:bg-amber-600[_ngcontent-%COMP%]:hover{background-color:#d97706}button[_ngcontent-%COMP%]:focus, input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{outline:2px solid #F59E0B;outline-offset:2px}button[_ngcontent-%COMP%]{transition:background-color .2s,transform .1s}button[_ngcontent-%COMP%]:active{transform:scale(.98)}"]})}return i})();var Je=i=>({"background-color":i}),Dn=i=>({"text-red-400":i}),In=(i,c,e,t)=>({"text-green-400":i,"text-orange-400":c,"text-red-400":e,"text-gray-400":t}),Mn=(i,c)=>({"text-red-400":i,"text-green-400":c}),oi=i=>({"bg-amber-700":i});function Fn(i,c){if(i&1&&(n(0,"div",21),l(1),r()),i&2){let e=d().$implicit;a(),_(" ",e.comentarios.length," ")}}function An(i,c){i&1&&(n(0,"div",22),u(1,"img",23),r())}function Pn(i,c){if(i&1&&(n(0,"span",24),u(1,"img",25),r()),i&2){let e=c.$implicit,t=c.index,o=d(4);s("ngStyle",C(3,Je,e.cor)),a(),s("src",e.icone,T)("alt",o.getAttributeName(t))}}function jn(i,c){if(i&1){let e=b();n(0,"div",15),f("click",function(){let o=h(e).$implicit,m=d(3);return g(m.openHelpDialog(o))})("keydown.enter",function(){let o=h(e).$implicit,m=d(3);return g(m.openHelpDialog(o))})("keydown.space",function(o){let m=h(e).$implicit;return d(3).openHelpDialog(m),g(o.preventDefault())}),p(1,Fn,2,1,"div",16)(2,An,2,0,"div",17),n(3,"h3",18),l(4),r(),n(5,"div",19),p(6,Pn,2,5,"span",20),r()()}if(i&2){let e=c.$implicit,t=d(3);s("ngStyle",C(6,Je,e.atributos[5].cor+"99")),N("aria-label","Mostrar detalhes do ve\xEDculo "+e.id),a(),s("ngIf",e.comentarios&&e.comentarios.length>0),a(),s("ngIf",t.shouldShowOilChangeAlert(e)),a(2),x(e.id),a(2),s("ngForOf",e.atributos)}}function Rn(i,c){if(i&1&&(n(0,"div",12)(1,"div",13),p(2,jn,7,8,"div",14),r()()),i&2){let e=c.$implicit;a(2),s("ngForOf",e)}}function Nn(i,c){if(i&1){let e=b();n(0,"button",26),f("click",function(){let o=h(e).index,m=d(2);return g(m.goToSlide(o))}),r()}if(i&2){let e=c.index,t=d(2);B("bg-amber-600",t.currentSlide===e)("bg-gray-400",t.currentSlide!==e),N("aria-label","Ir para slide "+(e+1))}}function Un(i,c){if(i&1){let e=b();n(0,"div",3)(1,"button",4),f("click",function(){h(e);let o=d();return g(o.previousSlide())}),u(2,"img",5),r(),n(3,"button",6),f("click",function(){h(e);let o=d();return g(o.nextSlide())}),u(4,"img",7),r(),n(5,"div",8),p(6,Rn,3,1,"div",9),r(),n(7,"div",10),p(8,Nn,1,5,"button",11),r()()}if(i&2){let e=d();a(5),fe("transform","translateX("+-e.currentSlide*100+"%)"),a(),s("ngForOf",e.vehicleGroups),a(2),s("ngForOf",e.vehicleGroups)}}function Hn(i,c){if(i&1&&(n(0,"div",65)(1,"div",66)(2,"span",67),u(3,"img",68),r(),n(4,"div",69)(5,"span",70),l(6),r(),n(7,"span",71),l(8,"0"),r()()()()),i&2){let e=c.$implicit,t=c.index,o=d(2);a(2),s("ngStyle",C(4,Je,e.cor)),a(),s("src",e.icone,T)("alt",o.getAttributeName(t)),a(3),x(o.getAttributeName(t))}}function Bn(i,c){i&1&&u(0,"span",72)}function Ln(i,c){if(i&1){let e=b();n(0,"button",73),f("click",function(){h(e);let o=d(2);return g(o.toggleOilChangeForm())}),l(1," Registrar troca "),r()}}function $n(i,c){if(i&1){let e=b();n(0,"div",74)(1,"h4",75),l(2," Registrar Troca de \xD3leo "),r(),n(3,"div",76)(4,"div",77)(5,"p",40),l(6),r(),n(7,"div",78)(8,"button",79),f("click",function(){h(e);let o=d(2);return g(o.toggleOilChangeForm())}),l(9," Cancelar "),r(),n(10,"button",80),f("click",function(){h(e);let o=d(2);return g(o.registrarTrocaOleo())}),l(11," Confirmar "),r()()()()()}if(i&2){let e=d(2);a(6),_(" Confirma a troca de \xF3leo para o ve\xEDculo ",e.selectedVehicle.id,"? ")}}function qn(i,c){if(i&1&&(n(0,"div",49)(1,"span"),l(2,"UltPedidoID:"),r(),n(3,"span"),l(4),r()()),i&2){let e=d(2);a(4),x(e.selectedVehicle.ultPedidoID)}}function zn(i,c){if(i&1&&(n(0,"div",49)(1,"span"),l(2,"Integra\xE7\xE3o:"),r(),n(3,"span"),l(4),r()()),i&2){let e=d(2);a(4),x(e.selectedVehicle.ultIntegracao)}}function Kn(i,c){if(i&1&&(n(0,"div",87)(1,"div",88)(2,"span",89),l(3),r(),n(4,"span",90),l(5),r()(),n(6,"p",40),l(7),r()()),i&2){let e=c.$implicit;a(3),x(e.author),a(2),x(e.date),a(2),x(e.text)}}function Jn(i,c){if(i&1){let e=b();n(0,"div",81)(1,"h4",75),l(2," Coment\xE1rios "),r(),n(3,"div",82),p(4,Kn,8,3,"div",83),r(),n(5,"div",84)(6,"input",85),q("ngModelChange",function(o){h(e);let m=d(2);return $(m.newComment,o)||(m.newComment=o),g(o)}),r(),n(7,"button",86),f("click",function(){h(e);let o=d(2);return g(o.addComment())}),l(8," Enviar "),r()()()}if(i&2){let e=d(2);s("@slideUpDown",e.showComments?"open":"closed"),a(4),s("ngForOf",e.selectedVehicle.comentarios),a(2),L("ngModel",e.newComment)}}function Wn(i,c){if(i&1&&(n(0,"div",87)(1,"div",88)(2,"span",89),l(3),r(),n(4,"span",90),l(5),r()(),n(6,"p",40),l(7),r()()),i&2){let e=c.$implicit;a(3),x(e.author),a(2),x(e.date),a(2),x(e.text)}}function Gn(i,c){i&1&&(n(0,"div",92),l(1," Nenhum registro de troca de \xF3leo encontrado. "),r())}function Yn(i,c){if(i&1&&(n(0,"div",81)(1,"h4",75),l(2," Registros "),r(),n(3,"div",82),p(4,Wn,8,3,"div",83)(5,Gn,2,0,"div",91),r()()),i&2){let e=d(2);s("@slideUpDown",e.showOilChangeRecords?"open":"closed"),a(4),s("ngForOf",e.selectedVehicle.trocasOleo),a(),s("ngIf",!e.selectedVehicle.trocasOleo||e.selectedVehicle.trocasOleo.length===0)}}function Zn(i,c){if(i&1&&(n(0,"div",93),l(1),r()),i&2){let e=d(2);a(),_(" ",e.selectedVehicle.trocasOleo.length," ")}}function Qn(i,c){if(i&1&&(n(0,"div",94),l(1),r()),i&2){let e=d(2);a(),_(" ",e.selectedVehicle.comentarios.length," ")}}function Xn(i,c){if(i&1){let e=b();n(0,"div",27)(1,"div",28)(2,"div",29)(3,"button",30),f("click",function(){h(e);let o=d();return g(o.closeHelpDialog())})("keydown.enter",function(){h(e);let o=d();return g(o.closeHelpDialog())}),l(4," \u2715 "),r()(),n(5,"div",31)(6,"div",32),p(7,Hn,9,6,"div",33),r(),n(8,"div",34)(9,"div",35)(10,"h3",36),l(11),r(),n(12,"div",37)(13,"span"),l(14,"Euro 5"),r(),n(15,"span"),l(16,"1721"),r()()(),n(17,"div",38)(18,"div")(19,"p",39),l(20," Od\xF4metro: "),n(21,"span",40),l(22),r()(),n(23,"span",41),l(24,"Registro: 24/04/2025 03:00"),r()(),n(25,"div")(26,"p",42),l(27," KM desde \xFAltima troca: "),n(28,"span",40),l(29),r(),p(30,Bn,1,0,"span",43),r(),n(31,"div",44)(32,"span",41),l(33),r(),p(34,Ln,2,0,"button",45),r()()(),p(35,$n,12,1,"div",46),n(36,"div",47)(37,"div",48)(38,"div",49)(39,"span"),l(40,"Status:"),r(),n(41,"span",50),l(42),r()(),p(43,qn,5,1,"div",51)(44,zn,5,1,"div",51),n(45,"div",49)(46,"span"),l(47,"Troca de \xD3leo:"),r(),n(48,"span",50),l(49),r()()(),p(50,Jn,9,3,"div",52)(51,Yn,6,3,"div",52),n(52,"div",53)(53,"div",54)(54,"button",55),f("click",function(){h(e);let o=d();return g(o.cancelChanges())}),l(55," Cancelar "),r(),n(56,"button",56),f("click",function(){h(e);let o=d();return g(o.saveChanges())}),l(57," Salvar "),r()(),n(58,"div",54)(59,"button",57),u(60,"img",58),r(),n(61,"button",59),f("click",function(){h(e);let o=d();return g(o.toggleOilChangeRecords())}),u(62,"img",60),p(63,Zn,2,1,"div",61),r(),n(64,"button",62),f("click",function(){h(e);let o=d();return g(o.toggleComments())}),u(65,"img",63),p(66,Qn,2,1,"div",64),r()()()()()()()()}if(i&2){let e=d();a(7),s("ngForOf",e.selectedVehicle.atributos),a(4),_(" ",e.selectedVehicle.id," "),a(11),x(e.selectedVehicle.odoAtual),a(4),s("ngClass",C(21,Dn,e.selectedVehicle.precisaTrocaOleo)),a(3),x(e.selectedVehicle.odoDesdeUltimaTroca||0),a(),s("ngIf",e.selectedVehicle.precisaTrocaOleo),a(3),_("\xDAltima troca de \xF3leo: ",e.selectedVehicle.ultimaTrocaOleo||"N\xE3o registrada",""),a(),s("ngIf",e.selectedVehicle.precisaTrocaOleo),a(),s("ngIf",e.showOilChangeForm),a(6),s("ngClass",K(23,In,e.selectedVehicle.status==="OK",e.selectedVehicle.status==="Oficina",e.selectedVehicle.status==="Sem Comunicar",e.selectedVehicle.status==="Inativo")),a(),x(e.selectedVehicle.status),a(),s("ngIf",e.selectedVehicle.ultPedidoID),a(),s("ngIf",e.selectedVehicle.ultIntegracao),a(4),s("ngClass",D(28,Mn,e.selectedVehicle.precisaTrocaOleo,!e.selectedVehicle.precisaTrocaOleo)),a(),_(" ",e.selectedVehicle.precisaTrocaOleo?"Necess\xE1ria":"OK"," "),a(),s("ngIf",e.showComments),a(),s("ngIf",e.showOilChangeRecords),a(10),s("ngClass",C(31,oi,e.showOilChangeRecords)),a(2),s("ngIf",e.selectedVehicle.trocasOleo&&e.selectedVehicle.trocasOleo.length>0),a(),s("ngClass",C(33,oi,e.showComments)),a(2),s("ngIf",e.selectedVehicle.comentarios&&e.selectedVehicle.comentarios.length>0)}}var ni=(()=>{class i{http;renderer;cdRef;veiculos=[];selectedVehicle=null;isHelpDialogOpen=!1;originalData=null;originalVehicleState=null;showComments=!1;newComment="";showOilChangeForm=!1;lastOilChangeDate="";showOilChangeRecords=!1;icones=["assets/device_thermostat.svg","assets/shutter_speed_minus.svg","assets/compress.svg","assets/do_not_step.svg","assets/air.svg","assets/speed.svg"];currentSlide=0;vehicleGroups=[];itemsPerSlide=8;autoSlideInterval;constructor(e,t,o){this.http=e,this.renderer=t,this.cdRef=o}ngOnInit(){console.log("CardVeiculoComponent initialized"),this.loadVehicleData(),this.initializeCarousel(),this.startAutoSlide()}ngOnDestroy(){this.stopAutoSlide()}loadVehicleData(){this.http.get("assets/mocks/veiculos_mock.json").subscribe({next:e=>{console.log("Data loaded:",e),this.originalData=JSON.parse(JSON.stringify(e)),this.veiculos=e.veiculos.map(t=>M(I({},t),{atributos:t.cores.map((o,m)=>({cor:o,icone:this.icones[m]||""})),comentarios:t.comentarios||[],odoAtual:t.odoAtual||0,ultimaTrocaOleo:t.ultimaTrocaOleo||null,odoNaUltimaTroca:t.odoNaUltimaTroca||0,trocasOleo:t.trocasOleo||[]})),this.veiculos.forEach(t=>{t.atributos.forEach((o,m)=>{o.cor=this.getClosestColorMatch(o.cor)}),this.calcularodoDesdeUltimaTroca(t)})},error:e=>{console.error("Erro ao carregar o JSON:",e)}})}calcularodoDesdeUltimaTroca(e){e.odoAtual&&e.odoNaUltimaTroca?e.odoDesdeUltimaTroca=e.odoAtual-e.odoNaUltimaTroca:e.odoDesdeUltimaTroca=e.odoAtual||0,e.precisaTrocaOleo=e.odoDesdeUltimaTroca>=1e4}registrarTrocaOleo(){if(!this.selectedVehicle)return;let e=new Date,t=`${e.toLocaleDateString("pt-BR")} ${e.getHours()}:${e.getMinutes().toString().padStart(2,"0")}`;this.selectedVehicle.ultimaTrocaOleo=e.toLocaleDateString("pt-BR"),this.selectedVehicle.odoNaUltimaTroca=this.selectedVehicle.odoAtual,this.selectedVehicle.odoDesdeUltimaTroca=0,this.selectedVehicle.precisaTrocaOleo=!1,this.selectedVehicle.trocasOleo||(this.selectedVehicle.trocasOleo=[]),this.selectedVehicle.trocasOleo.unshift({author:"Sistema",date:t,text:`Troca de \xF3leo realizada com od\xF4metro ${this.selectedVehicle.odoAtual}.`}),this.showOilChangeForm=!1,this.showOilChangeRecords=!0,this.cdRef.detectChanges()}toggleOilChangeForm(){this.showOilChangeForm=!this.showOilChangeForm}toggleOilChangeRecords(){this.showOilChangeRecords=!this.showOilChangeRecords,this.showOilChangeRecords&&(this.showComments=!1,this.selectedVehicle.trocasOleo||(this.selectedVehicle.trocasOleo=[]),this.cdRef.detectChanges())}shouldShowOilChangeAlert(e){return e.precisaTrocaOleo===!0}getClosestColorMatch(e){let t=this.getAllAttributeColors();return t.includes(e)?e:t[0]}getBackgroundColor(e){switch(e){case"OK":return"white";case"Oficina":return"#FF9858";case"Sem Comunicar":return"#E25652";case"Inativo":return"#B9B9B9";default:return"white"}}getIconPath(e){return this.icones[e]||""}getAttributeName(e){return["Temperatura","Torque","Press\xE3o Turbina","Pedal","Ar Comprimido","Max. Velocidade"][e]||`Atributo ${e+1}`}getColorOptions(){return[{label:"Inativo",value:"#242427"},{label:"Verde",value:"#387E38"},{label:"Laranja",value:"#F56B15"},{label:"Vermelho",value:"#AE2724"},{label:"Roxo",value:"#6224AE"}]}openHelpDialog(e){this.selectedVehicle=JSON.parse(JSON.stringify(e)),this.originalVehicleState=JSON.parse(JSON.stringify(e)),this.selectedVehicle.atributos.forEach(t=>{t.cor=this.getClosestColorMatch(t.cor)}),this.selectedVehicle.comentarios||(this.selectedVehicle.comentarios=[]),this.selectedVehicle.trocasOleo||(this.selectedVehicle.trocasOleo=[]),this.isHelpDialogOpen=!0,this.renderer.addClass(document.body,"overflow-hidden"),this.showComments=!1,this.showOilChangeRecords=!1,this.showOilChangeForm=!1,this.newComment="",setTimeout(()=>{let t=document.querySelector("#modal-close-button");t&&t.focus()},100)}closeHelpDialog(){this.isHelpDialogOpen=!1,this.renderer.removeClass(document.body,"overflow-hidden"),this.selectedVehicle=null,this.originalVehicleState=null,this.showComments=!1,this.showOilChangeForm=!1,this.showOilChangeRecords=!1,this.newComment=""}toggleComments(){this.showComments=!this.showComments,this.showComments&&(this.showOilChangeRecords=!1,this.cdRef.detectChanges())}addComment(){if(this.newComment.trim()&&this.selectedVehicle){let e=new Date,t=`${e.toLocaleDateString("pt-BR")} ${e.getHours()}:${e.getMinutes().toString().padStart(2,"0")}`;this.selectedVehicle.comentarios||(this.selectedVehicle.comentarios=[]),this.selectedVehicle.comentarios.unshift({author:"Usu\xE1rio Atual",date:t,text:this.newComment.trim()});let o=this.veiculos.findIndex(m=>m.id===this.selectedVehicle.id);o!==-1&&(this.veiculos[o].comentarios||(this.veiculos[o].comentarios=[]),this.veiculos[o].comentarios=[...this.selectedVehicle.comentarios]),this.newComment="",this.cdRef.detectChanges()}}getAllAttributeColors(){return this.getColorOptions().map(e=>e.value)}updateAttributeColor(e,t){if(!this.selectedVehicle)return;let m=t.target.value;this.selectedVehicle.atributos[e].cor=m}cancelChanges(){this.closeHelpDialog()}saveChanges(){if(this.selectedVehicle){let e=this.veiculos.findIndex(t=>t.id===this.selectedVehicle.id);e!==-1&&(this.veiculos[e].atributos.forEach((t,o)=>{o<this.selectedVehicle.atributos.length&&(t.cor=this.selectedVehicle.atributos[o].cor)}),this.veiculos[e].comentarios=[...this.selectedVehicle.comentarios],this.veiculos[e].trocasOleo=[...this.selectedVehicle.trocasOleo||[]],this.veiculos[e].ultimaTrocaOleo=this.selectedVehicle.ultimaTrocaOleo,this.veiculos[e].odoNaUltimaTroca=this.selectedVehicle.odoNaUltimaTroca,this.veiculos[e].odoDesdeUltimaTroca=this.selectedVehicle.odoDesdeUltimaTroca,this.veiculos[e].precisaTrocaOleo=this.selectedVehicle.precisaTrocaOleo,this.originalData&&this.originalData.veiculos&&this.originalData.veiculos[e]&&(this.originalData.veiculos[e].cores&&this.selectedVehicle.atributos.forEach((t,o)=>{o<this.originalData.veiculos[e].cores.length&&(this.originalData.veiculos[e].cores[o]=t.cor)}),this.originalData.veiculos[e].comentarios=[...this.selectedVehicle.comentarios],this.originalData.veiculos[e].trocasOleo=[...this.selectedVehicle.trocasOleo||[]],this.originalData.veiculos[e].ultimaTrocaOleo=this.selectedVehicle.ultimaTrocaOleo,this.originalData.veiculos[e].odoNaUltimaTroca=this.selectedVehicle.odoNaUltimaTroca),this.calcularodoDesdeUltimaTroca(this.veiculos[e]),this.saveChangesToJson())}this.closeHelpDialog()}saveChangesToJson(){console.log("Salvando altera\xE7\xF5es:",this.originalData)}handleEscapeKey(){this.isHelpDialogOpen&&this.closeHelpDialog()}handleTabKey(e){if(!this.isHelpDialogOpen)return;let t=document.querySelector('[role="dialog"]');if(!t)return;let o=t.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(o.length===0)return;let m=o[0],v=o[o.length-1];e.shiftKey&&document.activeElement===m?(v.focus(),e.preventDefault()):!e.shiftKey&&document.activeElement===v&&(m.focus(),e.preventDefault())}initializeCarousel(){this.vehicleGroups=[];for(let e=0;e<this.veiculos.length;e+=this.itemsPerSlide)this.vehicleGroups.push(this.veiculos.slice(e,e+this.itemsPerSlide));this.adjustItemsPerSlide(),window.addEventListener("resize",()=>{this.adjustItemsPerSlide()})}adjustItemsPerSlide(){let e=window.innerWidth;e>=2560?this.itemsPerSlide=12:e>=1920?this.itemsPerSlide=8:e>=1280?this.itemsPerSlide=6:this.itemsPerSlide=4,this.regroupVehicles()}regroupVehicles(){this.vehicleGroups=[];for(let e=0;e<this.veiculos.length;e+=this.itemsPerSlide)this.vehicleGroups.push(this.veiculos.slice(e,e+this.itemsPerSlide));this.currentSlide=Math.min(this.currentSlide,this.vehicleGroups.length-1)}nextSlide(){this.currentSlide=(this.currentSlide+1)%this.vehicleGroups.length,this.resetAutoSlideTimer()}previousSlide(){this.currentSlide=this.currentSlide===0?this.vehicleGroups.length-1:this.currentSlide-1,this.resetAutoSlideTimer()}goToSlide(e){this.currentSlide=e,this.resetAutoSlideTimer()}startAutoSlide(){this.autoSlideInterval=setInterval(()=>{this.nextSlide()},5e3)}stopAutoSlide(){this.autoSlideInterval&&clearInterval(this.autoSlideInterval)}resetAutoSlideTimer(){this.stopAutoSlide(),this.startAutoSlide()}static \u0275fac=function(t){return new(t||i)(w(J),w(R),w(j))};static \u0275cmp=y({type:i,selectors:[["app-card-veiculo-velocidade"]],hostBindings:function(t,o){t&1&&f("keydown.escape",function(){return o.handleEscapeKey()},!1,F)("keydown.tab",function(v){return o.handleTabKey(v)},!1,F)},decls:5,vars:2,consts:[[1,"pb-28","pt-44"],["class","relative w-full overflow-hidden",4,"ngIf"],["class","fixed inset-0 z-50 md:p-4 flex items-center justify-center bg-black bg-opacity-50 overflow-y-scroll","role","dialog","aria-modal","true","aria-labelledby","modal-title",4,"ngIf"],[1,"relative","w-full","overflow-hidden"],["aria-label","Slide anterior",1,"absolute","left-4","top-1/2","-translate-y-1/2","z-10","bg-amber-600","hover:bg-amber-700","text-white","rounded-full","p-4","shadow-lg",3,"click"],["src","assets/chevron_left.svg","alt","Anterior",1,"w-8","h-8"],["aria-label","Pr\xF3ximo slide",1,"absolute","right-4","top-1/2","-translate-y-1/2","z-10","bg-amber-600","hover:bg-amber-700","text-white","rounded-full","p-4","shadow-lg",3,"click"],["src","assets/chevron_right.svg","alt","Pr\xF3ximo",1,"w-8","h-8"],[1,"flex","transition-transform","duration-500","ease-in-out"],["class","flex-none w-full px-8",4,"ngFor","ngForOf"],[1,"absolute","bottom-4","left-1/2","transform","-translate-x-1/2","flex","space-x-3"],["class","w-4 h-4 rounded-full transition-all duration-300",3,"bg-amber-600","bg-gray-400","click",4,"ngFor","ngForOf"],[1,"flex-none","w-full","px-8"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","2xl:grid-cols-4","gap-8"],["class","shadow-2xl p-6 rounded-3xl flex flex-col items-center justify-center cursor-pointer border-2 relative transition-all duration-300 hover:scale-105 hover:shadow-amber-400/20 min-h-[300px]","tabindex","0","role","button",3,"ngStyle","click","keydown.enter","keydown.space",4,"ngFor","ngForOf"],["tabindex","0","role","button",1,"shadow-2xl","p-6","rounded-3xl","flex","flex-col","items-center","justify-center","cursor-pointer","border-2","relative","transition-all","duration-300","hover:scale-105","hover:shadow-amber-400/20","min-h-[300px]",3,"click","keydown.enter","keydown.space","ngStyle"],["class","absolute -top-3 -right-3 bg-red-500 text-white rounded-full w-10 h-10 flex items-center justify-center text-lg shadow-lg","aria-label","Este ve\xEDculo possui coment\xE1rios",4,"ngIf"],["class","absolute top-3 left-3 bg-amber-500 text-white rounded-full w-10 h-10 flex items-center justify-center shadow-lg","aria-label","Este ve\xEDculo precisa de troca de \xF3leo",4,"ngIf"],[1,"text-black","font-bold","mb-4","text-4xl","2xl:text-5xl"],[1,"p-3","rounded-2xl","w-full","flex","justify-center","gap-3",2,"background-color","#141416"],["class","w-12 h-12 2xl:w-16 2xl:h-16 rounded-full flex items-center justify-center shadow-lg transition-transform hover:scale-110",3,"ngStyle",4,"ngFor","ngForOf"],["aria-label","Este ve\xEDculo possui coment\xE1rios",1,"absolute","-top-3","-right-3","bg-red-500","text-white","rounded-full","w-10","h-10","flex","items-center","justify-center","text-lg","shadow-lg"],["aria-label","Este ve\xEDculo precisa de troca de \xF3leo",1,"absolute","top-3","left-3","bg-amber-500","text-white","rounded-full","w-10","h-10","flex","items-center","justify-center","shadow-lg"],["src","assets/water_drop.svg","alt","Alerta de troca de \xF3leo",1,"w-6","h-6"],[1,"w-12","h-12","2xl:w-16","2xl:h-16","rounded-full","flex","items-center","justify-center","shadow-lg","transition-transform","hover:scale-110",3,"ngStyle"],[1,"w-8","h-8","2xl:w-10","2xl:h-10",3,"src","alt"],[1,"w-4","h-4","rounded-full","transition-all","duration-300",3,"click"],["role","dialog","aria-modal","true","aria-labelledby","modal-title",1,"fixed","inset-0","z-50","md:p-4","flex","items-center","justify-center","bg-black","bg-opacity-50","overflow-y-scroll"],[1,"rounded-3xl","shadow-lg","w-max","max-w-[90vw]","h-max","2xl:max-w-[100vw]","2xl:max-h-[100vh]","overflow-y-auto","animate-fade-in","relative",2,"background-color","#141416"],[1,"absolute","right-6","top-6","2xl:top-12","2xl:right-12"],["id","modal-close-button","aria-label","Fechar modal",1,"text-lg","xl:text-4xl","font-semibold","text-gray-500","hover:text-amber-400",3,"click","keydown.enter"],[1,"rounded-3xl","flex","flex-col-reverse","lg:flex-row","justify-center","w-max","2xl:max-w-[100vw]","h-max","2xl:max-h-[100vh]"],[1,"grid","grid-cols-1","md:grid-cols-3","lg:grid-cols-1","lg:flex","lg:flex-col","justify-center","rounded-3xl","gap-3","w-full","2xl:max-h-[100vh]","p-6","2xl:p-24",2,"background-color","#242427"],["class","flex flex-col lg:flex-row justify-between gap-3 2xl:gap-8 p-2 rounded-lg",4,"ngFor","ngForOf"],[1,"p-8","2xl:p-20","flex","flex-col","justify-between","w-full","2xl:max-w-[100vw]","2xl:max-h-[100vh]"],[1,"flex","flex-col","mb-10"],[1,"font-bold","text-2xl","lg:text-4xl","2xl:text-6xl","text-amber-400"],[1,"flex","gap-4","text-sm","2xl:text-2xl","mb-1","font-bold","text-white"],[1,"flex","flex-col","justify-between","gap-6","mb-4"],[1,"text-amber-400","text-md","lg:text-lg","2xl:text-3xl","font-bold","mb-2"],[1,"text-white"],[1,"text-lg","text-white"],[1,"text-amber-400","text-md","lg:text-lg","2xl:text-2xl","font-bold","mb-2",3,"ngClass"],["class","ml-2 text-red-400",4,"ngIf"],[1,"flex","items-center","gap-2"],["class","ml-2 bg-amber-600 text-white text-xs px-2 py-1 rounded hover:bg-amber-700","aria-label","Registrar troca de \xF3leo",3,"click",4,"ngIf"],["class","mt-4 mb-4 w-full bg-gray-800 rounded-lg p-4 border border-gray-700 animate-fade-in",4,"ngIf"],[1,"pt-10"],[1,"w-full","text-gray-300","flex","flex-col","gap-4","pb-6"],[1,"flex","justify-between","py-2","border-b","border-gray-700","2xl:text-2xl"],[3,"ngClass"],["class","flex justify-between py-2 border-b border-gray-700 2xl:text-2xl",4,"ngIf"],["class","mt-4 w-full bg-gray-800 rounded-lg p-4 border border-gray-700",4,"ngIf"],[1,"flex","justify-between","mt-4","gap-4","w-full"],[1,"flex","gap-4"],["aria-label","Cancelar altera\xE7\xF5es",1,"px-4","py-2","bg-gray-600","text-white","rounded-2xl","hover:bg-gray-700","transition","2xl:text-xl",3,"click"],["aria-label","Salvar altera\xE7\xF5es",1,"px-4","py-2","bg-amber-600","text-white","rounded-2xl","hover:bg-amber-700","transition","2xl:text-xl",3,"click"],["title","Gr\xE1fico",1,"px-4","py-2","text-white","rounded-2xl","hover:bg-amber-600","transition","2xl:text-xl",2,"background-color","#242427"],["src","assets/bar_chart.svg","alt","gr\xE1fico",1,"2xl:w-20"],["title","Registros","aria-label","Mostrar registros",1,"px-4","py-4","text-white","rounded-2xl","hover:bg-amber-600","transition","2xl:text-xl","relative",2,"background-color","#242427",3,"click","ngClass"],["src","assets/overview.svg","alt","vis\xE3o geral",1,"2xl:w-20"],["class","absolute -top-2 -right-2 bg-amber-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm",4,"ngIf"],["title","Coment\xE1rios","aria-label","Mostrar coment\xE1rios",1,"px-4","py-4","text-white","rounded-2xl","hover:bg-amber-600","transition","2xl:text-xl","relative",2,"background-color","#242427",3,"click","ngClass"],["src","assets/chat.svg","alt","chat",1,"2xl:w-20"],["class","absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm",4,"ngIf"],[1,"flex","flex-col","lg:flex-row","justify-between","gap-3","2xl:gap-8","p-2","rounded-lg"],[1,"flex","items-center","gap-3","xl:gap-8"],[1,"w-8","h-8","lg:w-14","lg:h-14","2xl:w-20","2xl:h-20","rounded-full","flex","items-center","justify-center",3,"ngStyle"],[1,"w-4","h-4","lg:w-7","lg:h-7","2xl:w-10","2xl:h-10",3,"src","alt"],[1,"flex","flex-col"],[1,"text-white","text-sm","2xl:text-2xl","lg:text-nowrap","font-bold"],[1,"text-amber-500","2xl:text-2xl","font-bold"],[1,"ml-2","text-red-400"],["aria-label","Registrar troca de \xF3leo",1,"ml-2","bg-amber-600","text-white","text-xs","px-2","py-1","rounded","hover:bg-amber-700",3,"click"],[1,"mt-4","mb-4","w-full","bg-gray-800","rounded-lg","p-4","border","border-gray-700","animate-fade-in"],[1,"text-amber-400","text-lg","2xl:text-3xl","font-bold","mb-3"],[1,"flex","flex-col","gap-3"],[1,"flex","gap-3","justify-between","items-center"],[1,"flex","gap-2"],[1,"bg-gray-600","text-white","px-4","py-1","rounded","hover:bg-gray-700",3,"click"],[1,"bg-amber-600","text-white","px-4","py-1","rounded","hover:bg-amber-700",3,"click"],[1,"mt-4","w-full","bg-gray-800","rounded-lg","p-4","border","border-gray-700"],[1,"flex","flex-col","gap-3","max-h-44","overflow-y-auto"],["class","bg-gray-900 p-3 mb-2 rounded-md",4,"ngFor","ngForOf"],[1,"mt-2","flex","gap-2"],["type","text","placeholder","Adicionar coment\xE1rio...",1,"w-full","bg-gray-900","border","border-gray-700","rounded-lg","px-3","py-2","text-white",3,"ngModelChange","ngModel"],[1,"bg-amber-600","text-white","rounded-lg","px-4","py-2","hover:bg-amber-700",3,"click"],[1,"bg-gray-900","p-3","mb-2","rounded-md"],[1,"flex","justify-between","mb-1"],[1,"text-amber-400","font-semibold"],[1,"text-gray-500","text-sm"],["class","text-gray-400 text-center p-4",4,"ngIf"],[1,"text-gray-400","text-center","p-4"],[1,"absolute","-top-2","-right-2","bg-amber-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"],[1,"absolute","-top-2","-right-2","bg-red-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"]],template:function(t,o){t&1&&(u(0,"app-header-dsveiculos"),n(1,"section",0),p(2,Un,9,4,"div",1),r(),u(3,"app-footer-dsveiculos"),p(4,Xn,67,35,"div",2)),t&2&&(a(2),s("ngIf",o.veiculos.length>0),a(2),s("ngIf",o.isHelpDialogOpen&&o.selectedVehicle))},dependencies:[V,P,E,S,U,H,G,Y,Z,ee,X],styles:["@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out forwards}.bg-gray-800[_ngcontent-%COMP%]{background-color:#242427}.bg-gray-900[_ngcontent-%COMP%]{background-color:#1a1a1d}.bg-amber-500[_ngcontent-%COMP%]{background-color:#f59e0b}.bg-amber-600[_ngcontent-%COMP%]{background-color:#d97706}.bg-amber-700[_ngcontent-%COMP%]{background-color:#b45309}.hover\\:bg-amber-600[_ngcontent-%COMP%]:hover{background-color:#d97706}button[_ngcontent-%COMP%]:focus, input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{outline:2px solid #F59E0B;outline-offset:2px}button[_ngcontent-%COMP%]{transition:background-color .2s,transform .1s}button[_ngcontent-%COMP%]:active{transform:scale(.98)}.carousel-container[_ngcontent-%COMP%]{position:relative;width:100%;overflow:hidden}.carousel-slide[_ngcontent-%COMP%]{transition:transform .5s ease-in-out}.carousel-nav-button[_ngcontent-%COMP%]{opacity:.7;transition:opacity .3s ease-in-out}.carousel-nav-button[_ngcontent-%COMP%]:hover{opacity:1}.vehicle-card[_ngcontent-%COMP%]{transform-origin:center;transition:all .3s ease-in-out}.vehicle-card[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 20px 25px -5px #fbbf241a,0 8px 10px -6px #fbbf241a}.carousel-indicator[_ngcontent-%COMP%]{transition:all .3s ease-in-out}.carousel-indicator[_ngcontent-%COMP%]:hover{transform:scale(1.2)}@media (min-width: 1920px){.vehicle-card[_ngcontent-%COMP%]{min-height:350px}.vehicle-icon[_ngcontent-%COMP%]{width:4rem;height:4rem}.vehicle-id[_ngcontent-%COMP%]{font-size:2.5rem}}@media (min-width: 2560px){.vehicle-card[_ngcontent-%COMP%]{min-height:400px}.vehicle-icon[_ngcontent-%COMP%]{width:5rem;height:5rem}.vehicle-id[_ngcontent-%COMP%]{font-size:3rem}}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-out forwards}.attribute-icon[_ngcontent-%COMP%]{filter:drop-shadow(0 4px 6px rgba(0,0,0,.1))}.status-indicator[_ngcontent-%COMP%]{box-shadow:0 4px 6px #0000001a}@media (prefers-color-scheme: dark){.vehicle-card[_ngcontent-%COMP%]{border-color:#fbbf2433}.status-indicator[_ngcontent-%COMP%]{box-shadow:0 4px 6px #fbbf241a}}"],data:{animation:[Se("slideUpDown",[ue(":enter",[oe({height:0,opacity:0}),me("300ms ease-out",oe({height:"*",opacity:1}))]),ue(":leave",[oe({height:"*",opacity:1}),me("300ms ease-in",oe({height:0,opacity:0}))])])]}})}return i})();var We=i=>({"background-color":i}),er=i=>({"text-red-400":i}),tr=(i,c,e,t)=>({"text-green-400":i,"text-orange-400":c,"text-red-400":e,"text-gray-400":t}),ir=(i,c)=>({"text-red-400":i,"text-green-400":c}),ri=i=>({"bg-amber-700":i});function or(i,c){if(i&1&&(n(0,"div",11),l(1),r()),i&2){let e=d().$implicit;a(),_(" ",e.comentarios.length," ")}}function nr(i,c){i&1&&(n(0,"div",12)(1,"span",13),u(2,"img",14),r()())}function rr(i,c){if(i&1&&(n(0,"span",15),u(1,"img",16),r()),i&2){let e=c.$implicit,t=c.index,o=d(3);s("ngStyle",C(3,We,e.cor)),a(),s("src",e.icone,T)("alt",o.getAttributeName(t))}}function ar(i,c){if(i&1){let e=b();n(0,"div",5),f("click",function(){let o=h(e).$implicit,m=d(2);return g(m.openHelpDialog(o))})("keydown.enter",function(){let o=h(e).$implicit,m=d(2);return g(m.openHelpDialog(o))})("keydown.space",function(o){let m=h(e).$implicit;return d(2).openHelpDialog(m),g(o.preventDefault())}),p(1,or,2,1,"div",6)(2,nr,3,0,"div",7),n(3,"h3",8),l(4),r(),n(5,"div",9),p(6,rr,2,5,"span",10),r()()}if(i&2){let e=c.$implicit,t=d(2);s("ngStyle",C(6,We,t.getBackgroundColor(e.status)+"99")),N("aria-label","Mostrar detalhes do ve\xEDculo "+e.id),a(),s("ngIf",e.comentarios&&e.comentarios.length>0),a(),s("ngIf",t.shouldShowOilChangeAlert(e)),a(2),x(e.id),a(2),s("ngForOf",e.atributos)}}function lr(i,c){if(i&1&&(n(0,"div",3),p(1,ar,7,8,"div",4),r()),i&2){let e=d();a(),s("ngForOf",e.veiculos)}}function sr(i,c){if(i&1&&(n(0,"div",55)(1,"div",56)(2,"span",57),u(3,"img",58),r(),n(4,"div",59)(5,"span",60),l(6),r(),n(7,"span",61),l(8,"0"),r()()()()),i&2){let e=c.$implicit,t=c.index,o=d(2);a(2),s("ngStyle",C(4,We,e.cor)),a(),s("src",e.icone,T)("alt",o.getAttributeName(t)),a(3),x(o.getAttributeName(t))}}function cr(i,c){i&1&&u(0,"span",62)}function dr(i,c){if(i&1){let e=b();n(0,"button",63),f("click",function(){h(e);let o=d(2);return g(o.toggleOilChangeForm())}),l(1," Registrar troca "),r()}}function mr(i,c){if(i&1){let e=b();n(0,"div",64)(1,"h4",65),l(2," Registrar Troca de \xD3leo "),r(),n(3,"div",66)(4,"div",67)(5,"p",30),l(6),r(),n(7,"div",68)(8,"button",69),f("click",function(){h(e);let o=d(2);return g(o.toggleOilChangeForm())}),l(9," Cancelar "),r(),n(10,"button",70),f("click",function(){h(e);let o=d(2);return g(o.registrarTrocaOleo())}),l(11," Confirmar "),r()()()()()}if(i&2){let e=d(2);a(6),_(" Confirma a troca de \xF3leo para o ve\xEDculo ",e.selectedVehicle.id,"? ")}}function ur(i,c){if(i&1&&(n(0,"div",39)(1,"span"),l(2,"UltPedidoID:"),r(),n(3,"span"),l(4),r()()),i&2){let e=d(2);a(4),x(e.selectedVehicle.ultPedidoID)}}function pr(i,c){if(i&1&&(n(0,"div",39)(1,"span"),l(2,"Integra\xE7\xE3o:"),r(),n(3,"span"),l(4),r()()),i&2){let e=d(2);a(4),x(e.selectedVehicle.ultIntegracao)}}function hr(i,c){if(i&1&&(n(0,"div",77)(1,"div",78)(2,"span",79),l(3),r(),n(4,"span",80),l(5),r()(),n(6,"p",30),l(7),r()()),i&2){let e=c.$implicit;a(3),x(e.author),a(2),x(e.date),a(2),x(e.text)}}function gr(i,c){if(i&1){let e=b();n(0,"div",71)(1,"h4",65),l(2," Coment\xE1rios "),r(),n(3,"div",72),p(4,hr,8,3,"div",73),r(),n(5,"div",74)(6,"input",75),q("ngModelChange",function(o){h(e);let m=d(2);return $(m.newComment,o)||(m.newComment=o),g(o)}),r(),n(7,"button",76),f("click",function(){h(e);let o=d(2);return g(o.addComment())}),l(8," Enviar "),r()()()}if(i&2){let e=d(2);s("@slideUpDown",e.showComments?"open":"closed"),a(4),s("ngForOf",e.selectedVehicle.comentarios),a(2),L("ngModel",e.newComment)}}function xr(i,c){if(i&1&&(n(0,"div",77)(1,"div",78)(2,"span",79),l(3),r(),n(4,"span",80),l(5),r()(),n(6,"p",30),l(7),r()()),i&2){let e=c.$implicit;a(3),x(e.author),a(2),x(e.date),a(2),x(e.text)}}function fr(i,c){i&1&&(n(0,"div",82),l(1," Nenhum registro. "),r())}function vr(i,c){if(i&1&&(n(0,"div",71)(1,"h4",65),l(2," Registros "),r(),n(3,"div",72),p(4,xr,8,3,"div",73)(5,fr,2,0,"div",81),r()()),i&2){let e=d(2);s("@slideUpDown",e.showOilChangeRecords?"open":"closed"),a(4),s("ngForOf",e.selectedVehicle.trocasOleo),a(),s("ngIf",!e.selectedVehicle.trocasOleo||e.selectedVehicle.trocasOleo.length===0)}}function _r(i,c){if(i&1&&(n(0,"div",83),l(1),r()),i&2){let e=d(2);a(),_(" ",e.selectedVehicle.trocasOleo.length," ")}}function br(i,c){if(i&1&&(n(0,"div",84),l(1),r()),i&2){let e=d(2);a(),_(" ",e.selectedVehicle.comentarios.length," ")}}function Cr(i,c){if(i&1){let e=b();n(0,"div",17)(1,"div",18)(2,"div",19)(3,"button",20),f("click",function(){h(e);let o=d();return g(o.closeHelpDialog())})("keydown.enter",function(){h(e);let o=d();return g(o.closeHelpDialog())}),l(4," \u2715 "),r()(),n(5,"div",21)(6,"div",22),p(7,sr,9,6,"div",23),r(),n(8,"div",24)(9,"div",25)(10,"h3",26),l(11),r(),n(12,"div",27)(13,"span"),l(14,"Euro 5"),r(),n(15,"span"),l(16,"1721"),r()()(),n(17,"div",28)(18,"div")(19,"p",29),l(20," Od\xF4metro: "),n(21,"span",30),l(22),r()(),n(23,"span",31),l(24,"Registro: 24/04/2025 03:00"),r()(),n(25,"div")(26,"p",32),l(27," KM desde \xFAltima troca: "),n(28,"span",30),l(29),r(),p(30,cr,1,0,"span",33),r(),n(31,"div",34)(32,"span",31),l(33),r(),p(34,dr,2,0,"button",35),r()()(),p(35,mr,12,1,"div",36),n(36,"div",37)(37,"div",38)(38,"div",39)(39,"span"),l(40,"Status:"),r(),n(41,"span",40),l(42),r()(),p(43,ur,5,1,"div",41)(44,pr,5,1,"div",41),n(45,"div",39)(46,"span"),l(47,"Troca de \xD3leo:"),r(),n(48,"span",40),l(49),r()()(),p(50,gr,9,3,"div",42)(51,vr,6,3,"div",42),n(52,"div",43)(53,"div",44)(54,"button",45),f("click",function(){h(e);let o=d();return g(o.cancelChanges())}),l(55," Cancelar "),r(),n(56,"button",46),f("click",function(){h(e);let o=d();return g(o.saveChanges())}),l(57," Salvar "),r()(),n(58,"div",44)(59,"button",47),u(60,"img",48),r(),n(61,"button",49),f("click",function(){h(e);let o=d();return g(o.toggleOilChangeRecords())}),u(62,"img",50),p(63,_r,2,1,"div",51),r(),n(64,"button",52),f("click",function(){h(e);let o=d();return g(o.toggleComments())}),u(65,"img",53),p(66,br,2,1,"div",54),r()()()()()()()()}if(i&2){let e=d();a(7),s("ngForOf",e.selectedVehicle.atributos),a(4),_(" ",e.selectedVehicle.id," "),a(11),x(e.selectedVehicle.odoAtual),a(4),s("ngClass",C(21,er,e.selectedVehicle.precisaTrocaOleo)),a(3),x(e.selectedVehicle.odoDesdeUltimaTroca||0),a(),s("ngIf",e.selectedVehicle.precisaTrocaOleo),a(3),_("\xDAltima troca de \xF3leo: ",e.selectedVehicle.ultimaTrocaOleo||"N\xE3o registrada",""),a(),s("ngIf",e.selectedVehicle.precisaTrocaOleo),a(),s("ngIf",e.showOilChangeForm),a(6),s("ngClass",K(23,tr,e.selectedVehicle.status==="OK",e.selectedVehicle.status==="Oficina",e.selectedVehicle.status==="Sem Comunicar",e.selectedVehicle.status==="Inativo")),a(),x(e.selectedVehicle.status),a(),s("ngIf",e.selectedVehicle.ultPedidoID),a(),s("ngIf",e.selectedVehicle.ultIntegracao),a(4),s("ngClass",D(28,ir,e.selectedVehicle.precisaTrocaOleo,!e.selectedVehicle.precisaTrocaOleo)),a(),_(" ",e.selectedVehicle.precisaTrocaOleo?"Necess\xE1ria":"OK"," "),a(),s("ngIf",e.showComments),a(),s("ngIf",e.showOilChangeRecords),a(10),s("ngClass",C(31,ri,e.showOilChangeRecords)),a(2),s("ngIf",e.selectedVehicle.trocasOleo&&e.selectedVehicle.trocasOleo.length>0),a(),s("ngClass",C(33,ri,e.showComments)),a(2),s("ngIf",e.selectedVehicle.comentarios&&e.selectedVehicle.comentarios.length>0)}}var ai=(()=>{class i{http;renderer;cdRef;veiculos=[];selectedVehicle=null;isHelpDialogOpen=!1;originalData=null;originalVehicleState=null;showComments=!1;newComment="";showOilChangeForm=!1;lastOilChangeDate="";showOilChangeRecords=!1;icones=["assets/device_thermostat.svg","assets/shutter_speed_minus.svg","assets/compress.svg","assets/do_not_step.svg","assets/air.svg","assets/speed.svg"];constructor(e,t,o){this.http=e,this.renderer=t,this.cdRef=o}ngOnInit(){console.log("CardVeiculoComponent initialized"),this.loadVehicleData()}loadVehicleData(){this.http.get("assets/mocks/veiculos_mock.json").subscribe({next:e=>{console.log("Data loaded:",e),this.originalData=JSON.parse(JSON.stringify(e)),this.veiculos=e.veiculos.map(t=>M(I({},t),{atributos:t.cores.map((o,m)=>({cor:o,icone:this.icones[m]||""})),comentarios:t.comentarios||[],odoAtual:t.odoAtual||0,ultimaTrocaOleo:t.ultimaTrocaOleo||null,odoNaUltimaTroca:t.odoNaUltimaTroca||0,trocasOleo:t.trocasOleo||[]})),this.veiculos.forEach(t=>{t.atributos.forEach((o,m)=>{o.cor=this.getClosestColorMatch(o.cor)}),this.calcularodoDesdeUltimaTroca(t)})},error:e=>{console.error("Erro ao carregar o JSON:",e)}})}calcularodoDesdeUltimaTroca(e){e.odoAtual&&e.odoNaUltimaTroca?e.odoDesdeUltimaTroca=e.odoAtual-e.odoNaUltimaTroca:e.odoDesdeUltimaTroca=e.odoAtual||0,e.precisaTrocaOleo=e.odoDesdeUltimaTroca>=1e4}registrarTrocaOleo(){if(!this.selectedVehicle)return;let e=new Date,t=`${e.toLocaleDateString("pt-BR")} ${e.getHours()}:${e.getMinutes().toString().padStart(2,"0")}`;this.selectedVehicle.ultimaTrocaOleo=e.toLocaleDateString("pt-BR"),this.selectedVehicle.odoNaUltimaTroca=this.selectedVehicle.odoAtual,this.selectedVehicle.odoDesdeUltimaTroca=0,this.selectedVehicle.precisaTrocaOleo=!1,this.selectedVehicle.trocasOleo||(this.selectedVehicle.trocasOleo=[]),this.selectedVehicle.trocasOleo.unshift({author:"Sistema",date:t,text:`Troca de \xF3leo realizada com od\xF4metro ${this.selectedVehicle.odoAtual}.`}),this.showOilChangeForm=!1,this.showOilChangeRecords=!0,this.cdRef.detectChanges()}toggleOilChangeForm(){this.showOilChangeForm=!this.showOilChangeForm}toggleOilChangeRecords(){this.showOilChangeRecords=!this.showOilChangeRecords,this.showOilChangeRecords&&(this.showComments=!1,this.selectedVehicle.trocasOleo||(this.selectedVehicle.trocasOleo=[]),this.cdRef.detectChanges())}shouldShowOilChangeAlert(e){return e.precisaTrocaOleo===!0}getClosestColorMatch(e){let t=this.getAllAttributeColors();return t.includes(e)?e:t[0]}getBackgroundColor(e){switch(e){case"OK":return"white";case"Oficina":return"#FF9858";case"Sem Comunicar":return"#E25652";case"Inativo":return"#B9B9B9";default:return"white"}}getIconPath(e){return this.icones[e]||""}getAttributeName(e){return["Temperatura","Torque","Press\xE3o Turbina","Pedal","Ar Comprimido","Max. Velocidade"][e]||`Atributo ${e+1}`}getColorOptions(){return[{label:"Inativo",value:"#242427"},{label:"Verde",value:"#387E38"},{label:"Laranja",value:"#F56B15"},{label:"Vermelho",value:"#AE2724"},{label:"Roxo",value:"#6224AE"}]}openHelpDialog(e){this.selectedVehicle=JSON.parse(JSON.stringify(e)),this.originalVehicleState=JSON.parse(JSON.stringify(e)),this.selectedVehicle.atributos.forEach(t=>{t.cor=this.getClosestColorMatch(t.cor)}),this.selectedVehicle.comentarios||(this.selectedVehicle.comentarios=[]),this.selectedVehicle.trocasOleo||(this.selectedVehicle.trocasOleo=[]),this.isHelpDialogOpen=!0,this.renderer.addClass(document.body,"overflow-hidden"),this.showComments=!1,this.showOilChangeRecords=!1,this.showOilChangeForm=!1,this.newComment="",setTimeout(()=>{let t=document.querySelector("#modal-close-button");t&&t.focus()},100)}closeHelpDialog(){this.isHelpDialogOpen=!1,this.renderer.removeClass(document.body,"overflow-hidden"),this.selectedVehicle=null,this.originalVehicleState=null,this.showComments=!1,this.showOilChangeForm=!1,this.showOilChangeRecords=!1,this.newComment=""}toggleComments(){this.showComments=!this.showComments,this.showComments&&(this.showOilChangeRecords=!1,this.cdRef.detectChanges())}addComment(){if(this.newComment.trim()&&this.selectedVehicle){let e=new Date,t=`${e.toLocaleDateString("pt-BR")} ${e.getHours()}:${e.getMinutes().toString().padStart(2,"0")}`;this.selectedVehicle.comentarios||(this.selectedVehicle.comentarios=[]),this.selectedVehicle.comentarios.unshift({author:"Usu\xE1rio Atual",date:t,text:this.newComment.trim()});let o=this.veiculos.findIndex(m=>m.id===this.selectedVehicle.id);o!==-1&&(this.veiculos[o].comentarios||(this.veiculos[o].comentarios=[]),this.veiculos[o].comentarios=[...this.selectedVehicle.comentarios]),this.newComment="",this.cdRef.detectChanges()}}getAllAttributeColors(){return this.getColorOptions().map(e=>e.value)}updateAttributeColor(e,t){if(!this.selectedVehicle)return;let m=t.target.value;this.selectedVehicle.atributos[e].cor=m}cancelChanges(){this.closeHelpDialog()}saveChanges(){if(this.selectedVehicle){let e=this.veiculos.findIndex(t=>t.id===this.selectedVehicle.id);e!==-1&&(this.veiculos[e].atributos.forEach((t,o)=>{o<this.selectedVehicle.atributos.length&&(t.cor=this.selectedVehicle.atributos[o].cor)}),this.veiculos[e].comentarios=[...this.selectedVehicle.comentarios],this.veiculos[e].trocasOleo=[...this.selectedVehicle.trocasOleo||[]],this.veiculos[e].ultimaTrocaOleo=this.selectedVehicle.ultimaTrocaOleo,this.veiculos[e].odoNaUltimaTroca=this.selectedVehicle.odoNaUltimaTroca,this.veiculos[e].odoDesdeUltimaTroca=this.selectedVehicle.odoDesdeUltimaTroca,this.veiculos[e].precisaTrocaOleo=this.selectedVehicle.precisaTrocaOleo,this.originalData&&this.originalData.veiculos&&this.originalData.veiculos[e]&&(this.originalData.veiculos[e].cores&&this.selectedVehicle.atributos.forEach((t,o)=>{o<this.originalData.veiculos[e].cores.length&&(this.originalData.veiculos[e].cores[o]=t.cor)}),this.originalData.veiculos[e].comentarios=[...this.selectedVehicle.comentarios],this.originalData.veiculos[e].trocasOleo=[...this.selectedVehicle.trocasOleo||[]],this.originalData.veiculos[e].ultimaTrocaOleo=this.selectedVehicle.ultimaTrocaOleo,this.originalData.veiculos[e].odoNaUltimaTroca=this.selectedVehicle.odoNaUltimaTroca),this.calcularodoDesdeUltimaTroca(this.veiculos[e]),this.saveChangesToJson())}this.closeHelpDialog()}saveChangesToJson(){console.log("Salvando altera\xE7\xF5es:",this.originalData)}handleEscapeKey(){this.isHelpDialogOpen&&this.closeHelpDialog()}handleTabKey(e){if(!this.isHelpDialogOpen)return;let t=document.querySelector('[role="dialog"]');if(!t)return;let o=t.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(o.length===0)return;let m=o[0],v=o[o.length-1];e.shiftKey&&document.activeElement===m?(v.focus(),e.preventDefault()):!e.shiftKey&&document.activeElement===v&&(m.focus(),e.preventDefault())}static \u0275fac=function(t){return new(t||i)(w(J),w(R),w(j))};static \u0275cmp=y({type:i,selectors:[["app-card-veiculo"]],hostBindings:function(t,o){t&1&&f("keydown.escape",function(){return o.handleEscapeKey()},!1,F)("keydown.tab",function(v){return o.handleTabKey(v)},!1,F)},decls:5,vars:2,consts:[[1,"pb-28","pt-44"],["class","grid grid-cols-1 md:grid-cols-4 lg:grid-cols-12 lg:flex flex-wrap items-center justify-center gap-4",4,"ngIf"],["class","fixed inset-0 z-50 md:p-4 flex items-center justify-center bg-black bg-opacity-50 overflow-y-scroll","role","dialog","aria-modal","true","aria-labelledby","modal-title",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-4","lg:grid-cols-12","lg:flex","flex-wrap","items-center","justify-center","gap-4"],["class","shadow-2xl p-3 rounded-2xl flex flex-col items-center justify-center cursor-pointer border-2 relative transition-transform duration-300 hover:scale-105 hover:opacity-50","tabindex","0","role","button",3,"ngStyle","click","keydown.enter","keydown.space",4,"ngFor","ngForOf"],["tabindex","0","role","button",1,"shadow-2xl","p-3","rounded-2xl","flex","flex-col","items-center","justify-center","cursor-pointer","border-2","relative","transition-transform","duration-300","hover:scale-105","hover:opacity-50",3,"click","keydown.enter","keydown.space","ngStyle"],["class","absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm","aria-label","Este ve\xEDculo possui coment\xE1rios",4,"ngIf"],["class","absolute top-2 left-2 bg-amber-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm","aria-label","Este ve\xEDculo precisa de troca de \xF3leo",4,"ngIf"],[1,"text-black","font-bold","mb-2","text-3xl"],[1,"p-1.5","rounded-xl","w-full","flex","justify-center","gap-1",2,"background-color","#141416"],["class","w-7 h-7 rounded-full flex items-center justify-center",3,"ngStyle",4,"ngFor","ngForOf"],["aria-label","Este ve\xEDculo possui coment\xE1rios",1,"absolute","-top-2","-right-2","bg-red-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"],["aria-label","Este ve\xEDculo precisa de troca de \xF3leo",1,"absolute","top-2","left-2","bg-amber-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"],[1,"text-xs"],["src","assets/water_drop.svg","alt","Alerta de troca de \xF3leo"],[1,"w-7","h-7","rounded-full","flex","items-center","justify-center",3,"ngStyle"],[3,"src","alt"],["role","dialog","aria-modal","true","aria-labelledby","modal-title",1,"fixed","inset-0","z-50","md:p-4","flex","items-center","justify-center","bg-black","bg-opacity-50","overflow-y-scroll"],[1,"rounded-3xl","shadow-lg","w-max","max-w-[90vw]","h-max","2xl:max-w-[100vw]","2xl:max-h-[100vh]","overflow-y-auto","animate-fade-in","relative",2,"background-color","#141416"],[1,"absolute","right-6","top-6","2xl:top-12","2xl:right-12"],["id","modal-close-button","aria-label","Fechar modal",1,"text-lg","xl:text-4xl","font-semibold","text-gray-500","hover:text-amber-400",3,"click","keydown.enter"],[1,"rounded-3xl","flex","flex-col-reverse","lg:flex-row","justify-center","w-max","2xl:max-w-[100vw]","h-max","2xl:max-h-[100vh]"],[1,"grid","grid-cols-1","md:grid-cols-3","lg:grid-cols-1","lg:flex","lg:flex-col","justify-center","rounded-3xl","gap-3","w-full","2xl:max-h-[100vh]","p-6","2xl:p-24",2,"background-color","#242427"],["class","flex flex-col lg:flex-row justify-between gap-3 2xl:gap-8 p-2 rounded-lg",4,"ngFor","ngForOf"],[1,"p-8","2xl:p-20","flex","flex-col","justify-between","w-full","2xl:max-w-[100vw]","2xl:max-h-[100vh]"],[1,"flex","flex-col","mb-10"],[1,"font-bold","text-2xl","lg:text-4xl","2xl:text-6xl","text-amber-400"],[1,"flex","gap-4","text-sm","2xl:text-2xl","mb-1","font-bold","text-white"],[1,"flex","flex-col","justify-between","gap-6","mb-4"],[1,"text-amber-400","text-md","lg:text-lg","2xl:text-3xl","font-bold","mb-2"],[1,"text-white"],[1,"text-lg","text-white"],[1,"text-amber-400","text-md","lg:text-lg","2xl:text-2xl","font-bold","mb-2",3,"ngClass"],["class","ml-2 text-red-400",4,"ngIf"],[1,"flex","items-center","gap-2"],["class","ml-2 bg-amber-600 text-white text-xs px-2 py-1 rounded hover:bg-amber-700","aria-label","Registrar troca de \xF3leo",3,"click",4,"ngIf"],["class","mt-4 mb-4 w-full bg-gray-800 rounded-lg p-4 border border-gray-700 animate-fade-in",4,"ngIf"],[1,"pt-10"],[1,"w-full","text-gray-300","flex","flex-col","gap-4","pb-6"],[1,"flex","justify-between","py-2","border-b","border-gray-700","2xl:text-2xl"],[3,"ngClass"],["class","flex justify-between py-2 border-b border-gray-700 2xl:text-2xl",4,"ngIf"],["class","mt-4 w-full bg-gray-800 rounded-lg p-4 border border-gray-700",4,"ngIf"],[1,"flex","justify-between","mt-4","gap-4","w-full"],[1,"flex","gap-4"],["aria-label","Cancelar altera\xE7\xF5es",1,"px-4","py-2","bg-gray-600","text-white","rounded-2xl","hover:bg-gray-700","transition","2xl:text-xl",3,"click"],["aria-label","Salvar altera\xE7\xF5es",1,"px-4","py-2","bg-amber-600","text-white","rounded-2xl","hover:bg-amber-700","transition","2xl:text-xl",3,"click"],["title","Gr\xE1fico",1,"px-4","py-2","text-white","rounded-2xl","hover:bg-amber-600","transition","2xl:text-xl",2,"background-color","#242427"],["src","assets/bar_chart.svg","alt","gr\xE1fico",1,"2xl:w-20"],["title","Registros","aria-label","Mostrar registros",1,"px-4","py-4","text-white","rounded-2xl","hover:bg-amber-600","transition","2xl:text-xl","relative",2,"background-color","#242427",3,"click","ngClass"],["src","assets/overview.svg","alt","vis\xE3o geral",1,"2xl:w-20"],["class","absolute -top-2 -right-2 bg-amber-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm",4,"ngIf"],["title","Coment\xE1rios","aria-label","Mostrar coment\xE1rios",1,"px-4","py-4","text-white","rounded-2xl","hover:bg-amber-600","transition","2xl:text-xl","relative",2,"background-color","#242427",3,"click","ngClass"],["src","assets/chat.svg","alt","chat",1,"2xl:w-20"],["class","absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm",4,"ngIf"],[1,"flex","flex-col","lg:flex-row","justify-between","gap-3","2xl:gap-8","p-2","rounded-lg"],[1,"flex","items-center","gap-3","xl:gap-8"],[1,"w-8","h-8","lg:w-14","lg:h-14","2xl:w-20","2xl:h-20","rounded-full","flex","items-center","justify-center",3,"ngStyle"],[1,"w-4","h-4","lg:w-7","lg:h-7","2xl:w-10","2xl:h-10",3,"src","alt"],[1,"flex","flex-col"],[1,"text-white","text-sm","2xl:text-2xl","lg:text-nowrap","font-bold"],[1,"text-amber-500","2xl:text-2xl","font-bold"],[1,"ml-2","text-red-400"],["aria-label","Registrar troca de \xF3leo",1,"ml-2","bg-amber-600","text-white","text-xs","px-2","py-1","rounded","hover:bg-amber-700",3,"click"],[1,"mt-4","mb-4","w-full","bg-gray-800","rounded-lg","p-4","border","border-gray-700","animate-fade-in"],[1,"text-amber-400","text-lg","2xl:text-3xl","font-bold","mb-3"],[1,"flex","flex-col","gap-3"],[1,"flex","gap-3","justify-between","items-center"],[1,"flex","gap-2"],[1,"bg-gray-600","text-white","px-4","py-1","rounded","hover:bg-gray-700",3,"click"],[1,"bg-amber-600","text-white","px-4","py-1","rounded","hover:bg-amber-700",3,"click"],[1,"mt-4","w-full","bg-gray-800","rounded-lg","p-4","border","border-gray-700"],[1,"flex","flex-col","gap-3","max-h-44","overflow-y-auto"],["class","bg-gray-900 p-3 mb-2 rounded-md",4,"ngFor","ngForOf"],[1,"mt-2","flex","gap-2"],["type","text","placeholder","Adicionar coment\xE1rio...",1,"w-full","bg-gray-900","border","border-gray-700","rounded-lg","px-3","py-2","text-white",3,"ngModelChange","ngModel"],[1,"bg-amber-600","text-white","rounded-lg","px-4","py-2","hover:bg-amber-700",3,"click"],[1,"bg-gray-900","p-3","mb-2","rounded-md"],[1,"flex","justify-between","mb-1"],[1,"text-amber-400","font-semibold"],[1,"text-gray-500","text-sm"],["class","text-gray-400 text-center p-4",4,"ngIf"],[1,"text-gray-400","text-center","p-4"],[1,"absolute","-top-2","-right-2","bg-amber-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"],[1,"absolute","-top-2","-right-2","bg-red-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"]],template:function(t,o){t&1&&(u(0,"app-header-dsveiculos"),n(1,"section",0),p(2,lr,2,1,"div",1),r(),u(3,"app-footer-dsveiculos"),p(4,Cr,67,35,"div",2)),t&2&&(a(2),s("ngIf",o.veiculos.length>0),a(2),s("ngIf",o.isHelpDialogOpen&&o.selectedVehicle))},dependencies:[V,P,E,S,U,H,G,Y,Z,ee,X],styles:["@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out forwards}.bg-gray-800[_ngcontent-%COMP%]{background-color:#242427}.bg-gray-900[_ngcontent-%COMP%]{background-color:#1a1a1d}.bg-amber-500[_ngcontent-%COMP%]{background-color:#f59e0b}.bg-amber-600[_ngcontent-%COMP%]{background-color:#d97706}.bg-amber-700[_ngcontent-%COMP%]{background-color:#b45309}.hover\\:bg-amber-600[_ngcontent-%COMP%]:hover{background-color:#d97706}button[_ngcontent-%COMP%]:focus, input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{outline:2px solid #F59E0B;outline-offset:2px}button[_ngcontent-%COMP%]{transition:background-color .2s,transform .1s}button[_ngcontent-%COMP%]:active{transform:scale(.98)}"]})}return i})();var li=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=y({type:i,selectors:[["app-dash-veiculos"]],decls:2,vars:0,template:function(t,o){t&1&&(n(0,"section"),u(1,"app-card-veiculo"),r())},dependencies:[ai,V],encapsulation:2})}return i})();var wr=["chart"],si=(()=>{class i{constructor(){this.chart=O(),this.annotations=O(),this.colors=O(),this.dataLabels=O(),this.series=O(),this.stroke=O(),this.labels=O(),this.legend=O(),this.markers=O(),this.noData=O(),this.fill=O(),this.tooltip=O(),this.plotOptions=O(),this.responsive=O(),this.xaxis=O(),this.yaxis=O(),this.forecastDataPoints=O(),this.grid=O(),this.states=O(),this.title=O(),this.subtitle=O(),this.theme=O(),this.autoUpdateSeries=O(!0),this.chartReady=et(),this.chartInstance=tt(null),this.chartElement=ot.required("chart"),this.ngZone=Ne(Xe),this.isBrowser=ut(Ne(it))}ngOnChanges(e){this.isBrowser&&this.ngZone.runOutsideAngular(()=>{Ye.schedule(()=>this.hydrate(e))})}ngOnDestroy(){this.destroy()}hydrate(e){if(this.autoUpdateSeries()&&Object.keys(e).filter(o=>o!=="series").length===0){this.updateSeries(this.series(),!0);return}this.createElement()}createElement(){return te(this,null,function*(){let{default:e}=yield import("./chunk-OFYZ6HBG.js");window.ApexCharts||=e;let t={};["annotations","chart","colors","dataLabels","series","stroke","labels","legend","fill","tooltip","plotOptions","responsive","markers","noData","xaxis","yaxis","forecastDataPoints","grid","states","title","subtitle","theme"].forEach(v=>{let A=this[v]();A&&(t[v]=A)}),this.destroy();let m=this.ngZone.runOutsideAngular(()=>new e(this.chartElement().nativeElement,t));this.chartInstance.set(m),this.render(),this.chartReady.emit({chartObj:m})})}render(){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.render())}updateOptions(e,t,o,m){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.updateOptions(e,t,o,m))}updateSeries(e,t){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.updateSeries(e,t))}appendSeries(e,t){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.appendSeries(e,t))}appendData(e){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.appendData(e))}highlightSeries(e){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.highlightSeries(e))}toggleSeries(e){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.toggleSeries(e))}showSeries(e){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.showSeries(e))}hideSeries(e){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.hideSeries(e))}resetSeries(){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.resetSeries())}zoomX(e,t){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.zoomX(e,t))}toggleDataPointSelection(e,t){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.toggleDataPointSelection(e,t))}destroy(){this.chartInstance()?.destroy(),this.chartInstance.set(null)}setLocale(e){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.setLocale(e))}paper(){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.paper())}addXaxisAnnotation(e,t,o){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.addXaxisAnnotation(e,t,o))}addYaxisAnnotation(e,t,o){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.addYaxisAnnotation(e,t,o))}addPointAnnotation(e,t,o){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.addPointAnnotation(e,t,o))}removeAnnotation(e,t){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.removeAnnotation(e,t))}clearAnnotations(e){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.clearAnnotations(e))}dataURI(e){return this.chartInstance()?.dataURI(e)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=y({type:i,selectors:[["apx-chart"]],viewQuery:function(t,o){t&1&&lt(o.chartElement,wr,5),t&2&&st()},inputs:{chart:[1,"chart"],annotations:[1,"annotations"],colors:[1,"colors"],dataLabels:[1,"dataLabels"],series:[1,"series"],stroke:[1,"stroke"],labels:[1,"labels"],legend:[1,"legend"],markers:[1,"markers"],noData:[1,"noData"],fill:[1,"fill"],tooltip:[1,"tooltip"],plotOptions:[1,"plotOptions"],responsive:[1,"responsive"],xaxis:[1,"xaxis"],yaxis:[1,"yaxis"],forecastDataPoints:[1,"forecastDataPoints"],grid:[1,"grid"],states:[1,"states"],title:[1,"title"],subtitle:[1,"subtitle"],theme:[1,"theme"],autoUpdateSeries:[1,"autoUpdateSeries"]},outputs:{chartReady:"chartReady"},features:[Qe],decls:2,vars:0,consts:[["chart",""]],template:function(t,o){t&1&&u(0,"div",null,0)},encapsulation:2,changeDetection:0})}}return i})();var ci=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=nt({type:i})}static{this.\u0275inj=Ze({})}}return i})();var Vr=["chart"];function Sr(i,c){i&1&&(n(0,"div",6),u(1,"div",7),r())}function Or(i,c){if(i&1&&(n(0,"div",8)(1,"div",9),l(2),r(),n(3,"div",10)(4,"span",11),l(5),r(),n(6,"span",12),l(7),r()()()),i&2){let e=c.$implicit;a(2),_(" ",e.nome," "),a(3),x(e.valor),a(),s("ngClass",e.tendencia>0?"text-green-500":e.tendencia<0?"text-red-500":"text-gray-500"),a(),ct(" ",e.tendencia>0?"\u2191":e.tendencia<0?"\u2193":"\u2192"," ",e.unidade," ")}}function Er(i,c){if(i&1&&(n(0,"div",30)(1,"h2",16),l(2,"Insufici\xEAncias por Linha"),r(),n(3,"div",23),u(4,"apx-chart",31,0),r()()),i&2){let e=d(2);a(4),s("series",e.heatmapOptions.series)("chart",e.heatmapOptions.chart)("dataLabels",e.heatmapOptions.dataLabels)("plotOptions",e.heatmapOptions.plotOptions)("xaxis",e.heatmapOptions.xaxis)("tooltip",e.heatmapOptions.tooltip)}}function Tr(i,c){if(i&1&&(n(0,"div",22)(1,"h2",16),l(2,"Insufici\xEAncias por Linha"),r(),n(3,"div",23),u(4,"apx-chart",32,0),r()()),i&2){let e=d(2);a(4),s("series",e.barChartOptions.series)("chart",e.barChartOptions.chart)("xaxis",e.barChartOptions.xaxis)("yaxis",e.barChartOptions.yaxis)("plotOptions",e.barChartOptions.plotOptions)("tooltip",e.barChartOptions.tooltip)("legend",e.barChartOptions.legend)("fill",e.barChartOptions.fill)}}function kr(i,c){i&1&&(n(0,"div",33),l(1," Clique em uma linha no gr\xE1fico para ver os motoristas "),r())}function Dr(i,c){i&1&&(n(0,"div",33),l(1," Nenhum motorista insuficiente nesta linha "),r())}function Ir(i,c){if(i&1){let e=b();n(0,"li",36),f("click",function(){let o=h(e).$implicit,m=d(3);return g(m.selecionarMotorista(o))})("keydown.enter",function(){let o=h(e).$implicit,m=d(3);return g(m.selecionarMotorista(o))}),l(1),r()}if(i&2){let e=c.$implicit;a(),_(" ",e," ")}}function Mr(i,c){if(i&1&&(n(0,"div")(1,"ul",34),p(2,Ir,2,1,"li",35),r()()),i&2){let e=d(2);a(2),s("ngForOf",e.motoristasSelecionados)}}function Fr(i,c){if(i&1){let e=b();n(0,"div",13)(1,"div",14)(2,"div",15)(3,"h2",16),l(4,"\xA0"),r(),n(5,"div",17)(6,"button",18),f("click",function(){h(e);let o=d();return g(o.toggleViewMode())}),l(7),r(),n(8,"button",19),f("click",function(){h(e);let o=d();return g(o.exportarDados())}),l(9," Exportar "),r()()(),p(10,Er,6,6,"div",20)(11,Tr,6,8,"div",21),n(12,"div")(13,"div",22)(14,"h3",16),l(15,"Giro do Motor"),r(),n(16,"div",23),u(17,"apx-chart",24),r()()()(),n(18,"div",25)(19,"h2",26),l(20),r(),p(21,kr,2,0,"div",27)(22,Dr,2,0,"div",27)(23,Mr,3,1,"div",28),n(24,"div",22)(25,"h3",16),l(26,"Taxa Insuficientes"),r(),n(27,"div",23),u(28,"apx-chart",29),r()()()()}if(i&2){let e=d();a(7),_(" Ver ",e.viewMode==="heatmap"?"Gr\xE1fico de Barras":"Heatmap"," "),a(3),s("ngIf",e.viewMode==="heatmap"),a(),s("ngIf",e.viewMode==="barras"),a(6),s("series",e.giroChartOptions.series)("chart",e.giroChartOptions.chart)("xaxis",e.giroChartOptions.xaxis)("fill",e.giroChartOptions.fill)("markers",e.giroChartOptions.markers)("colors",e.giroChartOptions.colors),a(3),_(" ",e.linhaSelecionada?"Motoristas da Linha "+e.linhaSelecionada:"Selecione uma linha"," "),a(),s("ngIf",!e.linhaSelecionada),a(),s("ngIf",e.linhaSelecionada&&e.motoristasSelecionados.length===0),a(),s("ngIf",e.linhaSelecionada&&e.motoristasSelecionados.length>0),a(5),s("series",e.pontuacaoChartOptions.series)("chart",e.pontuacaoChartOptions.chart)("plotOptions",e.pontuacaoChartOptions.plotOptions)("colors",e.pontuacaoChartOptions.colors)("labels",e.pontuacaoChartOptions.labels)}}var di=(()=>{class i{fb;cdr;renderer;chart;heatmapOptions={series:[],chart:{height:350,type:"heatmap",toolbar:{show:!0},events:{dataPointSelection:(e,t,o)=>{let m=o.seriesIndex,v=o.dataPointIndex;m!==void 0&&v!==void 0&&this.onChartClick({seriesIndex:m,dataPointIndex:v})}}},dataLabels:{enabled:!0,formatter:(e,t)=>{let o=t.seriesIndex,m=t.dataPointIndex,v=o*5+m,A=this.insuficientesData[v];return A?`${A.linha}
${e.toFixed(0)}%`:""},style:{colors:["#000"],fontSize:"20px",fontWeight:"bold"}},plotOptions:{heatmap:{shadeIntensity:.5,colorScale:{ranges:[{from:0,to:10,color:"#BBDEFB",name:"Baixo"},{from:10.1,to:30,color:"#64B5F6",name:"M\xE9dio"},{from:30.1,to:100,color:"#1565C0",name:"Alto"}]}}},xaxis:{type:"category",categories:[],labels:{show:!1}},legend:{show:!1}};barChartOptions={series:[],chart:{height:350,type:"bar",toolbar:{show:!0},events:{dataPointSelection:(e,t,o)=>{if(o.dataPointIndex!==void 0&&o.dataPointIndex>=0){let m=this.insuficientesData[o.dataPointIndex];m&&this.selecionarLinha(m.linha)}}}},plotOptions:{bar:{horizontal:!1,columnWidth:"65%",borderRadius:4,dataLabels:{position:"top"}}},dataLabels:{enabled:!0,formatter:e=>`${e}%`,offsetY:-20,style:{fontSize:"12px",colors:["#fff"]}},fill:{colors:["#1565C0"],type:"gradient",gradient:{shade:"dark",type:"vertical",shadeIntensity:.3,gradientToColors:["#64B5F6"],inverseColors:!1,opacityFrom:1,opacityTo:.8}},xaxis:{categories:[],title:{text:"Linhas",style:{color:"#fff",fontSize:"14px"}},labels:{style:{colors:"#fff"}}},yaxis:{title:{text:"Percentual",style:{color:"#fff",fontSize:"14px"}},labels:{formatter:e=>`${e}%`,style:{colors:"#fff"}}},tooltip:{y:{formatter:e=>`${e}%`},theme:"dark"},legend:{position:"top",labels:{colors:"#fff"}}};pontuacaoChartOptions={series:[0],chart:{height:250,type:"radialBar",background:"transparent"},plotOptions:{radialBar:{hollow:{size:"70%"},track:{background:"#2c2c2e"},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontWeight:600,offsetY:-10,color:"#fff"},value:{show:!0,fontSize:"30px",fontWeight:700,formatter:e=>`${e}%`,color:"#fff"}}}},colors:["#64B5F6"],labels:["Taxa"]};giroChartOptions={chart:{type:"area",height:250,background:"transparent",toolbar:{show:!1},zoom:{enabled:!1}},colors:["#64B5F6"],stroke:{curve:"smooth",width:3},fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.7,opacityTo:.1,stops:[0,90,100]}},tooltip:{theme:"dark"},xaxis:{categories:[],labels:{style:{colors:"#fff"}}},yaxis:{labels:{style:{colors:"#fff"}}},series:[{name:"Giro do Motor",data:[]}],markers:{size:5,colors:["#1565C0"],strokeWidth:0,hover:{size:7}}};consumoChartOptions={chart:{type:"line",height:250,background:"transparent",toolbar:{show:!1},zoom:{enabled:!1}},series:[{name:"Consumo (km/l)",data:[]}],colors:["#4CAF50"],stroke:{curve:"smooth",width:3},xaxis:{categories:[],labels:{style:{colors:"#fff"}}},yaxis:{labels:{style:{colors:"#fff"},formatter:e=>e.toFixed(2)}},markers:{size:5,colors:["#4CAF50"],strokeWidth:0},tooltip:{theme:"dark",y:{formatter:e=>`${e.toFixed(2)} km/l`}}};freioChartOptions={chart:{type:"bar",height:250,background:"transparent",toolbar:{show:!1},stacked:!0},series:[{name:"Freio",data:[]},{name:"Pedal",data:[]}],colors:["#FF9800","#F44336"],plotOptions:{bar:{horizontal:!1,columnWidth:"70%",borderRadius:4}},xaxis:{categories:[],labels:{style:{colors:"#fff"}}},yaxis:{labels:{style:{colors:"#fff"},formatter:e=>`${e}%`}},tooltip:{theme:"dark",y:{formatter:e=>`${e}%`}},legend:{position:"top",horizontalAlign:"right",labels:{colors:"#fff"}}};filterForm;insuficientesData=[];filterOptions={empresas:["Empresa A","Empresa B","Empresa C"],garagens:["Garagem 1","Garagem 2","Garagem 3"],tiposTurno:["Manh\xE3","Tarde","Noite"]};viewMode="heatmap";isLoading=!1;linhaSelecionada=null;motoristasSelecionados=[];motoristaSelecionado=null;indicadoresMotorista=[];constructor(e,t,o){this.fb=e,this.cdr=t,this.renderer=o,this.filterForm=this.fb.group({periodoInicio:[this.getDefaultStartDate()],periodoFim:[new Date],empresa:[""],garagem:[""],tipoTurno:[""]})}ngOnInit(){this.carregarDadosMockados(),this.filterForm.valueChanges.subscribe(()=>{this.carregarDadosMockados()})}getDefaultStartDate(){let e=new Date;return e.setMonth(e.getMonth()-1),e}carregarDadosMockados(){this.isLoading=!0,this.resetSelecoes();let e=["Jo\xE3o Silva","Maria Oliveira","Pedro Santos","Ana Costa","Carlos Ferreira","Luiza Souza","Roberto Almeida","Juliana Lima","Marcos Ribeiro","Fernanda Gomes","Ricardo Martins","Paula Cardoso","Andr\xE9 Pereira","Camila Rodrigues","Bruno Carvalho"],t=o=>o===0?[]:[...e].sort(()=>.5-Math.random()).slice(0,Math.min(o,e.length));setTimeout(()=>{this.insuficientesData=[{linha:"117",quantidade:6,percentual:6,motoristas:t(6)},{linha:"133",quantidade:0,percentual:0,motoristas:[]},{linha:"161",quantidade:0,percentual:0,motoristas:[]},{linha:"201",quantidade:2,percentual:20,motoristas:t(2)},{linha:"202",quantidade:2,percentual:20,motoristas:t(2)},{linha:"415",quantidade:56,percentual:56,motoristas:t(10)},{linha:"426",quantidade:33,percentual:33,motoristas:t(8)},{linha:"539",quantidade:2,percentual:20,motoristas:t(2)},{linha:"585",quantidade:0,percentual:0,motoristas:[]},{linha:"626",quantidade:0,percentual:0,motoristas:[]},{linha:"700",quantidade:12,percentual:12,motoristas:t(5)},{linha:"701",quantidade:15,percentual:15,motoristas:t(6)}],this.insuficientesData.sort((o,m)=>parseInt(o.linha)-parseInt(m.linha)),this.carregarIndicadoresGerais(),this.updateCharts(),this.isLoading=!1},500)}carregarIndicadoresGerais(){this.indicadoresMotorista=[{nome:"Efici\xEAncia",valor:"82",tendencia:1,unidade:"%"},{nome:"KM/L",valor:"3.45",tendencia:-1,unidade:"km/l"},{nome:"KM Total",valor:"1456",tendencia:1,unidade:"km"},{nome:"Insuficientes",valor:"24",tendencia:-1,unidade:"%"},{nome:"RPM M\xE9dio",valor:"2210",tendencia:1,unidade:"rpm"},{nome:"Linhas",valor:"12",tendencia:0,unidade:""}]}updateCharts(){this.viewMode==="heatmap"?this.updateHeatmap():this.updateBarChart(),this.atualizarGraficosGerais()}updateHeatmap(){if(this.insuficientesData.length===0)return;let e=5,t=[],o=[];for(let v=0;v<e;v++)t.push("");let m=[];for(let v=0;v<this.insuficientesData.length;v+=e)m.push(this.insuficientesData.slice(v,v+e));m.forEach((v,A)=>{let ge=t.map((ae,Ee)=>{let Ge=v[Ee];return{x:ae,y:Ge?Ge.percentual:0}});o.push({name:`Linha ${A+1}`,data:ge})}),this.heatmapOptions=M(I({},this.heatmapOptions),{chart:M(I({},this.heatmapOptions.chart||{}),{type:"heatmap",height:m.length*80,events:{dataPointSelection:(v,A,ge)=>{let ae=ge.seriesIndex,Ee=ge.dataPointIndex;ae!==void 0&&Ee!==void 0&&this.onChartClick({seriesIndex:ae,dataPointIndex:Ee})}}}),series:o,xaxis:{labels:{show:!1},title:{text:""}},tooltip:{custom:({seriesIndex:v,dataPointIndex:A})=>{let ge=v*e+A,ae=this.insuficientesData[ge];return ae?`
            <div class="p-2 bg-gray-800 shadow-lg rounded-md border border-gray-700 text-white">
              <div class="font-bold mb-1">Linha: ${ae.linha}</div>
              <div>Quantidade: ${ae.quantidade}</div>
              <div>Percentual: ${ae.percentual}%</div>
              <div class="text-xs text-gray-300 mt-1">Clique para ver detalhes</div>
            </div>
          `:'<div class="custom-tooltip">Sem dados</div>'}}})}updateBarChart(){if(this.insuficientesData.length===0)return;let e=this.insuficientesData.map(o=>o.linha),t=this.insuficientesData.map(o=>o.percentual);this.barChartOptions=M(I({},this.barChartOptions),{series:[{name:"Percentual",data:t}],xaxis:M(I({},this.barChartOptions.xaxis),{categories:e}),chart:M(I({},this.barChartOptions.chart),{events:{dataPointSelection:(o,m,v)=>{if(v.dataPointIndex!==void 0&&v.dataPointIndex>=0){let A=this.insuficientesData[v.dataPointIndex];A&&this.selecionarLinha(A.linha)}}}})})}atualizarGraficosGerais(){let e=Array.from({length:7},(o,m)=>{let v=new Date;return v.setDate(v.getDate()-(6-m)),`${v.getDate()}/${v.getMonth()+1}`}),t=Math.floor(65+Math.random()*30);this.pontuacaoChartOptions.series=[t],this.giroChartOptions.series=[{name:"Giro do Motor",data:e.map(()=>Math.floor(1600+Math.random()*800))}],this.giroChartOptions.xaxis={categories:e,labels:{style:{colors:"#fff"}}},this.consumoChartOptions.series=[{name:"Consumo (km/l)",data:e.map(()=>+(2.5+Math.random()*1.2).toFixed(2))}],this.consumoChartOptions.xaxis={categories:e,labels:{style:{colors:"#fff"}}},this.freioChartOptions.series=[{name:"Freio",data:e.map(()=>Math.floor(15+Math.random()*40))},{name:"Pedal",data:e.map(()=>Math.floor(20+Math.random()*45))}],this.freioChartOptions.xaxis={categories:e,labels:{style:{colors:"#fff"}}}}toggleViewMode(){this.viewMode=this.viewMode==="heatmap"?"barras":"heatmap",setTimeout(()=>this.updateCharts(),0)}exportarDados(){let e=`data:text/csv;charset=utf-8,Linha,Quantidade,Percentual,Motoristas
`+this.insuficientesData.map(m=>`${m.linha},${m.quantidade},${m.percentual},"${(m.motoristas||[]).join("; ")}"`).join(`
`),t=encodeURI(e),o=document.createElement("a");o.setAttribute("href",t),o.setAttribute("download","insuficientes_por_linha.csv"),document.body.appendChild(o),o.click(),document.body.removeChild(o)}onChartClick(e){let o=e.seriesIndex*5+e.dataPointIndex;if(o>=0&&o<this.insuficientesData.length){let m=this.insuficientesData[o];m&&this.selecionarLinha(m.linha)}}selecionarLinha(e){if(this.linhaSelecionada===e){this.resetSelecoes(),this.cdr.detectChanges();return}this.linhaSelecionada=e,this.motoristaSelecionado=null;let t=this.insuficientesData.find(o=>o.linha===e);t&&t.motoristas&&t.motoristas.length>0?this.motoristasSelecionados=t.motoristas:this.motoristasSelecionados=[],this.cdr.detectChanges()}selecionarMotorista(e){this.motoristaSelecionado=e,this.carregarDadosMotorista(e)}resetSelecoes(){this.linhaSelecionada=null,this.motoristasSelecionados=[],this.motoristaSelecionado=null}carregarDadosMotorista(e){let t=Array.from({length:7},(o,m)=>{let v=new Date;return v.setDate(v.getDate()-(6-m)),`${v.getDate()}/${v.getMonth()+1}`});this.giroChartOptions.series=[{name:"Giro do Motor",data:t.map(()=>Math.floor(1600+Math.random()*800))}],this.giroChartOptions.xaxis={categories:t,labels:{style:{colors:"#fff"}}},this.consumoChartOptions.series=[{name:"Consumo (km/l)",data:t.map(()=>+(2.5+Math.random()*1.2).toFixed(2))}],this.consumoChartOptions.xaxis={categories:t,labels:{style:{colors:"#fff"}}},this.freioChartOptions.series=[{name:"Freio",data:t.map(()=>Math.floor(15+Math.random()*40))},{name:"Pedal",data:t.map(()=>Math.floor(20+Math.random()*45))}],this.freioChartOptions.xaxis={categories:t,labels:{style:{colors:"#fff"}}}}static \u0275fac=function(t){return new(t||i)(w(Rt),w(j),w(R))};static \u0275cmp=y({type:i,selectors:[["app-insuficientes-linha"]],viewQuery:function(t,o){if(t&1&&De(Vr,5),t&2){let m;Ie(m=Me())&&(o.chart=m.first)}},decls:5,vars:3,consts:[["chart",""],[1,"p-4","text-black"],["class","flex justify-center items-center p-8",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-6","text-center","gap-6","mb-4"],["class","bg-black text-white p-3 rounded-2xl flex flex-col items-center justify-center card",4,"ngFor","ngForOf"],["class","grid grid-cols-1 lg:grid-cols-3 gap-4",4,"ngIf"],[1,"flex","justify-center","items-center","p-8"],[1,"animate-spin","rounded-full","h-10","w-10","border-t-2","border-b-2","border-gray-900"],[1,"bg-black","text-white","p-3","rounded-2xl","flex","flex-col","items-center","justify-center","card"],[1,"text-xl","text-amber-500","font-bold","mb-2"],[1,"flex","items-end"],[1,"text-3xl","font-bold"],[1,"ml-2","text-xl","font-bold",3,"ngClass"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],[1,"lg:col-span-2","rounded-2xl","p-4"],[1,"flex","justify-between","items-center","mb-4"],[1,"title"],[1,"flex","gap-2"],[1,"px-3","py-3","rounded-md","text-xs","font-bold","text-white","border","border-cyan-100",3,"click"],[1,"px-3","py-1","rounded-md","text-xs","font-bold","text-white","bg-cyan-500",3,"click"],["class","text-black",4,"ngIf"],["class","card",4,"ngIf"],[1,"card"],["id","chart"],[3,"series","chart","xaxis","fill","markers","colors"],[1,"bg-black","text-white","rounded-2xl","p-4","h-fit"],[1,"font-bold","text-lg","mb-4"],["class","text-center text-gray-500 py-8",4,"ngIf"],[4,"ngIf"],[3,"series","chart","plotOptions","colors","labels"],[1,"text-black"],[3,"series","chart","dataLabels","plotOptions","xaxis","tooltip"],[3,"series","chart","xaxis","yaxis","plotOptions","tooltip","legend","fill"],[1,"text-center","text-gray-500","py-8"],[1,"divide-y","divide-gray-200"],["class","py-3 px-2 hover:bg-gray-25 focus:bg-gray-25 cursor-pointer focus:outline-none cursor-pointer transition-colors","tabindex","0","role","button",3,"click","keydown.enter",4,"ngFor","ngForOf"],["tabindex","0","role","button",1,"py-3","px-2","hover:bg-gray-25","focus:bg-gray-25","cursor-pointer","focus:outline-none","cursor-pointer","transition-colors",3,"click","keydown.enter"]],template:function(t,o){t&1&&(n(0,"div",1),p(1,Sr,2,0,"div",2),n(2,"div",3),p(3,Or,8,5,"div",4),r(),p(4,Fr,29,18,"div",5),r()),t&2&&(a(),s("ngIf",o.isLoading),a(2),s("ngForOf",o.indicadoresMotorista),a(),s("ngIf",!o.isLoading))},dependencies:[V,P,E,S,Nt,ci,si],styles:['@charset "UTF-8";.card[_ngcontent-%COMP%]{border:1px solid #2c2c2e;border-radius:1rem;padding:1rem;margin-bottom:1rem}.title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#fff;margin-bottom:.5rem}.subtitle[_ngcontent-%COMP%]{font-size:.875rem;color:#a1a1aa}.apexcharts-tooltip[_ngcontent-%COMP%]{background-color:#2c2c2e!important;color:#fff!important;border:none!important}[_nghost-%COMP%]{display:block;font-family:Inter,sans-serif;color:#e5e7eb;padding:1rem;border-radius:1rem;box-shadow:0 0 20px #00000080}.bg-white[_ngcontent-%COMP%]{transition:all .2s ease}.bg-white[_ngcontent-%COMP%]:hover{box-shadow:0 10px 15px -3px #0000001a}button[_ngcontent-%COMP%]{transition:all .2s ease}button[_ngcontent-%COMP%]:hover{opacity:.9;transform:translateY(-1px)}button[_ngcontent-%COMP%]:active{transform:translateY(0)}.motorista-item[_ngcontent-%COMP%]{border-left:3px solid transparent;transition:all .2s ease}.motorista-item[_ngcontent-%COMP%]:hover{border-left-color:#e53935;background-color:#e539350d}.motorista-item.selected[_ngcontent-%COMP%]{border-left-color:#e53935;background-color:#e539351a;font-weight:500}.indicador-card[_ngcontent-%COMP%]{transition:all .3s ease}.indicador-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 6px #0000001a}.tendencia-up[_ngcontent-%COMP%]{color:#4caf50}.tendencia-down[_ngcontent-%COMP%]{color:#f44336}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translateY(-20px)}to{transform:translateY(0)}}.animate-fadeIn[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out,_ngcontent-%COMP%_slideIn .3s ease-out}.max-h-90vh[_ngcontent-%COMP%]{max-height:90vh}.overflow-y-auto[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:#E53935 #f5f5f5}.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f5f5f5;border-radius:10px}.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#e53935;border-radius:10px}.bg-black.bg-opacity-50[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}']})}return i})();var mi=(()=>{class i{scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=y({type:i,selectors:[["app-header"]],features:[z([],[W({matNotificationsNone:Dt})])],decls:5,vars:0,consts:[[1,"w-full","py-8","px-8","md:px-20","flex","items-center","justify-center","fixed","z-50",2,"background-color","#141416"],[1,"flex","items-center"],["src","assets/Logo_AceCopilot 1.png","alt","Logo da ACE Copilot",1,"h-10"],[1,"text-1xl","2xl:text-3xl","ms-3","font-semibold","text-white"]],template:function(t,o){t&1&&(n(0,"header",0)(1,"div",1),u(2,"img",2),n(3,"h1",3),l(4," DashDrive "),r()()())},dependencies:[V,ie],encapsulation:2})}return i})();var ui=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=y({type:i,selectors:[["app-dash-drive"]],decls:3,vars:0,consts:[[1,"px-20","pb-28","pt-36","w-full","h-full","bg-black",2,"background-color","#09090B"]],template:function(t,o){t&1&&(u(0,"app-header"),n(1,"section",0),u(2,"app-insuficientes-linha"),r())},dependencies:[di,mi],encapsulation:2})}return i})();var we=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=y({type:i,selectors:[["app-game"]],decls:45,vars:28,consts:[[1,"flex-1","px-4","md:container","py-28"],[1,"container","mt-12","grid","xs:grid-cols-2","gap-3","md:gap-4","xl:px-52","pb-6","md:pb-10","dark:border-b-4",2,"border-color","#1d1d1d"],["hlmBtn","","variant","ghost","routerLink","/ranking-empresa",1,"group","bg-amber-400","hover:bg-white","flex","justify-between","md:p-5","gap-4","h-20","md:h-24","rounded-2xl","md:rounded-3xl","relative","overflow-hidden","transition-all","duration-300","hover:shadow-lg","hover:-translate-y-1"],[1,"absolute","inset-0","bg-gradient-to-r","from-amber-300","to-amber-500","opacity-0","group-hover:opacity-10","transition-opacity","duration-300"],[1,"flex","items-center","gap-4","z-10"],[1,"w-10","md:w-12","h-10","md:h-12","bg-black","bg-opacity-10","rounded-xl","flex","items-center","justify-center","group-hover:scale-110","transition-transform","duration-300"],["src","assets/crown.svg","alt","Icone Ranking Empresa",1,"w-6","md:w-8"],[1,"text-black","font-bold","text-start","text-xs","sm:text-sm","md:text-lg"],["hlmBtn","","variant","ghost","routerLink","/ranking-geral",1,"group","bg-amber-400","hover:bg-white","flex","justify-between","md:p-5","gap-4","h-20","md:h-24","rounded-2xl","md:rounded-3xl","relative","overflow-hidden","transition-all","duration-300","hover:shadow-lg","hover:-translate-y-1"],["src","assets/crown.svg","alt","Icone Ranking Geral",1,"w-6","md:w-8"],["hlmBtn","","variant","ghost","routerLink","/game-dia",1,"group","bg-amber-400","hover:bg-white","flex","justify-between","md:p-5","gap-4","h-20","md:h-24","rounded-2xl","md:rounded-3xl","relative","overflow-hidden","transition-all","duration-300","hover:shadow-lg","hover:-translate-y-1"],["src","assets/calendar_month.svg","alt","Icone Game Dia",1,"w-6","md:w-8"],["hlmBtn","","variant","ghost","routerLink","/quiz",1,"group","bg-amber-400","hover:bg-white","flex","justify-between","md:p-5","gap-4","h-20","md:h-24","rounded-2xl","md:rounded-3xl","relative","overflow-hidden","transition-all","duration-300","hover:shadow-lg","hover:-translate-y-1"],["src","assets/cognition_2.svg","alt","Icone Quiz",1,"w-6","md:w-8"],[1,"container","xl:px-52","pt-6","md:pt-10","pb-6","md:pb-10",2,"border-color","#1d1d1d"],[1,"font-bold","text-2xl","md:text-3xl"],[3,"label","quantity","current","icon"],[1,"container","xl:px-52","pt-6","md:pt-10","pb-6","md:pb-10","dark:border-b-4",2,"border-color","#1d1d1d"]],template:function(t,o){t&1&&(u(0,"app-header"),n(1,"div",0)(2,"section",1)(3,"button",2),u(4,"div",3),n(5,"div",4)(6,"div",5),u(7,"img",6),r(),n(8,"p",7),l(9,"Ranking Empresa"),r()()(),n(10,"button",8),u(11,"div",3),n(12,"div",4)(13,"div",5),u(14,"img",9),r(),n(15,"p",7),l(16,"Ranking Geral"),r()()(),n(17,"button",10),u(18,"div",3),n(19,"div",4)(20,"div",5),u(21,"img",11),r(),n(22,"p",7),l(23,"Game Dia"),r()()(),n(24,"button",12),u(25,"div",3),n(26,"div",4)(27,"div",5),u(28,"img",13),r(),n(29,"p",7),l(30,"Quiz"),r()()()(),n(31,"section",14)(32,"h2",15),l(33,"Tarefas Di\xE1rias"),r(),u(34,"app-task",16)(35,"app-task",16)(36,"app-task",16)(37,"app-task",16),r(),n(38,"section",17)(39,"h2",15),l(40,"Tarefas Mensais"),r(),u(41,"app-task",16)(42,"app-task",16)(43,"app-task",16),r()(),u(44,"app-footer")),t&2&&(a(34),s("label","Abrir o Aplicativo")("quantity",1)("current",0)("icon","matAddToHomeScreenRound"),a(),s("label","Abrir Pontua\xE7\xE3o ACE")("quantity",1)("current",0)("icon","matLocalPlayRound"),a(),s("label","Responder a um Quiz")("quantity",1)("current",0)("icon","matQuizRound"),a(),s("label","Ler uma Dica de Economia")("quantity",1)("current",0)("icon","matAddCommentRound"),a(4),s("label","Refazer o treinamento")("quantity",10)("current",10)("icon","matVideoLibraryRound"),a(),s("label","5 Acessos ao Aplicativo")("quantity",5)("current",2)("icon","matAddToHomeScreenRound"),a(),s("label","20 Acessos ao Aplicativo")("quantity",20)("current",2)("icon","matAddToHomeScreenRound"))},dependencies:[V,ie,Pe,le,ce,de,$t],styles:["@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_buttonHover{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}.group[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.4,0,.2,1)}.group[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d}.group[_ngcontent-%COMP%]:active{transform:translateY(0)}.w-10[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.4,0,.2,1)}.group[_ngcontent-%COMP%]:hover   .w-10[_ngcontent-%COMP%]{transform:scale(1.1)}.progress-bar[_ngcontent-%COMP%]{transition:width .6s ease}button.text-amber-400[_ngcontent-%COMP%]:hover{transform:translate(5px);transition:transform .3s ease}@media (max-width: 768px){.grid-cols-1[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{animation:slideIn .5s ease-out}}ng-icon[_ngcontent-%COMP%]{transition:transform .3s ease}button[_ngcontent-%COMP%]:hover   ng-icon[_ngcontent-%COMP%]{transform:translate(5px)}"]})}return i})();function Ar(i,c){if(i&1&&(n(0,"div",19)(1,"span",20),l(2),r()()),i&2){let e=d().$implicit;a(2),_("",e.cupons," cupons")}}function Pr(i,c){if(i&1&&(n(0,"div",11)(1,"div",12),u(2,"img",13),p(3,Ar,3,1,"div",14),r(),n(4,"h3",15),l(5),r(),n(6,"div",16),u(7,"ng-icon",17),n(8,"span",18),l(9),r()()()),i&2){let e=c.$implicit,t=d(2);a(),B("blur-sm",!t.isAvailable(e.cupons))("bg-[#1d1d1d]",!t.isAvailable(e.cupons)),a(),s("src",e.imagem,T)("alt",e.nome),a(),s("ngIf",!t.isAvailable(e.cupons)),a(2),x(e.nome),a(4),_("",e.cupons," cupons")}}function jr(i,c){if(i&1&&(n(0,"div",5)(1,"div")(2,"div",6),u(3,"ng-icon",7),n(4,"h2",8),l(5),r()()(),n(6,"div",9),p(7,Pr,10,9,"div",10),r()()),i&2){let e=c.$implicit;a(),Ue("p-4 "+e.bgColor),a(2),Ue("text-2xl "+e.cor),a(2),_("Fase ",e.nome,""),a(2),s("ngForOf",e.premios)}}var pi=(()=>{class i{couponService;availableCoupons=0;fases=[{nome:"Bronze",cor:"text-orange-700",bgColor:"bg-orange-950",premios:[{nome:'Smart TV 43"',imagem:"/assets/premios/tv-43.jpeg",cupons:50},{nome:"Airfryer 4L",imagem:"/assets/premios/airfryer.jpeg",cupons:30},{nome:"Fone Bluetooth",imagem:"/assets/premios/fone.jpeg",cupons:20}]},{nome:"Prata",cor:"text-gray-400",bgColor:"bg-gray-800",premios:[{nome:'Smart TV 50"',imagem:"/assets/premios/tv-50.jpeg",cupons:80},{nome:"Smartphone",imagem:"/assets/premios/smartphone.jpeg",cupons:60},{nome:"Notebook",imagem:"/assets/premios/notebook.jpeg",cupons:100}]},{nome:"Ouro",cor:"text-yellow-500",bgColor:"bg-yellow-950",premios:[{nome:'Smart TV 65"',imagem:"/assets/premios/tv-65.jpeg",cupons:120},{nome:"iPhone",imagem:"/assets/premios/iphone.jpeg",cupons:150},{nome:"Playstation 5",imagem:"/assets/premios/ps5.jpeg",cupons:100}]},{nome:"Ouro C",cor:"text-yellow-400",bgColor:"bg-yellow-900",premios:[{nome:'Smart TV 75"',imagem:"/assets/premios/tv-75.jpeg",cupons:200},{nome:"MacBook Pro",imagem:"/assets/premios/macbook.jpeg",cupons:180},{nome:"iPad Pro",imagem:"/assets/premios/ipad.jpeg",cupons:150}]}];constructor(e){this.couponService=e}ngOnInit(){this.couponService.getAvailableCoupons().subscribe(e=>{this.availableCoupons=e})}isAvailable(e){return this.availableCoupons>=e}resgatar(e){this.couponService.useCoupons(e.cupons)?alert(`Parab\xE9ns! Voc\xEA resgatou ${e.nome}`):alert("Cupons insuficientes para resgatar este pr\xEAmio.")}static \u0275fac=function(t){return new(t||i)(w(qt))};static \u0275cmp=y({type:i,selectors:[["app-premiacoes"]],features:[z([W({matConfirmationNumberRound:Bt,matStarRound:Lt})])],decls:8,vars:1,consts:[[1,"flex-1","md:container","py-28"],[1,"container","mx-auto","px-4"],[1,"text-3xl","md:text-4xl","font-bold","mb-8"],[1,"space-y-8"],["class","rounded-2xl overflow-hidden",4,"ngFor","ngForOf"],[1,"rounded-2xl","overflow-hidden"],[1,"flex","items-center","gap-3"],["name","matStarRound"],[1,"text-xl","md:text-2xl","font-bold"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4","p-4","bg-[#1e1e1e]"],["class","bg-[#2a2a2a] rounded-xl p-4 flex flex-col",4,"ngFor","ngForOf"],[1,"bg-[#2a2a2a]","rounded-xl","p-4","flex","flex-col"],[1,"relative"],[1,"w-full","h-48","object-contain","mb-4",3,"src","alt"],["class","absolute inset-0 flex items-center justify-center",4,"ngIf"],[1,"text-lg","font-semibold","mb-2"],[1,"flex","items-center","gap-2","mt-auto"],["name","matConfirmationNumberRound",1,"text-amber-400"],[1,"text-amber-400","font-semibold"],[1,"absolute","inset-0","flex","items-center","justify-center"],[1,"text-amber-400","font-semibold","text-lg"]],template:function(t,o){t&1&&(u(0,"app-header"),n(1,"div",0)(2,"div",1)(3,"h1",2),l(4,"Premia\xE7\xF5es"),r(),n(5,"div",3),p(6,jr,8,6,"div",4),r()()(),u(7,"app-footer")),t&2&&(a(6),s("ngForOf",o.fases))},dependencies:[V,E,S,de,ce,re],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;min-height:100vh}"]})}return i})();var hi=(()=>{class i{kmlAnterior=0;kmlAtual=0;giro=0;freio=0;pedal=0;placa="";linha="";data="";turno="";turnos=[{turno:"Madrugada",start:"00:00",end:"05:59"},{turno:"Manh\xE3",start:"06:00",end:"11:59"},{turno:"Intervalo",start:"12:00",end:"13:59"},{turno:"Tarde",start:"14:00",end:"19:59"},{turno:"Noite",start:"20:00",end:"23:59"}];get horaTurno(){return this.turnos.find(t=>t.turno===this.turno)??{turno:this.turno,start:"",end:""}}get kmlAnteriorClass(){return this.kmlAnterior===this.kmlAtual?"bg-gray-600":this.kmlAnterior>this.kmlAtual?"bg-red-600":"bg-green-600"}get kmlAtualClass(){return this.kmlAtual===2.5?"bg-yellow-500":this.kmlAtual<2.5?"bg-red-600":"bg-green-600"}get giroClass(){return this.giro===7?"bg-yellow-500":this.giro>7?"bg-red-600":"bg-green-600"}get freioClass(){return this.freio===7?"bg-yellow-500":this.freio>7?"bg-red-600":"bg-green-600"}get pedalClass(){return this.pedal===7?"bg-yellow-500":this.pedal>7?"bg-red-600":"bg-green-600"}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=y({type:i,selectors:[["app-card-turno"]],inputs:{kmlAnterior:"kmlAnterior",kmlAtual:"kmlAtual",giro:"giro",freio:"freio",pedal:"pedal",placa:"placa",linha:"linha",data:"data",turno:"turno"},features:[z([],[W({matDirectionsBus:Ot})])],decls:56,vars:16,consts:[[1,"py-4","mt-4","shadow-lg","dark:bg-[#242427]",2,"border-radius","20px"],[1,"flex","px-4","justify-between","rounded-lg"],[1,"flex","w-max","items-center","rounded-full","font-bold","shadow-md","px-4","py-2","text-xs","text-white","md:text-sm","gap-1",2,"background-color","#313135"],[1,"ml-1"],[1,"flex","w-max","items-center","rounded-full","overflow-hidden","text-black","font-bold","shadow-md"],[1,"relative","bg-yellow-400","font-bold","ps-4","py-2","text-lg","flex","items-center"],[1,"z-30","text-xs","md:text-lg"],[1,"absolute","right-0","left-6","md:left-11","top-1/2","-translate-y-1/2","w-8","h-8","md:w-10","md:h-10","bg-yellow-400","rotate-45","rounded-xl","origin-center"],[1,"bg-yellow-500","font-bold","ps-5","md:ps-9","pe-4","py-2","text-lg","flex","items-center"],[1,"text-xs","md:text-lg"],[1,"flex","justify-center","mt-4","p-3","md:p-4","gap-2","md:gap-4","text-white",2,"background-color","#141416"],[1,"rounded-lg","md:rounded-2xl","w-screen","p-2","text-center","flex","flex-col","justify-center",3,"ngClass"],[1,"text-xs","font-bold",2,"font-size","8px"],[1,"font-bold","md:text-2xl"],[1,"font-bold","text-xs"],[1,"rounded-lg","md:rounded-2xl","w-screen","md:p-3","text-center","flex","flex-col","justify-center",3,"ngClass"],[1,"flex","gap-4","items-center","text-white"],[1,"rounded-full","ms-4","mt-4","w-12","h-12","border-4","border-yellow-400","flex","items-center","justify-center"],["name","matDirectionsBus",1,"text-[#1D1D1D]","dark:text-white",2,"font-size","24px"],[1,"flex","flex-col","font-bold","pt-3","text-[#1D1D1D]","dark:text-white"],[1,"text-lg"],[1,"text-sm"]],template:function(t,o){t&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),l(4),r(),n(5,"span",3),l(6),r()(),n(7,"div",4)(8,"div",5)(9,"p",6),l(10),r(),u(11,"div",7),r(),n(12,"div",8)(13,"p",9),l(14),r()()()(),n(15,"div",10)(16,"div",11)(17,"p",12),l(18,"Semana Anterior"),r(),n(19,"span",13),l(20),r(),n(21,"p",14),l(22,"KM/L"),r()(),n(23,"div",15)(24,"span",13),l(25),r(),n(26,"p",14),l(27,"KM/L"),r()(),n(28,"div",15)(29,"span",13),l(30),r(),n(31,"p",14),l(32,"Giro"),r()(),n(33,"div",15)(34,"span",13),l(35),r(),n(36,"p",14),l(37,"Freio"),r()(),n(38,"div",15)(39,"span",13),l(40),r(),n(41,"p",14),l(42,"Pedal"),r()()(),n(43,"div",16)(44,"div",17),u(45,"ng-icon",18),r(),n(46,"div",19)(47,"p",20),l(48),r(),n(49,"small",21),l(50,"Placa"),r()(),n(51,"div",19)(52,"p",20),l(53),r(),n(54,"small",21),l(55,"Linha"),r()()()()),t&2&&(a(4),x(o.turno),a(2),x(o.data),a(4),x(o.horaTurno.start),a(4),x(o.horaTurno.end),a(2),s("ngClass",o.kmlAnteriorClass),a(4),x(o.kmlAnterior),a(3),s("ngClass",o.kmlAtualClass),a(2),x(o.kmlAtual),a(3),s("ngClass",o.giroClass),a(2),x(o.giro),a(3),s("ngClass",o.freioClass),a(2),x(o.freio),a(3),s("ngClass",o.pedalClass),a(2),x(o.pedal),a(8),x(o.placa),a(5),x(o.linha))},dependencies:[V,P,re],encapsulation:2})}return i})();var Rr=["carouselContainer"],Oe=()=>({minWidth:"280px"});function Nr(i,c){if(i&1&&u(0,"app-card-turno",51),i&2){let e=c.$implicit;s("kmlAnterior",e.kmlAnterior)("kmlAtual",e.kmlAtual)("giro",e.giro)("freio",e.freio)("pedal",e.pedal)("placa",e.placa)("linha",e.linha)("turno",e.turno)("data",e.data)}}function Ur(i,c){if(i&1&&(rt(0),p(1,Nr,1,9,"app-card-turno",50),at()),i&2){let e=d();a(),s("ngForOf",e.filteredTurnos)}}function Hr(i,c){if(i&1&&(n(0,"div",52),u(1,"ng-icon",53),n(2,"p",54),l(3),r(),n(4,"p",55),l(5,"Tente selecionar outra data"),r()()),i&2){let e=d();a(),B("text-amber-400",e.isDarkMode)("text-amber-500",!e.isDarkMode),a(2),_("Nenhum turno encontrado para ",e.currentDate,"")}}var gi=(()=>{class i{cdr;carouselContainer;currentIndex=0;itemWidth=300;gapWidth=16;totalItems=5;scrollTimeout;isScrolling=!1;currentDate=this.formatDate(new Date);selectedDate=new Date;maxDate=new Date;isDarkMode=document.documentElement.classList.contains("dark");allTurnos=[{kmlAnterior:2.51,kmlAtual:2.08,giro:3,freio:7,pedal:10,placa:"51540",linha:"624",turno:"Intervalo",data:"08/04"},{kmlAnterior:2.51,kmlAtual:2.4,giro:2,freio:7,pedal:4,placa:"51540",linha:"624",turno:"Manh\xE3",data:"08/04"},{kmlAnterior:2.51,kmlAtual:3.01,giro:2,freio:10,pedal:4,placa:"51540",linha:"624",turno:"Madrugada",data:"08/04"},{kmlAnterior:2.51,kmlAtual:2.96,giro:0,freio:2,pedal:4,placa:"51540",linha:"624",turno:"Intervalo",data:"07/04"},{kmlAnterior:2.51,kmlAtual:2.51,giro:2,freio:8,pedal:3,placa:"51540",linha:"624",turno:"Manh\xE3",data:"07/04"}];filteredTurnos=[];constructor(e){this.cdr=e,new MutationObserver(o=>{o.forEach(m=>{m.attributeName==="class"&&(this.isDarkMode=document.documentElement.classList.contains("dark"),this.cdr.detectChanges())})}).observe(document.documentElement,{attributes:!0,attributeFilter:["class"]})}ngOnInit(){this.updateLayout(),this.filterTurnosByDate(this.currentDate)}ngAfterViewInit(){this.carouselContainer&&this.carouselContainer.nativeElement.addEventListener("scroll",()=>{this.isScrolling||this.handleScroll()},{passive:!0})}handleScroll(){this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(()=>{if(this.carouselContainer){let t=this.carouselContainer.nativeElement.scrollLeft;this.currentIndex=Math.round(t/(this.itemWidth+this.gapWidth)),this.cdr.detectChanges()}},50)}updateLayout(){if(this.carouselContainer){let e=this.carouselContainer.nativeElement,t=e.scrollWidth-e.clientWidth;e.scrollLeft>t&&(e.scrollLeft=t)}}get canScrollPrev(){return this.carouselContainer?this.carouselContainer.nativeElement.scrollLeft>0:!1}get canScrollNext(){if(!this.carouselContainer)return!1;let e=this.carouselContainer.nativeElement,t=e.scrollWidth-e.clientWidth;return e.scrollLeft<t-1}prevSlide(){if(this.carouselContainer&&this.canScrollPrev){this.isScrolling=!0;let e=this.carouselContainer.nativeElement,t=e.scrollLeft,o=Math.max(0,t-(this.itemWidth+this.gapWidth));e.scrollTo({left:o,behavior:"smooth"}),this.currentIndex=Math.floor(o/(this.itemWidth+this.gapWidth)),setTimeout(()=>{this.isScrolling=!1,this.cdr.detectChanges()},500)}}nextSlide(){if(this.carouselContainer&&this.canScrollNext){this.isScrolling=!0;let e=this.carouselContainer.nativeElement,t=e.scrollLeft,o=e.scrollWidth-e.clientWidth,m=Math.min(o,t+(this.itemWidth+this.gapWidth));e.scrollTo({left:m,behavior:"smooth"}),this.currentIndex=Math.floor(m/(this.itemWidth+this.gapWidth)),setTimeout(()=>{this.isScrolling=!1,this.cdr.detectChanges()},500)}}filterTurnosByDate(e){this.currentDate=e,this.filteredTurnos=this.allTurnos.filter(t=>t.data===e),this.totalItems=this.filteredTurnos.length,this.cdr.detectChanges()}canNavigatePrevious(){return!0}canNavigateForward(){let[e,t]=this.currentDate.split("/").map(Number),o=new Date,m=this.formatDate(o),[v,A]=m.split("/").map(Number);return t>A?!1:t===A?e<v:!0}formatDate(e){let t=String(e.getDate()).padStart(2,"0"),o=String(e.getMonth()+1).padStart(2,"0");return`${t}/${o}`}formatDateForInput(e){let t=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),m=String(e.getDate()).padStart(2,"0");return`${t}-${o}-${m}`}get inputDateValue(){return this.formatDateForInput(this.selectedDate)}nextDate(){let[e,t]=this.currentDate.split("/").map(Number),o=new Date(new Date().getFullYear(),t-1,e);o.setDate(o.getDate()-1);let m=this.formatDate(o);this.filterTurnosByDate(m)}previousDate(){if(this.canNavigateForward()){let[e,t]=this.currentDate.split("/").map(Number),o=new Date(new Date().getFullYear(),t-1,e);o.setDate(o.getDate()+1);let m=this.formatDate(o);this.filterTurnosByDate(m)}}onDateSelected(e){try{let t=e.target.value?new Date(e.target.value+"T00:00:00"):e.value;if(!(t instanceof Date)||isNaN(t.getTime())){console.error("Invalid date input:",e);return}this.selectedDate=t,this.currentDate=this.formatDate(t),this.filterTurnosByDate(this.currentDate)}catch(t){console.error("Error processing date selection:",t)}}get datesWithShifts(){return this.allTurnos.filter(e=>e.kmlAtual>0||e.giro>0||e.freio>0||e.pedal>0).map(e=>e.data)}static \u0275fac=function(t){return new(t||i)(w(j))};static \u0275cmp=y({type:i,selectors:[["app-score"]],viewQuery:function(t,o){if(t&1&&De(Rr,5),t&2){let m;Ie(m=Me())&&(o.carouselContainer=m.first)}},features:[z([],[W({matArrowBackIos:ft,matArrowForwardIos:_t,matArrowDownward:vt,matWorkspacePremium:jt,matArrowUpward:bt,matCalendarMonth:yt,matWorkHistory:At})])],decls:116,vars:18,consts:[["carouselContainer",""],["dateInput",""],["noTurnos",""],[1,"flex-1","px-4","md:container","py-28"],["id","resumo",1,"container","mx-auto","mt-10","px-2","sm:px-4","pb-6","md:pb-10","dark:border-b-4","flex","flex-col",2,"border-color","#1d1d1d"],[1,"flex","justify-between","items-center","mb-4"],[1,"font-bold","text-xl","sm:text-2xl","md:text-3xl"],[1,"flex"],[1,"rounded-full","w-7","h-7","sm:w-8","sm:h-8","border-2","border-yellow-400","flex","items-center","justify-center","mr-2","ps-1","disabled:opacity-50","disabled:cursor-not-allowed","z-10",3,"click","disabled"],["name","matArrowBackIos",1,"text-[10px]","sm:text-xs"],[1,"rounded-full","w-7","h-7","sm:w-8","sm:h-8","border-2","border-yellow-400","flex","items-center","justify-center","disabled:opacity-50","disabled:cursor-not-allowed","z-10",3,"click","disabled"],["name","matArrowForwardIos",1,"text-[10px]","sm:text-xs"],[1,"carousel-wrapper","relative"],[1,"carousel-container","mt-2","sm:mt-4","overflow-x-auto","touch-pan-x","snap-x","snap-mandatory","hide-scrollbar"],[1,"carousel-track","flex","gap-3","min-w-max"],[1,"carousel-item","flex-shrink-0","w-[280px]","snap-start",3,"ngStyle"],[1,"bg-amber-400","h-48","text-black","p-4","sm:p-6","flex","flex-col","justify-between","rounded-2xl","sm:rounded-3xl","shadow-lg"],[1,"font-bold","text-lg","sm:text-xl"],[1,"font-light","text-sm"],[1,"font-bold","text-4xl","sm:text-5xl"],[1,"mt-2"],[1,"progress-bar","bg-black","bg-opacity-20"],[1,"progress-fill","bg-black",2,"width","70%"],[1,"text-xs","whitespace-normal"],[1,"h-48","p-4","sm:p-6","flex","flex-col","justify-between","text-white","card-gradient","rounded-2xl","sm:rounded-3xl","shadow-lg","border","border-gray-800"],[1,"font-light","text-sm","text-gray-400"],[1,"flex","items-end","justify-between"],["name","matArrowDownward",1,"text-red-500",2,"font-size","34px"],[1,"progress-bar","bg-gray-700"],[1,"progress-fill","bg-red-500",2,"width","40%"],[1,"text-xs","text-gray-400","whitespace-normal"],["name","matArrowUpward",1,"text-green-500",2,"font-size","34px"],[1,"progress-fill","bg-green-500",2,"width","25%"],[1,"text-green-500"],[1,"fas","fa-arrow-up","text-3xl"],[1,"progress-fill","bg-amber-400",2,"width","78%"],[1,"container","mx-auto","px-4","pt-6","md:pt-10"],[1,"flex","justify-between","items-center"],[1,"font-bold","text-2xl","md:text-3xl"],[1,"flex","gap-2"],[1,"rounded-full","w-8","h-8","border-2","border-yellow-400","flex","items-center","justify-center",3,"click"],["name","matArrowBackIos",1,"ml-1.5",2,"font-size","12px"],[1,"relative"],[1,"rounded-full","font-semibold","shadow-md","px-4","py-2","text-sm","text-white","bg-[#313135]","flex","items-center",3,"click"],["name","matCalendarMonth",1,"mr-2","text-amber-400",2,"font-size","16px"],["type","date",1,"absolute","opacity-100","w-0","h-0","top-0","left-0","cursor-pointer",2,"color-scheme","dark",3,"change","max","value"],[1,"rounded-full","w-8","h-8","border-2","border-yellow-400","flex","items-center","justify-center","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["name","matArrowForwardIos",2,"font-size","12px"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-4","md:gap-8","mt-4","flex-wrap"],[4,"ngIf","ngIfElse"],[3,"kmlAnterior","kmlAtual","giro","freio","pedal","placa","linha","turno","data",4,"ngFor","ngForOf"],[3,"kmlAnterior","kmlAtual","giro","freio","pedal","placa","linha","turno","data"],[1,"col-span-full","flex","flex-col","items-center","justify-center","py-16","text-gray-500","dark:text-gray-400"],["name","matWorkHistory",1,"text-5xl","mb-4"],[1,"text-lg","font-medium"],[1,"text-sm","mt-2"]],template:function(t,o){if(t&1){let m=b();u(0,"app-header"),n(1,"div",3),u(2,"app-statistic"),n(3,"section",4)(4,"div",5)(5,"h2",6),l(6,"Resumo"),r(),n(7,"div",7)(8,"button",8),f("click",function(){return h(m),g(o.prevSlide())}),u(9,"ng-icon",9),r(),n(10,"button",10),f("click",function(){return h(m),g(o.nextSlide())}),u(11,"ng-icon",11),r()()(),n(12,"div",12)(13,"div",13,0)(15,"div",14)(16,"div",15)(17,"div",16)(18,"div")(19,"p",17),l(20,"Acessos"),r(),n(21,"small",18),l(22,"App"),r()(),n(23,"span",19),l(24,"28"),r(),n(25,"div",20)(26,"div",21),u(27,"div",22),r(),n(28,"small",23),l(29,"+12% em rela\xE7\xE3o ao m\xEAs passado"),r()()()(),n(30,"div",15)(31,"div",24)(32,"div")(33,"p",17),l(34,"Giro"),r(),n(35,"small",25),l(36,"M\xEAs"),r()(),n(37,"div",26)(38,"span",19),l(39,"8"),r(),u(40,"ng-icon",27),r(),n(41,"div",20)(42,"div",28),u(43,"div",29),r(),n(44,"small",30),l(45,"-20% em rela\xE7\xE3o ao m\xEAs passado"),r()()()(),n(46,"div",15)(47,"div",24)(48,"div")(49,"p",17),l(50,"Freio"),r(),n(51,"small",25),l(52,"M\xEAs"),r()(),n(53,"div",26)(54,"span",19),l(55,"5"),r(),u(56,"ng-icon",31),r(),n(57,"div",20)(58,"div",28),u(59,"div",32),r(),n(60,"small",30),l(61,"+15% em rela\xE7\xE3o ao m\xEAs passado"),r()()()(),n(62,"div",15)(63,"div",24)(64,"div")(65,"p",17),l(66,"Pedal"),r(),n(67,"small",25),l(68,"M\xEAs"),r()(),n(69,"div",26)(70,"span",19),l(71,"8"),r(),u(72,"ng-icon",27),r(),n(73,"div",20)(74,"div",28),u(75,"div",29),r(),n(76,"small",30),l(77,"-12% em rela\xE7\xE3o ao m\xEAs passado"),r()()()(),n(78,"div",15)(79,"div",24)(80,"div")(81,"p",17),l(82,"Efici\xEAncia"),r(),n(83,"small",25),l(84,"M\xEAs"),r()(),n(85,"div",26)(86,"span",19),l(87,"78%"),r(),n(88,"div",33),u(89,"i",34),r()(),n(90,"div",20)(91,"div",28),u(92,"div",35),r(),n(93,"small",30),l(94,"+8% em rela\xE7\xE3o ao m\xEAs passado"),r()()()()()()()(),n(95,"section",36)(96,"div",37)(97,"h2",38),l(98,"\xDAltimos Turnos"),r(),n(99,"div",39)(100,"button",40),f("click",function(){return h(m),g(o.nextDate())}),u(101,"ng-icon",41),r(),n(102,"div",42)(103,"button",43),f("click",function(){h(m);let A=He(108);return g(A.click())}),u(104,"ng-icon",44),n(105,"span"),l(106),r()(),n(107,"input",45,1),f("change",function(A){return h(m),g(o.onDateSelected(A))}),r()(),n(109,"button",46),f("click",function(){return h(m),g(o.previousDate())}),u(110,"ng-icon",47),r()()(),n(111,"div",48),p(112,Ur,2,1,"ng-container",49)(113,Hr,6,5,"ng-template",null,2,dt),r()()(),u(115,"app-footer")}if(t&2){let m=He(114);a(8),s("disabled",!o.canScrollPrev),a(2),s("disabled",!o.canScrollNext),a(6),s("ngStyle",ve(13,Oe)),a(14),s("ngStyle",ve(14,Oe)),a(16),s("ngStyle",ve(15,Oe)),a(16),s("ngStyle",ve(16,Oe)),a(16),s("ngStyle",ve(17,Oe)),a(28),x(o.currentDate),a(),s("max",o.maxDate)("value",o.inputDateValue),a(2),s("disabled",!o.canNavigateForward()),a(3),s("ngIf",o.filteredTurnos.length>0)("ngIfElse",m)}},dependencies:[V,E,S,U,ie,re,hi,Ht,de,ce,H],styles:["body[_ngcontent-%COMP%]{font-family:Inter,sans-serif;background-color:#0f0f0f;color:#fff}.card-gradient[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a1a1a,#2d2d2d)}.carousel-wrapper[_ngcontent-%COMP%]{position:relative;width:100%}.carousel-container[_ngcontent-%COMP%]{position:relative;width:100%;-webkit-overflow-scrolling:touch;scroll-behavior:smooth}.hide-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.hide-scrollbar[_ngcontent-%COMP%]{-ms-overflow-style:none;scrollbar-width:none}.carousel-track[_ngcontent-%COMP%]{transition:transform .3s ease-out;will-change:transform;display:flex;align-items:stretch}.carousel-item[_ngcontent-%COMP%]{transition:all .3s ease;height:100%}.carousel-item[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}.stat-card[_ngcontent-%COMP%]{transition:all .3s ease}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 20px #0003}.nav-button[_ngcontent-%COMP%]{transition:all .2s ease}.nav-button[_ngcontent-%COMP%]:hover{background-color:#fbbf2433}.turno-card[_ngcontent-%COMP%]{transition:all .3s ease}.turno-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 8px 15px #0000004d}.progress-bar[_ngcontent-%COMP%]{height:4px;border-radius:2px;overflow:hidden}@media (min-width: 640px){.progress-bar[_ngcontent-%COMP%]{height:6px;border-radius:3px}}.progress-fill[_ngcontent-%COMP%]{height:100%;transition:width .5s ease}@media (max-width: 640px){.carousel-container[_ngcontent-%COMP%]{margin-left:-.5rem;margin-right:-.5rem;padding:0 .5rem}}@media (min-width: 641px){.carousel-container[_ngcontent-%COMP%]{margin-left:-1rem;margin-right:-1rem;padding:0 1rem}}input[type=date][_ngcontent-%COMP%]{appearance:none;-webkit-appearance:none;position:relative;z-index:50}input[type=date][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{background-color:#fbbf24;padding:4px;cursor:pointer;border-radius:4px}input[type=date][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator:hover{background-color:#f59e0b}input[type=date][_ngcontent-%COMP%]::-moz-calendar-picker-indicator{display:none}input[type=date][_ngcontent-%COMP%]:focus{background-color:#313135;color:#fff}"]})}return i})();function Br(i,c){if(i&1){let e=b();n(0,"button",11),f("click",function(){let o=h(e).$implicit,m=d();return m.currentTab=o.value,g(m.loadUsers())}),l(1),n(2,"span",12),l(3),r()()}if(i&2){let e=c.$implicit,t=d();B("border-amber-500",t.currentTab===e.value)("text-amber-500",t.currentTab===e.value)("border-transparent",t.currentTab!==e.value)("text-gray-500",t.currentTab!==e.value),a(),_(" ",e.label," "),a(),B("bg-amber-100",t.currentTab===e.value)("text-amber-600",t.currentTab===e.value)("bg-gray-100",t.currentTab!==e.value)("text-gray-600",t.currentTab!==e.value),a(),_(" ",t.getUsersByStatus(e.value).length," ")}}function Lr(i,c){i&1&&(n(0,"div",13),u(1,"div",14),n(2,"p",15),l(3,"Carregando usu\xE1rios..."),r()())}function $r(i,c){if(i&1&&(n(0,"div",16),l(1),r()),i&2){let e=d();a(),_(" ",e.error," ")}}function qr(i,c){if(i&1&&(n(0,"div",17),u(1,"ng-icon",18),l(2),r()),i&2){let e=d();B("bg-green-500",e.notification.type==="success")("bg-red-500",e.notification.type==="error")("text-white",!0),a(),s("name",e.notification.type==="success"?"matCheckCircle":"matError"),a(),_(" ",e.notification.message," ")}}function zr(i,c){if(i&1){let e=b();n(0,"button",36),f("click",function(){h(e);let o=d().$implicit,m=d(2);return g(m.approveUser(o))}),u(1,"ng-icon",37),l(2," Aprovar "),r()}}function Kr(i,c){if(i&1){let e=b();n(0,"button",38),f("click",function(){h(e);let o=d().$implicit,m=d(2);return g(m.rejectUser(o))}),u(1,"ng-icon",39),l(2," Rejeitar "),r()}}function Jr(i,c){if(i&1){let e=b();n(0,"button",38),f("click",function(){h(e);let o=d().$implicit,m=d(2);return g(m.blockUser(o))}),u(1,"ng-icon",40),l(2," Bloquear "),r()}}function Wr(i,c){if(i&1){let e=b();n(0,"button",36),f("click",function(){h(e);let o=d().$implicit,m=d(2);return g(m.unblockUser(o))}),u(1,"ng-icon",37),l(2," Desbloquear "),r()}}function Gr(i,c){if(i&1&&(n(0,"div",22)(1,"div",23)(2,"div",24),u(3,"ng-icon",25),n(4,"h3",26),l(5),r()(),n(6,"div",27)(7,"div",24),u(8,"ng-icon",28),l(9),r(),n(10,"div",24),u(11,"ng-icon",29),l(12),r(),n(13,"div",24),u(14,"ng-icon",30),l(15),r(),n(16,"div",24),u(17,"ng-icon",31),l(18),r()(),n(19,"div",32),l(20),ye(21,"date"),r()(),n(22,"div",33),p(23,zr,3,0,"button",34)(24,Kr,3,0,"button",35)(25,Jr,3,0,"button",35)(26,Wr,3,0,"button",34),r()()),i&2){let e=c.$implicit,t=d(2);a(5),x(e.name),a(4),_(" ",e.email," "),a(3),_(" ",e.phone," "),a(3),_(" Empresa: ",e.companyCode," "),a(3),_(" Matr\xEDcula: ",e.registration," "),a(2),_(" Solicitado em: ",Ve(21,10,e.createdAt,"dd/MM/yyyy HH:mm")," "),a(3),s("ngIf",t.currentTab==="pending"),a(),s("ngIf",t.currentTab==="pending"),a(),s("ngIf",t.currentTab==="approved"),a(),s("ngIf",t.currentTab==="blocked")}}function Yr(i,c){if(i&1&&(n(0,"div",41)(1,"p",42),l(2),r()()),i&2){let e=d(2);a(2),_("Nenhum usu\xE1rio ",e.getEmptyStateText(),"")}}function Zr(i,c){if(i&1&&(n(0,"div",19),p(1,Gr,27,13,"div",20)(2,Yr,3,1,"div",21),r()),i&2){let e=d();a(),s("ngForOf",e.getUsersByStatus(e.currentTab)),a(),s("ngIf",e.getUsersByStatus(e.currentTab).length===0)}}var xi=(()=>{class i{authService;tabs=[{label:"Pendentes",value:"pending"},{label:"Aprovados",value:"approved"},{label:"Rejeitados",value:"rejected"},{label:"Bloqueados",value:"blocked"}];currentTab="pending";users=[];isLoading=!1;error=null;notification=null;refreshInterval;constructor(e){this.authService=e}ngOnInit(){this.loadUsers(),this.refreshInterval=setInterval(()=>{this.loadUsers()},3e4)}ngOnDestroy(){this.refreshInterval&&clearInterval(this.refreshInterval)}loadUsers(){this.isLoading=!0,this.error=null,this.authService.getPendingUsers().subscribe({next:e=>{this.users=e,this.isLoading=!1},error:e=>{this.error="Erro ao carregar usu\xE1rios. Por favor, tente novamente.",this.isLoading=!1,console.error("Error loading users:",e)}})}getUsersByStatus(e){return this.users.filter(t=>t.status===e)}getEmptyStateText(){switch(this.currentTab){case"pending":return"pendente";case"approved":return"aprovado";case"rejected":return"rejeitado";case"blocked":return"bloqueado";default:return""}}approveUser(e){return te(this,null,function*(){try{yield this.authService.approveUser(e.id).toPromise(),this.loadUsers(),this.showNotification("success","Usu\xE1rio aprovado com sucesso!")}catch{this.showNotification("error","Erro ao aprovar usu\xE1rio")}})}rejectUser(e){return te(this,null,function*(){try{yield this.authService.rejectUser(e.id).toPromise(),this.loadUsers(),this.showNotification("success","Usu\xE1rio rejeitado com sucesso!")}catch{this.showNotification("error","Erro ao rejeitar usu\xE1rio")}})}blockUser(e){return te(this,null,function*(){try{yield this.authService.blockUser(e.id).toPromise(),this.loadUsers(),this.showNotification("success","Usu\xE1rio bloqueado com sucesso!")}catch{this.showNotification("error","Erro ao bloquear usu\xE1rio")}})}unblockUser(e){return te(this,null,function*(){try{yield this.authService.unblockUser(e.id).toPromise(),this.loadUsers(),this.showNotification("success","Usu\xE1rio desbloqueado com sucesso!")}catch{this.showNotification("error","Erro ao desbloquear usu\xE1rio")}})}showNotification(e,t){this.notification={type:e,message:t},setTimeout(()=>{this.notification=null},3e3)}static \u0275fac=function(t){return new(t||i)(w(se))};static \u0275cmp=y({type:i,selectors:[["app-user-management"]],features:[z([],[W({matCheckCircle:Vt,matClose:St,matPerson:It,matPhone:Mt,matEmail:Et,matBusiness:wt,matWork:Pt,matBlock:Ct})])],decls:14,vars:5,consts:[[1,"min-h-screen","bg-white","dark:bg-[#09090B]"],[1,"container","mx-auto","py-28"],[1,"bg-white","dark:bg-[#141416]","rounded-xl","shadow-lg","p-8"],[1,"text-2xl","font-bold","mb-8","dark:text-white"],[1,"border-b","border-gray-200","dark:border-gray-700","mb-8"],[1,"flex","space-x-8"],["class","py-4 px-1 border-b-2 font-medium text-sm",3,"border-amber-500","text-amber-500","border-transparent","text-gray-500","click",4,"ngFor","ngForOf"],["class","text-center py-8",4,"ngIf"],["class","text-center py-8 text-red-500",4,"ngIf"],["class","fixed top-4 right-4 p-4 rounded-lg shadow-lg flex items-center gap-3 text-sm animate-fade-in",3,"bg-green-500","bg-red-500","text-white",4,"ngIf"],["class","space-y-6",4,"ngIf"],[1,"py-4","px-1","border-b-2","font-medium","text-sm",3,"click"],[1,"ml-2","py-0.5","px-2","rounded-full","text-xs"],[1,"text-center","py-8"],[1,"animate-spin","rounded-full","h-8","w-8","border-b-2","border-amber-500","mx-auto"],[1,"mt-2","text-gray-500"],[1,"text-center","py-8","text-red-500"],[1,"fixed","top-4","right-4","p-4","rounded-lg","shadow-lg","flex","items-center","gap-3","text-sm","animate-fade-in"],[1,"text-xl",3,"name"],[1,"space-y-6"],["class","bg-gray-50 dark:bg-gray-800 rounded-lg p-6 flex flex-col md:flex-row items-start md:items-center justify-between gap-4",4,"ngFor","ngForOf"],["class","text-center py-12 text-gray-500 dark:text-gray-400",4,"ngIf"],[1,"bg-gray-50","dark:bg-gray-800","rounded-lg","p-6","flex","flex-col","md:flex-row","items-start","md:items-center","justify-between","gap-4"],[1,"flex-grow","space-y-2"],[1,"flex","items-center","gap-2"],["name","matPerson",1,"text-amber-400"],[1,"font-medium","dark:text-white"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-2","text-sm","text-gray-500","dark:text-gray-400"],["name","matEmail",1,"text-gray-400"],["name","matPhone",1,"text-gray-400"],["name","matBusiness",1,"text-gray-400"],["name","matWork",1,"text-gray-400"],[1,"text-xs","text-gray-400"],[1,"flex","items-center","gap-2","self-end","md:self-center"],["hlmBtn","","variant","default","class","flex items-center gap-2 px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg",3,"click",4,"ngIf"],["hlmBtn","","variant","destructive","class","flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg",3,"click",4,"ngIf"],["hlmBtn","","variant","default",1,"flex","items-center","gap-2","px-4","py-2","bg-green-500","hover:bg-green-600","text-white","rounded-lg",3,"click"],["name","matCheckCircle"],["hlmBtn","","variant","destructive",1,"flex","items-center","gap-2","px-4","py-2","bg-red-500","hover:bg-red-600","text-white","rounded-lg",3,"click"],["name","matClose"],["name","matBlock"],[1,"text-center","py-12","text-gray-500","dark:text-gray-400"],[1,"text-lg"]],template:function(t,o){t&1&&(n(0,"div",0),u(1,"app-header"),n(2,"div",1)(3,"div",2)(4,"h2",3),l(5,"Gerenciamento de Usu\xE1rios"),r(),n(6,"div",4)(7,"nav",5),p(8,Br,4,18,"button",6),r()(),p(9,Lr,4,0,"div",7)(10,$r,2,1,"div",8)(11,qr,3,8,"div",9)(12,Zr,3,2,"div",10),r()(),u(13,"app-footer"),r()),t&2&&(a(8),s("ngForOf",o.tabs),a(),s("ngIf",o.isLoading),a(),s("ngIf",o.error),a(),s("ngIf",o.notification),a(),s("ngIf",!o.isLoading&&!o.error))},dependencies:[V,E,S,Fe,re,le,de,ce],styles:["@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0;transform:translateY(-1rem)}to{opacity:1;transform:translateY(0)}}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .3s ease-out}"]})}return i})();var fi=(()=>{class i{authService;router;constructor(e,t){this.authService=e,this.router=t}canActivate(){return this.authService.isAdmin()?!0:(this.router.navigate(["/home"]),!1)}static \u0275fac=function(t){return new(t||i)(xe(se),xe(ne))};static \u0275prov=ke({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var je=(()=>{class i{authService;router;constructor(e,t){this.authService=e,this.router=t}canActivate(e){return te(this,null,function*(){let t=e.routeConfig?.path||"";if(["login","register"].includes(t))return!0;if(!this.authService.isLoggedIn())return yield this.router.navigate(["/login"]),!1;if(this.authService.isAdmin())return!0;let m=this.authService.getCurrentUser();return m?.status==="pending"?t==="awaiting-approval"?!0:(yield this.router.navigate(["/awaiting-approval"]),!1):m?.status==="approved"?!0:(yield this.router.navigate(["/login"]),!1)})}static \u0275fac=function(t){return new(t||i)(xe(se),xe(ne))};static \u0275prov=ke({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var vi=[{path:"login",loadComponent:()=>import("./chunk-RGPUL5GL.js").then(i=>i.LoginComponent)},{path:"register",loadComponent:()=>import("./chunk-B6UCZWSG.js").then(i=>i.RegisterComponent)},{path:"user-management",component:xi,canActivate:[fi]},{path:"home",loadComponent:()=>import("./chunk-PQIRODRB.js").then(i=>i.HomeComponent),canActivate:[je]},{path:"profile",loadComponent:()=>import("./chunk-P2EAY32O.js").then(i=>i.ProfileComponent),canActivate:[je]},{path:"",redirectTo:"/login",pathMatch:"full"},{path:"awaiting-approval",component:zt,canActivate:[je]},{path:"dsbcarros",component:li},{path:"dash-drive",component:ui},{path:"dsb-carros-temp",component:Qt},{path:"dsb-carros-torque",component:ei},{path:"dsb-carros-turbina",component:ii},{path:"dsb-carros-pedal",component:Yt},{path:"dsb-carros-ar-comprimido",component:Wt},{path:"dsb-carros-velocidade",component:ni},{path:"pontuacao-ace",component:gi},{path:"as-no-ace",component:we},{path:"premiacoes",component:pi},{path:"ranking-empresa",component:we},{path:"ranking-geral",component:we},{path:"game-dia",component:we},{path:"quiz",component:we}];var _i={providers:[ht(),mt({eventCoalescing:!0}),xt(vi)]};var bi=(()=>{class i{themeService;title="app-ace-copilot";constructor(e){this.themeService=e}ngOnInit(){}static \u0275fac=function(t){return new(t||i)(w(Ut))};static \u0275cmp=y({type:i,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"min-h-screen","flex","flex-col"],[1,"flex-1"]],template:function(t,o){t&1&&(n(0,"div",0)(1,"main",1),u(2,"router-outlet"),r()())},dependencies:[ie,gt],encapsulation:2})}return i})();pt(bi,_i).catch(i=>console.error(i));
