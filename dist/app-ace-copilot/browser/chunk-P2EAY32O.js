import{a as Ee,b as Ie,c as Te,d as Me,e as Pe,f as Oe,g as Ve,h as Ne,i as Fe,j as De,k as Le,l as je,m as Be,n as Re}from"./chunk-ANADZTML.js";import{a as Ue,b as qe,c as ze,d as $e,e as Ge}from"./chunk-5TJTTSEC.js";import{$ as _,$a as R,Ab as ge,B as G,Bb as be,Cb as he,Da as ee,Db as xe,E as P,Eb as _e,Fb as ye,Ga as te,Gb as Ae,H as o,Ha as ae,Hb as Se,Ia as D,Ib as Ce,J as w,Ja as ie,Ka as re,Kb as ke,L as O,Mb as q,Nb as we,Oa as L,P as v,S as l,U as I,Va as ne,W as a,X as n,Y as c,Z as V,Za as j,_ as N,_a as B,aa as f,ba as m,bb as oe,c as M,ca as Y,da as Q,ea as W,fb as se,hb as le,ia as s,ja as C,jb as ce,ka as h,kb as me,l as J,lb as de,ma as H,na as K,oa as X,ob as pe,pa as F,pb as ue,r as g,s as b,tb as U,ua as Z,ub as ve,vb as fe,w as $}from"./chunk-2AUNN7MY.js";import{a as A,b as S}from"./chunk-4CLCTAJ7.js";var k=[{id:"m1",image:"assets/avatars/adventurer-avatar-m1.svg",category:"male",style:"adventurer",type:"free"},{id:"f1",image:"assets/avatars/adventurer-avatar-f1.svg",category:"female",style:"adventurer",type:"free"},{id:"n1",image:"assets/avatars/adventurer-avatar-n1.svg",category:"neutral",style:"adventurer",type:"free"}],He=[{id:"m2",image:"assets/avatars/premium/adventurer-avatar-m2.svg",category:"male",style:"adventurer",type:"premium",price:40},{id:"m3",image:"assets/avatars/premium/adventurer-avatar-m3.svg",category:"male",style:"adventurer",type:"premium",price:45},{id:"m4",image:"assets/avatars/premium/adventurer-avatar-m4.svg",category:"male",style:"adventurer",type:"premium",price:50},{id:"f2",image:"assets/avatars/premium/adventurer-avatar-f2.svg",category:"female",style:"adventurer",type:"premium",price:40},{id:"f3",image:"assets/avatars/premium/adventurer-avatar-f3.svg",category:"female",style:"adventurer",type:"premium",price:45},{id:"f4",image:"assets/avatars/premium/adventurer-avatar-f4.svg",category:"female",style:"adventurer",type:"premium",price:50},{id:"n2",image:"assets/avatars/premium/adventurer-avatar-n2.svg",category:"neutral",style:"adventurer",type:"premium",price:40},{id:"n3",image:"assets/avatars/premium/adventurer-avatar-n3.svg",category:"neutral",style:"adventurer",type:"premium",price:45},{id:"n4",image:"assets/avatars/premium/adventurer-avatar-n4.svg",category:"neutral",style:"adventurer",type:"premium",price:50}],Ke=[{id:"cm1",image:"assets/avatars/custom/adventurer-avatar-cm1.svg",category:"male",style:"adventurer",type:"custom",price:100},{id:"cm2",image:"assets/avatars/custom/adventurer-avatar-cm2.svg",category:"male",style:"adventurer",type:"custom",price:150},{id:"cf1",image:"assets/avatars/custom/adventurer-avatar-cf1.svg",category:"female",style:"adventurer",type:"custom",price:100},{id:"cf2",image:"assets/avatars/custom/adventurer-avatar-cf2.svg",category:"female",style:"adventurer",type:"custom",price:150},{id:"cn1",image:"assets/avatars/custom/adventurer-avatar-cn1.svg",category:"neutral",style:"adventurer",type:"custom",price:100},{id:"cn2",image:"assets/avatars/custom/adventurer-avatar-cn2.svg",category:"neutral",style:"adventurer",type:"custom",price:150}],z=[...k,...He,...Ke];var Ye=(()=>{class i{availableCoupons=new M(0);userAvatars=new M([]);selectedAvatar=new M(null);lockedAvatars=new Set;constructor(){let e=localStorage.getItem("availableCoupons");e&&this.availableCoupons.next(Number(e)),this.initializeUserAvatars()}initializeUserAvatars(){let e=localStorage.getItem("userAvatars"),t=[];e&&(t=JSON.parse(e));let r=k.map(x=>S(A({},x),{purchasedAt:new Date})),p=new Set(t.map(x=>x.id)),E=r.filter(x=>!p.has(x.id)),u=[...t,...E];this.userAvatars.next(u),localStorage.setItem("userAvatars",JSON.stringify(u));let y=localStorage.getItem("selectedAvatarId");if(y){let x=u.find(We=>We.id===y);x?this.selectedAvatar.next(x):u.length>0&&(this.selectedAvatar.next(u[0]),localStorage.setItem("selectedAvatarId",u[0].id))}else u.length>0&&(this.selectedAvatar.next(u[0]),localStorage.setItem("selectedAvatarId",u[0].id));let T=localStorage.getItem("lockedAvatars");if(T){let x=JSON.parse(T);this.lockedAvatars=new Set(x)}}getUserAvatars(){return this.userAvatars.asObservable()}getSelectedAvatar(){return this.selectedAvatar.asObservable()}getAvailableCoupons(){return this.availableCoupons.asObservable()}resetUserProfile(){let e=k.map(t=>S(A({},t),{purchasedAt:new Date}));this.userAvatars.next(e),this.selectedAvatar.next(e[0]),localStorage.setItem("userAvatars",JSON.stringify(e)),localStorage.setItem("selectedAvatarId",e[0].id),this.availableCoupons.next(0),localStorage.setItem("availableCoupons","0")}isAvatarAvailable(e){return k.some(t=>t.id===e)?!0:this.lockedAvatars.has(e)?!1:this.userAvatars.value.some(t=>t.id===e)}selectAvatar(e){let t=this.userAvatars.value.find(r=>r.id===e);return t?(this.selectedAvatar.next(t),localStorage.setItem("selectedAvatarId",e),!0):!1}purchaseAvatar(e){if(this.userAvatars.value.find(u=>u.id===e))return!1;if(k.some(u=>u.id===e)){let u=k.find(x=>x.id===e),y=S(A({},u),{purchasedAt:new Date}),T=[...this.userAvatars.value,y];return this.userAvatars.next(T),localStorage.setItem("userAvatars",JSON.stringify(T)),!0}let r=z.find(u=>u.id===e);if(!r||!r.price||this.availableCoupons.value<r.price)return!1;this.availableCoupons.next(this.availableCoupons.value-r.price),localStorage.setItem("availableCoupons",this.availableCoupons.value.toString());let p=S(A({},r),{purchasedAt:new Date}),E=[...this.userAvatars.value,p];return this.userAvatars.next(E),localStorage.setItem("userAvatars",JSON.stringify(E)),!0}addCoupons(e){e>0&&(this.availableCoupons.next(this.availableCoupons.value+e),localStorage.setItem("availableCoupons",this.availableCoupons.value.toString()))}lockAvatar(e){k.some(t=>t.id===e)||(this.lockedAvatars.add(e),localStorage.setItem("lockedAvatars",JSON.stringify(Array.from(this.lockedAvatars))))}unlockAvatar(e){this.lockedAvatars.delete(e),localStorage.setItem("lockedAvatars",JSON.stringify(Array.from(this.lockedAvatars)))}static \u0275fac=function(t){return new(t||i)};static \u0275prov=J({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function et(i,d){if(i&1&&(a(0,"div",23),c(1,"ng-icon",24),s(2),n()),i&2){let e=m(2);I("bg-green-500",e.notification.type==="success")("bg-red-500",e.notification.type==="error")("text-white",!0),o(),l("name",e.notification.type==="success"?"matCheckCircle":"matError"),o(),h(" ",e.notification.message," ")}}function tt(i,d){if(i&1){let e=_();a(0,"div",25)(1,"button",26),f("click",function(){g(e);let r=m(2);return b(r.resetProfile())}),c(2,"ng-icon",27),s(3," Resetar Perfil "),n(),a(4,"button",28),f("click",function(){g(e);let r=m(2);return b(r.addCoupons())}),c(5,"ng-icon",29),s(6," Adicionar Cupons "),n()()}}function at(i,d){if(i&1&&(a(0,"div",30)(1,"div",31)(2,"p",32),s(3,"Total de Avatares"),n(),a(4,"p",33),s(5),n()(),a(6,"div",31)(7,"p",32),s(8,"Avatares Dispon\xEDveis"),n(),a(9,"p",34),s(10),n()(),a(11,"div",31)(12,"p",32),s(13,"Avatares Bloqueados"),n(),a(14,"p",35),s(15),n()()()),i&2){let e=m(2);o(5),C(e.filteredAvatars.length),o(5),C(e.getAvailableAvatarsCount()),o(5),C(e.getLockedAvatarsCount())}}function it(i,d){if(i&1){let e=_();a(0,"button",41),f("click",function(){let r=g(e).$implicit,p=m(3);return b(p.selectCategory(r))}),s(1),n()}if(i&2){let e=d.$implicit,t=m(3);I("bg-amber-400",t.selectedCategory===e),l("variant",t.selectedCategory===e?"default":"ghost"),o(),h(" ",t.getCategoryLabel(e)," ")}}function rt(i,d){if(i&1){let e=_();a(0,"button",41),f("click",function(){let r=g(e).$implicit,p=m(3);return b(p.selectType(r))}),s(1),n()}if(i&2){let e=d.$implicit,t=m(3);I("bg-amber-400",t.selectedType===e),l("variant",t.selectedType===e?"default":"ghost"),o(),h(" ",t.getTypeLabel(e)," ")}}function nt(i,d){if(i&1){let e=_();a(0,"div",36)(1,"div",37)(2,"div",38),c(3,"ng-icon",39),s(4," Categorias "),n(),a(5,"div",40)(6,"button",41),f("click",function(){g(e);let r=m(2);return b(r.selectCategory("all"))}),s(7),n(),v(8,it,2,4,"button",42),n()(),a(9,"div",37)(10,"div",38),c(11,"ng-icon",43),s(12," Tipos "),n(),a(13,"div",40)(14,"button",41),f("click",function(){g(e);let r=m(2);return b(r.selectType("all"))}),s(15),n(),v(16,rt,2,4,"button",42),n()()()}if(i&2){let e=m(2);o(6),I("bg-amber-400",e.selectedCategory==="all"),l("variant",e.selectedCategory==="all"?"default":"ghost"),o(),h(" ",e.getCategoryLabel("all")," "),o(),l("ngForOf",e.categories),o(6),I("bg-amber-400",e.selectedType==="all"),l("variant",e.selectedType==="all"?"default":"ghost"),o(),h(" ",e.getTypeLabel("all")," "),o(),l("ngForOf",e.types)}}function ot(i,d){if(i&1&&(a(0,"p",57),c(1,"ng-icon",58),s(2),n()),i&2){let e=m(2).$implicit;o(2),h(" ",e.price," ")}}function st(i,d){if(i&1&&(a(0,"div",53)(1,"div",54),c(2,"ng-icon",55),v(3,ot,3,1,"p",56),n()()),i&2){let e=m().$implicit;o(2),l("name",e.price?"matShoppingCart":"matLock"),o(),l("ngIf",e.price)}}function lt(i,d){i&1&&(a(0,"span",59),s(1,"\u2605"),n())}function ct(i,d){i&1&&(a(0,"span",59),s(1,"\u26A1"),n())}function mt(i,d){if(i&1&&(a(0,"div",60)(1,"div",61)(2,"span"),s(3),n(),a(4,"span"),s(5),n()()()),i&2){let e=m().$implicit;o(3),h("ID: ",e.id,""),o(2),C(e.price?e.price+" cupons":"Gr\xE1tis")}}function dt(i,d){if(i&1){let e=_();a(0,"div",44),f("click",function(){let r=g(e).$implicit,p=m(2);return b(p.onAvatarClick(r))}),a(1,"div",45),c(2,"img",46),n(),v(3,st,4,2,"div",47),a(4,"div",48),V(5,49),v(6,lt,2,0,"span",50)(7,ct,2,0,"span",50),N(),n(),a(8,"div",51),s(9),n(),v(10,mt,6,2,"div",52),n()}if(i&2){let e=d.$implicit,t=m(2);I("border-amber-400",(t.selectedAvatar==null?null:t.selectedAvatar.id)===e.id)("border-transparent",(t.selectedAvatar==null?null:t.selectedAvatar.id)!==e.id)("opacity-75",!t.isAdmin&&!t.isAvatarAvailable(e.id)),o(2),l("src",e.image,P)("alt","Avatar "+e.id),o(),l("ngIf",!t.isAdmin&&!t.isAvatarAvailable(e.id)),o(2),l("ngSwitch",e.type),o(),l("ngSwitchCase","premium"),o(),l("ngSwitchCase","custom"),o(2),h(" ",t.getCategoryLabel(e.category)," "),o(),l("ngIf",t.isAdmin)}}function pt(i,d){i&1&&(a(0,"div",62)(1,"span",63),s(2,"Voc\xEA tem altera\xE7\xF5es n\xE3o salvas"),n()())}function ut(i,d){if(i&1){let e=_();a(0,"button",66),f("click",function(){g(e);let r=m(3);return b(r.purchaseSelected())}),c(1,"ng-icon",67),s(2),n()}if(i&2){let e=m(3);l("disabled",!e.canPurchaseSelected()),o(2),h(" Comprar (",e.selectedAvatar.price," cupons) ")}}function vt(i,d){if(i&1){let e=_();a(0,"button",68),f("click",function(){g(e);let r=m(3);return b(r.saveChanges())}),c(1,"ng-icon",69),s(2," Salvar Altera\xE7\xF5es "),n()}}function ft(i,d){if(i&1&&(V(0),v(1,ut,3,2,"button",64)(2,vt,3,0,"button",65),N()),i&2){let e=m(2);o(),l("ngIf",e.selectedAvatar&&!e.isAvatarAvailable(e.selectedAvatar.id)),o(),l("ngIf",e.selectedAvatar&&e.isAvatarAvailable(e.selectedAvatar.id))}}function gt(i,d){if(i&1){let e=_();a(0,"button",68),f("click",function(){g(e);let r=m(3);return b(r.toggleAvatarAvailability())}),c(1,"ng-icon",70),s(2),n()}if(i&2){let e=m(3);o(),l("name",e.isAvatarAvailable(e.selectedAvatar.id)?"matLock":"matLockOpen"),o(),h(" ",e.isAvatarAvailable(e.selectedAvatar.id)?"Bloquear":"Desbloquear"," ")}}function bt(i,d){if(i&1&&(V(0),v(1,gt,3,2,"button",65),N()),i&2){let e=m(2);o(),l("ngIf",e.selectedAvatar)}}function ht(i,d){if(i&1){let e=_();a(0,"div",1),v(1,et,3,8,"div",2),a(2,"div",3)(3,"div",4)(4,"div",5)(5,"div")(6,"h2",6),s(7),n(),a(8,"div",7),c(9,"ng-icon",8),a(10,"p",9),s(11),n()()(),a(12,"div",10),v(13,tt,7,0,"div",11),a(14,"button",12),f("click",function(){g(e);let r=m();return b(r.close())}),c(15,"ng-icon",13),n()()(),v(16,at,16,3,"div",14)(17,nt,17,10,"div",15),n(),a(18,"div",16)(19,"div",17),v(20,dt,11,14,"div",18),n()(),a(21,"div",19)(22,"div",5),v(23,pt,3,0,"div",20),a(24,"div",10)(25,"button",21),f("click",function(){g(e);let r=m();return b(r.close())}),s(26," Cancelar "),n(),v(27,ft,3,2,"ng-container",22)(28,bt,2,1,"ng-container",22),n()()()()()}if(i&2){let e=m();o(),l("ngIf",e.notification),o(6),h(" ",e.isAdmin?"Gerenciar Avatares":"Escolha seu Avatar"," "),o(4),h(" Cupons dispon\xEDveis: ",e.availableCoupons," "),o(2),l("ngIf",e.isAdmin),o(3),l("ngIf",e.isAdmin),o(),l("ngIf",!e.isAdmin),o(3),l("ngForOf",e.filteredAvatars),o(3),l("ngIf",e.hasUnsavedChanges),o(4),l("ngIf",!e.isAdmin),o(),l("ngIf",e.isAdmin)}}var Qe=(()=>{class i{avatarService;isOpen=!1;isAdmin=!1;closeModal=new $;avatarSelected=new $;availableCoupons=0;selectedAvatar=null;currentAvatar=null;hasUnsavedChanges=!1;notification=null;categories=["male","female","neutral"];selectedCategory="all";types=["free","premium","custom"];selectedType="all";constructor(e){this.avatarService=e}ngOnInit(){this.avatarService.getAvailableCoupons().subscribe(e=>{this.availableCoupons=e}),this.avatarService.getSelectedAvatar().subscribe(e=>{this.currentAvatar=e,e&&!this.selectedAvatar&&(this.selectedAvatar=e)})}get filteredAvatars(){return z.filter(e=>{let t=this.selectedCategory==="all"||e.category===this.selectedCategory,r=this.selectedType==="all"||e.type===this.selectedType;return t&&r})}getCategoryLabel(e){return{all:"Todos",male:"Masculino",female:"Feminino",neutral:"Neutro"}[e]}getTypeLabel(e){return{all:"Todos",free:"Gratuitos",premium:"Premium",custom:"Exclusivos"}[e]}selectCategory(e){this.selectedCategory=e}selectType(e){this.selectedType=e}onAvatarClick(e){this.selectedAvatar=e,this.hasUnsavedChanges=this.currentAvatar?.id!==e.id}isAvatarAvailable(e){return k.some(t=>t.id===e)||this.isAdmin?!0:this.avatarService.isAvatarAvailable(e)}canPurchaseSelected(){return!this.selectedAvatar||!this.selectedAvatar.price?!1:this.availableCoupons>=this.selectedAvatar.price}showNotification(e,t){this.notification={type:e,message:t},setTimeout(()=>{this.notification=null},3e3)}saveChanges(){if(this.selectedAvatar&&this.isAvatarAvailable(this.selectedAvatar.id)&&this.avatarService.selectAvatar(this.selectedAvatar.id)){this.avatarSelected.emit(this.selectedAvatar);let e=this.getTypeLabel(this.selectedAvatar.type).toLowerCase();this.showNotification("success",`Avatar ${e} salvo com sucesso!`),this.hasUnsavedChanges=!1,this.close()}}purchaseSelected(){if(this.selectedAvatar)if(this.avatarService.purchaseAvatar(this.selectedAvatar.id)){let e=this.getTypeLabel(this.selectedAvatar.type).toLowerCase();this.showNotification("success",`Avatar ${e} comprado com sucesso! Selecione-o e salve para utiliz\xE1-lo.`),this.hasUnsavedChanges=!0}else this.showNotification("error","N\xE3o foi poss\xEDvel comprar o avatar. Verifique se voc\xEA tem cupons suficientes.")}close(){this.hasUnsavedChanges?confirm("Voc\xEA tem altera\xE7\xF5es n\xE3o salvas. Deseja realmente sair sem salvar?")&&(this.closeModal.emit(),this.resetState()):(this.closeModal.emit(),this.resetState())}resetState(){this.selectedAvatar=this.currentAvatar,this.selectedCategory="all",this.selectedType="all",this.hasUnsavedChanges=!1}resetProfile(){confirm("Tem certeza que deseja resetar seu perfil? Todos os avatares premium e exclusivos ser\xE3o removidos.")&&(this.avatarService.resetUserProfile(),this.showNotification("success","Perfil resetado com sucesso!"),this.close())}getAvailableAvatarsCount(){return this.filteredAvatars.filter(e=>this.isAvatarAvailable(e.id)).length}getLockedAvatarsCount(){return this.filteredAvatars.filter(e=>!this.isAvatarAvailable(e.id)).length}addCoupons(){let e=prompt("Quantidade de cupons a adicionar:");if(e&&!isNaN(Number(e))){let t=Number(e);t>0?(this.avatarService.addCoupons(t),this.showNotification("success",`${e} cupons adicionados com sucesso!`)):this.showNotification("error","A quantidade deve ser maior que zero")}}toggleAvatarAvailability(){if(!this.selectedAvatar)return;this.isAvatarAvailable(this.selectedAvatar.id)?(this.avatarService.lockAvatar(this.selectedAvatar.id),this.showNotification("success","Avatar bloqueado com sucesso!")):(this.avatarService.unlockAvatar(this.selectedAvatar.id),this.showNotification("success","Avatar desbloqueado com sucesso!"))}static \u0275fac=function(t){return new(t||i)(w(Ye))};static \u0275cmp=O({type:i,selectors:[["app-avatar-selector"]],inputs:{isOpen:"isOpen",isAdmin:"isAdmin"},outputs:{closeModal:"closeModal",avatarSelected:"avatarSelected"},features:[F([],[j({matClose:de,matLock:fe,matLockOpen:ve,matShoppingCart:Ae,matLocalOffer:U,matCategory:ce,matStyle:Ce,matStarRate:Se,matCheckCircle:me,matError:ue,matAdd:R,matSave:_e})])],decls:1,vars:1,consts:[["class","fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",4,"ngIf"],[1,"fixed","inset-0","bg-black/60","backdrop-blur-sm","z-50","flex","items-center","justify-center","p-4"],["class","fixed top-4 right-4 p-4 rounded-lg shadow-lg flex items-center gap-3 text-sm animate-fade-in",3,"bg-green-500","bg-red-500","text-white",4,"ngIf"],[1,"bg-white","dark:bg-[#141416]","rounded-xl","shadow-2xl","w-full","max-w-4xl","flex","flex-col","max-h-[90vh]","border","border-gray-200","dark:border-gray-700"],[1,"p-6","border-b","border-gray-200","dark:border-gray-700"],[1,"flex","justify-between","items-center"],[1,"text-3xl","font-bold","dark:text-white","flex","items-center","gap-2"],[1,"mt-2","flex","items-center","gap-2"],["name","matLocalOffer",1,"text-amber-400"],[1,"text-amber-400","text-sm","font-medium"],[1,"flex","items-center","gap-4"],["class","flex items-center gap-2",4,"ngIf"],["hlmBtn","","variant","ghost",1,"rounded-full","p-2","hover:bg-gray-100","dark:hover:bg-gray-800","transition-colors",3,"click"],["name","matClose",1,"text-xl","text-gray-500","dark:text-gray-400"],["class","mt-4 grid grid-cols-3 gap-4",4,"ngIf"],["class","mt-6 space-y-4",4,"ngIf"],[1,"p-6","overflow-y-auto","flex-grow"],[1,"grid","grid-cols-2","sm:grid-cols-3","gap-4"],["class","relative group cursor-pointer rounded-xl overflow-hidden transition-all duration-300 hover:scale-105 bg-gray-100 dark:bg-gray-800 border-2",3,"border-amber-400","border-transparent","opacity-75","click",4,"ngFor","ngForOf"],[1,"p-6","border-t","border-gray-200","dark:border-gray-700","bg-white/80","dark:bg-[#141416]/80","backdrop-blur-sm"],["class","flex items-center gap-2 text-gray-500 dark:text-gray-400",4,"ngIf"],["hlmBtn","","variant","ghost",1,"px-6","py-2","rounded-full",3,"click"],[4,"ngIf"],[1,"fixed","top-4","right-4","p-4","rounded-lg","shadow-lg","flex","items-center","gap-3","text-sm","animate-fade-in"],[1,"text-xl",3,"name"],[1,"flex","items-center","gap-2"],["hlmBtn","","variant","destructive",1,"px-4","py-2","rounded-lg","flex","items-center","gap-2",3,"click"],["name","matRefresh"],["hlmBtn","",1,"px-4","py-2","bg-amber-400","text-black","hover:bg-amber-500","rounded-lg","flex","items-center","gap-2",3,"click"],["name","matAdd"],[1,"mt-4","grid","grid-cols-3","gap-4"],[1,"bg-gray-100","dark:bg-gray-800","p-4","rounded-lg","text-center"],[1,"text-sm","text-gray-500","dark:text-gray-400"],[1,"text-2xl","font-bold","text-amber-400"],[1,"text-2xl","font-bold","text-green-500"],[1,"text-2xl","font-bold","text-red-500"],[1,"mt-6","space-y-4"],[1,"space-y-2"],[1,"flex","items-center","gap-2","text-sm","font-medium","text-gray-500","dark:text-gray-400"],["name","matCategory"],[1,"flex","flex-wrap","gap-2"],["hlmBtn","",1,"rounded-full","px-4","py-2","text-sm",3,"click","variant"],["hlmBtn","","class","rounded-full px-4 py-2 text-sm",3,"variant","bg-amber-400","click",4,"ngFor","ngForOf"],["name","matStyle"],[1,"relative","group","cursor-pointer","rounded-xl","overflow-hidden","transition-all","duration-300","hover:scale-105","bg-gray-100","dark:bg-gray-800","border-2",3,"click"],[1,"aspect-square","w-full","p-4","flex","items-center","justify-center"],[1,"w-24","h-24","object-contain","transition-transform","duration-300","group-hover:scale-110",3,"src","alt"],["class","absolute inset-0 bg-[#1d1d1d] bg-opacity-70 flex items-center justify-center backdrop-blur-sm",4,"ngIf"],[1,"absolute","top-2","right-2"],[3,"ngSwitch"],["class","text-amber-400 text-lg",4,"ngSwitchCase"],[1,"absolute","bottom-2","left-2","text-xs","font-medium","text-gray-500","dark:text-gray-400"],["class","absolute bottom-0 left-0 right-0 bg-black/60 text-white p-2 text-xs",4,"ngIf"],[1,"absolute","inset-0","bg-[#1d1d1d]","bg-opacity-70","flex","items-center","justify-center","backdrop-blur-sm"],[1,"text-center","p-2"],[1,"text-amber-400","text-2xl","mb-1",3,"name"],["class","text-amber-400 text-sm font-medium flex items-center justify-center gap-1",4,"ngIf"],[1,"text-amber-400","text-sm","font-medium","flex","items-center","justify-center","gap-1"],["name","matLocalOffer",1,"text-base"],[1,"text-amber-400","text-lg"],[1,"absolute","bottom-0","left-0","right-0","bg-black/60","text-white","p-2","text-xs"],[1,"flex","justify-between"],[1,"flex","items-center","gap-2","text-gray-500","dark:text-gray-400"],[1,"text-sm"],["hlmBtn","","class","px-6 py-2 bg-amber-400 text-black hover:bg-amber-500 rounded-full flex items-center gap-2",3,"disabled","click",4,"ngIf"],["hlmBtn","","class","px-6 py-2 bg-amber-400 text-black hover:bg-amber-500 rounded-full flex items-center gap-2",3,"click",4,"ngIf"],["hlmBtn","",1,"px-6","py-2","bg-amber-400","text-black","hover:bg-amber-500","rounded-full","flex","items-center","gap-2",3,"click","disabled"],["name","matShoppingCart"],["hlmBtn","",1,"px-6","py-2","bg-amber-400","text-black","hover:bg-amber-500","rounded-full","flex","items-center","gap-2",3,"click"],["name","matSave"],[3,"name"]],template:function(t,r){t&1&&v(0,ht,29,10,"div",0),t&2&&l("ngIf",r.isOpen)},dependencies:[L,ae,D,ie,re,B,q],styles:["[_nghost-%COMP%]{display:block}.avatar-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:1rem}img[_ngcontent-%COMP%]{filter:drop-shadow(0 4px 6px rgba(0,0,0,.1))}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#9ca3af80;border-radius:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#9ca3afb3}*[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:rgba(156,163,175,.5) transparent}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0;transform:translateY(-1rem)}to{opacity:1;transform:translateY(0)}}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .3s ease-out}"]})}return i})();var xt=["fileInput"],_t=(i,d,e,t)=>({"bg-amber-700 text-black":i,"bg-amber-400 text-black":d,"bg-gray-400 text-white":e,"bg-orange-700 text-white":t});function yt(i,d){if(i&1&&(a(0,"div",47),c(1,"ng-icon",48),s(2),n()),i&2){let e=m();o(2),h(" ",e.user().phone," ")}}function At(i,d){if(i&1){let e=_();a(0,"div",49)(1,"h3",34),c(2,"ng-icon",35),s(3),n(),a(4,"div",50)(5,"div",51)(6,"h4",52),c(7,"ng-icon",53),s(8," Gerenciar Cupons "),n(),a(9,"div",54)(10,"div",55)(11,"label",21),s(12," Quantidade de Cupons "),n(),a(13,"input",56),X("ngModelChange",function(r){g(e);let p=m();return K(p.couponAmount,r)||(p.couponAmount=r),b(r)}),n()(),a(14,"button",57),f("click",function(){g(e);let r=m();return b(r.addCoupons())}),c(15,"ng-icon",58),s(16," Adicionar Cupons "),n()(),a(17,"div",59)(18,"div",60)(19,"p",61),s(20,"Total"),n(),a(21,"p",62),s(22),n()(),a(23,"div",60)(24,"p",61),s(25,"Dispon\xEDveis"),n(),a(26,"p",63),s(27),n()(),a(28,"div",60)(29,"p",61),s(30,"Utilizados"),n(),a(31,"p",64),s(32),n()()()(),a(33,"button",65),f("click",function(){g(e);let r=m();return b(r.resetProfile())}),c(34,"ng-icon",66),s(35," Resetar Perfil "),n()()()}if(i&2){let e=m();o(3),h(" Administra\xE7\xE3o (",e.authService.isAdmin()?"Admin":"N\xE3o Admin",") "),o(10),H("ngModel",e.couponAmount),o(9),C(e.couponStats().total),o(5),C(e.couponStats().available),o(5),C(e.couponStats().used)}}var pa=(()=>{class i{fb;router;themeService;notificationService;authService;couponService;fileInput;originalThemeState=!1;isAvatarSelectorOpen=!1;couponAmount=1;couponStats=G({total:0,available:0,used:0});user=G({id:"",name:"",email:"",phase:"",avatar:"",phone:"",company:"",role:"",registration:"",preferences:{darkMode:!0,notifications:!0},isAdmin:!1});profileForm;constructor(e,t,r,p,E,u){this.fb=e,this.router=t,this.themeService=r,this.notificationService=p,this.authService=E,this.couponService=u,this.originalThemeState=this.themeService.isDarkMode(),this.profileForm=this.fb.group({name:["",Te.required],registration:[{value:"",disabled:!0}],phone:[{value:"",disabled:!0}],company:[{value:"",disabled:!0}],role:[{value:"",disabled:!0}],darkMode:[this.themeService.isDarkMode()],notifications:[this.notificationService.isNotificationsEnabled()]}),ee(()=>{let y=this.themeService.isDarkMode();this.profileForm.dirty||(this.profileForm.patchValue({darkMode:y},{emitEvent:!1}),this.originalThemeState=y)}),this.profileForm.get("darkMode")?.valueChanges.subscribe(y=>{y?this.themeService.enableDarkMode():this.themeService.disableDarkMode()}),this.couponService.getCouponStats().subscribe(y=>{this.couponStats.set(y)})}ngOnInit(){let e=localStorage.getItem("userAvatar");e&&this.user.update(t=>S(A({},t),{avatar:e})),console.log("User Role:",localStorage.getItem("userRole")),console.log("User Registration:",localStorage.getItem("registration")),this.profileForm.patchValue({name:this.user().name,registration:this.user().registration,phone:this.user().phone,company:this.user().company,role:this.user().role,darkMode:this.themeService.isDarkMode(),notifications:this.notificationService.isNotificationsEnabled()})}openAvatarSelector(){this.isAvatarSelectorOpen=!0}closeAvatarSelector(){this.isAvatarSelectorOpen=!1}onAvatarSelected(e){localStorage.setItem("userAvatar",e.image),this.user.update(t=>S(A({},t),{avatar:e.image})),this.showToast("Avatar atualizado com sucesso!","success")}onSubmit(){if(this.profileForm.valid){let e=this.profileForm.value;this.originalThemeState=e.darkMode,e.notifications?this.notificationService.enableNotifications():this.notificationService.disableNotifications(),this.user.update(t=>S(A({},t),{name:e.name,registration:e.registration,phone:e.phone,company:e.company,role:e.role,preferences:{darkMode:e.darkMode,notifications:e.notifications}})),console.log("Profile updated:",this.user()),this.profileForm.markAsPristine(),this.showToast("Perfil atualizado com sucesso!","success")}}revertThemeChanges(){this.originalThemeState?this.themeService.enableDarkMode():this.themeService.disableDarkMode(),this.profileForm.patchValue({darkMode:this.originalThemeState},{emitEvent:!1})}canDeactivate(){if(this.profileForm.dirty){let e=window.confirm("Voc\xEA tem altera\xE7\xF5es n\xE3o salvas. Deseja descartar as altera\xE7\xF5es?");return e&&this.revertThemeChanges(),e}return!0}showToast(e,t){let r=document.createElement("div");r.className=`fixed bottom-6 right-6 px-6 py-3 rounded-lg shadow-lg text-white font-medium ${t==="success"?"bg-green-600":"bg-red-600"} animate-fade-in-up`,r.textContent=e,document.body.appendChild(r),setTimeout(()=>{r.classList.add("animate-fade-out"),setTimeout(()=>{document.body.removeChild(r)},300)},3e3)}isAdmin(){let e=this.authService.isAdmin();return console.log("isAdmin check:",e),e}resetProfile(){confirm("Tem certeza que deseja resetar este perfil? Esta a\xE7\xE3o n\xE3o pode ser desfeita.")&&(this.user.update(e=>S(A({},e),{avatar:"",preferences:{darkMode:!1,notifications:!0}})),localStorage.removeItem("userAvatar"),this.profileForm.reset({name:this.user().name,registration:this.user().registration,phone:this.user().phone,company:this.user().company,role:this.user().role,darkMode:!1,notifications:!0}),this.themeService.disableDarkMode(),this.originalThemeState=!1,this.showToast("Perfil resetado com sucesso!","success"))}addCoupons(){if(this.couponAmount<1){this.showToast("A quantidade deve ser maior que zero","error");return}this.couponService.addCoupons(this.couponAmount),this.showToast(`${this.couponAmount} cupons adicionados com sucesso!`,"success"),this.couponAmount=1}static \u0275fac=function(t){return new(t||i)(w(je),w(ne),w(ze),w(qe),w(we),w(Ge))};static \u0275cmp=O({type:i,selectors:[["app-profile"]],viewQuery:function(t,r){if(t&1&&Y(xt,5),t&2){let p;Q(p=W())&&(r.fileInput=p.first)}},features:[F([],[j({matArrowBack:oe,matPhotoCamera:he,matPerson:ge,matBadge:se,matEmail:pe,matPhone:be,matBusiness:le,matWork:ke,matSettings:ye,matRefresh:xe,matAdd:R,matLocalOffer:U})])],decls:84,vars:16,consts:[[1,"min-h-screen","bg-white","dark:bg-[#09090B]"],[1,"container","mx-auto","py-28"],[1,"bg-white","dark:bg-[#141416]","overflow-hidden"],[1,"relative","p-8"],[1,"flex","flex-col","md:flex-row","items-center"],[1,"relative","mb-0","md:mr-8"],[1,"profile-avatar","w-40","h-40","rounded-full","overflow-hidden","border-4","border-amber-400","shadow-lg","hover:scale-105","transition-transform"],[1,"w-full","h-full","object-cover",3,"src","alt"],["hlmBtn","","variant","ghost",1,"absolute","bottom-2","right-2","bg-amber-400","hover:bg-amber-500","text-white","rounded-full","p-3","shadow-md","transition-colors",3,"click"],["name","matPhotoCamera",1,"text-lg"],[1,"text-center","md:text-left"],[1,"text-2xl","font-bold","text-white"],[1,"mt-2"],[1,"phase-badge","inline-block","px-4","py-1","rounded-full","text-sm","font-medium",3,"ngClass"],[1,"mt-4","flex","flex-wrap","justify-center","md:justify-start","gap-4"],["class","flex items-center text-md dark:text-gray-400",4,"ngIf"],[1,"p-8"],[1,"space-y-8",3,"ngSubmit","formGroup"],[1,"text-xl","font-semibold","mb-6","pb-2","border-b","border-gray-700","flex","items-center"],["name","matPerson",1,"mr-3"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"block","text-sm","font-medium","dark:text-gray-300","mb-2"],[1,"relative"],["type","text","formControlName","name",1,"input-field","w-full","px-4","py-3","rounded-lg","dark:bg-[#1a1a1a]","dark:text-white","border","border-gray-700","focus:border-amber-400","focus:ring-1","focus:ring-amber-400","transition-all"],[1,"absolute","right-3","top-3","text-gray-500"],["name","matPerson"],["type","text","formControlName","registration",1,"input-field","w-full","px-4","py-3","rounded-lg","dark:bg-[#1a1a1a]","dark:text-white","border","border-gray-700","focus:border-amber-400","focus:ring-1","focus:ring-amber-400","transition-all","cursor-not-allowed","opacity-75"],["name","matBadge"],["type","tel","formControlName","phone",1,"input-field","w-full","px-4","py-3","rounded-lg","dark:bg-[#1a1a1a]","dark:text-white","border","border-gray-700","focus:border-amber-400","focus:ring-1","focus:ring-amber-400","transition-all","cursor-not-allowed","opacity-75"],["name","matPhone"],["type","text","formControlName","company",1,"input-field","w-full","px-4","py-3","rounded-lg","dark:bg-[#1a1a1a]","dark:text-white","border","border-gray-700","focus:border-amber-400","focus:ring-1","focus:ring-amber-400","transition-all","cursor-not-allowed","opacity-75"],["name","matBusiness"],["type","text","formControlName","role",1,"input-field","w-full","px-4","py-3","rounded-lg","dark:bg-[#1a1a1a]","dark:text-white","border","border-gray-700","focus:border-amber-400","focus:ring-1","focus:ring-amber-400","transition-all","cursor-not-allowed","opacity-75"],["name","matWork"],[1,"text-xl","font-semibold","mb-6","pb-2","border-b","border-gray-700","dark:text-amber-400","flex","items-center"],["name","matSettings",1,"mr-3"],[1,"space-y-4"],[1,"flex","items-center"],[1,"relative","inline-flex","items-center","cursor-pointer"],["type","checkbox","formControlName","darkMode",1,"sr-only","peer"],[1,"w-11","h-6","bg-[#1a1a1a]","peer-focus:outline-none","rounded-full","peer","peer-checked:after:translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-[2px]","after:left-[2px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","peer-checked:bg-amber-400"],[1,"ml-3","text-sm","font-medium","dark:text-gray-300"],["type","checkbox","formControlName","notifications",1,"sr-only","peer"],["class","border-t border-gray-700 mt-8 pt-8",4,"ngIf"],[1,"flex","justify-end","pt-6"],["hlmBtn","","type","submit",1,"save-btn","bg-gradient-to-r","from-amber-400","to-amber-500","hover:from-amber-500","hover:to-amber-600","text-black","font-medium","py-3","px-8","rounded-lg","shadow-md","transition-all","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[3,"closeModal","avatarSelected","isOpen","isAdmin"],[1,"flex","items-center","text-md","dark:text-gray-400"],["name","matPhone",1,"mr-2","text-amber-400"],[1,"border-t","border-gray-700","mt-8","pt-8"],[1,"space-y-6"],[1,"bg-gray-100","dark:bg-gray-800","p-6","rounded-lg"],[1,"text-lg","font-medium","mb-4","flex","items-center","gap-2"],["name","matLocalOffer",1,"text-amber-400"],[1,"flex","items-center","gap-4","mb-4"],[1,"flex-1"],["type","number","min","1",1,"w-full","px-4","py-2","rounded-lg","dark:bg-[#1a1a1a]","dark:text-white","border","border-gray-700","focus:border-amber-400","focus:ring-1","focus:ring-amber-400",3,"ngModelChange","ngModel"],["hlmBtn","",1,"bg-amber-400","hover:bg-amber-500","text-black","font-medium","py-3","px-6","rounded-lg","shadow-md","transition-all","flex","items-center","gap-2","self-end",3,"click"],["name","matAdd"],[1,"grid","grid-cols-3","gap-4","mt-6"],[1,"bg-white","dark:bg-[#1a1a1a]","p-4","rounded-lg","text-center"],[1,"text-sm","text-gray-500","dark:text-gray-400"],[1,"text-2xl","font-bold","text-amber-400"],[1,"text-2xl","font-bold","text-green-500"],[1,"text-2xl","font-bold","text-blue-500"],["hlmBtn","","variant","destructive",1,"w-full","bg-red-500","hover:bg-red-600","text-white","font-medium","py-3","px-8","rounded-lg","shadow-md","transition-all","flex","items-center","gap-2","justify-center",3,"click"],["name","matRefresh"]],template:function(t,r){t&1&&(a(0,"div",0),c(1,"app-header"),a(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6),c(8,"img",7),n(),a(9,"button",8),f("click",function(){return r.openAvatarSelector()}),c(10,"ng-icon",9),n()(),a(11,"div",10)(12,"h2",11),s(13),n(),a(14,"div",12)(15,"span",13),s(16),n()(),a(17,"div",14),v(18,yt,3,1,"div",15),n()()()(),a(19,"div",16)(20,"form",17),f("ngSubmit",function(){return r.onSubmit()}),a(21,"div")(22,"h3",18),c(23,"ng-icon",19),s(24," Informa\xE7\xF5es Pessoais "),n(),a(25,"div",20)(26,"div")(27,"label",21),s(28," Nome "),n(),a(29,"div",22),c(30,"input",23),a(31,"div",24),c(32,"ng-icon",25),n()()(),a(33,"div")(34,"label",21),s(35," Matr\xEDcula "),n(),a(36,"div",22),c(37,"input",26),a(38,"div",24),c(39,"ng-icon",27),n()()(),a(40,"div")(41,"label",21),s(42," Telefone "),n(),a(43,"div",22),c(44,"input",28),a(45,"div",24),c(46,"ng-icon",29),n()()(),a(47,"div")(48,"label",21),s(49," Empresa "),n(),a(50,"div",22),c(51,"input",30),a(52,"div",24),c(53,"ng-icon",31),n()()(),a(54,"div")(55,"label",21),s(56," Cargo "),n(),a(57,"div",22),c(58,"input",32),a(59,"div",24),c(60,"ng-icon",33),n()()()()(),a(61,"div")(62,"h3",34),c(63,"ng-icon",35),s(64," Prefer\xEAncias "),n(),a(65,"div",36)(66,"div",37)(67,"label",38),c(68,"input",39)(69,"div",40),a(70,"span",41),s(71,"Modo Escuro"),n()()(),a(72,"div",37)(73,"label",38),c(74,"input",42)(75,"div",40),a(76,"span",41),s(77,"Ativar Notifica\xE7\xF5es"),n()()()()(),v(78,At,36,5,"div",43),a(79,"div",44)(80,"button",45),s(81," Salvar Altera\xE7\xF5es "),n()()()()()(),c(82,"app-footer"),n(),a(83,"app-avatar-selector",46),f("closeModal",function(){return r.closeAvatarSelector()})("avatarSelected",function(E){return r.onAvatarSelected(E)}),n()),t&2&&(o(8),l("src",r.user().avatar||"assets/Logo_AceCopilot 1.png",P)("alt",r.user().name),o(5),C(r.user().name),o(2),l("ngClass",Z(11,_t,r.user().phase==="Ouro C",r.user().phase==="Ouro",r.user().phase==="Prata",r.user().phase==="Bronze")),o(),h(" Fase: ",r.user().phase," "),o(2),l("ngIf",r.user().phone),o(2),l("formGroup",r.profileForm),o(58),l("ngIf",r.isAdmin()),o(2),l("disabled",!r.profileForm.valid||!r.profileForm.dirty),o(3),l("isOpen",r.isAvatarSelectorOpen)("isAdmin",r.authService.isAdmin()))},dependencies:[L,te,D,Re,Ve,Ie,Ne,Ee,Me,Pe,Le,Fe,De,Be,Oe,B,q,$e,Ue,Qe],styles:["[_nghost-%COMP%]{display:block}:is()   .bg-background[_ngcontent-%COMP%]{background-color:#09090b}.profile-avatar[_ngcontent-%COMP%]{transition:all .3s ease}.profile-avatar[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.phase-badge[_ngcontent-%COMP%]{transition:all .3s ease}.phase-badge[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 6px #0000001a}.input-field[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #f59e0b4d}.save-btn[_ngcontent-%COMP%]{transition:all .3s ease}.save-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 6px #f59e0b4d}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeOut{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-20px)}}.animate-fade-in-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .3s ease-out forwards}.animate-fade-out[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOut .3s ease-out forwards}"]})}return i})();export{pa as ProfileComponent};
