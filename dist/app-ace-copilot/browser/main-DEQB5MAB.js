import{a as Tt,e as Dt,i as kt,k as It}from"./chunk-3CIM264Z.js";import{b as K,d as J,f as W,l as Ot,m as H,n as St}from"./chunk-QX5LECDH.js";import{a as Mt}from"./chunk-C7XEMY5Y.js";import{a as ue,c as Et,d as pe}from"./chunk-RJPSEO76.js";import{$ as tt,$a as oe,A as O,Aa as j,Ab as Ct,C as Ge,D as Ye,Eb as wt,F as E,H as F,Ha as P,I as a,Ia as D,J as R,Ja as S,K as w,Kb as yt,L as Ze,M as y,Ma as N,Mb as Vt,N as Qe,Na as lt,Nb as de,Ob as me,Pa as V,Q as p,Qa as st,Ra as ct,S as U,Sa as z,T as s,Ta as dt,U as Xe,Ua as Oe,V as se,Va as mt,W as ke,Wa as te,X as n,Xa as Se,Y as r,Ya as ut,Z as u,Za as X,_ as et,_a as ee,aa as C,ba as f,bb as pt,ca as m,d as Le,da as we,db as ht,ea as ye,eb as gt,f as $e,fa as Ve,fb as xt,ga as it,h as Te,ha as ot,i as be,ia as Ie,j as qe,ja as l,jb as ft,ka as h,la as _,m as Ce,ma as nt,n as ze,na as B,oa as L,ob as vt,p as le,pa as $,q as De,qa as Q,r as Ke,ra as ce,s as g,sa as b,sb as _t,t as x,ta as T,va as q,wa as Me,xa as Fe,xb as bt,y as Je,ya as rt,z as We,za as at}from"./chunk-RVYV3GKE.js";import{a as I,b as M,d as _e}from"./chunk-4CLCTAJ7.js";var At=(()=>{class i{router;authService;isChecking=!1;constructor(e,t){this.router=e,this.authService=t,this.authService.isAdmin()&&this.router.navigate(["/home"])}checkAccess(){return _e(this,null,function*(){this.isChecking=!0;try{(yield this.authService.checkRegistrationStatus())==="approved"&&(yield this.authService.updateUserAccess(),this.router.navigate(["/home"]))}catch(e){console.error("Erro ao verificar status:",e)}finally{this.isChecking=!1}})}logout(){this.authService.logout()}static \u0275fac=function(t){return new(t||i)(w(te),w(me))};static \u0275cmp=y({type:i,selectors:[["app-awaiting-approval"]],features:[Q([],[ee({matLogout:bt,matRefresh:wt})])],decls:19,vars:4,consts:[[1,"min-h-screen","relative","flex","items-center","justify-center","p-4","bg-[#1D1D1D]"],[1,"absolute","inset-0","z-0"],["src","/assets/Background-login.png","alt","Background",1,"w-full","h-full","object-cover"],[1,"absolute","inset-0","bg-black/60"],[1,"max-w-lg","w-full","space-y-8","p-8","rounded-xl","text-center","z-10"],[1,"flex","justify-center"],["src","/assets/liberacao-acesso.png","alt","Libera\xE7\xE3o de Acesso",1,"w-64","h-64","object-contain"],[1,"text-2xl","font-bold","text-white"],[1,"mt-4","text-gray-400","text-lg"],[1,"flex","flex-col","sm:flex-row","justify-center","items-center","space-y-4","sm:space-y-0","sm:space-x-4"],["hlmBtn","",1,"w-full","sm:w-auto","inline-flex","items-center","justify-center","px-6","py-3","text-base","font-medium","text-white","bg-gradient-to-r","from-amber-400","to-amber-500","hover:from-amber-500","hover:to-amber-600","rounded-lg","transition-all","duration-200","ease-in-out","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-amber-500","disabled:opacity-50","disabled:cursor-not-allowed","shadow-md","hover:shadow-lg","transform","hover:-translate-y-0.5",3,"click","disabled"],["name","matRefresh",1,"h-5","w-5","mr-2"],["hlmBtn","",1,"w-full","sm:w-auto","inline-flex","items-center","justify-center","px-6","py-3","text-base","font-medium","border-2","border-amber-400","text-amber-400","hover:bg-amber-400","hover:text-[#1D1D1D]","rounded-lg","transition-all","duration-200","ease-in-out","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-amber-400","shadow-md","hover:shadow-lg","transform","hover:-translate-y-0.5","bg-[#1D1D1D]",3,"click"],["name","matLogout",1,"h-5","w-5","mr-2"]],template:function(t,o){t&1&&(n(0,"div",0)(1,"div",1),u(2,"img",2)(3,"div",3),r(),n(4,"div",4)(5,"div",5),u(6,"img",6),r(),n(7,"div")(8,"h2",7),l(9," Aguardando Libera\xE7\xE3o "),r(),n(10,"p",8),l(11," O acesso ao aplicativo ser\xE1 liberado por nossa equipe ap\xF3s seu treinamento. "),r()(),n(12,"div",9)(13,"button",10),f("click",function(){return o.checkAccess()}),u(14,"ng-icon",11),l(15),r(),n(16,"button",12),f("click",function(){return o.logout()}),u(17,"ng-icon",13),l(18," Sair "),r()()()()),t&2&&(a(13),s("disabled",o.isChecking),a(),se("animate-spin",o.isChecking),a(),_(" ",o.isChecking?"Verificando...":"Atualizar"," "))},dependencies:[V,oe,de],styles:["[_nghost-%COMP%]{display:block}.animate-spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}button[_ngcontent-%COMP%]{transition:all .2s ease-in-out}button[_ngcontent-%COMP%]:active{transform:scale(.98)}"]})}return i})();function ci(i,c){if(i&1&&(n(0,"div",1),u(1,"img",2),n(2,"h2",3),l(3,"Carregando..."),r(),n(4,"h3",4),l(5),r()()),i&2){let e=m();a(5),h(e.nextPageTitle)}}var Pt=(()=>{class i{showLoading=!1;nextPageTitle="";static \u0275fac=function(t){return new(t||i)};static \u0275cmp=y({type:i,selectors:[["app-loading-screen"]],inputs:{showLoading:"showLoading",nextPageTitle:"nextPageTitle"},decls:1,vars:1,consts:[["class","fixed top-0 left-0 w-full h-full flex flex-col items-center justify-center z-[100]","style","background-color: #141416;",4,"ngIf"],[1,"fixed","top-0","left-0","w-full","h-full","flex","flex-col","items-center","justify-center","z-[100]",2,"background-color","#141416"],["src","assets/Logo_.png","alt","Logo da ACE Copilot",1,"h-3/12","w-3/12"],[1,"text-4xl","mt-2","font-bold","text-white"],[1,"text-4xl","mt-4","pe-4","font-bold","text-amber-400"]],template:function(t,o){t&1&&p(0,ci,6,1,"div",0),t&2&&s("ngIf",o.showLoading)},dependencies:[V,S],encapsulation:2})}return i})();var ne=(i,c)=>({"opacity-100":i,"opacity-25":c}),G=(()=>{class i{router;pageTitle="DashBus";currentTime=new Date;currentUrl="";showLoading=!1;nextPageTitle="";routerSubscription;clockSubscription;urlRotationSubscription;routes=["/dsbcarros","/dsb-carros-temp","/dsb-carros-torque","/dsb-carros-turbina","/dsb-carros-pedal","/dsb-carros-ar-comprimido","/dsb-carros-velocidade"];routeTitles={"/dsbcarros":"Home","/dsb-carros-temp":"Temperatura","/dsb-carros-torque":"Torque","/dsb-carros-turbina":"Press\xE3o Turbina","/dsb-carros-pedal":"Pedal","/dsb-carros-ar-comprimido":"Ar Comprimido","/dsb-carros-velocidade":"M\xE1x. Velocidade"};currentRouteIndex=0;constructor(e){this.router=e}ngOnInit(){this.routerSubscription=this.router.events.pipe(be(e=>e instanceof Oe)).subscribe(e=>{this.currentUrl=e.urlAfterRedirects,this.updateTitle(e.urlAfterRedirects);let t=this.routes.indexOf(this.currentUrl);t!==-1&&(this.currentRouteIndex=t)}),this.currentUrl=this.router.url,this.updateTitle(this.router.url),this.clockSubscription=Te(1e3).subscribe(()=>{this.currentTime=new Date}),this.urlRotationSubscription=Te(12e4).subscribe(()=>{this.rotateToNextRoute()})}ngOnDestroy(){this.routerSubscription&&this.routerSubscription.unsubscribe(),this.clockSubscription&&this.clockSubscription.unsubscribe(),this.urlRotationSubscription&&this.urlRotationSubscription.unsubscribe()}rotateToNextRoute(){let e=(this.currentRouteIndex+1)%this.routes.length,t=this.routes[e];this.nextPageTitle=this.routeTitles[t],this.showLoading=!0,setTimeout(()=>{this.router.navigate([t]),setTimeout(()=>{this.showLoading=!1},1e3)},2e3),this.currentRouteIndex=e}updateTitle(e){this.pageTitle=this.routeTitles[e]||"Home"}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}static \u0275fac=function(t){return new(t||i)(w(te))};static \u0275cmp=y({type:i,selectors:[["app-header-dsveiculos"]],decls:44,vars:39,consts:[[3,"showLoading","nextPageTitle"],[1,"w-full","p-10","md:px-20","flex","items-center","justify-between","fixed","z-50",2,"background-color","#141416"],[1,"flex","items-center"],["src","assets/Logo_AceCopilot 1.png","alt","Logo da ACE Copilot",1,"h-12"],[1,"text-3xl","2xl:text-4xl","ms-3","font-semibold","text-white"],[1,"text-amber-400"],[1,"absolute","left-1/2","transform","-translate-x-1/2","text-white","font-bold","text-center","my-3"],[2,"font-size","1.25rem","line-height",".25"],[2,"font-size","4.5rem","line-height","1"],[1,"flex","items-center","justify-between","text-white"],["routerLink","/dsbcarros",1,"flex","flex-col","justify-center","items-center","h-14","focus:outline-none",2,"background-color","transparent",3,"click","ngClass"],["src","assets/home.svg","alt","Icone Home",1,"h-6","md:h-8"],[1,"text-lg","mt-2","md:mt-3"],["hlmBtn","","variant","ghost","routerLink","/dsb-carros-temp",1,"flex","flex-col","justify-center","items-center","h-14",2,"background-color","transparent",3,"click","ngClass"],["src","assets/device_thermostat.svg","alt","Icone Temperatura",1,"w-6","h-6","md:h-8"],["hlmBtn","","variant","ghost","routerLink","/dsb-carros-torque",1,"flex","flex-col","justify-center","items-center","h-14",2,"background-color","transparent",3,"click","ngClass"],["src","assets/shutter_speed_minus.svg","alt","Icone Torque",1,"w-8","h-6","md:h-8"],["hlmBtn","","variant","ghost","routerLink","/dsb-carros-turbina",1,"flex","flex-col","justify-center","items-center","h-14",2,"background-color","transparent",3,"click","ngClass"],["src","assets/compress.svg","alt","Icone Press\xE3o turbina",1,"w-6","h-6","md:h-8"],["hlmBtn","","variant","ghost","routerLink","/dsb-carros-pedal",1,"flex","flex-col","justify-center","items-center","h-14",2,"background-color","transparent",3,"click","ngClass"],["src","assets/do_not_step.svg","alt","Icone Pedal",1,"w-8","h-6","md:h-8"],["hlmBtn","","variant","ghost","routerLink","/dsb-carros-ar-comprimido",1,"flex","flex-col","justify-center","items-center","h-14",2,"background-color","transparent",3,"click","ngClass"],["src","assets/air.svg","alt","Icone Ar Comprimido",1,"w-8","h-6","md:h-8"],["hlmBtn","","variant","ghost","routerLink","/dsb-carros-velocidade",1,"flex","flex-col","justify-center","items-center","h-14",2,"background-color","transparent",3,"click","ngClass"],["src","assets/speed.svg","alt","Icone Max. Velocidade",1,"w-8","h-6","md:h-8"]],template:function(t,o){t&1&&(u(0,"app-loading-screen",0),n(1,"header",1)(2,"div",2),u(3,"img",3),n(4,"h1",4),l(5," DashBus - "),n(6,"span",5),l(7),r()()(),n(8,"div",6)(9,"small",7),l(10),Me(11,"date"),r(),n(12,"div",8),l(13),Me(14,"date"),r()(),n(15,"div",9)(16,"button",10),f("click",function(){return o.scrollToTop()}),u(17,"img",11),n(18,"small",12),l(19,"Home"),r()(),n(20,"button",13),f("click",function(){return o.scrollToTop()}),u(21,"img",14),n(22,"small",12),l(23,"Temperatura"),r()(),n(24,"button",15),f("click",function(){return o.scrollToTop()}),u(25,"img",16),n(26,"small",12),l(27,"Torque"),r()(),n(28,"button",17),f("click",function(){return o.scrollToTop()}),u(29,"img",18),n(30,"small",12),l(31,"P.Turbina"),r()(),n(32,"button",19),f("click",function(){return o.scrollToTop()}),u(33,"img",20),n(34,"small",12),l(35,"Pedal"),r()(),n(36,"button",21),f("click",function(){return o.scrollToTop()}),u(37,"img",22),n(38,"small",12),l(39,"Ar Comp."),r()(),n(40,"button",23),f("click",function(){return o.scrollToTop()}),u(41,"img",24),n(42,"small",12),l(43,"Velocidade"),r()()()()),t&2&&(s("showLoading",o.showLoading)("nextPageTitle",o.nextPageTitle),a(7),h(o.pageTitle),a(3),h(Fe(11,12,o.currentTime,"dd/MM/yyyy")),a(3),_(" ",Fe(14,15,o.currentTime,"HH:mm:ss")," "),a(3),s("ngClass",T(18,ne,o.currentUrl==="/dsbcarros",o.currentUrl!=="/dsbcarros")),a(4),s("ngClass",T(21,ne,o.currentUrl==="/dsb-carros-temp",o.currentUrl!=="/dsb-carros-temp")),a(4),s("ngClass",T(24,ne,o.currentUrl==="/dsb-carros-torque",o.currentUrl!=="/dsb-carros-torque")),a(4),s("ngClass",T(27,ne,o.currentUrl==="/dsb-carros-turbina",o.currentUrl!=="/dsb-carros-turbina")),a(4),s("ngClass",T(30,ne,o.currentUrl==="/dsb-carros-pedal",o.currentUrl!=="/dsb-carros-pedal")),a(4),s("ngClass",T(33,ne,o.currentUrl==="/dsb-carros-ar-comprimido",o.currentUrl!=="/dsb-carros-ar-comprimido")),a(4),s("ngClass",T(36,ne,o.currentUrl==="/dsb-carros-velocidade",o.currentUrl!=="/dsb-carros-velocidade")))},dependencies:[de,V,P,lt,X,Se,Pt],encapsulation:2})}return i})();function di(i,c){if(i&1&&(n(0,"div",4),u(1,"span",5),n(2,"small",6),l(3),r()()),i&2){let e=c.$implicit;a(),Xe("background-color",e.color),a(2),h(e.label)}}function mi(i,c){if(i&1&&(n(0,"div",2),p(1,di,4,3,"div",3),r()),i&2){let e=m();a(),s("ngForOf",e.legendItems)}}var Y=(()=>{class i{router;pageTitle="DashBus";showLegend=!1;legendItems=[];url="";routerSubscription;constructor(e){this.router=e}ngOnInit(){this.routerSubscription=this.router.events.pipe(be(e=>e instanceof Oe)).subscribe(e=>{this.url=e.urlAfterRedirects,this.updateTitle(this.url),this.updateLegend(this.url)}),this.url=this.router.url,this.updateTitle(this.url),this.updateLegend(this.url)}ngOnDestroy(){this.routerSubscription&&this.routerSubscription.unsubscribe()}updateTitle(e){e.includes("/dsb-carros-temp")?this.pageTitle="Temperatura":e.includes("/dsb-carros-torque")?this.pageTitle="Torque":e.includes("/dsb-carros-turbina")?this.pageTitle="Press\xE3o Turbina":e.includes("/dsb-carros-pedal")?this.pageTitle="Pedal":e.includes("/dsb-carros-ar-comprimido")?this.pageTitle="Ar Comprimido":e.includes("/dsb-carros-velocidade")?this.pageTitle="M\xE1x. Velocidade":this.pageTitle="Home"}updateLegend(e){this.showLegend=!1,this.legendItems=[],e.includes("/dsb-carros")?(this.showLegend=!0,this.legendItems=[{color:"#B9B9B9",label:"Inativo"},{color:"#387E38",label:"OK"},{color:"#F56B15",label:"M\xE9dio"},{color:"#AE2724",label:"Alto"},{color:"#6224AE",label:"Muito Alto"}]):e.includes("/dsbcarros")&&(this.showLegend=!0,this.legendItems=[{color:"#B9B9B9",label:"Inativo"},{color:"white",label:"OK"},{color:"#FF9858",label:"Oficina"},{color:"#E25652",label:"Sem Comunicar"}])}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}static \u0275fac=function(t){return new(t||i)(w(te))};static \u0275cmp=y({type:i,selectors:[["app-footer-dsveiculos"]],features:[Q([],[ee({matHome:_t})])],decls:2,vars:1,consts:[[1,"container","py-3","flex","items-center","justify-evenly","z-40","relative","text-xs","md:text-sm","font-bold"],["class","py-6 flex items-center justify-center gap-16 w-full fixed bottom-0 text-white","style","background-color: #141416;",4,"ngIf"],[1,"py-6","flex","items-center","justify-center","gap-16","w-full","fixed","bottom-0","text-white",2,"background-color","#141416"],["class","flex items-center gap-3",4,"ngFor","ngForOf"],[1,"flex","items-center","gap-3"],[1,"w-10","h-4","rounded-full"],[1,"text-2xl"]],template:function(t,o){t&1&&(n(0,"footer",0),p(1,mi,2,1,"div",1),r()),t&2&&(a(),s("ngIf",o.showLegend))},dependencies:[X,V,D,S],encapsulation:2})}return i})();var Ae=i=>({"background-color":i}),ui=i=>({"text-red-400":i}),pi=(i,c,e,t)=>({"text-green-400":i,"text-orange-400":c,"text-red-400":e,"text-gray-400":t}),hi=(i,c)=>({"text-red-400":i,"text-green-400":c}),jt=i=>({"bg-amber-700":i});function gi(i,c){if(i&1&&(n(0,"div",11),l(1),r()),i&2){let e=m().$implicit;a(),_(" ",e.comentarios.length," ")}}function xi(i,c){i&1&&(n(0,"div",12)(1,"span",13),u(2,"img",14),r()())}function fi(i,c){if(i&1&&(n(0,"span",15),u(1,"img",16),r()),i&2){let e=c.$implicit,t=c.index,o=m(3);s("ngStyle",b(3,Ae,e.cor)),a(),s("src",e.icone,E)("alt",o.getAttributeName(t))}}function vi(i,c){if(i&1){let e=C();n(0,"div",5),f("click",function(){let o=g(e).$implicit,d=m(2);return x(d.openHelpDialog(o))})("keydown.enter",function(){let o=g(e).$implicit,d=m(2);return x(d.openHelpDialog(o))})("keydown.space",function(o){let d=g(e).$implicit;return m(2).openHelpDialog(d),x(o.preventDefault())}),p(1,gi,2,1,"div",6)(2,xi,3,0,"div",7),n(3,"h3",8),l(4),r(),n(5,"div",9),p(6,fi,2,5,"span",10),r()()}if(i&2){let e=c.$implicit,t=m(2);s("ngStyle",b(6,Ae,e.atributos[4].cor+"99")),U("aria-label","Mostrar detalhes do ve\xEDculo "+e.id),a(),s("ngIf",e.comentarios&&e.comentarios.length>0),a(),s("ngIf",t.shouldShowOilChangeAlert(e)),a(2),h(e.id),a(2),s("ngForOf",e.atributos)}}function _i(i,c){if(i&1&&(n(0,"div",3),p(1,vi,7,8,"div",4),r()),i&2){let e=m();a(),s("ngForOf",e.veiculos)}}function bi(i,c){if(i&1&&(n(0,"div",55)(1,"div",56)(2,"span",57),u(3,"img",58),r(),n(4,"div",59)(5,"span",60),l(6),r(),n(7,"span",61),l(8,"0"),r()()()()),i&2){let e=c.$implicit,t=c.index,o=m(2);a(2),s("ngStyle",b(4,Ae,e.cor)),a(),s("src",e.icone,E)("alt",o.getAttributeName(t)),a(3),h(o.getAttributeName(t))}}function Ci(i,c){i&1&&u(0,"span",62)}function wi(i,c){if(i&1){let e=C();n(0,"button",63),f("click",function(){g(e);let o=m(2);return x(o.toggleOilChangeForm())}),l(1," Registrar troca "),r()}}function yi(i,c){if(i&1){let e=C();n(0,"div",64)(1,"h4",65),l(2," Registrar Troca de \xD3leo "),r(),n(3,"div",66)(4,"div",67)(5,"p",30),l(6),r(),n(7,"div",68)(8,"button",69),f("click",function(){g(e);let o=m(2);return x(o.toggleOilChangeForm())}),l(9," Cancelar "),r(),n(10,"button",70),f("click",function(){g(e);let o=m(2);return x(o.registrarTrocaOleo())}),l(11," Confirmar "),r()()()()()}if(i&2){let e=m(2);a(6),_(" Confirma a troca de \xF3leo para o ve\xEDculo ",e.selectedVehicle.id,"? ")}}function Vi(i,c){if(i&1&&(n(0,"div",39)(1,"span"),l(2,"UltPedidoID:"),r(),n(3,"span"),l(4),r()()),i&2){let e=m(2);a(4),h(e.selectedVehicle.ultPedidoID)}}function Oi(i,c){if(i&1&&(n(0,"div",39)(1,"span"),l(2,"Integra\xE7\xE3o:"),r(),n(3,"span"),l(4),r()()),i&2){let e=m(2);a(4),h(e.selectedVehicle.ultIntegracao)}}function Si(i,c){if(i&1&&(n(0,"div",77)(1,"div",78)(2,"span",79),l(3),r(),n(4,"span",80),l(5),r()(),n(6,"p",30),l(7),r()()),i&2){let e=c.$implicit;a(3),h(e.author),a(2),h(e.date),a(2),h(e.text)}}function Ei(i,c){if(i&1){let e=C();n(0,"div",71)(1,"h4",65),l(2," Coment\xE1rios "),r(),n(3,"div",72),p(4,Si,8,3,"div",73),r(),n(5,"div",74)(6,"input",75),$("ngModelChange",function(o){g(e);let d=m(2);return L(d.newComment,o)||(d.newComment=o),x(o)}),r(),n(7,"button",76),f("click",function(){g(e);let o=m(2);return x(o.addComment())}),l(8," Enviar "),r()()()}if(i&2){let e=m(2);s("@slideUpDown",e.showComments?"open":"closed"),a(4),s("ngForOf",e.selectedVehicle.comentarios),a(2),B("ngModel",e.newComment)}}function Ti(i,c){if(i&1&&(n(0,"div",77)(1,"div",78)(2,"span",79),l(3),r(),n(4,"span",80),l(5),r()(),n(6,"p",30),l(7),r()()),i&2){let e=c.$implicit;a(3),h(e.author),a(2),h(e.date),a(2),h(e.text)}}function Di(i,c){i&1&&(n(0,"div",82),l(1," Nenhum registro de troca de \xF3leo encontrado. "),r())}function ki(i,c){if(i&1&&(n(0,"div",71)(1,"h4",65),l(2," Registros "),r(),n(3,"div",72),p(4,Ti,8,3,"div",73)(5,Di,2,0,"div",81),r()()),i&2){let e=m(2);s("@slideUpDown",e.showOilChangeRecords?"open":"closed"),a(4),s("ngForOf",e.selectedVehicle.trocasOleo),a(),s("ngIf",!e.selectedVehicle.trocasOleo||e.selectedVehicle.trocasOleo.length===0)}}function Ii(i,c){if(i&1&&(n(0,"div",83),l(1),r()),i&2){let e=m(2);a(),_(" ",e.selectedVehicle.trocasOleo.length," ")}}function Mi(i,c){if(i&1&&(n(0,"div",84),l(1),r()),i&2){let e=m(2);a(),_(" ",e.selectedVehicle.comentarios.length," ")}}function Fi(i,c){if(i&1){let e=C();n(0,"div",17)(1,"div",18)(2,"div",19)(3,"button",20),f("click",function(){g(e);let o=m();return x(o.closeHelpDialog())})("keydown.enter",function(){g(e);let o=m();return x(o.closeHelpDialog())}),l(4," \u2715 "),r()(),n(5,"div",21)(6,"div",22),p(7,bi,9,6,"div",23),r(),n(8,"div",24)(9,"div",25)(10,"h3",26),l(11),r(),n(12,"div",27)(13,"span"),l(14,"Euro 5"),r(),n(15,"span"),l(16,"1721"),r()()(),n(17,"div",28)(18,"div")(19,"p",29),l(20," Od\xF4metro: "),n(21,"span",30),l(22),r()(),n(23,"span",31),l(24,"Registro: 24/04/2025 03:00"),r()(),n(25,"div")(26,"p",32),l(27," KM desde \xFAltima troca: "),n(28,"span",30),l(29),r(),p(30,Ci,1,0,"span",33),r(),n(31,"div",34)(32,"span",31),l(33),r(),p(34,wi,2,0,"button",35),r()()(),p(35,yi,12,1,"div",36),n(36,"div",37)(37,"div",38)(38,"div",39)(39,"span"),l(40,"Status:"),r(),n(41,"span",40),l(42),r()(),p(43,Vi,5,1,"div",41)(44,Oi,5,1,"div",41),n(45,"div",39)(46,"span"),l(47,"Troca de \xD3leo:"),r(),n(48,"span",40),l(49),r()()(),p(50,Ei,9,3,"div",42)(51,ki,6,3,"div",42),n(52,"div",43)(53,"div",44)(54,"button",45),f("click",function(){g(e);let o=m();return x(o.cancelChanges())}),l(55," Cancelar "),r(),n(56,"button",46),f("click",function(){g(e);let o=m();return x(o.saveChanges())}),l(57," Salvar "),r()(),n(58,"div",44)(59,"button",47),u(60,"img",48),r(),n(61,"button",49),f("click",function(){g(e);let o=m();return x(o.toggleOilChangeRecords())}),u(62,"img",50),p(63,Ii,2,1,"div",51),r(),n(64,"button",52),f("click",function(){g(e);let o=m();return x(o.toggleComments())}),u(65,"img",53),p(66,Mi,2,1,"div",54),r()()()()()()()()}if(i&2){let e=m();a(7),s("ngForOf",e.selectedVehicle.atributos),a(4),_(" ",e.selectedVehicle.id," "),a(11),h(e.selectedVehicle.odoAtual),a(4),s("ngClass",b(21,ui,e.selectedVehicle.precisaTrocaOleo)),a(3),h(e.selectedVehicle.odoDesdeUltimaTroca||0),a(),s("ngIf",e.selectedVehicle.precisaTrocaOleo),a(3),_("\xDAltima troca de \xF3leo: ",e.selectedVehicle.ultimaTrocaOleo||"N\xE3o registrada",""),a(),s("ngIf",e.selectedVehicle.precisaTrocaOleo),a(),s("ngIf",e.showOilChangeForm),a(6),s("ngClass",q(23,pi,e.selectedVehicle.status==="OK",e.selectedVehicle.status==="Oficina",e.selectedVehicle.status==="Sem Comunicar",e.selectedVehicle.status==="Inativo")),a(),h(e.selectedVehicle.status),a(),s("ngIf",e.selectedVehicle.ultPedidoID),a(),s("ngIf",e.selectedVehicle.ultIntegracao),a(4),s("ngClass",T(28,hi,e.selectedVehicle.precisaTrocaOleo,!e.selectedVehicle.precisaTrocaOleo)),a(),_(" ",e.selectedVehicle.precisaTrocaOleo?"Necess\xE1ria":"OK"," "),a(),s("ngIf",e.showComments),a(),s("ngIf",e.showOilChangeRecords),a(10),s("ngClass",b(31,jt,e.showOilChangeRecords)),a(2),s("ngIf",e.selectedVehicle.trocasOleo&&e.selectedVehicle.trocasOleo.length>0),a(),s("ngClass",b(33,jt,e.showComments)),a(2),s("ngIf",e.selectedVehicle.comentarios&&e.selectedVehicle.comentarios.length>0)}}var Rt=(()=>{class i{http;renderer;cdRef;veiculos=[];selectedVehicle=null;isHelpDialogOpen=!1;originalData=null;originalVehicleState=null;showComments=!1;newComment="";showOilChangeForm=!1;lastOilChangeDate="";showOilChangeRecords=!1;icones=["assets/device_thermostat.svg","assets/shutter_speed_minus.svg","assets/compress.svg","assets/do_not_step.svg","assets/air.svg","assets/speed.svg"];constructor(e,t,o){this.http=e,this.renderer=t,this.cdRef=o}ngOnInit(){console.log("CardVeiculoComponent initialized"),this.loadVehicleData()}loadVehicleData(){this.http.get("assets/mocks/veiculos_mock.json").subscribe({next:e=>{console.log("Data loaded:",e),this.originalData=JSON.parse(JSON.stringify(e)),this.veiculos=e.veiculos.map(t=>M(I({},t),{atributos:t.cores.map((o,d)=>({cor:o,icone:this.icones[d]||""})),comentarios:t.comentarios||[],odoAtual:t.odoAtual||0,ultimaTrocaOleo:t.ultimaTrocaOleo||null,odoNaUltimaTroca:t.odoNaUltimaTroca||0,trocasOleo:t.trocasOleo||[]})),this.veiculos.forEach(t=>{t.atributos.forEach((o,d)=>{o.cor=this.getClosestColorMatch(o.cor)}),this.calcularodoDesdeUltimaTroca(t)})},error:e=>{console.error("Erro ao carregar o JSON:",e)}})}calcularodoDesdeUltimaTroca(e){e.odoAtual&&e.odoNaUltimaTroca?e.odoDesdeUltimaTroca=e.odoAtual-e.odoNaUltimaTroca:e.odoDesdeUltimaTroca=e.odoAtual||0,e.precisaTrocaOleo=e.odoDesdeUltimaTroca>=1e4}registrarTrocaOleo(){if(!this.selectedVehicle)return;let e=new Date,t=`${e.toLocaleDateString("pt-BR")} ${e.getHours()}:${e.getMinutes().toString().padStart(2,"0")}`;this.selectedVehicle.ultimaTrocaOleo=e.toLocaleDateString("pt-BR"),this.selectedVehicle.odoNaUltimaTroca=this.selectedVehicle.odoAtual,this.selectedVehicle.odoDesdeUltimaTroca=0,this.selectedVehicle.precisaTrocaOleo=!1,this.selectedVehicle.trocasOleo||(this.selectedVehicle.trocasOleo=[]),this.selectedVehicle.trocasOleo.unshift({author:"Sistema",date:t,text:`Troca de \xF3leo realizada com od\xF4metro ${this.selectedVehicle.odoAtual}.`}),this.showOilChangeForm=!1,this.showOilChangeRecords=!0,this.cdRef.detectChanges()}toggleOilChangeForm(){this.showOilChangeForm=!this.showOilChangeForm}toggleOilChangeRecords(){this.showOilChangeRecords=!this.showOilChangeRecords,this.showOilChangeRecords&&(this.showComments=!1,this.selectedVehicle.trocasOleo||(this.selectedVehicle.trocasOleo=[]),this.cdRef.detectChanges())}shouldShowOilChangeAlert(e){return e.precisaTrocaOleo===!0}getClosestColorMatch(e){let t=this.getAllAttributeColors();return t.includes(e)?e:t[0]}getBackgroundColor(e){switch(e){case"OK":return"white";case"Oficina":return"#FF9858";case"Sem Comunicar":return"#E25652";case"Inativo":return"#B9B9B9";default:return"white"}}getIconPath(e){return this.icones[e]||""}getAttributeName(e){return["Temperatura","Torque","Press\xE3o Turbina","Pedal","Ar Comprimido","Max. Velocidade"][e]||`Atributo ${e+1}`}getColorOptions(){return[{label:"Inativo",value:"#242427"},{label:"Verde",value:"#387E38"},{label:"Laranja",value:"#F56B15"},{label:"Vermelho",value:"#AE2724"},{label:"Roxo",value:"#6224AE"}]}openHelpDialog(e){this.selectedVehicle=JSON.parse(JSON.stringify(e)),this.originalVehicleState=JSON.parse(JSON.stringify(e)),this.selectedVehicle.atributos.forEach(t=>{t.cor=this.getClosestColorMatch(t.cor)}),this.selectedVehicle.comentarios||(this.selectedVehicle.comentarios=[]),this.selectedVehicle.trocasOleo||(this.selectedVehicle.trocasOleo=[]),this.isHelpDialogOpen=!0,this.renderer.addClass(document.body,"overflow-hidden"),this.showComments=!1,this.showOilChangeRecords=!1,this.showOilChangeForm=!1,this.newComment="",setTimeout(()=>{let t=document.querySelector("#modal-close-button");t&&t.focus()},100)}closeHelpDialog(){this.isHelpDialogOpen=!1,this.renderer.removeClass(document.body,"overflow-hidden"),this.selectedVehicle=null,this.originalVehicleState=null,this.showComments=!1,this.showOilChangeForm=!1,this.showOilChangeRecords=!1,this.newComment=""}toggleComments(){this.showComments=!this.showComments,this.showComments&&(this.showOilChangeRecords=!1,this.cdRef.detectChanges())}addComment(){if(this.newComment.trim()&&this.selectedVehicle){let e=new Date,t=`${e.toLocaleDateString("pt-BR")} ${e.getHours()}:${e.getMinutes().toString().padStart(2,"0")}`;this.selectedVehicle.comentarios||(this.selectedVehicle.comentarios=[]),this.selectedVehicle.comentarios.unshift({author:"Usu\xE1rio Atual",date:t,text:this.newComment.trim()});let o=this.veiculos.findIndex(d=>d.id===this.selectedVehicle.id);o!==-1&&(this.veiculos[o].comentarios||(this.veiculos[o].comentarios=[]),this.veiculos[o].comentarios=[...this.selectedVehicle.comentarios]),this.newComment="",this.cdRef.detectChanges()}}getAllAttributeColors(){return this.getColorOptions().map(e=>e.value)}updateAttributeColor(e,t){if(!this.selectedVehicle)return;let d=t.target.value;this.selectedVehicle.atributos[e].cor=d}cancelChanges(){this.closeHelpDialog()}saveChanges(){if(this.selectedVehicle){let e=this.veiculos.findIndex(t=>t.id===this.selectedVehicle.id);e!==-1&&(this.veiculos[e].atributos.forEach((t,o)=>{o<this.selectedVehicle.atributos.length&&(t.cor=this.selectedVehicle.atributos[o].cor)}),this.veiculos[e].comentarios=[...this.selectedVehicle.comentarios],this.veiculos[e].trocasOleo=[...this.selectedVehicle.trocasOleo||[]],this.veiculos[e].ultimaTrocaOleo=this.selectedVehicle.ultimaTrocaOleo,this.veiculos[e].odoNaUltimaTroca=this.selectedVehicle.odoNaUltimaTroca,this.veiculos[e].odoDesdeUltimaTroca=this.selectedVehicle.odoDesdeUltimaTroca,this.veiculos[e].precisaTrocaOleo=this.selectedVehicle.precisaTrocaOleo,this.originalData&&this.originalData.veiculos&&this.originalData.veiculos[e]&&(this.originalData.veiculos[e].cores&&this.selectedVehicle.atributos.forEach((t,o)=>{o<this.originalData.veiculos[e].cores.length&&(this.originalData.veiculos[e].cores[o]=t.cor)}),this.originalData.veiculos[e].comentarios=[...this.selectedVehicle.comentarios],this.originalData.veiculos[e].trocasOleo=[...this.selectedVehicle.trocasOleo||[]],this.originalData.veiculos[e].ultimaTrocaOleo=this.selectedVehicle.ultimaTrocaOleo,this.originalData.veiculos[e].odoNaUltimaTroca=this.selectedVehicle.odoNaUltimaTroca),this.calcularodoDesdeUltimaTroca(this.veiculos[e]),this.saveChangesToJson())}this.closeHelpDialog()}saveChangesToJson(){console.log("Salvando altera\xE7\xF5es:",this.originalData)}handleEscapeKey(){this.isHelpDialogOpen&&this.closeHelpDialog()}handleTabKey(e){if(!this.isHelpDialogOpen)return;let t=document.querySelector('[role="dialog"]');if(!t)return;let o=t.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(o.length===0)return;let d=o[0],v=o[o.length-1];e.shiftKey&&document.activeElement===d?(v.focus(),e.preventDefault()):!e.shiftKey&&document.activeElement===v&&(d.focus(),e.preventDefault())}static \u0275fac=function(t){return new(t||i)(w(z),w(R),w(j))};static \u0275cmp=y({type:i,selectors:[["app-card-veiculo-ar-comprimido"]],hostBindings:function(t,o){t&1&&f("keydown.escape",function(){return o.handleEscapeKey()},!1,F)("keydown.tab",function(v){return o.handleTabKey(v)},!1,F)},decls:5,vars:2,consts:[[1,"pb-28","pt-44"],["class","grid grid-cols-1 md:grid-cols-4 lg:grid-cols-12 lg:flex flex-wrap items-center justify-center gap-4",4,"ngIf"],["class","fixed inset-0 z-50 md:p-4 flex items-center justify-center bg-black bg-opacity-50 overflow-y-scroll","role","dialog","aria-modal","true","aria-labelledby","modal-title",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-4","lg:grid-cols-12","lg:flex","flex-wrap","items-center","justify-center","gap-4"],["class","shadow-2xl p-3 rounded-2xl flex flex-col items-center justify-center cursor-pointer border-2 relative transition-transform duration-300 hover:scale-105 hover:opacity-50","tabindex","0","role","button",3,"ngStyle","click","keydown.enter","keydown.space",4,"ngFor","ngForOf"],["tabindex","0","role","button",1,"shadow-2xl","p-3","rounded-2xl","flex","flex-col","items-center","justify-center","cursor-pointer","border-2","relative","transition-transform","duration-300","hover:scale-105","hover:opacity-50",3,"click","keydown.enter","keydown.space","ngStyle"],["class","absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm","aria-label","Este ve\xEDculo possui coment\xE1rios",4,"ngIf"],["class","absolute top-2 left-2 bg-amber-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm","aria-label","Este ve\xEDculo precisa de troca de \xF3leo",4,"ngIf"],[1,"text-black","font-bold","mb-2","text-3xl"],[1,"p-1.5","rounded-xl","w-full","flex","justify-center","gap-1",2,"background-color","#141416"],["class","w-7 h-7 rounded-full flex items-center justify-center",3,"ngStyle",4,"ngFor","ngForOf"],["aria-label","Este ve\xEDculo possui coment\xE1rios",1,"absolute","-top-2","-right-2","bg-red-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"],["aria-label","Este ve\xEDculo precisa de troca de \xF3leo",1,"absolute","top-2","left-2","bg-amber-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"],[1,"text-xs"],["src","assets/water_drop.svg","alt","Alerta de troca de \xF3leo"],[1,"w-7","h-7","rounded-full","flex","items-center","justify-center",3,"ngStyle"],[3,"src","alt"],["role","dialog","aria-modal","true","aria-labelledby","modal-title",1,"fixed","inset-0","z-50","md:p-4","flex","items-center","justify-center","bg-black","bg-opacity-50","overflow-y-scroll"],[1,"rounded-3xl","shadow-lg","w-max","max-w-[90vw]","h-max","2xl:max-w-[100vw]","2xl:max-h-[100vh]","overflow-y-auto","animate-fade-in","relative",2,"background-color","#141416"],[1,"absolute","right-6","top-6","2xl:top-12","2xl:right-12"],["id","modal-close-button","aria-label","Fechar modal",1,"text-lg","xl:text-4xl","font-semibold","text-gray-500","hover:text-amber-400",3,"click","keydown.enter"],[1,"rounded-3xl","flex","flex-col-reverse","lg:flex-row","justify-center","w-max","2xl:max-w-[100vw]","h-max","2xl:max-h-[100vh]"],[1,"grid","grid-cols-1","md:grid-cols-3","lg:grid-cols-1","lg:flex","lg:flex-col","justify-center","rounded-3xl","gap-3","w-full","2xl:max-h-[100vh]","p-6","2xl:p-24",2,"background-color","#242427"],["class","flex flex-col lg:flex-row justify-between gap-3 2xl:gap-8 p-2 rounded-lg",4,"ngFor","ngForOf"],[1,"p-8","2xl:p-20","flex","flex-col","justify-between","w-full","2xl:max-w-[100vw]","2xl:max-h-[100vh]"],[1,"flex","flex-col","mb-10"],[1,"font-bold","text-2xl","lg:text-4xl","2xl:text-6xl","text-amber-400"],[1,"flex","gap-4","text-sm","2xl:text-2xl","mb-1","font-bold","text-white"],[1,"flex","flex-col","justify-between","gap-6","mb-4"],[1,"text-amber-400","text-md","lg:text-lg","2xl:text-3xl","font-bold","mb-2"],[1,"text-white"],[1,"text-lg","text-white"],[1,"text-amber-400","text-md","lg:text-lg","2xl:text-2xl","font-bold","mb-2",3,"ngClass"],["class","ml-2 text-red-400",4,"ngIf"],[1,"flex","items-center","gap-2"],["class","ml-2 bg-amber-600 text-white text-xs px-2 py-1 rounded hover:bg-amber-700","aria-label","Registrar troca de \xF3leo",3,"click",4,"ngIf"],["class","mt-4 mb-4 w-full bg-gray-800 rounded-lg p-4 border border-gray-700 animate-fade-in",4,"ngIf"],[1,"pt-10"],[1,"w-full","text-gray-300","flex","flex-col","gap-4","pb-6"],[1,"flex","justify-between","py-2","border-b","border-gray-700","2xl:text-2xl"],[3,"ngClass"],["class","flex justify-between py-2 border-b border-gray-700 2xl:text-2xl",4,"ngIf"],["class","mt-4 w-full bg-gray-800 rounded-lg p-4 border border-gray-700",4,"ngIf"],[1,"flex","justify-between","mt-4","gap-4","w-full"],[1,"flex","gap-4"],["aria-label","Cancelar altera\xE7\xF5es",1,"px-4","py-2","bg-gray-600","text-white","rounded-2xl","hover:bg-gray-700","transition","2xl:text-xl",3,"click"],["aria-label","Salvar altera\xE7\xF5es",1,"px-4","py-2","bg-amber-600","text-white","rounded-2xl","hover:bg-amber-700","transition","2xl:text-xl",3,"click"],["title","Gr\xE1fico",1,"px-4","py-2","text-white","rounded-2xl","hover:bg-amber-600","transition","2xl:text-xl",2,"background-color","#242427"],["src","assets/bar_chart.svg","alt","gr\xE1fico",1,"2xl:w-20"],["title","Registros","aria-label","Mostrar registros",1,"px-4","py-4","text-white","rounded-2xl","hover:bg-amber-600","transition","2xl:text-xl","relative",2,"background-color","#242427",3,"click","ngClass"],["src","assets/overview.svg","alt","vis\xE3o geral",1,"2xl:w-20"],["class","absolute -top-2 -right-2 bg-amber-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm",4,"ngIf"],["title","Coment\xE1rios","aria-label","Mostrar coment\xE1rios",1,"px-4","py-4","text-white","rounded-2xl","hover:bg-amber-600","transition","2xl:text-xl","relative",2,"background-color","#242427",3,"click","ngClass"],["src","assets/chat.svg","alt","chat",1,"2xl:w-20"],["class","absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm",4,"ngIf"],[1,"flex","flex-col","lg:flex-row","justify-between","gap-3","2xl:gap-8","p-2","rounded-lg"],[1,"flex","items-center","gap-3","xl:gap-8"],[1,"w-8","h-8","lg:w-14","lg:h-14","2xl:w-20","2xl:h-20","rounded-full","flex","items-center","justify-center",3,"ngStyle"],[1,"w-4","h-4","lg:w-7","lg:h-7","2xl:w-10","2xl:h-10",3,"src","alt"],[1,"flex","flex-col"],[1,"text-white","text-sm","2xl:text-2xl","lg:text-nowrap","font-bold"],[1,"text-amber-500","2xl:text-2xl","font-bold"],[1,"ml-2","text-red-400"],["aria-label","Registrar troca de \xF3leo",1,"ml-2","bg-amber-600","text-white","text-xs","px-2","py-1","rounded","hover:bg-amber-700",3,"click"],[1,"mt-4","mb-4","w-full","bg-gray-800","rounded-lg","p-4","border","border-gray-700","animate-fade-in"],[1,"text-amber-400","text-lg","2xl:text-3xl","font-bold","mb-3"],[1,"flex","flex-col","gap-3"],[1,"flex","gap-3","justify-between","items-center"],[1,"flex","gap-2"],[1,"bg-gray-600","text-white","px-4","py-1","rounded","hover:bg-gray-700",3,"click"],[1,"bg-amber-600","text-white","px-4","py-1","rounded","hover:bg-amber-700",3,"click"],[1,"mt-4","w-full","bg-gray-800","rounded-lg","p-4","border","border-gray-700"],[1,"flex","flex-col","gap-3","max-h-44","overflow-y-auto"],["class","bg-gray-900 p-3 mb-2 rounded-md",4,"ngFor","ngForOf"],[1,"mt-2","flex","gap-2"],["type","text","placeholder","Adicionar coment\xE1rio...",1,"w-full","bg-gray-900","border","border-gray-700","rounded-lg","px-3","py-2","text-white",3,"ngModelChange","ngModel"],[1,"bg-amber-600","text-white","rounded-lg","px-4","py-2","hover:bg-amber-700",3,"click"],[1,"bg-gray-900","p-3","mb-2","rounded-md"],[1,"flex","justify-between","mb-1"],[1,"text-amber-400","font-semibold"],[1,"text-gray-500","text-sm"],["class","text-gray-400 text-center p-4",4,"ngIf"],[1,"text-gray-400","text-center","p-4"],[1,"absolute","-top-2","-right-2","bg-amber-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"],[1,"absolute","-top-2","-right-2","bg-red-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"]],template:function(t,o){t&1&&(u(0,"app-header-dsveiculos"),n(1,"section",0),p(2,_i,2,1,"div",1),r(),u(3,"app-footer-dsveiculos"),p(4,Fi,67,35,"div",2)),t&2&&(a(2),s("ngIf",o.veiculos.length>0),a(2),s("ngIf",o.isHelpDialogOpen&&o.selectedVehicle))},dependencies:[V,P,D,S,N,H,K,J,W,G,Y],styles:["@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out forwards}.bg-gray-800[_ngcontent-%COMP%]{background-color:#242427}.bg-gray-900[_ngcontent-%COMP%]{background-color:#1a1a1d}.bg-amber-500[_ngcontent-%COMP%]{background-color:#f59e0b}.bg-amber-600[_ngcontent-%COMP%]{background-color:#d97706}.bg-amber-700[_ngcontent-%COMP%]{background-color:#b45309}.hover\\:bg-amber-600[_ngcontent-%COMP%]:hover{background-color:#d97706}button[_ngcontent-%COMP%]:focus, input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{outline:2px solid #F59E0B;outline-offset:2px}button[_ngcontent-%COMP%]{transition:background-color .2s,transform .1s}button[_ngcontent-%COMP%]:active{transform:scale(.98)}"]})}return i})();var Pe=i=>({"background-color":i}),Ai=i=>({"text-red-400":i}),Pi=(i,c,e,t)=>({"text-green-400":i,"text-orange-400":c,"text-red-400":e,"text-gray-400":t}),ji=(i,c)=>({"text-red-400":i,"text-green-400":c}),Nt=i=>({"bg-amber-700":i});function Ri(i,c){if(i&1&&(n(0,"div",11),l(1),r()),i&2){let e=m().$implicit;a(),_(" ",e.comentarios.length," ")}}function Ni(i,c){i&1&&(n(0,"div",12)(1,"span",13),u(2,"img",14),r()())}function Hi(i,c){if(i&1&&(n(0,"span",15),u(1,"img",16),r()),i&2){let e=c.$implicit,t=c.index,o=m(3);s("ngStyle",b(3,Pe,e.cor)),a(),s("src",e.icone,E)("alt",o.getAttributeName(t))}}function Ui(i,c){if(i&1){let e=C();n(0,"div",5),f("click",function(){let o=g(e).$implicit,d=m(2);return x(d.openHelpDialog(o))})("keydown.enter",function(){let o=g(e).$implicit,d=m(2);return x(d.openHelpDialog(o))})("keydown.space",function(o){let d=g(e).$implicit;return m(2).openHelpDialog(d),x(o.preventDefault())}),p(1,Ri,2,1,"div",6)(2,Ni,3,0,"div",7),n(3,"h3",8),l(4),r(),n(5,"div",9),p(6,Hi,2,5,"span",10),r()()}if(i&2){let e=c.$implicit,t=m(2);s("ngStyle",b(6,Pe,e.atributos[3].cor+"99")),U("aria-label","Mostrar detalhes do ve\xEDculo "+e.id),a(),s("ngIf",e.comentarios&&e.comentarios.length>0),a(),s("ngIf",t.shouldShowOilChangeAlert(e)),a(2),h(e.id),a(2),s("ngForOf",e.atributos)}}function Bi(i,c){if(i&1&&(n(0,"div",3),p(1,Ui,7,8,"div",4),r()),i&2){let e=m();a(),s("ngForOf",e.veiculos)}}function Li(i,c){if(i&1&&(n(0,"div",55)(1,"div",56)(2,"span",57),u(3,"img",58),r(),n(4,"div",59)(5,"span",60),l(6),r(),n(7,"span",61),l(8,"0"),r()()()()),i&2){let e=c.$implicit,t=c.index,o=m(2);a(2),s("ngStyle",b(4,Pe,e.cor)),a(),s("src",e.icone,E)("alt",o.getAttributeName(t)),a(3),h(o.getAttributeName(t))}}function $i(i,c){i&1&&u(0,"span",62)}function qi(i,c){if(i&1){let e=C();n(0,"button",63),f("click",function(){g(e);let o=m(2);return x(o.toggleOilChangeForm())}),l(1," Registrar troca "),r()}}function zi(i,c){if(i&1){let e=C();n(0,"div",64)(1,"h4",65),l(2," Registrar Troca de \xD3leo "),r(),n(3,"div",66)(4,"div",67)(5,"p",30),l(6),r(),n(7,"div",68)(8,"button",69),f("click",function(){g(e);let o=m(2);return x(o.toggleOilChangeForm())}),l(9," Cancelar "),r(),n(10,"button",70),f("click",function(){g(e);let o=m(2);return x(o.registrarTrocaOleo())}),l(11," Confirmar "),r()()()()()}if(i&2){let e=m(2);a(6),_(" Confirma a troca de \xF3leo para o ve\xEDculo ",e.selectedVehicle.id,"? ")}}function Ki(i,c){if(i&1&&(n(0,"div",39)(1,"span"),l(2,"UltPedidoID:"),r(),n(3,"span"),l(4),r()()),i&2){let e=m(2);a(4),h(e.selectedVehicle.ultPedidoID)}}function Ji(i,c){if(i&1&&(n(0,"div",39)(1,"span"),l(2,"Integra\xE7\xE3o:"),r(),n(3,"span"),l(4),r()()),i&2){let e=m(2);a(4),h(e.selectedVehicle.ultIntegracao)}}function Wi(i,c){if(i&1&&(n(0,"div",77)(1,"div",78)(2,"span",79),l(3),r(),n(4,"span",80),l(5),r()(),n(6,"p",30),l(7),r()()),i&2){let e=c.$implicit;a(3),h(e.author),a(2),h(e.date),a(2),h(e.text)}}function Gi(i,c){if(i&1){let e=C();n(0,"div",71)(1,"h4",65),l(2," Coment\xE1rios "),r(),n(3,"div",72),p(4,Wi,8,3,"div",73),r(),n(5,"div",74)(6,"input",75),$("ngModelChange",function(o){g(e);let d=m(2);return L(d.newComment,o)||(d.newComment=o),x(o)}),r(),n(7,"button",76),f("click",function(){g(e);let o=m(2);return x(o.addComment())}),l(8," Enviar "),r()()()}if(i&2){let e=m(2);s("@slideUpDown",e.showComments?"open":"closed"),a(4),s("ngForOf",e.selectedVehicle.comentarios),a(2),B("ngModel",e.newComment)}}function Yi(i,c){if(i&1&&(n(0,"div",77)(1,"div",78)(2,"span",79),l(3),r(),n(4,"span",80),l(5),r()(),n(6,"p",30),l(7),r()()),i&2){let e=c.$implicit;a(3),h(e.author),a(2),h(e.date),a(2),h(e.text)}}function Zi(i,c){i&1&&(n(0,"div",82),l(1," Nenhum registro de troca de \xF3leo encontrado. "),r())}function Qi(i,c){if(i&1&&(n(0,"div",71)(1,"h4",65),l(2," Registros "),r(),n(3,"div",72),p(4,Yi,8,3,"div",73)(5,Zi,2,0,"div",81),r()()),i&2){let e=m(2);s("@slideUpDown",e.showOilChangeRecords?"open":"closed"),a(4),s("ngForOf",e.selectedVehicle.trocasOleo),a(),s("ngIf",!e.selectedVehicle.trocasOleo||e.selectedVehicle.trocasOleo.length===0)}}function Xi(i,c){if(i&1&&(n(0,"div",83),l(1),r()),i&2){let e=m(2);a(),_(" ",e.selectedVehicle.trocasOleo.length," ")}}function eo(i,c){if(i&1&&(n(0,"div",84),l(1),r()),i&2){let e=m(2);a(),_(" ",e.selectedVehicle.comentarios.length," ")}}function to(i,c){if(i&1){let e=C();n(0,"div",17)(1,"div",18)(2,"div",19)(3,"button",20),f("click",function(){g(e);let o=m();return x(o.closeHelpDialog())})("keydown.enter",function(){g(e);let o=m();return x(o.closeHelpDialog())}),l(4," \u2715 "),r()(),n(5,"div",21)(6,"div",22),p(7,Li,9,6,"div",23),r(),n(8,"div",24)(9,"div",25)(10,"h3",26),l(11),r(),n(12,"div",27)(13,"span"),l(14,"Euro 5"),r(),n(15,"span"),l(16,"1721"),r()()(),n(17,"div",28)(18,"div")(19,"p",29),l(20," Od\xF4metro: "),n(21,"span",30),l(22),r()(),n(23,"span",31),l(24,"Registro: 24/04/2025 03:00"),r()(),n(25,"div")(26,"p",32),l(27," KM desde \xFAltima troca: "),n(28,"span",30),l(29),r(),p(30,$i,1,0,"span",33),r(),n(31,"div",34)(32,"span",31),l(33),r(),p(34,qi,2,0,"button",35),r()()(),p(35,zi,12,1,"div",36),n(36,"div",37)(37,"div",38)(38,"div",39)(39,"span"),l(40,"Status:"),r(),n(41,"span",40),l(42),r()(),p(43,Ki,5,1,"div",41)(44,Ji,5,1,"div",41),n(45,"div",39)(46,"span"),l(47,"Troca de \xD3leo:"),r(),n(48,"span",40),l(49),r()()(),p(50,Gi,9,3,"div",42)(51,Qi,6,3,"div",42),n(52,"div",43)(53,"div",44)(54,"button",45),f("click",function(){g(e);let o=m();return x(o.cancelChanges())}),l(55," Cancelar "),r(),n(56,"button",46),f("click",function(){g(e);let o=m();return x(o.saveChanges())}),l(57," Salvar "),r()(),n(58,"div",44)(59,"button",47),u(60,"img",48),r(),n(61,"button",49),f("click",function(){g(e);let o=m();return x(o.toggleOilChangeRecords())}),u(62,"img",50),p(63,Xi,2,1,"div",51),r(),n(64,"button",52),f("click",function(){g(e);let o=m();return x(o.toggleComments())}),u(65,"img",53),p(66,eo,2,1,"div",54),r()()()()()()()()}if(i&2){let e=m();a(7),s("ngForOf",e.selectedVehicle.atributos),a(4),_(" ",e.selectedVehicle.id," "),a(11),h(e.selectedVehicle.odoAtual),a(4),s("ngClass",b(21,Ai,e.selectedVehicle.precisaTrocaOleo)),a(3),h(e.selectedVehicle.odoDesdeUltimaTroca||0),a(),s("ngIf",e.selectedVehicle.precisaTrocaOleo),a(3),_("\xDAltima troca de \xF3leo: ",e.selectedVehicle.ultimaTrocaOleo||"N\xE3o registrada",""),a(),s("ngIf",e.selectedVehicle.precisaTrocaOleo),a(),s("ngIf",e.showOilChangeForm),a(6),s("ngClass",q(23,Pi,e.selectedVehicle.status==="OK",e.selectedVehicle.status==="Oficina",e.selectedVehicle.status==="Sem Comunicar",e.selectedVehicle.status==="Inativo")),a(),h(e.selectedVehicle.status),a(),s("ngIf",e.selectedVehicle.ultPedidoID),a(),s("ngIf",e.selectedVehicle.ultIntegracao),a(4),s("ngClass",T(28,ji,e.selectedVehicle.precisaTrocaOleo,!e.selectedVehicle.precisaTrocaOleo)),a(),_(" ",e.selectedVehicle.precisaTrocaOleo?"Necess\xE1ria":"OK"," "),a(),s("ngIf",e.showComments),a(),s("ngIf",e.showOilChangeRecords),a(10),s("ngClass",b(31,Nt,e.showOilChangeRecords)),a(2),s("ngIf",e.selectedVehicle.trocasOleo&&e.selectedVehicle.trocasOleo.length>0),a(),s("ngClass",b(33,Nt,e.showComments)),a(2),s("ngIf",e.selectedVehicle.comentarios&&e.selectedVehicle.comentarios.length>0)}}var Ht=(()=>{class i{http;renderer;cdRef;veiculos=[];selectedVehicle=null;isHelpDialogOpen=!1;originalData=null;originalVehicleState=null;showComments=!1;newComment="";showOilChangeForm=!1;lastOilChangeDate="";showOilChangeRecords=!1;icones=["assets/device_thermostat.svg","assets/shutter_speed_minus.svg","assets/compress.svg","assets/do_not_step.svg","assets/air.svg","assets/speed.svg"];constructor(e,t,o){this.http=e,this.renderer=t,this.cdRef=o}ngOnInit(){console.log("CardVeiculoComponent initialized"),this.loadVehicleData()}loadVehicleData(){this.http.get("assets/mocks/veiculos_mock.json").subscribe({next:e=>{console.log("Data loaded:",e),this.originalData=JSON.parse(JSON.stringify(e)),this.veiculos=e.veiculos.map(t=>M(I({},t),{atributos:t.cores.map((o,d)=>({cor:o,icone:this.icones[d]||""})),comentarios:t.comentarios||[],odoAtual:t.odoAtual||0,ultimaTrocaOleo:t.ultimaTrocaOleo||null,odoNaUltimaTroca:t.odoNaUltimaTroca||0,trocasOleo:t.trocasOleo||[]})),this.veiculos.forEach(t=>{t.atributos.forEach((o,d)=>{o.cor=this.getClosestColorMatch(o.cor)}),this.calcularodoDesdeUltimaTroca(t)})},error:e=>{console.error("Erro ao carregar o JSON:",e)}})}calcularodoDesdeUltimaTroca(e){e.odoAtual&&e.odoNaUltimaTroca?e.odoDesdeUltimaTroca=e.odoAtual-e.odoNaUltimaTroca:e.odoDesdeUltimaTroca=e.odoAtual||0,e.precisaTrocaOleo=e.odoDesdeUltimaTroca>=1e4}registrarTrocaOleo(){if(!this.selectedVehicle)return;let e=new Date,t=`${e.toLocaleDateString("pt-BR")} ${e.getHours()}:${e.getMinutes().toString().padStart(2,"0")}`;this.selectedVehicle.ultimaTrocaOleo=e.toLocaleDateString("pt-BR"),this.selectedVehicle.odoNaUltimaTroca=this.selectedVehicle.odoAtual,this.selectedVehicle.odoDesdeUltimaTroca=0,this.selectedVehicle.precisaTrocaOleo=!1,this.selectedVehicle.trocasOleo||(this.selectedVehicle.trocasOleo=[]),this.selectedVehicle.trocasOleo.unshift({author:"Sistema",date:t,text:`Troca de \xF3leo realizada com od\xF4metro ${this.selectedVehicle.odoAtual}.`}),this.showOilChangeForm=!1,this.showOilChangeRecords=!0,this.cdRef.detectChanges()}toggleOilChangeForm(){this.showOilChangeForm=!this.showOilChangeForm}toggleOilChangeRecords(){this.showOilChangeRecords=!this.showOilChangeRecords,this.showOilChangeRecords&&(this.showComments=!1,this.selectedVehicle.trocasOleo||(this.selectedVehicle.trocasOleo=[]),this.cdRef.detectChanges())}shouldShowOilChangeAlert(e){return e.precisaTrocaOleo===!0}getClosestColorMatch(e){let t=this.getAllAttributeColors();return t.includes(e)?e:t[0]}getBackgroundColor(e){switch(e){case"OK":return"white";case"Oficina":return"#FF9858";case"Sem Comunicar":return"#E25652";case"Inativo":return"#B9B9B9";default:return"white"}}getIconPath(e){return this.icones[e]||""}getAttributeName(e){return["Temperatura","Torque","Press\xE3o Turbina","Pedal","Ar Comprimido","Max. Velocidade"][e]||`Atributo ${e+1}`}getColorOptions(){return[{label:"Inativo",value:"#242427"},{label:"Verde",value:"#387E38"},{label:"Laranja",value:"#F56B15"},{label:"Vermelho",value:"#AE2724"},{label:"Roxo",value:"#6224AE"}]}openHelpDialog(e){this.selectedVehicle=JSON.parse(JSON.stringify(e)),this.originalVehicleState=JSON.parse(JSON.stringify(e)),this.selectedVehicle.atributos.forEach(t=>{t.cor=this.getClosestColorMatch(t.cor)}),this.selectedVehicle.comentarios||(this.selectedVehicle.comentarios=[]),this.selectedVehicle.trocasOleo||(this.selectedVehicle.trocasOleo=[]),this.isHelpDialogOpen=!0,this.renderer.addClass(document.body,"overflow-hidden"),this.showComments=!1,this.showOilChangeRecords=!1,this.showOilChangeForm=!1,this.newComment="",setTimeout(()=>{let t=document.querySelector("#modal-close-button");t&&t.focus()},100)}closeHelpDialog(){this.isHelpDialogOpen=!1,this.renderer.removeClass(document.body,"overflow-hidden"),this.selectedVehicle=null,this.originalVehicleState=null,this.showComments=!1,this.showOilChangeForm=!1,this.showOilChangeRecords=!1,this.newComment=""}toggleComments(){this.showComments=!this.showComments,this.showComments&&(this.showOilChangeRecords=!1,this.cdRef.detectChanges())}addComment(){if(this.newComment.trim()&&this.selectedVehicle){let e=new Date,t=`${e.toLocaleDateString("pt-BR")} ${e.getHours()}:${e.getMinutes().toString().padStart(2,"0")}`;this.selectedVehicle.comentarios||(this.selectedVehicle.comentarios=[]),this.selectedVehicle.comentarios.unshift({author:"Usu\xE1rio Atual",date:t,text:this.newComment.trim()});let o=this.veiculos.findIndex(d=>d.id===this.selectedVehicle.id);o!==-1&&(this.veiculos[o].comentarios||(this.veiculos[o].comentarios=[]),this.veiculos[o].comentarios=[...this.selectedVehicle.comentarios]),this.newComment="",this.cdRef.detectChanges()}}getAllAttributeColors(){return this.getColorOptions().map(e=>e.value)}updateAttributeColor(e,t){if(!this.selectedVehicle)return;let d=t.target.value;this.selectedVehicle.atributos[e].cor=d}cancelChanges(){this.closeHelpDialog()}saveChanges(){if(this.selectedVehicle){let e=this.veiculos.findIndex(t=>t.id===this.selectedVehicle.id);e!==-1&&(this.veiculos[e].atributos.forEach((t,o)=>{o<this.selectedVehicle.atributos.length&&(t.cor=this.selectedVehicle.atributos[o].cor)}),this.veiculos[e].comentarios=[...this.selectedVehicle.comentarios],this.veiculos[e].trocasOleo=[...this.selectedVehicle.trocasOleo||[]],this.veiculos[e].ultimaTrocaOleo=this.selectedVehicle.ultimaTrocaOleo,this.veiculos[e].odoNaUltimaTroca=this.selectedVehicle.odoNaUltimaTroca,this.veiculos[e].odoDesdeUltimaTroca=this.selectedVehicle.odoDesdeUltimaTroca,this.veiculos[e].precisaTrocaOleo=this.selectedVehicle.precisaTrocaOleo,this.originalData&&this.originalData.veiculos&&this.originalData.veiculos[e]&&(this.originalData.veiculos[e].cores&&this.selectedVehicle.atributos.forEach((t,o)=>{o<this.originalData.veiculos[e].cores.length&&(this.originalData.veiculos[e].cores[o]=t.cor)}),this.originalData.veiculos[e].comentarios=[...this.selectedVehicle.comentarios],this.originalData.veiculos[e].trocasOleo=[...this.selectedVehicle.trocasOleo||[]],this.originalData.veiculos[e].ultimaTrocaOleo=this.selectedVehicle.ultimaTrocaOleo,this.originalData.veiculos[e].odoNaUltimaTroca=this.selectedVehicle.odoNaUltimaTroca),this.calcularodoDesdeUltimaTroca(this.veiculos[e]),this.saveChangesToJson())}this.closeHelpDialog()}saveChangesToJson(){console.log("Salvando altera\xE7\xF5es:",this.originalData)}handleEscapeKey(){this.isHelpDialogOpen&&this.closeHelpDialog()}handleTabKey(e){if(!this.isHelpDialogOpen)return;let t=document.querySelector('[role="dialog"]');if(!t)return;let o=t.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(o.length===0)return;let d=o[0],v=o[o.length-1];e.shiftKey&&document.activeElement===d?(v.focus(),e.preventDefault()):!e.shiftKey&&document.activeElement===v&&(d.focus(),e.preventDefault())}static \u0275fac=function(t){return new(t||i)(w(z),w(R),w(j))};static \u0275cmp=y({type:i,selectors:[["app-card-veiculo-pedal"]],hostBindings:function(t,o){t&1&&f("keydown.escape",function(){return o.handleEscapeKey()},!1,F)("keydown.tab",function(v){return o.handleTabKey(v)},!1,F)},decls:5,vars:2,consts:[[1,"pb-28","pt-44"],["class","grid grid-cols-1 md:grid-cols-4 lg:grid-cols-12 lg:flex flex-wrap items-center justify-center gap-4",4,"ngIf"],["class","fixed inset-0 z-50 md:p-4 flex items-center justify-center bg-black bg-opacity-50 overflow-y-scroll","role","dialog","aria-modal","true","aria-labelledby","modal-title",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-4","lg:grid-cols-12","lg:flex","flex-wrap","items-center","justify-center","gap-4"],["class","shadow-2xl p-3 rounded-2xl flex flex-col items-center justify-center cursor-pointer border-2 relative transition-transform duration-300 hover:scale-105 hover:opacity-50","tabindex","0","role","button",3,"ngStyle","click","keydown.enter","keydown.space",4,"ngFor","ngForOf"],["tabindex","0","role","button",1,"shadow-2xl","p-3","rounded-2xl","flex","flex-col","items-center","justify-center","cursor-pointer","border-2","relative","transition-transform","duration-300","hover:scale-105","hover:opacity-50",3,"click","keydown.enter","keydown.space","ngStyle"],["class","absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm","aria-label","Este ve\xEDculo possui coment\xE1rios",4,"ngIf"],["class","absolute top-2 left-2 bg-amber-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm","aria-label","Este ve\xEDculo precisa de troca de \xF3leo",4,"ngIf"],[1,"text-black","font-bold","mb-2","text-3xl"],[1,"p-1.5","rounded-xl","w-full","flex","justify-center","gap-1",2,"background-color","#141416"],["class","w-7 h-7 rounded-full flex items-center justify-center",3,"ngStyle",4,"ngFor","ngForOf"],["aria-label","Este ve\xEDculo possui coment\xE1rios",1,"absolute","-top-2","-right-2","bg-red-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"],["aria-label","Este ve\xEDculo precisa de troca de \xF3leo",1,"absolute","top-2","left-2","bg-amber-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"],[1,"text-xs"],["src","assets/water_drop.svg","alt","Alerta de troca de \xF3leo"],[1,"w-7","h-7","rounded-full","flex","items-center","justify-center",3,"ngStyle"],[3,"src","alt"],["role","dialog","aria-modal","true","aria-labelledby","modal-title",1,"fixed","inset-0","z-50","md:p-4","flex","items-center","justify-center","bg-black","bg-opacity-50","overflow-y-scroll"],[1,"rounded-3xl","shadow-lg","w-max","max-w-[90vw]","h-max","2xl:max-w-[100vw]","2xl:max-h-[100vh]","overflow-y-auto","animate-fade-in","relative",2,"background-color","#141416"],[1,"absolute","right-6","top-6","2xl:top-12","2xl:right-12"],["id","modal-close-button","aria-label","Fechar modal",1,"text-lg","xl:text-4xl","font-semibold","text-gray-500","hover:text-amber-400",3,"click","keydown.enter"],[1,"rounded-3xl","flex","flex-col-reverse","lg:flex-row","justify-center","w-max","2xl:max-w-[100vw]","h-max","2xl:max-h-[100vh]"],[1,"grid","grid-cols-1","md:grid-cols-3","lg:grid-cols-1","lg:flex","lg:flex-col","justify-center","rounded-3xl","gap-3","w-full","2xl:max-h-[100vh]","p-6","2xl:p-24",2,"background-color","#242427"],["class","flex flex-col lg:flex-row justify-between gap-3 2xl:gap-8 p-2 rounded-lg",4,"ngFor","ngForOf"],[1,"p-8","2xl:p-20","flex","flex-col","justify-between","w-full","2xl:max-w-[100vw]","2xl:max-h-[100vh]"],[1,"flex","flex-col","mb-10"],[1,"font-bold","text-2xl","lg:text-4xl","2xl:text-6xl","text-amber-400"],[1,"flex","gap-4","text-sm","2xl:text-2xl","mb-1","font-bold","text-white"],[1,"flex","flex-col","justify-between","gap-6","mb-4"],[1,"text-amber-400","text-md","lg:text-lg","2xl:text-3xl","font-bold","mb-2"],[1,"text-white"],[1,"text-lg","text-white"],[1,"text-amber-400","text-md","lg:text-lg","2xl:text-2xl","font-bold","mb-2",3,"ngClass"],["class","ml-2 text-red-400",4,"ngIf"],[1,"flex","items-center","gap-2"],["class","ml-2 bg-amber-600 text-white text-xs px-2 py-1 rounded hover:bg-amber-700","aria-label","Registrar troca de \xF3leo",3,"click",4,"ngIf"],["class","mt-4 mb-4 w-full bg-gray-800 rounded-lg p-4 border border-gray-700 animate-fade-in",4,"ngIf"],[1,"pt-10"],[1,"w-full","text-gray-300","flex","flex-col","gap-4","pb-6"],[1,"flex","justify-between","py-2","border-b","border-gray-700","2xl:text-2xl"],[3,"ngClass"],["class","flex justify-between py-2 border-b border-gray-700 2xl:text-2xl",4,"ngIf"],["class","mt-4 w-full bg-gray-800 rounded-lg p-4 border border-gray-700",4,"ngIf"],[1,"flex","justify-between","mt-4","gap-4","w-full"],[1,"flex","gap-4"],["aria-label","Cancelar altera\xE7\xF5es",1,"px-4","py-2","bg-gray-600","text-white","rounded-2xl","hover:bg-gray-700","transition","2xl:text-xl",3,"click"],["aria-label","Salvar altera\xE7\xF5es",1,"px-4","py-2","bg-amber-600","text-white","rounded-2xl","hover:bg-amber-700","transition","2xl:text-xl",3,"click"],["title","Gr\xE1fico",1,"px-4","py-2","text-white","rounded-2xl","hover:bg-amber-600","transition","2xl:text-xl",2,"background-color","#242427"],["src","assets/bar_chart.svg","alt","gr\xE1fico",1,"2xl:w-20"],["title","Registros","aria-label","Mostrar registros",1,"px-4","py-4","text-white","rounded-2xl","hover:bg-amber-600","transition","2xl:text-xl","relative",2,"background-color","#242427",3,"click","ngClass"],["src","assets/overview.svg","alt","vis\xE3o geral",1,"2xl:w-20"],["class","absolute -top-2 -right-2 bg-amber-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm",4,"ngIf"],["title","Coment\xE1rios","aria-label","Mostrar coment\xE1rios",1,"px-4","py-4","text-white","rounded-2xl","hover:bg-amber-600","transition","2xl:text-xl","relative",2,"background-color","#242427",3,"click","ngClass"],["src","assets/chat.svg","alt","chat",1,"2xl:w-20"],["class","absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm",4,"ngIf"],[1,"flex","flex-col","lg:flex-row","justify-between","gap-3","2xl:gap-8","p-2","rounded-lg"],[1,"flex","items-center","gap-3","xl:gap-8"],[1,"w-8","h-8","lg:w-14","lg:h-14","2xl:w-20","2xl:h-20","rounded-full","flex","items-center","justify-center",3,"ngStyle"],[1,"w-4","h-4","lg:w-7","lg:h-7","2xl:w-10","2xl:h-10",3,"src","alt"],[1,"flex","flex-col"],[1,"text-white","text-sm","2xl:text-2xl","lg:text-nowrap","font-bold"],[1,"text-amber-500","2xl:text-2xl","font-bold"],[1,"ml-2","text-red-400"],["aria-label","Registrar troca de \xF3leo",1,"ml-2","bg-amber-600","text-white","text-xs","px-2","py-1","rounded","hover:bg-amber-700",3,"click"],[1,"mt-4","mb-4","w-full","bg-gray-800","rounded-lg","p-4","border","border-gray-700","animate-fade-in"],[1,"text-amber-400","text-lg","2xl:text-3xl","font-bold","mb-3"],[1,"flex","flex-col","gap-3"],[1,"flex","gap-3","justify-between","items-center"],[1,"flex","gap-2"],[1,"bg-gray-600","text-white","px-4","py-1","rounded","hover:bg-gray-700",3,"click"],[1,"bg-amber-600","text-white","px-4","py-1","rounded","hover:bg-amber-700",3,"click"],[1,"mt-4","w-full","bg-gray-800","rounded-lg","p-4","border","border-gray-700"],[1,"flex","flex-col","gap-3","max-h-44","overflow-y-auto"],["class","bg-gray-900 p-3 mb-2 rounded-md",4,"ngFor","ngForOf"],[1,"mt-2","flex","gap-2"],["type","text","placeholder","Adicionar coment\xE1rio...",1,"w-full","bg-gray-900","border","border-gray-700","rounded-lg","px-3","py-2","text-white",3,"ngModelChange","ngModel"],[1,"bg-amber-600","text-white","rounded-lg","px-4","py-2","hover:bg-amber-700",3,"click"],[1,"bg-gray-900","p-3","mb-2","rounded-md"],[1,"flex","justify-between","mb-1"],[1,"text-amber-400","font-semibold"],[1,"text-gray-500","text-sm"],["class","text-gray-400 text-center p-4",4,"ngIf"],[1,"text-gray-400","text-center","p-4"],[1,"absolute","-top-2","-right-2","bg-amber-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"],[1,"absolute","-top-2","-right-2","bg-red-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"]],template:function(t,o){t&1&&(u(0,"app-header-dsveiculos"),n(1,"section",0),p(2,Bi,2,1,"div",1),r(),u(3,"app-footer-dsveiculos"),p(4,to,67,35,"div",2)),t&2&&(a(2),s("ngIf",o.veiculos.length>0),a(2),s("ngIf",o.isHelpDialogOpen&&o.selectedVehicle))},dependencies:[V,P,D,S,N,H,K,J,W,G,Y],styles:["@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out forwards}.bg-gray-800[_ngcontent-%COMP%]{background-color:#242427}.bg-gray-900[_ngcontent-%COMP%]{background-color:#1a1a1d}.bg-amber-500[_ngcontent-%COMP%]{background-color:#f59e0b}.bg-amber-600[_ngcontent-%COMP%]{background-color:#d97706}.bg-amber-700[_ngcontent-%COMP%]{background-color:#b45309}.hover\\:bg-amber-600[_ngcontent-%COMP%]:hover{background-color:#d97706}button[_ngcontent-%COMP%]:focus, input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{outline:2px solid #F59E0B;outline-offset:2px}button[_ngcontent-%COMP%]{transition:background-color .2s,transform .1s}button[_ngcontent-%COMP%]:active{transform:scale(.98)}"]})}return i})();var je=i=>({"background-color":i}),io=i=>({"text-red-400":i}),oo=(i,c,e,t)=>({"text-green-400":i,"text-orange-400":c,"text-red-400":e,"text-gray-400":t}),no=(i,c)=>({"text-red-400":i,"text-green-400":c}),Ut=i=>({"bg-amber-700":i});function ro(i,c){if(i&1&&(n(0,"div",11),l(1),r()),i&2){let e=m().$implicit;a(),_(" ",e.comentarios.length," ")}}function ao(i,c){i&1&&(n(0,"div",12)(1,"span",13),u(2,"img",14),r()())}function lo(i,c){if(i&1&&(n(0,"span",15),u(1,"img",16),r()),i&2){let e=c.$implicit,t=c.index,o=m(3);s("ngStyle",b(3,je,e.cor)),a(),s("src",e.icone,E)("alt",o.getAttributeName(t))}}function so(i,c){if(i&1){let e=C();n(0,"div",5),f("click",function(){let o=g(e).$implicit,d=m(2);return x(d.openHelpDialog(o))})("keydown.enter",function(){let o=g(e).$implicit,d=m(2);return x(d.openHelpDialog(o))})("keydown.space",function(o){let d=g(e).$implicit;return m(2).openHelpDialog(d),x(o.preventDefault())}),p(1,ro,2,1,"div",6)(2,ao,3,0,"div",7),n(3,"h3",8),l(4),r(),n(5,"div",9),p(6,lo,2,5,"span",10),r()()}if(i&2){let e=c.$implicit,t=m(2);s("ngStyle",b(6,je,e.atributos[0].cor+"99")),U("aria-label","Mostrar detalhes do ve\xEDculo "+e.id),a(),s("ngIf",e.comentarios&&e.comentarios.length>0),a(),s("ngIf",t.shouldShowOilChangeAlert(e)),a(2),h(e.id),a(2),s("ngForOf",e.atributos)}}function co(i,c){if(i&1&&(n(0,"div",3),p(1,so,7,8,"div",4),r()),i&2){let e=m();a(),s("ngForOf",e.veiculos)}}function mo(i,c){if(i&1&&(n(0,"div",55)(1,"div",56)(2,"span",57),u(3,"img",58),r(),n(4,"div",59)(5,"span",60),l(6),r(),n(7,"span",61),l(8,"0"),r()()()()),i&2){let e=c.$implicit,t=c.index,o=m(2);a(2),s("ngStyle",b(4,je,e.cor)),a(),s("src",e.icone,E)("alt",o.getAttributeName(t)),a(3),h(o.getAttributeName(t))}}function uo(i,c){i&1&&u(0,"span",62)}function po(i,c){if(i&1){let e=C();n(0,"button",63),f("click",function(){g(e);let o=m(2);return x(o.toggleOilChangeForm())}),l(1," Registrar troca "),r()}}function ho(i,c){if(i&1){let e=C();n(0,"div",64)(1,"h4",65),l(2," Registrar Troca de \xD3leo "),r(),n(3,"div",66)(4,"div",67)(5,"p",30),l(6),r(),n(7,"div",68)(8,"button",69),f("click",function(){g(e);let o=m(2);return x(o.toggleOilChangeForm())}),l(9," Cancelar "),r(),n(10,"button",70),f("click",function(){g(e);let o=m(2);return x(o.registrarTrocaOleo())}),l(11," Confirmar "),r()()()()()}if(i&2){let e=m(2);a(6),_(" Confirma a troca de \xF3leo para o ve\xEDculo ",e.selectedVehicle.id,"? ")}}function go(i,c){if(i&1&&(n(0,"div",39)(1,"span"),l(2,"UltPedidoID:"),r(),n(3,"span"),l(4),r()()),i&2){let e=m(2);a(4),h(e.selectedVehicle.ultPedidoID)}}function xo(i,c){if(i&1&&(n(0,"div",39)(1,"span"),l(2,"Integra\xE7\xE3o:"),r(),n(3,"span"),l(4),r()()),i&2){let e=m(2);a(4),h(e.selectedVehicle.ultIntegracao)}}function fo(i,c){if(i&1&&(n(0,"div",77)(1,"div",78)(2,"span",79),l(3),r(),n(4,"span",80),l(5),r()(),n(6,"p",30),l(7),r()()),i&2){let e=c.$implicit;a(3),h(e.author),a(2),h(e.date),a(2),h(e.text)}}function vo(i,c){if(i&1){let e=C();n(0,"div",71)(1,"h4",65),l(2," Coment\xE1rios "),r(),n(3,"div",72),p(4,fo,8,3,"div",73),r(),n(5,"div",74)(6,"input",75),$("ngModelChange",function(o){g(e);let d=m(2);return L(d.newComment,o)||(d.newComment=o),x(o)}),r(),n(7,"button",76),f("click",function(){g(e);let o=m(2);return x(o.addComment())}),l(8," Enviar "),r()()()}if(i&2){let e=m(2);s("@slideUpDown",e.showComments?"open":"closed"),a(4),s("ngForOf",e.selectedVehicle.comentarios),a(2),B("ngModel",e.newComment)}}function _o(i,c){if(i&1&&(n(0,"div",77)(1,"div",78)(2,"span",79),l(3),r(),n(4,"span",80),l(5),r()(),n(6,"p",30),l(7),r()()),i&2){let e=c.$implicit;a(3),h(e.author),a(2),h(e.date),a(2),h(e.text)}}function bo(i,c){i&1&&(n(0,"div",82),l(1," Nenhum registro de troca de \xF3leo encontrado. "),r())}function Co(i,c){if(i&1&&(n(0,"div",71)(1,"h4",65),l(2," Registros "),r(),n(3,"div",72),p(4,_o,8,3,"div",73)(5,bo,2,0,"div",81),r()()),i&2){let e=m(2);s("@slideUpDown",e.showOilChangeRecords?"open":"closed"),a(4),s("ngForOf",e.selectedVehicle.trocasOleo),a(),s("ngIf",!e.selectedVehicle.trocasOleo||e.selectedVehicle.trocasOleo.length===0)}}function wo(i,c){if(i&1&&(n(0,"div",83),l(1),r()),i&2){let e=m(2);a(),_(" ",e.selectedVehicle.trocasOleo.length," ")}}function yo(i,c){if(i&1&&(n(0,"div",84),l(1),r()),i&2){let e=m(2);a(),_(" ",e.selectedVehicle.comentarios.length," ")}}function Vo(i,c){if(i&1){let e=C();n(0,"div",17)(1,"div",18)(2,"div",19)(3,"button",20),f("click",function(){g(e);let o=m();return x(o.closeHelpDialog())})("keydown.enter",function(){g(e);let o=m();return x(o.closeHelpDialog())}),l(4," \u2715 "),r()(),n(5,"div",21)(6,"div",22),p(7,mo,9,6,"div",23),r(),n(8,"div",24)(9,"div",25)(10,"h3",26),l(11),r(),n(12,"div",27)(13,"span"),l(14,"Euro 5"),r(),n(15,"span"),l(16,"1721"),r()()(),n(17,"div",28)(18,"div")(19,"p",29),l(20," Od\xF4metro: "),n(21,"span",30),l(22),r()(),n(23,"span",31),l(24,"Registro: 24/04/2025 03:00"),r()(),n(25,"div")(26,"p",32),l(27," KM desde \xFAltima troca: "),n(28,"span",30),l(29),r(),p(30,uo,1,0,"span",33),r(),n(31,"div",34)(32,"span",31),l(33),r(),p(34,po,2,0,"button",35),r()()(),p(35,ho,12,1,"div",36),n(36,"div",37)(37,"div",38)(38,"div",39)(39,"span"),l(40,"Status:"),r(),n(41,"span",40),l(42),r()(),p(43,go,5,1,"div",41)(44,xo,5,1,"div",41),n(45,"div",39)(46,"span"),l(47,"Troca de \xD3leo:"),r(),n(48,"span",40),l(49),r()()(),p(50,vo,9,3,"div",42)(51,Co,6,3,"div",42),n(52,"div",43)(53,"div",44)(54,"button",45),f("click",function(){g(e);let o=m();return x(o.cancelChanges())}),l(55," Cancelar "),r(),n(56,"button",46),f("click",function(){g(e);let o=m();return x(o.saveChanges())}),l(57," Salvar "),r()(),n(58,"div",44)(59,"button",47),u(60,"img",48),r(),n(61,"button",49),f("click",function(){g(e);let o=m();return x(o.toggleOilChangeRecords())}),u(62,"img",50),p(63,wo,2,1,"div",51),r(),n(64,"button",52),f("click",function(){g(e);let o=m();return x(o.toggleComments())}),u(65,"img",53),p(66,yo,2,1,"div",54),r()()()()()()()()}if(i&2){let e=m();a(7),s("ngForOf",e.selectedVehicle.atributos),a(4),_(" ",e.selectedVehicle.id," "),a(11),h(e.selectedVehicle.odoAtual),a(4),s("ngClass",b(21,io,e.selectedVehicle.precisaTrocaOleo)),a(3),h(e.selectedVehicle.odoDesdeUltimaTroca||0),a(),s("ngIf",e.selectedVehicle.precisaTrocaOleo),a(3),_("\xDAltima troca de \xF3leo: ",e.selectedVehicle.ultimaTrocaOleo||"N\xE3o registrada",""),a(),s("ngIf",e.selectedVehicle.precisaTrocaOleo),a(),s("ngIf",e.showOilChangeForm),a(6),s("ngClass",q(23,oo,e.selectedVehicle.status==="OK",e.selectedVehicle.status==="Oficina",e.selectedVehicle.status==="Sem Comunicar",e.selectedVehicle.status==="Inativo")),a(),h(e.selectedVehicle.status),a(),s("ngIf",e.selectedVehicle.ultPedidoID),a(),s("ngIf",e.selectedVehicle.ultIntegracao),a(4),s("ngClass",T(28,no,e.selectedVehicle.precisaTrocaOleo,!e.selectedVehicle.precisaTrocaOleo)),a(),_(" ",e.selectedVehicle.precisaTrocaOleo?"Necess\xE1ria":"OK"," "),a(),s("ngIf",e.showComments),a(),s("ngIf",e.showOilChangeRecords),a(10),s("ngClass",b(31,Ut,e.showOilChangeRecords)),a(2),s("ngIf",e.selectedVehicle.trocasOleo&&e.selectedVehicle.trocasOleo.length>0),a(),s("ngClass",b(33,Ut,e.showComments)),a(2),s("ngIf",e.selectedVehicle.comentarios&&e.selectedVehicle.comentarios.length>0)}}var Bt=(()=>{class i{http;renderer;cdRef;veiculos=[];selectedVehicle=null;isHelpDialogOpen=!1;originalData=null;originalVehicleState=null;showComments=!1;newComment="";showOilChangeForm=!1;lastOilChangeDate="";showOilChangeRecords=!1;icones=["assets/device_thermostat.svg","assets/shutter_speed_minus.svg","assets/compress.svg","assets/do_not_step.svg","assets/air.svg","assets/speed.svg"];constructor(e,t,o){this.http=e,this.renderer=t,this.cdRef=o}ngOnInit(){console.log("CardVeiculoComponent initialized"),this.loadVehicleData()}loadVehicleData(){this.http.get("assets/mocks/veiculos_mock.json").subscribe({next:e=>{console.log("Data loaded:",e),this.originalData=JSON.parse(JSON.stringify(e)),this.veiculos=e.veiculos.map(t=>M(I({},t),{atributos:t.cores.map((o,d)=>({cor:o,icone:this.icones[d]||""})),comentarios:t.comentarios||[],odoAtual:t.odoAtual||0,ultimaTrocaOleo:t.ultimaTrocaOleo||null,odoNaUltimaTroca:t.odoNaUltimaTroca||0,trocasOleo:t.trocasOleo||[]})),this.veiculos.forEach(t=>{t.atributos.forEach((o,d)=>{o.cor=this.getClosestColorMatch(o.cor)}),this.calcularodoDesdeUltimaTroca(t)})},error:e=>{console.error("Erro ao carregar o JSON:",e)}})}calcularodoDesdeUltimaTroca(e){e.odoAtual&&e.odoNaUltimaTroca?e.odoDesdeUltimaTroca=e.odoAtual-e.odoNaUltimaTroca:e.odoDesdeUltimaTroca=e.odoAtual||0,e.precisaTrocaOleo=e.odoDesdeUltimaTroca>=1e4}registrarTrocaOleo(){if(!this.selectedVehicle)return;let e=new Date,t=`${e.toLocaleDateString("pt-BR")} ${e.getHours()}:${e.getMinutes().toString().padStart(2,"0")}`;this.selectedVehicle.ultimaTrocaOleo=e.toLocaleDateString("pt-BR"),this.selectedVehicle.odoNaUltimaTroca=this.selectedVehicle.odoAtual,this.selectedVehicle.odoDesdeUltimaTroca=0,this.selectedVehicle.precisaTrocaOleo=!1,this.selectedVehicle.trocasOleo||(this.selectedVehicle.trocasOleo=[]),this.selectedVehicle.trocasOleo.unshift({author:"Sistema",date:t,text:`Troca de \xF3leo realizada com od\xF4metro ${this.selectedVehicle.odoAtual}.`}),this.showOilChangeForm=!1,this.showOilChangeRecords=!0,this.cdRef.detectChanges()}toggleOilChangeForm(){this.showOilChangeForm=!this.showOilChangeForm}toggleOilChangeRecords(){this.showOilChangeRecords=!this.showOilChangeRecords,this.showOilChangeRecords&&(this.showComments=!1,this.selectedVehicle.trocasOleo||(this.selectedVehicle.trocasOleo=[]),this.cdRef.detectChanges())}shouldShowOilChangeAlert(e){return e.precisaTrocaOleo===!0}getClosestColorMatch(e){let t=this.getAllAttributeColors();return t.includes(e)?e:t[0]}getBackgroundColor(e){switch(e){case"OK":return"white";case"Oficina":return"#FF9858";case"Sem Comunicar":return"#E25652";case"Inativo":return"#B9B9B9";default:return"white"}}getIconPath(e){return this.icones[e]||""}getAttributeName(e){return["Temperatura","Torque","Press\xE3o Turbina","Pedal","Ar Comprimido","Max. Velocidade"][e]||`Atributo ${e+1}`}getColorOptions(){return[{label:"Inativo",value:"#242427"},{label:"Verde",value:"#387E38"},{label:"Laranja",value:"#F56B15"},{label:"Vermelho",value:"#AE2724"},{label:"Roxo",value:"#6224AE"}]}openHelpDialog(e){this.selectedVehicle=JSON.parse(JSON.stringify(e)),this.originalVehicleState=JSON.parse(JSON.stringify(e)),this.selectedVehicle.atributos.forEach(t=>{t.cor=this.getClosestColorMatch(t.cor)}),this.selectedVehicle.comentarios||(this.selectedVehicle.comentarios=[]),this.selectedVehicle.trocasOleo||(this.selectedVehicle.trocasOleo=[]),this.isHelpDialogOpen=!0,this.renderer.addClass(document.body,"overflow-hidden"),this.showComments=!1,this.showOilChangeRecords=!1,this.showOilChangeForm=!1,this.newComment="",setTimeout(()=>{let t=document.querySelector("#modal-close-button");t&&t.focus()},100)}closeHelpDialog(){this.isHelpDialogOpen=!1,this.renderer.removeClass(document.body,"overflow-hidden"),this.selectedVehicle=null,this.originalVehicleState=null,this.showComments=!1,this.showOilChangeForm=!1,this.showOilChangeRecords=!1,this.newComment=""}toggleComments(){this.showComments=!this.showComments,this.showComments&&(this.showOilChangeRecords=!1,this.cdRef.detectChanges())}addComment(){if(this.newComment.trim()&&this.selectedVehicle){let e=new Date,t=`${e.toLocaleDateString("pt-BR")} ${e.getHours()}:${e.getMinutes().toString().padStart(2,"0")}`;this.selectedVehicle.comentarios||(this.selectedVehicle.comentarios=[]),this.selectedVehicle.comentarios.unshift({author:"Usu\xE1rio Atual",date:t,text:this.newComment.trim()});let o=this.veiculos.findIndex(d=>d.id===this.selectedVehicle.id);o!==-1&&(this.veiculos[o].comentarios||(this.veiculos[o].comentarios=[]),this.veiculos[o].comentarios=[...this.selectedVehicle.comentarios]),this.newComment="",this.cdRef.detectChanges()}}getAllAttributeColors(){return this.getColorOptions().map(e=>e.value)}updateAttributeColor(e,t){if(!this.selectedVehicle)return;let d=t.target.value;this.selectedVehicle.atributos[e].cor=d}cancelChanges(){this.closeHelpDialog()}saveChanges(){if(this.selectedVehicle){let e=this.veiculos.findIndex(t=>t.id===this.selectedVehicle.id);e!==-1&&(this.veiculos[e].atributos.forEach((t,o)=>{o<this.selectedVehicle.atributos.length&&(t.cor=this.selectedVehicle.atributos[o].cor)}),this.veiculos[e].comentarios=[...this.selectedVehicle.comentarios],this.veiculos[e].trocasOleo=[...this.selectedVehicle.trocasOleo||[]],this.veiculos[e].ultimaTrocaOleo=this.selectedVehicle.ultimaTrocaOleo,this.veiculos[e].odoNaUltimaTroca=this.selectedVehicle.odoNaUltimaTroca,this.veiculos[e].odoDesdeUltimaTroca=this.selectedVehicle.odoDesdeUltimaTroca,this.veiculos[e].precisaTrocaOleo=this.selectedVehicle.precisaTrocaOleo,this.originalData&&this.originalData.veiculos&&this.originalData.veiculos[e]&&(this.originalData.veiculos[e].cores&&this.selectedVehicle.atributos.forEach((t,o)=>{o<this.originalData.veiculos[e].cores.length&&(this.originalData.veiculos[e].cores[o]=t.cor)}),this.originalData.veiculos[e].comentarios=[...this.selectedVehicle.comentarios],this.originalData.veiculos[e].trocasOleo=[...this.selectedVehicle.trocasOleo||[]],this.originalData.veiculos[e].ultimaTrocaOleo=this.selectedVehicle.ultimaTrocaOleo,this.originalData.veiculos[e].odoNaUltimaTroca=this.selectedVehicle.odoNaUltimaTroca),this.calcularodoDesdeUltimaTroca(this.veiculos[e]),this.saveChangesToJson())}this.closeHelpDialog()}saveChangesToJson(){console.log("Salvando altera\xE7\xF5es:",this.originalData)}handleEscapeKey(){this.isHelpDialogOpen&&this.closeHelpDialog()}handleTabKey(e){if(!this.isHelpDialogOpen)return;let t=document.querySelector('[role="dialog"]');if(!t)return;let o=t.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(o.length===0)return;let d=o[0],v=o[o.length-1];e.shiftKey&&document.activeElement===d?(v.focus(),e.preventDefault()):!e.shiftKey&&document.activeElement===v&&(d.focus(),e.preventDefault())}static \u0275fac=function(t){return new(t||i)(w(z),w(R),w(j))};static \u0275cmp=y({type:i,selectors:[["app-card-veiculo-temperatura"]],hostBindings:function(t,o){t&1&&f("keydown.escape",function(){return o.handleEscapeKey()},!1,F)("keydown.tab",function(v){return o.handleTabKey(v)},!1,F)},decls:5,vars:2,consts:[[1,"pb-28","pt-44"],["class","grid grid-cols-1 md:grid-cols-4 lg:grid-cols-12 lg:flex flex-wrap items-center justify-center gap-4",4,"ngIf"],["class","fixed inset-0 z-50 md:p-4 flex items-center justify-center bg-black bg-opacity-50 overflow-y-scroll","role","dialog","aria-modal","true","aria-labelledby","modal-title",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-4","lg:grid-cols-12","lg:flex","flex-wrap","items-center","justify-center","gap-4"],["class","shadow-2xl p-3 rounded-2xl flex flex-col items-center justify-center cursor-pointer border-2 relative transition-transform duration-300 hover:scale-105 hover:opacity-50","tabindex","0","role","button",3,"ngStyle","click","keydown.enter","keydown.space",4,"ngFor","ngForOf"],["tabindex","0","role","button",1,"shadow-2xl","p-3","rounded-2xl","flex","flex-col","items-center","justify-center","cursor-pointer","border-2","relative","transition-transform","duration-300","hover:scale-105","hover:opacity-50",3,"click","keydown.enter","keydown.space","ngStyle"],["class","absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm","aria-label","Este ve\xEDculo possui coment\xE1rios",4,"ngIf"],["class","absolute top-2 left-2 bg-amber-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm","aria-label","Este ve\xEDculo precisa de troca de \xF3leo",4,"ngIf"],[1,"text-black","font-bold","mb-2","text-3xl"],[1,"p-1.5","rounded-xl","w-full","flex","justify-center","gap-1",2,"background-color","#141416"],["class","w-7 h-7 rounded-full flex items-center justify-center",3,"ngStyle",4,"ngFor","ngForOf"],["aria-label","Este ve\xEDculo possui coment\xE1rios",1,"absolute","-top-2","-right-2","bg-red-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"],["aria-label","Este ve\xEDculo precisa de troca de \xF3leo",1,"absolute","top-2","left-2","bg-amber-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"],[1,"text-xs"],["src","assets/water_drop.svg","alt","Alerta de troca de \xF3leo"],[1,"w-7","h-7","rounded-full","flex","items-center","justify-center",3,"ngStyle"],[3,"src","alt"],["role","dialog","aria-modal","true","aria-labelledby","modal-title",1,"fixed","inset-0","z-50","md:p-4","flex","items-center","justify-center","bg-black","bg-opacity-50","overflow-y-scroll"],[1,"rounded-3xl","shadow-lg","w-max","max-w-[90vw]","h-max","2xl:max-w-[100vw]","2xl:max-h-[100vh]","overflow-y-auto","animate-fade-in","relative",2,"background-color","#141416"],[1,"absolute","right-6","top-6","2xl:top-12","2xl:right-12"],["id","modal-close-button","aria-label","Fechar modal",1,"text-lg","xl:text-4xl","font-semibold","text-gray-500","hover:text-amber-400",3,"click","keydown.enter"],[1,"rounded-3xl","flex","flex-col-reverse","lg:flex-row","justify-center","w-max","2xl:max-w-[100vw]","h-max","2xl:max-h-[100vh]"],[1,"grid","grid-cols-1","md:grid-cols-3","lg:grid-cols-1","lg:flex","lg:flex-col","justify-center","rounded-3xl","gap-3","w-full","2xl:max-h-[100vh]","p-6","2xl:p-24",2,"background-color","#242427"],["class","flex flex-col lg:flex-row justify-between gap-3 2xl:gap-8 p-2 rounded-lg",4,"ngFor","ngForOf"],[1,"p-8","2xl:p-20","flex","flex-col","justify-between","w-full","2xl:max-w-[100vw]","2xl:max-h-[100vh]"],[1,"flex","flex-col","mb-10"],[1,"font-bold","text-2xl","lg:text-4xl","2xl:text-6xl","text-amber-400"],[1,"flex","gap-4","text-sm","2xl:text-2xl","mb-1","font-bold","text-white"],[1,"flex","flex-col","justify-between","gap-6","mb-4"],[1,"text-amber-400","text-md","lg:text-lg","2xl:text-3xl","font-bold","mb-2"],[1,"text-white"],[1,"text-lg","text-white"],[1,"text-amber-400","text-md","lg:text-lg","2xl:text-2xl","font-bold","mb-2",3,"ngClass"],["class","ml-2 text-red-400",4,"ngIf"],[1,"flex","items-center","gap-2"],["class","ml-2 bg-amber-600 text-white text-xs px-2 py-1 rounded hover:bg-amber-700","aria-label","Registrar troca de \xF3leo",3,"click",4,"ngIf"],["class","mt-4 mb-4 w-full bg-gray-800 rounded-lg p-4 border border-gray-700 animate-fade-in",4,"ngIf"],[1,"pt-10"],[1,"w-full","text-gray-300","flex","flex-col","gap-4","pb-6"],[1,"flex","justify-between","py-2","border-b","border-gray-700","2xl:text-2xl"],[3,"ngClass"],["class","flex justify-between py-2 border-b border-gray-700 2xl:text-2xl",4,"ngIf"],["class","mt-4 w-full bg-gray-800 rounded-lg p-4 border border-gray-700",4,"ngIf"],[1,"flex","justify-between","mt-4","gap-4","w-full"],[1,"flex","gap-4"],["aria-label","Cancelar altera\xE7\xF5es",1,"px-4","py-2","bg-gray-600","text-white","rounded-2xl","hover:bg-gray-700","transition","2xl:text-xl",3,"click"],["aria-label","Salvar altera\xE7\xF5es",1,"px-4","py-2","bg-amber-600","text-white","rounded-2xl","hover:bg-amber-700","transition","2xl:text-xl",3,"click"],["title","Gr\xE1fico",1,"px-4","py-2","text-white","rounded-2xl","hover:bg-amber-600","transition","2xl:text-xl",2,"background-color","#242427"],["src","assets/bar_chart.svg","alt","gr\xE1fico",1,"2xl:w-20"],["title","Registros","aria-label","Mostrar registros",1,"px-4","py-4","text-white","rounded-2xl","hover:bg-amber-600","transition","2xl:text-xl","relative",2,"background-color","#242427",3,"click","ngClass"],["src","assets/overview.svg","alt","vis\xE3o geral",1,"2xl:w-20"],["class","absolute -top-2 -right-2 bg-amber-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm",4,"ngIf"],["title","Coment\xE1rios","aria-label","Mostrar coment\xE1rios",1,"px-4","py-4","text-white","rounded-2xl","hover:bg-amber-600","transition","2xl:text-xl","relative",2,"background-color","#242427",3,"click","ngClass"],["src","assets/chat.svg","alt","chat",1,"2xl:w-20"],["class","absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm",4,"ngIf"],[1,"flex","flex-col","lg:flex-row","justify-between","gap-3","2xl:gap-8","p-2","rounded-lg"],[1,"flex","items-center","gap-3","xl:gap-8"],[1,"w-8","h-8","lg:w-14","lg:h-14","2xl:w-20","2xl:h-20","rounded-full","flex","items-center","justify-center",3,"ngStyle"],[1,"w-4","h-4","lg:w-7","lg:h-7","2xl:w-10","2xl:h-10",3,"src","alt"],[1,"flex","flex-col"],[1,"text-white","text-sm","2xl:text-2xl","lg:text-nowrap","font-bold"],[1,"text-amber-500","2xl:text-2xl","font-bold"],[1,"ml-2","text-red-400"],["aria-label","Registrar troca de \xF3leo",1,"ml-2","bg-amber-600","text-white","text-xs","px-2","py-1","rounded","hover:bg-amber-700",3,"click"],[1,"mt-4","mb-4","w-full","bg-gray-800","rounded-lg","p-4","border","border-gray-700","animate-fade-in"],[1,"text-amber-400","text-lg","2xl:text-3xl","font-bold","mb-3"],[1,"flex","flex-col","gap-3"],[1,"flex","gap-3","justify-between","items-center"],[1,"flex","gap-2"],[1,"bg-gray-600","text-white","px-4","py-1","rounded","hover:bg-gray-700",3,"click"],[1,"bg-amber-600","text-white","px-4","py-1","rounded","hover:bg-amber-700",3,"click"],[1,"mt-4","w-full","bg-gray-800","rounded-lg","p-4","border","border-gray-700"],[1,"flex","flex-col","gap-3","max-h-44","overflow-y-auto"],["class","bg-gray-900 p-3 mb-2 rounded-md",4,"ngFor","ngForOf"],[1,"mt-2","flex","gap-2"],["type","text","placeholder","Adicionar coment\xE1rio...",1,"w-full","bg-gray-900","border","border-gray-700","rounded-lg","px-3","py-2","text-white",3,"ngModelChange","ngModel"],[1,"bg-amber-600","text-white","rounded-lg","px-4","py-2","hover:bg-amber-700",3,"click"],[1,"bg-gray-900","p-3","mb-2","rounded-md"],[1,"flex","justify-between","mb-1"],[1,"text-amber-400","font-semibold"],[1,"text-gray-500","text-sm"],["class","text-gray-400 text-center p-4",4,"ngIf"],[1,"text-gray-400","text-center","p-4"],[1,"absolute","-top-2","-right-2","bg-amber-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"],[1,"absolute","-top-2","-right-2","bg-red-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"]],template:function(t,o){t&1&&(u(0,"app-header-dsveiculos"),n(1,"section",0),p(2,co,2,1,"div",1),r(),u(3,"app-footer-dsveiculos"),p(4,Vo,67,35,"div",2)),t&2&&(a(2),s("ngIf",o.veiculos.length>0),a(2),s("ngIf",o.isHelpDialogOpen&&o.selectedVehicle))},dependencies:[V,P,D,S,N,H,K,J,W,G,Y],styles:["@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out forwards}.bg-gray-800[_ngcontent-%COMP%]{background-color:#242427}.bg-gray-900[_ngcontent-%COMP%]{background-color:#1a1a1d}.bg-amber-500[_ngcontent-%COMP%]{background-color:#f59e0b}.bg-amber-600[_ngcontent-%COMP%]{background-color:#d97706}.bg-amber-700[_ngcontent-%COMP%]{background-color:#b45309}.hover\\:bg-amber-600[_ngcontent-%COMP%]:hover{background-color:#d97706}button[_ngcontent-%COMP%]:focus, input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{outline:2px solid #F59E0B;outline-offset:2px}button[_ngcontent-%COMP%]{transition:background-color .2s,transform .1s}button[_ngcontent-%COMP%]:active{transform:scale(.98)}"]})}return i})();var Re=i=>({"background-color":i}),Oo=i=>({"text-red-400":i}),So=(i,c,e,t)=>({"text-green-400":i,"text-orange-400":c,"text-red-400":e,"text-gray-400":t}),Eo=(i,c)=>({"text-red-400":i,"text-green-400":c}),Lt=i=>({"bg-amber-700":i});function To(i,c){if(i&1&&(n(0,"div",11),l(1),r()),i&2){let e=m().$implicit;a(),_(" ",e.comentarios.length," ")}}function Do(i,c){i&1&&(n(0,"div",12)(1,"span",13),u(2,"img",14),r()())}function ko(i,c){if(i&1&&(n(0,"span",15),u(1,"img",16),r()),i&2){let e=c.$implicit,t=c.index,o=m(3);s("ngStyle",b(3,Re,e.cor)),a(),s("src",e.icone,E)("alt",o.getAttributeName(t))}}function Io(i,c){if(i&1){let e=C();n(0,"div",5),f("click",function(){let o=g(e).$implicit,d=m(2);return x(d.openHelpDialog(o))})("keydown.enter",function(){let o=g(e).$implicit,d=m(2);return x(d.openHelpDialog(o))})("keydown.space",function(o){let d=g(e).$implicit;return m(2).openHelpDialog(d),x(o.preventDefault())}),p(1,To,2,1,"div",6)(2,Do,3,0,"div",7),n(3,"h3",8),l(4),r(),n(5,"div",9),p(6,ko,2,5,"span",10),r()()}if(i&2){let e=c.$implicit,t=m(2);s("ngStyle",b(6,Re,e.atributos[1].cor+"99")),U("aria-label","Mostrar detalhes do ve\xEDculo "+e.id),a(),s("ngIf",e.comentarios&&e.comentarios.length>0),a(),s("ngIf",t.shouldShowOilChangeAlert(e)),a(2),h(e.id),a(2),s("ngForOf",e.atributos)}}function Mo(i,c){if(i&1&&(n(0,"div",3),p(1,Io,7,8,"div",4),r()),i&2){let e=m();a(),s("ngForOf",e.veiculos)}}function Fo(i,c){if(i&1&&(n(0,"div",55)(1,"div",56)(2,"span",57),u(3,"img",58),r(),n(4,"div",59)(5,"span",60),l(6),r(),n(7,"span",61),l(8,"0"),r()()()()),i&2){let e=c.$implicit,t=c.index,o=m(2);a(2),s("ngStyle",b(4,Re,e.cor)),a(),s("src",e.icone,E)("alt",o.getAttributeName(t)),a(3),h(o.getAttributeName(t))}}function Ao(i,c){i&1&&u(0,"span",62)}function Po(i,c){if(i&1){let e=C();n(0,"button",63),f("click",function(){g(e);let o=m(2);return x(o.toggleOilChangeForm())}),l(1," Registrar troca "),r()}}function jo(i,c){if(i&1){let e=C();n(0,"div",64)(1,"h4",65),l(2," Registrar Troca de \xD3leo "),r(),n(3,"div",66)(4,"div",67)(5,"p",30),l(6),r(),n(7,"div",68)(8,"button",69),f("click",function(){g(e);let o=m(2);return x(o.toggleOilChangeForm())}),l(9," Cancelar "),r(),n(10,"button",70),f("click",function(){g(e);let o=m(2);return x(o.registrarTrocaOleo())}),l(11," Confirmar "),r()()()()()}if(i&2){let e=m(2);a(6),_(" Confirma a troca de \xF3leo para o ve\xEDculo ",e.selectedVehicle.id,"? ")}}function Ro(i,c){if(i&1&&(n(0,"div",39)(1,"span"),l(2,"UltPedidoID:"),r(),n(3,"span"),l(4),r()()),i&2){let e=m(2);a(4),h(e.selectedVehicle.ultPedidoID)}}function No(i,c){if(i&1&&(n(0,"div",39)(1,"span"),l(2,"Integra\xE7\xE3o:"),r(),n(3,"span"),l(4),r()()),i&2){let e=m(2);a(4),h(e.selectedVehicle.ultIntegracao)}}function Ho(i,c){if(i&1&&(n(0,"div",77)(1,"div",78)(2,"span",79),l(3),r(),n(4,"span",80),l(5),r()(),n(6,"p",30),l(7),r()()),i&2){let e=c.$implicit;a(3),h(e.author),a(2),h(e.date),a(2),h(e.text)}}function Uo(i,c){if(i&1){let e=C();n(0,"div",71)(1,"h4",65),l(2," Coment\xE1rios "),r(),n(3,"div",72),p(4,Ho,8,3,"div",73),r(),n(5,"div",74)(6,"input",75),$("ngModelChange",function(o){g(e);let d=m(2);return L(d.newComment,o)||(d.newComment=o),x(o)}),r(),n(7,"button",76),f("click",function(){g(e);let o=m(2);return x(o.addComment())}),l(8," Enviar "),r()()()}if(i&2){let e=m(2);s("@slideUpDown",e.showComments?"open":"closed"),a(4),s("ngForOf",e.selectedVehicle.comentarios),a(2),B("ngModel",e.newComment)}}function Bo(i,c){if(i&1&&(n(0,"div",77)(1,"div",78)(2,"span",79),l(3),r(),n(4,"span",80),l(5),r()(),n(6,"p",30),l(7),r()()),i&2){let e=c.$implicit;a(3),h(e.author),a(2),h(e.date),a(2),h(e.text)}}function Lo(i,c){i&1&&(n(0,"div",82),l(1," Nenhum registro de troca de \xF3leo encontrado. "),r())}function $o(i,c){if(i&1&&(n(0,"div",71)(1,"h4",65),l(2," Registros "),r(),n(3,"div",72),p(4,Bo,8,3,"div",73)(5,Lo,2,0,"div",81),r()()),i&2){let e=m(2);s("@slideUpDown",e.showOilChangeRecords?"open":"closed"),a(4),s("ngForOf",e.selectedVehicle.trocasOleo),a(),s("ngIf",!e.selectedVehicle.trocasOleo||e.selectedVehicle.trocasOleo.length===0)}}function qo(i,c){if(i&1&&(n(0,"div",83),l(1),r()),i&2){let e=m(2);a(),_(" ",e.selectedVehicle.trocasOleo.length," ")}}function zo(i,c){if(i&1&&(n(0,"div",84),l(1),r()),i&2){let e=m(2);a(),_(" ",e.selectedVehicle.comentarios.length," ")}}function Ko(i,c){if(i&1){let e=C();n(0,"div",17)(1,"div",18)(2,"div",19)(3,"button",20),f("click",function(){g(e);let o=m();return x(o.closeHelpDialog())})("keydown.enter",function(){g(e);let o=m();return x(o.closeHelpDialog())}),l(4," \u2715 "),r()(),n(5,"div",21)(6,"div",22),p(7,Fo,9,6,"div",23),r(),n(8,"div",24)(9,"div",25)(10,"h3",26),l(11),r(),n(12,"div",27)(13,"span"),l(14,"Euro 5"),r(),n(15,"span"),l(16,"1721"),r()()(),n(17,"div",28)(18,"div")(19,"p",29),l(20," Od\xF4metro: "),n(21,"span",30),l(22),r()(),n(23,"span",31),l(24,"Registro: 24/04/2025 03:00"),r()(),n(25,"div")(26,"p",32),l(27," KM desde \xFAltima troca: "),n(28,"span",30),l(29),r(),p(30,Ao,1,0,"span",33),r(),n(31,"div",34)(32,"span",31),l(33),r(),p(34,Po,2,0,"button",35),r()()(),p(35,jo,12,1,"div",36),n(36,"div",37)(37,"div",38)(38,"div",39)(39,"span"),l(40,"Status:"),r(),n(41,"span",40),l(42),r()(),p(43,Ro,5,1,"div",41)(44,No,5,1,"div",41),n(45,"div",39)(46,"span"),l(47,"Troca de \xD3leo:"),r(),n(48,"span",40),l(49),r()()(),p(50,Uo,9,3,"div",42)(51,$o,6,3,"div",42),n(52,"div",43)(53,"div",44)(54,"button",45),f("click",function(){g(e);let o=m();return x(o.cancelChanges())}),l(55," Cancelar "),r(),n(56,"button",46),f("click",function(){g(e);let o=m();return x(o.saveChanges())}),l(57," Salvar "),r()(),n(58,"div",44)(59,"button",47),u(60,"img",48),r(),n(61,"button",49),f("click",function(){g(e);let o=m();return x(o.toggleOilChangeRecords())}),u(62,"img",50),p(63,qo,2,1,"div",51),r(),n(64,"button",52),f("click",function(){g(e);let o=m();return x(o.toggleComments())}),u(65,"img",53),p(66,zo,2,1,"div",54),r()()()()()()()()}if(i&2){let e=m();a(7),s("ngForOf",e.selectedVehicle.atributos),a(4),_(" ",e.selectedVehicle.id," "),a(11),h(e.selectedVehicle.odoAtual),a(4),s("ngClass",b(21,Oo,e.selectedVehicle.precisaTrocaOleo)),a(3),h(e.selectedVehicle.odoDesdeUltimaTroca||0),a(),s("ngIf",e.selectedVehicle.precisaTrocaOleo),a(3),_("\xDAltima troca de \xF3leo: ",e.selectedVehicle.ultimaTrocaOleo||"N\xE3o registrada",""),a(),s("ngIf",e.selectedVehicle.precisaTrocaOleo),a(),s("ngIf",e.showOilChangeForm),a(6),s("ngClass",q(23,So,e.selectedVehicle.status==="OK",e.selectedVehicle.status==="Oficina",e.selectedVehicle.status==="Sem Comunicar",e.selectedVehicle.status==="Inativo")),a(),h(e.selectedVehicle.status),a(),s("ngIf",e.selectedVehicle.ultPedidoID),a(),s("ngIf",e.selectedVehicle.ultIntegracao),a(4),s("ngClass",T(28,Eo,e.selectedVehicle.precisaTrocaOleo,!e.selectedVehicle.precisaTrocaOleo)),a(),_(" ",e.selectedVehicle.precisaTrocaOleo?"Necess\xE1ria":"OK"," "),a(),s("ngIf",e.showComments),a(),s("ngIf",e.showOilChangeRecords),a(10),s("ngClass",b(31,Lt,e.showOilChangeRecords)),a(2),s("ngIf",e.selectedVehicle.trocasOleo&&e.selectedVehicle.trocasOleo.length>0),a(),s("ngClass",b(33,Lt,e.showComments)),a(2),s("ngIf",e.selectedVehicle.comentarios&&e.selectedVehicle.comentarios.length>0)}}var $t=(()=>{class i{http;renderer;cdRef;veiculos=[];selectedVehicle=null;isHelpDialogOpen=!1;originalData=null;originalVehicleState=null;showComments=!1;newComment="";showOilChangeForm=!1;lastOilChangeDate="";showOilChangeRecords=!1;icones=["assets/device_thermostat.svg","assets/shutter_speed_minus.svg","assets/compress.svg","assets/do_not_step.svg","assets/air.svg","assets/speed.svg"];constructor(e,t,o){this.http=e,this.renderer=t,this.cdRef=o}ngOnInit(){console.log("CardVeiculoComponent initialized"),this.loadVehicleData()}loadVehicleData(){this.http.get("assets/mocks/veiculos_mock.json").subscribe({next:e=>{console.log("Data loaded:",e),this.originalData=JSON.parse(JSON.stringify(e)),this.veiculos=e.veiculos.map(t=>M(I({},t),{atributos:t.cores.map((o,d)=>({cor:o,icone:this.icones[d]||""})),comentarios:t.comentarios||[],odoAtual:t.odoAtual||0,ultimaTrocaOleo:t.ultimaTrocaOleo||null,odoNaUltimaTroca:t.odoNaUltimaTroca||0,trocasOleo:t.trocasOleo||[]})),this.veiculos.forEach(t=>{t.atributos.forEach((o,d)=>{o.cor=this.getClosestColorMatch(o.cor)}),this.calcularodoDesdeUltimaTroca(t)})},error:e=>{console.error("Erro ao carregar o JSON:",e)}})}calcularodoDesdeUltimaTroca(e){e.odoAtual&&e.odoNaUltimaTroca?e.odoDesdeUltimaTroca=e.odoAtual-e.odoNaUltimaTroca:e.odoDesdeUltimaTroca=e.odoAtual||0,e.precisaTrocaOleo=e.odoDesdeUltimaTroca>=1e4}registrarTrocaOleo(){if(!this.selectedVehicle)return;let e=new Date,t=`${e.toLocaleDateString("pt-BR")} ${e.getHours()}:${e.getMinutes().toString().padStart(2,"0")}`;this.selectedVehicle.ultimaTrocaOleo=e.toLocaleDateString("pt-BR"),this.selectedVehicle.odoNaUltimaTroca=this.selectedVehicle.odoAtual,this.selectedVehicle.odoDesdeUltimaTroca=0,this.selectedVehicle.precisaTrocaOleo=!1,this.selectedVehicle.trocasOleo||(this.selectedVehicle.trocasOleo=[]),this.selectedVehicle.trocasOleo.unshift({author:"Sistema",date:t,text:`Troca de \xF3leo realizada com od\xF4metro ${this.selectedVehicle.odoAtual}.`}),this.showOilChangeForm=!1,this.showOilChangeRecords=!0,this.cdRef.detectChanges()}toggleOilChangeForm(){this.showOilChangeForm=!this.showOilChangeForm}toggleOilChangeRecords(){this.showOilChangeRecords=!this.showOilChangeRecords,this.showOilChangeRecords&&(this.showComments=!1,this.selectedVehicle.trocasOleo||(this.selectedVehicle.trocasOleo=[]),this.cdRef.detectChanges())}shouldShowOilChangeAlert(e){return e.precisaTrocaOleo===!0}getClosestColorMatch(e){let t=this.getAllAttributeColors();return t.includes(e)?e:t[0]}getBackgroundColor(e){switch(e){case"OK":return"white";case"Oficina":return"#FF9858";case"Sem Comunicar":return"#E25652";case"Inativo":return"#B9B9B9";default:return"white"}}getIconPath(e){return this.icones[e]||""}getAttributeName(e){return["Temperatura","Torque","Press\xE3o Turbina","Pedal","Ar Comprimido","Max. Velocidade"][e]||`Atributo ${e+1}`}getColorOptions(){return[{label:"Inativo",value:"#242427"},{label:"Verde",value:"#387E38"},{label:"Laranja",value:"#F56B15"},{label:"Vermelho",value:"#AE2724"},{label:"Roxo",value:"#6224AE"}]}openHelpDialog(e){this.selectedVehicle=JSON.parse(JSON.stringify(e)),this.originalVehicleState=JSON.parse(JSON.stringify(e)),this.selectedVehicle.atributos.forEach(t=>{t.cor=this.getClosestColorMatch(t.cor)}),this.selectedVehicle.comentarios||(this.selectedVehicle.comentarios=[]),this.selectedVehicle.trocasOleo||(this.selectedVehicle.trocasOleo=[]),this.isHelpDialogOpen=!0,this.renderer.addClass(document.body,"overflow-hidden"),this.showComments=!1,this.showOilChangeRecords=!1,this.showOilChangeForm=!1,this.newComment="",setTimeout(()=>{let t=document.querySelector("#modal-close-button");t&&t.focus()},100)}closeHelpDialog(){this.isHelpDialogOpen=!1,this.renderer.removeClass(document.body,"overflow-hidden"),this.selectedVehicle=null,this.originalVehicleState=null,this.showComments=!1,this.showOilChangeForm=!1,this.showOilChangeRecords=!1,this.newComment=""}toggleComments(){this.showComments=!this.showComments,this.showComments&&(this.showOilChangeRecords=!1,this.cdRef.detectChanges())}addComment(){if(this.newComment.trim()&&this.selectedVehicle){let e=new Date,t=`${e.toLocaleDateString("pt-BR")} ${e.getHours()}:${e.getMinutes().toString().padStart(2,"0")}`;this.selectedVehicle.comentarios||(this.selectedVehicle.comentarios=[]),this.selectedVehicle.comentarios.unshift({author:"Usu\xE1rio Atual",date:t,text:this.newComment.trim()});let o=this.veiculos.findIndex(d=>d.id===this.selectedVehicle.id);o!==-1&&(this.veiculos[o].comentarios||(this.veiculos[o].comentarios=[]),this.veiculos[o].comentarios=[...this.selectedVehicle.comentarios]),this.newComment="",this.cdRef.detectChanges()}}getAllAttributeColors(){return this.getColorOptions().map(e=>e.value)}updateAttributeColor(e,t){if(!this.selectedVehicle)return;let d=t.target.value;this.selectedVehicle.atributos[e].cor=d}cancelChanges(){this.closeHelpDialog()}saveChanges(){if(this.selectedVehicle){let e=this.veiculos.findIndex(t=>t.id===this.selectedVehicle.id);e!==-1&&(this.veiculos[e].atributos.forEach((t,o)=>{o<this.selectedVehicle.atributos.length&&(t.cor=this.selectedVehicle.atributos[o].cor)}),this.veiculos[e].comentarios=[...this.selectedVehicle.comentarios],this.veiculos[e].trocasOleo=[...this.selectedVehicle.trocasOleo||[]],this.veiculos[e].ultimaTrocaOleo=this.selectedVehicle.ultimaTrocaOleo,this.veiculos[e].odoNaUltimaTroca=this.selectedVehicle.odoNaUltimaTroca,this.veiculos[e].odoDesdeUltimaTroca=this.selectedVehicle.odoDesdeUltimaTroca,this.veiculos[e].precisaTrocaOleo=this.selectedVehicle.precisaTrocaOleo,this.originalData&&this.originalData.veiculos&&this.originalData.veiculos[e]&&(this.originalData.veiculos[e].cores&&this.selectedVehicle.atributos.forEach((t,o)=>{o<this.originalData.veiculos[e].cores.length&&(this.originalData.veiculos[e].cores[o]=t.cor)}),this.originalData.veiculos[e].comentarios=[...this.selectedVehicle.comentarios],this.originalData.veiculos[e].trocasOleo=[...this.selectedVehicle.trocasOleo||[]],this.originalData.veiculos[e].ultimaTrocaOleo=this.selectedVehicle.ultimaTrocaOleo,this.originalData.veiculos[e].odoNaUltimaTroca=this.selectedVehicle.odoNaUltimaTroca),this.calcularodoDesdeUltimaTroca(this.veiculos[e]),this.saveChangesToJson())}this.closeHelpDialog()}saveChangesToJson(){console.log("Salvando altera\xE7\xF5es:",this.originalData)}handleEscapeKey(){this.isHelpDialogOpen&&this.closeHelpDialog()}handleTabKey(e){if(!this.isHelpDialogOpen)return;let t=document.querySelector('[role="dialog"]');if(!t)return;let o=t.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(o.length===0)return;let d=o[0],v=o[o.length-1];e.shiftKey&&document.activeElement===d?(v.focus(),e.preventDefault()):!e.shiftKey&&document.activeElement===v&&(d.focus(),e.preventDefault())}static \u0275fac=function(t){return new(t||i)(w(z),w(R),w(j))};static \u0275cmp=y({type:i,selectors:[["app-card-veiculo-torque"]],hostBindings:function(t,o){t&1&&f("keydown.escape",function(){return o.handleEscapeKey()},!1,F)("keydown.tab",function(v){return o.handleTabKey(v)},!1,F)},decls:5,vars:2,consts:[[1,"pb-28","pt-44"],["class","grid grid-cols-1 md:grid-cols-4 lg:grid-cols-12 lg:flex flex-wrap items-center justify-center gap-4",4,"ngIf"],["class","fixed inset-0 z-50 md:p-4 flex items-center justify-center bg-black bg-opacity-50 overflow-y-scroll","role","dialog","aria-modal","true","aria-labelledby","modal-title",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-4","lg:grid-cols-12","lg:flex","flex-wrap","items-center","justify-center","gap-4"],["class","shadow-2xl p-3 rounded-2xl flex flex-col items-center justify-center cursor-pointer border-2 relative transition-transform duration-300 hover:scale-105 hover:opacity-50","tabindex","0","role","button",3,"ngStyle","click","keydown.enter","keydown.space",4,"ngFor","ngForOf"],["tabindex","0","role","button",1,"shadow-2xl","p-3","rounded-2xl","flex","flex-col","items-center","justify-center","cursor-pointer","border-2","relative","transition-transform","duration-300","hover:scale-105","hover:opacity-50",3,"click","keydown.enter","keydown.space","ngStyle"],["class","absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm","aria-label","Este ve\xEDculo possui coment\xE1rios",4,"ngIf"],["class","absolute top-2 left-2 bg-amber-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm","aria-label","Este ve\xEDculo precisa de troca de \xF3leo",4,"ngIf"],[1,"text-black","font-bold","mb-2","text-3xl"],[1,"p-1.5","rounded-xl","w-full","flex","justify-center","gap-1",2,"background-color","#141416"],["class","w-7 h-7 rounded-full flex items-center justify-center",3,"ngStyle",4,"ngFor","ngForOf"],["aria-label","Este ve\xEDculo possui coment\xE1rios",1,"absolute","-top-2","-right-2","bg-red-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"],["aria-label","Este ve\xEDculo precisa de troca de \xF3leo",1,"absolute","top-2","left-2","bg-amber-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"],[1,"text-xs"],["src","assets/water_drop.svg","alt","Alerta de troca de \xF3leo"],[1,"w-7","h-7","rounded-full","flex","items-center","justify-center",3,"ngStyle"],[3,"src","alt"],["role","dialog","aria-modal","true","aria-labelledby","modal-title",1,"fixed","inset-0","z-50","md:p-4","flex","items-center","justify-center","bg-black","bg-opacity-50","overflow-y-scroll"],[1,"rounded-3xl","shadow-lg","w-max","max-w-[90vw]","h-max","2xl:max-w-[100vw]","2xl:max-h-[100vh]","overflow-y-auto","animate-fade-in","relative",2,"background-color","#141416"],[1,"absolute","right-6","top-6","2xl:top-12","2xl:right-12"],["id","modal-close-button","aria-label","Fechar modal",1,"text-lg","xl:text-4xl","font-semibold","text-gray-500","hover:text-amber-400",3,"click","keydown.enter"],[1,"rounded-3xl","flex","flex-col-reverse","lg:flex-row","justify-center","w-max","2xl:max-w-[100vw]","h-max","2xl:max-h-[100vh]"],[1,"grid","grid-cols-1","md:grid-cols-3","lg:grid-cols-1","lg:flex","lg:flex-col","justify-center","rounded-3xl","gap-3","w-full","2xl:max-h-[100vh]","p-6","2xl:p-24",2,"background-color","#242427"],["class","flex flex-col lg:flex-row justify-between gap-3 2xl:gap-8 p-2 rounded-lg",4,"ngFor","ngForOf"],[1,"p-8","2xl:p-20","flex","flex-col","justify-between","w-full","2xl:max-w-[100vw]","2xl:max-h-[100vh]"],[1,"flex","flex-col","mb-10"],[1,"font-bold","text-2xl","lg:text-4xl","2xl:text-6xl","text-amber-400"],[1,"flex","gap-4","text-sm","2xl:text-2xl","mb-1","font-bold","text-white"],[1,"flex","flex-col","justify-between","gap-6","mb-4"],[1,"text-amber-400","text-md","lg:text-lg","2xl:text-3xl","font-bold","mb-2"],[1,"text-white"],[1,"text-lg","text-white"],[1,"text-amber-400","text-md","lg:text-lg","2xl:text-2xl","font-bold","mb-2",3,"ngClass"],["class","ml-2 text-red-400",4,"ngIf"],[1,"flex","items-center","gap-2"],["class","ml-2 bg-amber-600 text-white text-xs px-2 py-1 rounded hover:bg-amber-700","aria-label","Registrar troca de \xF3leo",3,"click",4,"ngIf"],["class","mt-4 mb-4 w-full bg-gray-800 rounded-lg p-4 border border-gray-700 animate-fade-in",4,"ngIf"],[1,"pt-10"],[1,"w-full","text-gray-300","flex","flex-col","gap-4","pb-6"],[1,"flex","justify-between","py-2","border-b","border-gray-700","2xl:text-2xl"],[3,"ngClass"],["class","flex justify-between py-2 border-b border-gray-700 2xl:text-2xl",4,"ngIf"],["class","mt-4 w-full bg-gray-800 rounded-lg p-4 border border-gray-700",4,"ngIf"],[1,"flex","justify-between","mt-4","gap-4","w-full"],[1,"flex","gap-4"],["aria-label","Cancelar altera\xE7\xF5es",1,"px-4","py-2","bg-gray-600","text-white","rounded-2xl","hover:bg-gray-700","transition","2xl:text-xl",3,"click"],["aria-label","Salvar altera\xE7\xF5es",1,"px-4","py-2","bg-amber-600","text-white","rounded-2xl","hover:bg-amber-700","transition","2xl:text-xl",3,"click"],["title","Gr\xE1fico",1,"px-4","py-2","text-white","rounded-2xl","hover:bg-amber-600","transition","2xl:text-xl",2,"background-color","#242427"],["src","assets/bar_chart.svg","alt","gr\xE1fico",1,"2xl:w-20"],["title","Registros","aria-label","Mostrar registros",1,"px-4","py-4","text-white","rounded-2xl","hover:bg-amber-600","transition","2xl:text-xl","relative",2,"background-color","#242427",3,"click","ngClass"],["src","assets/overview.svg","alt","vis\xE3o geral",1,"2xl:w-20"],["class","absolute -top-2 -right-2 bg-amber-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm",4,"ngIf"],["title","Coment\xE1rios","aria-label","Mostrar coment\xE1rios",1,"px-4","py-4","text-white","rounded-2xl","hover:bg-amber-600","transition","2xl:text-xl","relative",2,"background-color","#242427",3,"click","ngClass"],["src","assets/chat.svg","alt","chat",1,"2xl:w-20"],["class","absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm",4,"ngIf"],[1,"flex","flex-col","lg:flex-row","justify-between","gap-3","2xl:gap-8","p-2","rounded-lg"],[1,"flex","items-center","gap-3","xl:gap-8"],[1,"w-8","h-8","lg:w-14","lg:h-14","2xl:w-20","2xl:h-20","rounded-full","flex","items-center","justify-center",3,"ngStyle"],[1,"w-4","h-4","lg:w-7","lg:h-7","2xl:w-10","2xl:h-10",3,"src","alt"],[1,"flex","flex-col"],[1,"text-white","text-sm","2xl:text-2xl","lg:text-nowrap","font-bold"],[1,"text-amber-500","2xl:text-2xl","font-bold"],[1,"ml-2","text-red-400"],["aria-label","Registrar troca de \xF3leo",1,"ml-2","bg-amber-600","text-white","text-xs","px-2","py-1","rounded","hover:bg-amber-700",3,"click"],[1,"mt-4","mb-4","w-full","bg-gray-800","rounded-lg","p-4","border","border-gray-700","animate-fade-in"],[1,"text-amber-400","text-lg","2xl:text-3xl","font-bold","mb-3"],[1,"flex","flex-col","gap-3"],[1,"flex","gap-3","justify-between","items-center"],[1,"flex","gap-2"],[1,"bg-gray-600","text-white","px-4","py-1","rounded","hover:bg-gray-700",3,"click"],[1,"bg-amber-600","text-white","px-4","py-1","rounded","hover:bg-amber-700",3,"click"],[1,"mt-4","w-full","bg-gray-800","rounded-lg","p-4","border","border-gray-700"],[1,"flex","flex-col","gap-3","max-h-44","overflow-y-auto"],["class","bg-gray-900 p-3 mb-2 rounded-md",4,"ngFor","ngForOf"],[1,"mt-2","flex","gap-2"],["type","text","placeholder","Adicionar coment\xE1rio...",1,"w-full","bg-gray-900","border","border-gray-700","rounded-lg","px-3","py-2","text-white",3,"ngModelChange","ngModel"],[1,"bg-amber-600","text-white","rounded-lg","px-4","py-2","hover:bg-amber-700",3,"click"],[1,"bg-gray-900","p-3","mb-2","rounded-md"],[1,"flex","justify-between","mb-1"],[1,"text-amber-400","font-semibold"],[1,"text-gray-500","text-sm"],["class","text-gray-400 text-center p-4",4,"ngIf"],[1,"text-gray-400","text-center","p-4"],[1,"absolute","-top-2","-right-2","bg-amber-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"],[1,"absolute","-top-2","-right-2","bg-red-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"]],template:function(t,o){t&1&&(u(0,"app-header-dsveiculos"),n(1,"section",0),p(2,Mo,2,1,"div",1),r(),u(3,"app-footer-dsveiculos"),p(4,Ko,67,35,"div",2)),t&2&&(a(2),s("ngIf",o.veiculos.length>0),a(2),s("ngIf",o.isHelpDialogOpen&&o.selectedVehicle))},dependencies:[V,P,D,S,N,H,K,J,W,G,Y],styles:["@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out forwards}.bg-gray-800[_ngcontent-%COMP%]{background-color:#242427}.bg-gray-900[_ngcontent-%COMP%]{background-color:#1a1a1d}.bg-amber-500[_ngcontent-%COMP%]{background-color:#f59e0b}.bg-amber-600[_ngcontent-%COMP%]{background-color:#d97706}.bg-amber-700[_ngcontent-%COMP%]{background-color:#b45309}.hover\\:bg-amber-600[_ngcontent-%COMP%]:hover{background-color:#d97706}button[_ngcontent-%COMP%]:focus, input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{outline:2px solid #F59E0B;outline-offset:2px}button[_ngcontent-%COMP%]{transition:background-color .2s,transform .1s}button[_ngcontent-%COMP%]:active{transform:scale(.98)}"]})}return i})();var Ne=i=>({"background-color":i}),Jo=i=>({"text-red-400":i}),Wo=(i,c,e,t)=>({"text-green-400":i,"text-orange-400":c,"text-red-400":e,"text-gray-400":t}),Go=(i,c)=>({"text-red-400":i,"text-green-400":c}),qt=i=>({"bg-amber-700":i});function Yo(i,c){if(i&1&&(n(0,"div",11),l(1),r()),i&2){let e=m().$implicit;a(),_(" ",e.comentarios.length," ")}}function Zo(i,c){i&1&&(n(0,"div",12)(1,"span",13),u(2,"img",14),r()())}function Qo(i,c){if(i&1&&(n(0,"span",15),u(1,"img",16),r()),i&2){let e=c.$implicit,t=c.index,o=m(3);s("ngStyle",b(3,Ne,e.cor)),a(),s("src",e.icone,E)("alt",o.getAttributeName(t))}}function Xo(i,c){if(i&1){let e=C();n(0,"div",5),f("click",function(){let o=g(e).$implicit,d=m(2);return x(d.openHelpDialog(o))})("keydown.enter",function(){let o=g(e).$implicit,d=m(2);return x(d.openHelpDialog(o))})("keydown.space",function(o){let d=g(e).$implicit;return m(2).openHelpDialog(d),x(o.preventDefault())}),p(1,Yo,2,1,"div",6)(2,Zo,3,0,"div",7),n(3,"h3",8),l(4),r(),n(5,"div",9),p(6,Qo,2,5,"span",10),r()()}if(i&2){let e=c.$implicit,t=m(2);s("ngStyle",b(6,Ne,e.atributos[2].cor+"99")),U("aria-label","Mostrar detalhes do ve\xEDculo "+e.id),a(),s("ngIf",e.comentarios&&e.comentarios.length>0),a(),s("ngIf",t.shouldShowOilChangeAlert(e)),a(2),h(e.id),a(2),s("ngForOf",e.atributos)}}function en(i,c){if(i&1&&(n(0,"div",3),p(1,Xo,7,8,"div",4),r()),i&2){let e=m();a(),s("ngForOf",e.veiculos)}}function tn(i,c){if(i&1&&(n(0,"div",55)(1,"div",56)(2,"span",57),u(3,"img",58),r(),n(4,"div",59)(5,"span",60),l(6),r(),n(7,"span",61),l(8,"0"),r()()()()),i&2){let e=c.$implicit,t=c.index,o=m(2);a(2),s("ngStyle",b(4,Ne,e.cor)),a(),s("src",e.icone,E)("alt",o.getAttributeName(t)),a(3),h(o.getAttributeName(t))}}function on(i,c){i&1&&u(0,"span",62)}function nn(i,c){if(i&1){let e=C();n(0,"button",63),f("click",function(){g(e);let o=m(2);return x(o.toggleOilChangeForm())}),l(1," Registrar troca "),r()}}function rn(i,c){if(i&1){let e=C();n(0,"div",64)(1,"h4",65),l(2," Registrar Troca de \xD3leo "),r(),n(3,"div",66)(4,"div",67)(5,"p",30),l(6),r(),n(7,"div",68)(8,"button",69),f("click",function(){g(e);let o=m(2);return x(o.toggleOilChangeForm())}),l(9," Cancelar "),r(),n(10,"button",70),f("click",function(){g(e);let o=m(2);return x(o.registrarTrocaOleo())}),l(11," Confirmar "),r()()()()()}if(i&2){let e=m(2);a(6),_(" Confirma a troca de \xF3leo para o ve\xEDculo ",e.selectedVehicle.id,"? ")}}function an(i,c){if(i&1&&(n(0,"div",39)(1,"span"),l(2,"UltPedidoID:"),r(),n(3,"span"),l(4),r()()),i&2){let e=m(2);a(4),h(e.selectedVehicle.ultPedidoID)}}function ln(i,c){if(i&1&&(n(0,"div",39)(1,"span"),l(2,"Integra\xE7\xE3o:"),r(),n(3,"span"),l(4),r()()),i&2){let e=m(2);a(4),h(e.selectedVehicle.ultIntegracao)}}function sn(i,c){if(i&1&&(n(0,"div",77)(1,"div",78)(2,"span",79),l(3),r(),n(4,"span",80),l(5),r()(),n(6,"p",30),l(7),r()()),i&2){let e=c.$implicit;a(3),h(e.author),a(2),h(e.date),a(2),h(e.text)}}function cn(i,c){if(i&1){let e=C();n(0,"div",71)(1,"h4",65),l(2," Coment\xE1rios "),r(),n(3,"div",72),p(4,sn,8,3,"div",73),r(),n(5,"div",74)(6,"input",75),$("ngModelChange",function(o){g(e);let d=m(2);return L(d.newComment,o)||(d.newComment=o),x(o)}),r(),n(7,"button",76),f("click",function(){g(e);let o=m(2);return x(o.addComment())}),l(8," Enviar "),r()()()}if(i&2){let e=m(2);s("@slideUpDown",e.showComments?"open":"closed"),a(4),s("ngForOf",e.selectedVehicle.comentarios),a(2),B("ngModel",e.newComment)}}function dn(i,c){if(i&1&&(n(0,"div",77)(1,"div",78)(2,"span",79),l(3),r(),n(4,"span",80),l(5),r()(),n(6,"p",30),l(7),r()()),i&2){let e=c.$implicit;a(3),h(e.author),a(2),h(e.date),a(2),h(e.text)}}function mn(i,c){i&1&&(n(0,"div",82),l(1," Nenhum registro de troca de \xF3leo encontrado. "),r())}function un(i,c){if(i&1&&(n(0,"div",71)(1,"h4",65),l(2," Registros "),r(),n(3,"div",72),p(4,dn,8,3,"div",73)(5,mn,2,0,"div",81),r()()),i&2){let e=m(2);s("@slideUpDown",e.showOilChangeRecords?"open":"closed"),a(4),s("ngForOf",e.selectedVehicle.trocasOleo),a(),s("ngIf",!e.selectedVehicle.trocasOleo||e.selectedVehicle.trocasOleo.length===0)}}function pn(i,c){if(i&1&&(n(0,"div",83),l(1),r()),i&2){let e=m(2);a(),_(" ",e.selectedVehicle.trocasOleo.length," ")}}function hn(i,c){if(i&1&&(n(0,"div",84),l(1),r()),i&2){let e=m(2);a(),_(" ",e.selectedVehicle.comentarios.length," ")}}function gn(i,c){if(i&1){let e=C();n(0,"div",17)(1,"div",18)(2,"div",19)(3,"button",20),f("click",function(){g(e);let o=m();return x(o.closeHelpDialog())})("keydown.enter",function(){g(e);let o=m();return x(o.closeHelpDialog())}),l(4," \u2715 "),r()(),n(5,"div",21)(6,"div",22),p(7,tn,9,6,"div",23),r(),n(8,"div",24)(9,"div",25)(10,"h3",26),l(11),r(),n(12,"div",27)(13,"span"),l(14,"Euro 5"),r(),n(15,"span"),l(16,"1721"),r()()(),n(17,"div",28)(18,"div")(19,"p",29),l(20," Od\xF4metro: "),n(21,"span",30),l(22),r()(),n(23,"span",31),l(24,"Registro: 24/04/2025 03:00"),r()(),n(25,"div")(26,"p",32),l(27," KM desde \xFAltima troca: "),n(28,"span",30),l(29),r(),p(30,on,1,0,"span",33),r(),n(31,"div",34)(32,"span",31),l(33),r(),p(34,nn,2,0,"button",35),r()()(),p(35,rn,12,1,"div",36),n(36,"div",37)(37,"div",38)(38,"div",39)(39,"span"),l(40,"Status:"),r(),n(41,"span",40),l(42),r()(),p(43,an,5,1,"div",41)(44,ln,5,1,"div",41),n(45,"div",39)(46,"span"),l(47,"Troca de \xD3leo:"),r(),n(48,"span",40),l(49),r()()(),p(50,cn,9,3,"div",42)(51,un,6,3,"div",42),n(52,"div",43)(53,"div",44)(54,"button",45),f("click",function(){g(e);let o=m();return x(o.cancelChanges())}),l(55," Cancelar "),r(),n(56,"button",46),f("click",function(){g(e);let o=m();return x(o.saveChanges())}),l(57," Salvar "),r()(),n(58,"div",44)(59,"button",47),u(60,"img",48),r(),n(61,"button",49),f("click",function(){g(e);let o=m();return x(o.toggleOilChangeRecords())}),u(62,"img",50),p(63,pn,2,1,"div",51),r(),n(64,"button",52),f("click",function(){g(e);let o=m();return x(o.toggleComments())}),u(65,"img",53),p(66,hn,2,1,"div",54),r()()()()()()()()}if(i&2){let e=m();a(7),s("ngForOf",e.selectedVehicle.atributos),a(4),_(" ",e.selectedVehicle.id," "),a(11),h(e.selectedVehicle.odoAtual),a(4),s("ngClass",b(21,Jo,e.selectedVehicle.precisaTrocaOleo)),a(3),h(e.selectedVehicle.odoDesdeUltimaTroca||0),a(),s("ngIf",e.selectedVehicle.precisaTrocaOleo),a(3),_("\xDAltima troca de \xF3leo: ",e.selectedVehicle.ultimaTrocaOleo||"N\xE3o registrada",""),a(),s("ngIf",e.selectedVehicle.precisaTrocaOleo),a(),s("ngIf",e.showOilChangeForm),a(6),s("ngClass",q(23,Wo,e.selectedVehicle.status==="OK",e.selectedVehicle.status==="Oficina",e.selectedVehicle.status==="Sem Comunicar",e.selectedVehicle.status==="Inativo")),a(),h(e.selectedVehicle.status),a(),s("ngIf",e.selectedVehicle.ultPedidoID),a(),s("ngIf",e.selectedVehicle.ultIntegracao),a(4),s("ngClass",T(28,Go,e.selectedVehicle.precisaTrocaOleo,!e.selectedVehicle.precisaTrocaOleo)),a(),_(" ",e.selectedVehicle.precisaTrocaOleo?"Necess\xE1ria":"OK"," "),a(),s("ngIf",e.showComments),a(),s("ngIf",e.showOilChangeRecords),a(10),s("ngClass",b(31,qt,e.showOilChangeRecords)),a(2),s("ngIf",e.selectedVehicle.trocasOleo&&e.selectedVehicle.trocasOleo.length>0),a(),s("ngClass",b(33,qt,e.showComments)),a(2),s("ngIf",e.selectedVehicle.comentarios&&e.selectedVehicle.comentarios.length>0)}}var zt=(()=>{class i{http;renderer;cdRef;veiculos=[];selectedVehicle=null;isHelpDialogOpen=!1;originalData=null;originalVehicleState=null;showComments=!1;newComment="";showOilChangeForm=!1;lastOilChangeDate="";showOilChangeRecords=!1;icones=["assets/device_thermostat.svg","assets/shutter_speed_minus.svg","assets/compress.svg","assets/do_not_step.svg","assets/air.svg","assets/speed.svg"];constructor(e,t,o){this.http=e,this.renderer=t,this.cdRef=o}ngOnInit(){console.log("CardVeiculoComponent initialized"),this.loadVehicleData()}loadVehicleData(){this.http.get("assets/mocks/veiculos_mock.json").subscribe({next:e=>{console.log("Data loaded:",e),this.originalData=JSON.parse(JSON.stringify(e)),this.veiculos=e.veiculos.map(t=>M(I({},t),{atributos:t.cores.map((o,d)=>({cor:o,icone:this.icones[d]||""})),comentarios:t.comentarios||[],odoAtual:t.odoAtual||0,ultimaTrocaOleo:t.ultimaTrocaOleo||null,odoNaUltimaTroca:t.odoNaUltimaTroca||0,trocasOleo:t.trocasOleo||[]})),this.veiculos.forEach(t=>{t.atributos.forEach((o,d)=>{o.cor=this.getClosestColorMatch(o.cor)}),this.calcularodoDesdeUltimaTroca(t)})},error:e=>{console.error("Erro ao carregar o JSON:",e)}})}calcularodoDesdeUltimaTroca(e){e.odoAtual&&e.odoNaUltimaTroca?e.odoDesdeUltimaTroca=e.odoAtual-e.odoNaUltimaTroca:e.odoDesdeUltimaTroca=e.odoAtual||0,e.precisaTrocaOleo=e.odoDesdeUltimaTroca>=1e4}registrarTrocaOleo(){if(!this.selectedVehicle)return;let e=new Date,t=`${e.toLocaleDateString("pt-BR")} ${e.getHours()}:${e.getMinutes().toString().padStart(2,"0")}`;this.selectedVehicle.ultimaTrocaOleo=e.toLocaleDateString("pt-BR"),this.selectedVehicle.odoNaUltimaTroca=this.selectedVehicle.odoAtual,this.selectedVehicle.odoDesdeUltimaTroca=0,this.selectedVehicle.precisaTrocaOleo=!1,this.selectedVehicle.trocasOleo||(this.selectedVehicle.trocasOleo=[]),this.selectedVehicle.trocasOleo.unshift({author:"Sistema",date:t,text:`Troca de \xF3leo realizada com od\xF4metro ${this.selectedVehicle.odoAtual}.`}),this.showOilChangeForm=!1,this.showOilChangeRecords=!0,this.cdRef.detectChanges()}toggleOilChangeForm(){this.showOilChangeForm=!this.showOilChangeForm}toggleOilChangeRecords(){this.showOilChangeRecords=!this.showOilChangeRecords,this.showOilChangeRecords&&(this.showComments=!1,this.selectedVehicle.trocasOleo||(this.selectedVehicle.trocasOleo=[]),this.cdRef.detectChanges())}shouldShowOilChangeAlert(e){return e.precisaTrocaOleo===!0}getClosestColorMatch(e){let t=this.getAllAttributeColors();return t.includes(e)?e:t[0]}getBackgroundColor(e){switch(e){case"OK":return"white";case"Oficina":return"#FF9858";case"Sem Comunicar":return"#E25652";case"Inativo":return"#B9B9B9";default:return"white"}}getIconPath(e){return this.icones[e]||""}getAttributeName(e){return["Temperatura","Torque","Press\xE3o Turbina","Pedal","Ar Comprimido","Max. Velocidade"][e]||`Atributo ${e+1}`}getColorOptions(){return[{label:"Inativo",value:"#242427"},{label:"Verde",value:"#387E38"},{label:"Laranja",value:"#F56B15"},{label:"Vermelho",value:"#AE2724"},{label:"Roxo",value:"#6224AE"}]}openHelpDialog(e){this.selectedVehicle=JSON.parse(JSON.stringify(e)),this.originalVehicleState=JSON.parse(JSON.stringify(e)),this.selectedVehicle.atributos.forEach(t=>{t.cor=this.getClosestColorMatch(t.cor)}),this.selectedVehicle.comentarios||(this.selectedVehicle.comentarios=[]),this.selectedVehicle.trocasOleo||(this.selectedVehicle.trocasOleo=[]),this.isHelpDialogOpen=!0,this.renderer.addClass(document.body,"overflow-hidden"),this.showComments=!1,this.showOilChangeRecords=!1,this.showOilChangeForm=!1,this.newComment="",setTimeout(()=>{let t=document.querySelector("#modal-close-button");t&&t.focus()},100)}closeHelpDialog(){this.isHelpDialogOpen=!1,this.renderer.removeClass(document.body,"overflow-hidden"),this.selectedVehicle=null,this.originalVehicleState=null,this.showComments=!1,this.showOilChangeForm=!1,this.showOilChangeRecords=!1,this.newComment=""}toggleComments(){this.showComments=!this.showComments,this.showComments&&(this.showOilChangeRecords=!1,this.cdRef.detectChanges())}addComment(){if(this.newComment.trim()&&this.selectedVehicle){let e=new Date,t=`${e.toLocaleDateString("pt-BR")} ${e.getHours()}:${e.getMinutes().toString().padStart(2,"0")}`;this.selectedVehicle.comentarios||(this.selectedVehicle.comentarios=[]),this.selectedVehicle.comentarios.unshift({author:"Usu\xE1rio Atual",date:t,text:this.newComment.trim()});let o=this.veiculos.findIndex(d=>d.id===this.selectedVehicle.id);o!==-1&&(this.veiculos[o].comentarios||(this.veiculos[o].comentarios=[]),this.veiculos[o].comentarios=[...this.selectedVehicle.comentarios]),this.newComment="",this.cdRef.detectChanges()}}getAllAttributeColors(){return this.getColorOptions().map(e=>e.value)}updateAttributeColor(e,t){if(!this.selectedVehicle)return;let d=t.target.value;this.selectedVehicle.atributos[e].cor=d}cancelChanges(){this.closeHelpDialog()}saveChanges(){if(this.selectedVehicle){let e=this.veiculos.findIndex(t=>t.id===this.selectedVehicle.id);e!==-1&&(this.veiculos[e].atributos.forEach((t,o)=>{o<this.selectedVehicle.atributos.length&&(t.cor=this.selectedVehicle.atributos[o].cor)}),this.veiculos[e].comentarios=[...this.selectedVehicle.comentarios],this.veiculos[e].trocasOleo=[...this.selectedVehicle.trocasOleo||[]],this.veiculos[e].ultimaTrocaOleo=this.selectedVehicle.ultimaTrocaOleo,this.veiculos[e].odoNaUltimaTroca=this.selectedVehicle.odoNaUltimaTroca,this.veiculos[e].odoDesdeUltimaTroca=this.selectedVehicle.odoDesdeUltimaTroca,this.veiculos[e].precisaTrocaOleo=this.selectedVehicle.precisaTrocaOleo,this.originalData&&this.originalData.veiculos&&this.originalData.veiculos[e]&&(this.originalData.veiculos[e].cores&&this.selectedVehicle.atributos.forEach((t,o)=>{o<this.originalData.veiculos[e].cores.length&&(this.originalData.veiculos[e].cores[o]=t.cor)}),this.originalData.veiculos[e].comentarios=[...this.selectedVehicle.comentarios],this.originalData.veiculos[e].trocasOleo=[...this.selectedVehicle.trocasOleo||[]],this.originalData.veiculos[e].ultimaTrocaOleo=this.selectedVehicle.ultimaTrocaOleo,this.originalData.veiculos[e].odoNaUltimaTroca=this.selectedVehicle.odoNaUltimaTroca),this.calcularodoDesdeUltimaTroca(this.veiculos[e]),this.saveChangesToJson())}this.closeHelpDialog()}saveChangesToJson(){console.log("Salvando altera\xE7\xF5es:",this.originalData)}handleEscapeKey(){this.isHelpDialogOpen&&this.closeHelpDialog()}handleTabKey(e){if(!this.isHelpDialogOpen)return;let t=document.querySelector('[role="dialog"]');if(!t)return;let o=t.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(o.length===0)return;let d=o[0],v=o[o.length-1];e.shiftKey&&document.activeElement===d?(v.focus(),e.preventDefault()):!e.shiftKey&&document.activeElement===v&&(d.focus(),e.preventDefault())}static \u0275fac=function(t){return new(t||i)(w(z),w(R),w(j))};static \u0275cmp=y({type:i,selectors:[["app-card-veiculo-turbina"]],hostBindings:function(t,o){t&1&&f("keydown.escape",function(){return o.handleEscapeKey()},!1,F)("keydown.tab",function(v){return o.handleTabKey(v)},!1,F)},decls:5,vars:2,consts:[[1,"pb-28","pt-44"],["class","grid grid-cols-1 md:grid-cols-4 lg:grid-cols-12 lg:flex flex-wrap items-center justify-center gap-4",4,"ngIf"],["class","fixed inset-0 z-50 md:p-4 flex items-center justify-center bg-black bg-opacity-50 overflow-y-scroll","role","dialog","aria-modal","true","aria-labelledby","modal-title",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-4","lg:grid-cols-12","lg:flex","flex-wrap","items-center","justify-center","gap-4"],["class","shadow-2xl p-3 rounded-2xl flex flex-col items-center justify-center cursor-pointer border-2 relative transition-transform duration-300 hover:scale-105 hover:opacity-50","tabindex","0","role","button",3,"ngStyle","click","keydown.enter","keydown.space",4,"ngFor","ngForOf"],["tabindex","0","role","button",1,"shadow-2xl","p-3","rounded-2xl","flex","flex-col","items-center","justify-center","cursor-pointer","border-2","relative","transition-transform","duration-300","hover:scale-105","hover:opacity-50",3,"click","keydown.enter","keydown.space","ngStyle"],["class","absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm","aria-label","Este ve\xEDculo possui coment\xE1rios",4,"ngIf"],["class","absolute top-2 left-2 bg-amber-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm","aria-label","Este ve\xEDculo precisa de troca de \xF3leo",4,"ngIf"],[1,"text-black","font-bold","mb-2","text-3xl"],[1,"p-1.5","rounded-xl","w-full","flex","justify-center","gap-1",2,"background-color","#141416"],["class","w-7 h-7 rounded-full flex items-center justify-center",3,"ngStyle",4,"ngFor","ngForOf"],["aria-label","Este ve\xEDculo possui coment\xE1rios",1,"absolute","-top-2","-right-2","bg-red-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"],["aria-label","Este ve\xEDculo precisa de troca de \xF3leo",1,"absolute","top-2","left-2","bg-amber-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"],[1,"text-xs"],["src","assets/water_drop.svg","alt","Alerta de troca de \xF3leo"],[1,"w-7","h-7","rounded-full","flex","items-center","justify-center",3,"ngStyle"],[3,"src","alt"],["role","dialog","aria-modal","true","aria-labelledby","modal-title",1,"fixed","inset-0","z-50","md:p-4","flex","items-center","justify-center","bg-black","bg-opacity-50","overflow-y-scroll"],[1,"rounded-3xl","shadow-lg","w-max","max-w-[90vw]","h-max","2xl:max-w-[100vw]","2xl:max-h-[100vh]","overflow-y-auto","animate-fade-in","relative",2,"background-color","#141416"],[1,"absolute","right-6","top-6","2xl:top-12","2xl:right-12"],["id","modal-close-button","aria-label","Fechar modal",1,"text-lg","xl:text-4xl","font-semibold","text-gray-500","hover:text-amber-400",3,"click","keydown.enter"],[1,"rounded-3xl","flex","flex-col-reverse","lg:flex-row","justify-center","w-max","2xl:max-w-[100vw]","h-max","2xl:max-h-[100vh]"],[1,"grid","grid-cols-1","md:grid-cols-3","lg:grid-cols-1","lg:flex","lg:flex-col","justify-center","rounded-3xl","gap-3","w-full","2xl:max-h-[100vh]","p-6","2xl:p-24",2,"background-color","#242427"],["class","flex flex-col lg:flex-row justify-between gap-3 2xl:gap-8 p-2 rounded-lg",4,"ngFor","ngForOf"],[1,"p-8","2xl:p-20","flex","flex-col","justify-between","w-full","2xl:max-w-[100vw]","2xl:max-h-[100vh]"],[1,"flex","flex-col","mb-10"],[1,"font-bold","text-2xl","lg:text-4xl","2xl:text-6xl","text-amber-400"],[1,"flex","gap-4","text-sm","2xl:text-2xl","mb-1","font-bold","text-white"],[1,"flex","flex-col","justify-between","gap-6","mb-4"],[1,"text-amber-400","text-md","lg:text-lg","2xl:text-3xl","font-bold","mb-2"],[1,"text-white"],[1,"text-lg","text-white"],[1,"text-amber-400","text-md","lg:text-lg","2xl:text-2xl","font-bold","mb-2",3,"ngClass"],["class","ml-2 text-red-400",4,"ngIf"],[1,"flex","items-center","gap-2"],["class","ml-2 bg-amber-600 text-white text-xs px-2 py-1 rounded hover:bg-amber-700","aria-label","Registrar troca de \xF3leo",3,"click",4,"ngIf"],["class","mt-4 mb-4 w-full bg-gray-800 rounded-lg p-4 border border-gray-700 animate-fade-in",4,"ngIf"],[1,"pt-10"],[1,"w-full","text-gray-300","flex","flex-col","gap-4","pb-6"],[1,"flex","justify-between","py-2","border-b","border-gray-700","2xl:text-2xl"],[3,"ngClass"],["class","flex justify-between py-2 border-b border-gray-700 2xl:text-2xl",4,"ngIf"],["class","mt-4 w-full bg-gray-800 rounded-lg p-4 border border-gray-700",4,"ngIf"],[1,"flex","justify-between","mt-4","gap-4","w-full"],[1,"flex","gap-4"],["aria-label","Cancelar altera\xE7\xF5es",1,"px-4","py-2","bg-gray-600","text-white","rounded-2xl","hover:bg-gray-700","transition","2xl:text-xl",3,"click"],["aria-label","Salvar altera\xE7\xF5es",1,"px-4","py-2","bg-amber-600","text-white","rounded-2xl","hover:bg-amber-700","transition","2xl:text-xl",3,"click"],["title","Gr\xE1fico",1,"px-4","py-2","text-white","rounded-2xl","hover:bg-amber-600","transition","2xl:text-xl",2,"background-color","#242427"],["src","assets/bar_chart.svg","alt","gr\xE1fico",1,"2xl:w-20"],["title","Registros","aria-label","Mostrar registros",1,"px-4","py-4","text-white","rounded-2xl","hover:bg-amber-600","transition","2xl:text-xl","relative",2,"background-color","#242427",3,"click","ngClass"],["src","assets/overview.svg","alt","vis\xE3o geral",1,"2xl:w-20"],["class","absolute -top-2 -right-2 bg-amber-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm",4,"ngIf"],["title","Coment\xE1rios","aria-label","Mostrar coment\xE1rios",1,"px-4","py-4","text-white","rounded-2xl","hover:bg-amber-600","transition","2xl:text-xl","relative",2,"background-color","#242427",3,"click","ngClass"],["src","assets/chat.svg","alt","chat",1,"2xl:w-20"],["class","absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm",4,"ngIf"],[1,"flex","flex-col","lg:flex-row","justify-between","gap-3","2xl:gap-8","p-2","rounded-lg"],[1,"flex","items-center","gap-3","xl:gap-8"],[1,"w-8","h-8","lg:w-14","lg:h-14","2xl:w-20","2xl:h-20","rounded-full","flex","items-center","justify-center",3,"ngStyle"],[1,"w-4","h-4","lg:w-7","lg:h-7","2xl:w-10","2xl:h-10",3,"src","alt"],[1,"flex","flex-col"],[1,"text-white","text-sm","2xl:text-2xl","lg:text-nowrap","font-bold"],[1,"text-amber-500","2xl:text-2xl","font-bold"],[1,"ml-2","text-red-400"],["aria-label","Registrar troca de \xF3leo",1,"ml-2","bg-amber-600","text-white","text-xs","px-2","py-1","rounded","hover:bg-amber-700",3,"click"],[1,"mt-4","mb-4","w-full","bg-gray-800","rounded-lg","p-4","border","border-gray-700","animate-fade-in"],[1,"text-amber-400","text-lg","2xl:text-3xl","font-bold","mb-3"],[1,"flex","flex-col","gap-3"],[1,"flex","gap-3","justify-between","items-center"],[1,"flex","gap-2"],[1,"bg-gray-600","text-white","px-4","py-1","rounded","hover:bg-gray-700",3,"click"],[1,"bg-amber-600","text-white","px-4","py-1","rounded","hover:bg-amber-700",3,"click"],[1,"mt-4","w-full","bg-gray-800","rounded-lg","p-4","border","border-gray-700"],[1,"flex","flex-col","gap-3","max-h-44","overflow-y-auto"],["class","bg-gray-900 p-3 mb-2 rounded-md",4,"ngFor","ngForOf"],[1,"mt-2","flex","gap-2"],["type","text","placeholder","Adicionar coment\xE1rio...",1,"w-full","bg-gray-900","border","border-gray-700","rounded-lg","px-3","py-2","text-white",3,"ngModelChange","ngModel"],[1,"bg-amber-600","text-white","rounded-lg","px-4","py-2","hover:bg-amber-700",3,"click"],[1,"bg-gray-900","p-3","mb-2","rounded-md"],[1,"flex","justify-between","mb-1"],[1,"text-amber-400","font-semibold"],[1,"text-gray-500","text-sm"],["class","text-gray-400 text-center p-4",4,"ngIf"],[1,"text-gray-400","text-center","p-4"],[1,"absolute","-top-2","-right-2","bg-amber-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"],[1,"absolute","-top-2","-right-2","bg-red-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"]],template:function(t,o){t&1&&(u(0,"app-header-dsveiculos"),n(1,"section",0),p(2,en,2,1,"div",1),r(),u(3,"app-footer-dsveiculos"),p(4,gn,67,35,"div",2)),t&2&&(a(2),s("ngIf",o.veiculos.length>0),a(2),s("ngIf",o.isHelpDialogOpen&&o.selectedVehicle))},dependencies:[V,P,D,S,N,H,K,J,W,G,Y],styles:["@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out forwards}.bg-gray-800[_ngcontent-%COMP%]{background-color:#242427}.bg-gray-900[_ngcontent-%COMP%]{background-color:#1a1a1d}.bg-amber-500[_ngcontent-%COMP%]{background-color:#f59e0b}.bg-amber-600[_ngcontent-%COMP%]{background-color:#d97706}.bg-amber-700[_ngcontent-%COMP%]{background-color:#b45309}.hover\\:bg-amber-600[_ngcontent-%COMP%]:hover{background-color:#d97706}button[_ngcontent-%COMP%]:focus, input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{outline:2px solid #F59E0B;outline-offset:2px}button[_ngcontent-%COMP%]{transition:background-color .2s,transform .1s}button[_ngcontent-%COMP%]:active{transform:scale(.98)}"]})}return i})();var He=i=>({"background-color":i}),xn=i=>({"text-red-400":i}),fn=(i,c,e,t)=>({"text-green-400":i,"text-orange-400":c,"text-red-400":e,"text-gray-400":t}),vn=(i,c)=>({"text-red-400":i,"text-green-400":c}),Kt=i=>({"bg-amber-700":i});function _n(i,c){if(i&1&&(n(0,"div",11),l(1),r()),i&2){let e=m().$implicit;a(),_(" ",e.comentarios.length," ")}}function bn(i,c){i&1&&(n(0,"div",12)(1,"span",13),u(2,"img",14),r()())}function Cn(i,c){if(i&1&&(n(0,"span",15),u(1,"img",16),r()),i&2){let e=c.$implicit,t=c.index,o=m(3);s("ngStyle",b(3,He,e.cor)),a(),s("src",e.icone,E)("alt",o.getAttributeName(t))}}function wn(i,c){if(i&1){let e=C();n(0,"div",5),f("click",function(){let o=g(e).$implicit,d=m(2);return x(d.openHelpDialog(o))})("keydown.enter",function(){let o=g(e).$implicit,d=m(2);return x(d.openHelpDialog(o))})("keydown.space",function(o){let d=g(e).$implicit;return m(2).openHelpDialog(d),x(o.preventDefault())}),p(1,_n,2,1,"div",6)(2,bn,3,0,"div",7),n(3,"h3",8),l(4),r(),n(5,"div",9),p(6,Cn,2,5,"span",10),r()()}if(i&2){let e=c.$implicit,t=m(2);s("ngStyle",b(6,He,e.atributos[5].cor+"99")),U("aria-label","Mostrar detalhes do ve\xEDculo "+e.id),a(),s("ngIf",e.comentarios&&e.comentarios.length>0),a(),s("ngIf",t.shouldShowOilChangeAlert(e)),a(2),h(e.id),a(2),s("ngForOf",e.atributos)}}function yn(i,c){if(i&1&&(n(0,"div",3),p(1,wn,7,8,"div",4),r()),i&2){let e=m();a(),s("ngForOf",e.veiculos)}}function Vn(i,c){if(i&1&&(n(0,"div",55)(1,"div",56)(2,"span",57),u(3,"img",58),r(),n(4,"div",59)(5,"span",60),l(6),r(),n(7,"span",61),l(8,"0"),r()()()()),i&2){let e=c.$implicit,t=c.index,o=m(2);a(2),s("ngStyle",b(4,He,e.cor)),a(),s("src",e.icone,E)("alt",o.getAttributeName(t)),a(3),h(o.getAttributeName(t))}}function On(i,c){i&1&&u(0,"span",62)}function Sn(i,c){if(i&1){let e=C();n(0,"button",63),f("click",function(){g(e);let o=m(2);return x(o.toggleOilChangeForm())}),l(1," Registrar troca "),r()}}function En(i,c){if(i&1){let e=C();n(0,"div",64)(1,"h4",65),l(2," Registrar Troca de \xD3leo "),r(),n(3,"div",66)(4,"div",67)(5,"p",30),l(6),r(),n(7,"div",68)(8,"button",69),f("click",function(){g(e);let o=m(2);return x(o.toggleOilChangeForm())}),l(9," Cancelar "),r(),n(10,"button",70),f("click",function(){g(e);let o=m(2);return x(o.registrarTrocaOleo())}),l(11," Confirmar "),r()()()()()}if(i&2){let e=m(2);a(6),_(" Confirma a troca de \xF3leo para o ve\xEDculo ",e.selectedVehicle.id,"? ")}}function Tn(i,c){if(i&1&&(n(0,"div",39)(1,"span"),l(2,"UltPedidoID:"),r(),n(3,"span"),l(4),r()()),i&2){let e=m(2);a(4),h(e.selectedVehicle.ultPedidoID)}}function Dn(i,c){if(i&1&&(n(0,"div",39)(1,"span"),l(2,"Integra\xE7\xE3o:"),r(),n(3,"span"),l(4),r()()),i&2){let e=m(2);a(4),h(e.selectedVehicle.ultIntegracao)}}function kn(i,c){if(i&1&&(n(0,"div",77)(1,"div",78)(2,"span",79),l(3),r(),n(4,"span",80),l(5),r()(),n(6,"p",30),l(7),r()()),i&2){let e=c.$implicit;a(3),h(e.author),a(2),h(e.date),a(2),h(e.text)}}function In(i,c){if(i&1){let e=C();n(0,"div",71)(1,"h4",65),l(2," Coment\xE1rios "),r(),n(3,"div",72),p(4,kn,8,3,"div",73),r(),n(5,"div",74)(6,"input",75),$("ngModelChange",function(o){g(e);let d=m(2);return L(d.newComment,o)||(d.newComment=o),x(o)}),r(),n(7,"button",76),f("click",function(){g(e);let o=m(2);return x(o.addComment())}),l(8," Enviar "),r()()()}if(i&2){let e=m(2);s("@slideUpDown",e.showComments?"open":"closed"),a(4),s("ngForOf",e.selectedVehicle.comentarios),a(2),B("ngModel",e.newComment)}}function Mn(i,c){if(i&1&&(n(0,"div",77)(1,"div",78)(2,"span",79),l(3),r(),n(4,"span",80),l(5),r()(),n(6,"p",30),l(7),r()()),i&2){let e=c.$implicit;a(3),h(e.author),a(2),h(e.date),a(2),h(e.text)}}function Fn(i,c){i&1&&(n(0,"div",82),l(1," Nenhum registro de troca de \xF3leo encontrado. "),r())}function An(i,c){if(i&1&&(n(0,"div",71)(1,"h4",65),l(2," Registros "),r(),n(3,"div",72),p(4,Mn,8,3,"div",73)(5,Fn,2,0,"div",81),r()()),i&2){let e=m(2);s("@slideUpDown",e.showOilChangeRecords?"open":"closed"),a(4),s("ngForOf",e.selectedVehicle.trocasOleo),a(),s("ngIf",!e.selectedVehicle.trocasOleo||e.selectedVehicle.trocasOleo.length===0)}}function Pn(i,c){if(i&1&&(n(0,"div",83),l(1),r()),i&2){let e=m(2);a(),_(" ",e.selectedVehicle.trocasOleo.length," ")}}function jn(i,c){if(i&1&&(n(0,"div",84),l(1),r()),i&2){let e=m(2);a(),_(" ",e.selectedVehicle.comentarios.length," ")}}function Rn(i,c){if(i&1){let e=C();n(0,"div",17)(1,"div",18)(2,"div",19)(3,"button",20),f("click",function(){g(e);let o=m();return x(o.closeHelpDialog())})("keydown.enter",function(){g(e);let o=m();return x(o.closeHelpDialog())}),l(4," \u2715 "),r()(),n(5,"div",21)(6,"div",22),p(7,Vn,9,6,"div",23),r(),n(8,"div",24)(9,"div",25)(10,"h3",26),l(11),r(),n(12,"div",27)(13,"span"),l(14,"Euro 5"),r(),n(15,"span"),l(16,"1721"),r()()(),n(17,"div",28)(18,"div")(19,"p",29),l(20," Od\xF4metro: "),n(21,"span",30),l(22),r()(),n(23,"span",31),l(24,"Registro: 24/04/2025 03:00"),r()(),n(25,"div")(26,"p",32),l(27," KM desde \xFAltima troca: "),n(28,"span",30),l(29),r(),p(30,On,1,0,"span",33),r(),n(31,"div",34)(32,"span",31),l(33),r(),p(34,Sn,2,0,"button",35),r()()(),p(35,En,12,1,"div",36),n(36,"div",37)(37,"div",38)(38,"div",39)(39,"span"),l(40,"Status:"),r(),n(41,"span",40),l(42),r()(),p(43,Tn,5,1,"div",41)(44,Dn,5,1,"div",41),n(45,"div",39)(46,"span"),l(47,"Troca de \xD3leo:"),r(),n(48,"span",40),l(49),r()()(),p(50,In,9,3,"div",42)(51,An,6,3,"div",42),n(52,"div",43)(53,"div",44)(54,"button",45),f("click",function(){g(e);let o=m();return x(o.cancelChanges())}),l(55," Cancelar "),r(),n(56,"button",46),f("click",function(){g(e);let o=m();return x(o.saveChanges())}),l(57," Salvar "),r()(),n(58,"div",44)(59,"button",47),u(60,"img",48),r(),n(61,"button",49),f("click",function(){g(e);let o=m();return x(o.toggleOilChangeRecords())}),u(62,"img",50),p(63,Pn,2,1,"div",51),r(),n(64,"button",52),f("click",function(){g(e);let o=m();return x(o.toggleComments())}),u(65,"img",53),p(66,jn,2,1,"div",54),r()()()()()()()()}if(i&2){let e=m();a(7),s("ngForOf",e.selectedVehicle.atributos),a(4),_(" ",e.selectedVehicle.id," "),a(11),h(e.selectedVehicle.odoAtual),a(4),s("ngClass",b(21,xn,e.selectedVehicle.precisaTrocaOleo)),a(3),h(e.selectedVehicle.odoDesdeUltimaTroca||0),a(),s("ngIf",e.selectedVehicle.precisaTrocaOleo),a(3),_("\xDAltima troca de \xF3leo: ",e.selectedVehicle.ultimaTrocaOleo||"N\xE3o registrada",""),a(),s("ngIf",e.selectedVehicle.precisaTrocaOleo),a(),s("ngIf",e.showOilChangeForm),a(6),s("ngClass",q(23,fn,e.selectedVehicle.status==="OK",e.selectedVehicle.status==="Oficina",e.selectedVehicle.status==="Sem Comunicar",e.selectedVehicle.status==="Inativo")),a(),h(e.selectedVehicle.status),a(),s("ngIf",e.selectedVehicle.ultPedidoID),a(),s("ngIf",e.selectedVehicle.ultIntegracao),a(4),s("ngClass",T(28,vn,e.selectedVehicle.precisaTrocaOleo,!e.selectedVehicle.precisaTrocaOleo)),a(),_(" ",e.selectedVehicle.precisaTrocaOleo?"Necess\xE1ria":"OK"," "),a(),s("ngIf",e.showComments),a(),s("ngIf",e.showOilChangeRecords),a(10),s("ngClass",b(31,Kt,e.showOilChangeRecords)),a(2),s("ngIf",e.selectedVehicle.trocasOleo&&e.selectedVehicle.trocasOleo.length>0),a(),s("ngClass",b(33,Kt,e.showComments)),a(2),s("ngIf",e.selectedVehicle.comentarios&&e.selectedVehicle.comentarios.length>0)}}var Jt=(()=>{class i{http;renderer;cdRef;veiculos=[];selectedVehicle=null;isHelpDialogOpen=!1;originalData=null;originalVehicleState=null;showComments=!1;newComment="";showOilChangeForm=!1;lastOilChangeDate="";showOilChangeRecords=!1;icones=["assets/device_thermostat.svg","assets/shutter_speed_minus.svg","assets/compress.svg","assets/do_not_step.svg","assets/air.svg","assets/speed.svg"];constructor(e,t,o){this.http=e,this.renderer=t,this.cdRef=o}ngOnInit(){console.log("CardVeiculoComponent initialized"),this.loadVehicleData()}loadVehicleData(){this.http.get("assets/mocks/veiculos_mock.json").subscribe({next:e=>{console.log("Data loaded:",e),this.originalData=JSON.parse(JSON.stringify(e)),this.veiculos=e.veiculos.map(t=>M(I({},t),{atributos:t.cores.map((o,d)=>({cor:o,icone:this.icones[d]||""})),comentarios:t.comentarios||[],odoAtual:t.odoAtual||0,ultimaTrocaOleo:t.ultimaTrocaOleo||null,odoNaUltimaTroca:t.odoNaUltimaTroca||0,trocasOleo:t.trocasOleo||[]})),this.veiculos.forEach(t=>{t.atributos.forEach((o,d)=>{o.cor=this.getClosestColorMatch(o.cor)}),this.calcularodoDesdeUltimaTroca(t)})},error:e=>{console.error("Erro ao carregar o JSON:",e)}})}calcularodoDesdeUltimaTroca(e){e.odoAtual&&e.odoNaUltimaTroca?e.odoDesdeUltimaTroca=e.odoAtual-e.odoNaUltimaTroca:e.odoDesdeUltimaTroca=e.odoAtual||0,e.precisaTrocaOleo=e.odoDesdeUltimaTroca>=1e4}registrarTrocaOleo(){if(!this.selectedVehicle)return;let e=new Date,t=`${e.toLocaleDateString("pt-BR")} ${e.getHours()}:${e.getMinutes().toString().padStart(2,"0")}`;this.selectedVehicle.ultimaTrocaOleo=e.toLocaleDateString("pt-BR"),this.selectedVehicle.odoNaUltimaTroca=this.selectedVehicle.odoAtual,this.selectedVehicle.odoDesdeUltimaTroca=0,this.selectedVehicle.precisaTrocaOleo=!1,this.selectedVehicle.trocasOleo||(this.selectedVehicle.trocasOleo=[]),this.selectedVehicle.trocasOleo.unshift({author:"Sistema",date:t,text:`Troca de \xF3leo realizada com od\xF4metro ${this.selectedVehicle.odoAtual}.`}),this.showOilChangeForm=!1,this.showOilChangeRecords=!0,this.cdRef.detectChanges()}toggleOilChangeForm(){this.showOilChangeForm=!this.showOilChangeForm}toggleOilChangeRecords(){this.showOilChangeRecords=!this.showOilChangeRecords,this.showOilChangeRecords&&(this.showComments=!1,this.selectedVehicle.trocasOleo||(this.selectedVehicle.trocasOleo=[]),this.cdRef.detectChanges())}shouldShowOilChangeAlert(e){return e.precisaTrocaOleo===!0}getClosestColorMatch(e){let t=this.getAllAttributeColors();return t.includes(e)?e:t[0]}getBackgroundColor(e){switch(e){case"OK":return"white";case"Oficina":return"#FF9858";case"Sem Comunicar":return"#E25652";case"Inativo":return"#B9B9B9";default:return"white"}}getIconPath(e){return this.icones[e]||""}getAttributeName(e){return["Temperatura","Torque","Press\xE3o Turbina","Pedal","Ar Comprimido","Max. Velocidade"][e]||`Atributo ${e+1}`}getColorOptions(){return[{label:"Inativo",value:"#242427"},{label:"Verde",value:"#387E38"},{label:"Laranja",value:"#F56B15"},{label:"Vermelho",value:"#AE2724"},{label:"Roxo",value:"#6224AE"}]}openHelpDialog(e){this.selectedVehicle=JSON.parse(JSON.stringify(e)),this.originalVehicleState=JSON.parse(JSON.stringify(e)),this.selectedVehicle.atributos.forEach(t=>{t.cor=this.getClosestColorMatch(t.cor)}),this.selectedVehicle.comentarios||(this.selectedVehicle.comentarios=[]),this.selectedVehicle.trocasOleo||(this.selectedVehicle.trocasOleo=[]),this.isHelpDialogOpen=!0,this.renderer.addClass(document.body,"overflow-hidden"),this.showComments=!1,this.showOilChangeRecords=!1,this.showOilChangeForm=!1,this.newComment="",setTimeout(()=>{let t=document.querySelector("#modal-close-button");t&&t.focus()},100)}closeHelpDialog(){this.isHelpDialogOpen=!1,this.renderer.removeClass(document.body,"overflow-hidden"),this.selectedVehicle=null,this.originalVehicleState=null,this.showComments=!1,this.showOilChangeForm=!1,this.showOilChangeRecords=!1,this.newComment=""}toggleComments(){this.showComments=!this.showComments,this.showComments&&(this.showOilChangeRecords=!1,this.cdRef.detectChanges())}addComment(){if(this.newComment.trim()&&this.selectedVehicle){let e=new Date,t=`${e.toLocaleDateString("pt-BR")} ${e.getHours()}:${e.getMinutes().toString().padStart(2,"0")}`;this.selectedVehicle.comentarios||(this.selectedVehicle.comentarios=[]),this.selectedVehicle.comentarios.unshift({author:"Usu\xE1rio Atual",date:t,text:this.newComment.trim()});let o=this.veiculos.findIndex(d=>d.id===this.selectedVehicle.id);o!==-1&&(this.veiculos[o].comentarios||(this.veiculos[o].comentarios=[]),this.veiculos[o].comentarios=[...this.selectedVehicle.comentarios]),this.newComment="",this.cdRef.detectChanges()}}getAllAttributeColors(){return this.getColorOptions().map(e=>e.value)}updateAttributeColor(e,t){if(!this.selectedVehicle)return;let d=t.target.value;this.selectedVehicle.atributos[e].cor=d}cancelChanges(){this.closeHelpDialog()}saveChanges(){if(this.selectedVehicle){let e=this.veiculos.findIndex(t=>t.id===this.selectedVehicle.id);e!==-1&&(this.veiculos[e].atributos.forEach((t,o)=>{o<this.selectedVehicle.atributos.length&&(t.cor=this.selectedVehicle.atributos[o].cor)}),this.veiculos[e].comentarios=[...this.selectedVehicle.comentarios],this.veiculos[e].trocasOleo=[...this.selectedVehicle.trocasOleo||[]],this.veiculos[e].ultimaTrocaOleo=this.selectedVehicle.ultimaTrocaOleo,this.veiculos[e].odoNaUltimaTroca=this.selectedVehicle.odoNaUltimaTroca,this.veiculos[e].odoDesdeUltimaTroca=this.selectedVehicle.odoDesdeUltimaTroca,this.veiculos[e].precisaTrocaOleo=this.selectedVehicle.precisaTrocaOleo,this.originalData&&this.originalData.veiculos&&this.originalData.veiculos[e]&&(this.originalData.veiculos[e].cores&&this.selectedVehicle.atributos.forEach((t,o)=>{o<this.originalData.veiculos[e].cores.length&&(this.originalData.veiculos[e].cores[o]=t.cor)}),this.originalData.veiculos[e].comentarios=[...this.selectedVehicle.comentarios],this.originalData.veiculos[e].trocasOleo=[...this.selectedVehicle.trocasOleo||[]],this.originalData.veiculos[e].ultimaTrocaOleo=this.selectedVehicle.ultimaTrocaOleo,this.originalData.veiculos[e].odoNaUltimaTroca=this.selectedVehicle.odoNaUltimaTroca),this.calcularodoDesdeUltimaTroca(this.veiculos[e]),this.saveChangesToJson())}this.closeHelpDialog()}saveChangesToJson(){console.log("Salvando altera\xE7\xF5es:",this.originalData)}handleEscapeKey(){this.isHelpDialogOpen&&this.closeHelpDialog()}handleTabKey(e){if(!this.isHelpDialogOpen)return;let t=document.querySelector('[role="dialog"]');if(!t)return;let o=t.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(o.length===0)return;let d=o[0],v=o[o.length-1];e.shiftKey&&document.activeElement===d?(v.focus(),e.preventDefault()):!e.shiftKey&&document.activeElement===v&&(d.focus(),e.preventDefault())}static \u0275fac=function(t){return new(t||i)(w(z),w(R),w(j))};static \u0275cmp=y({type:i,selectors:[["app-card-veiculo-velocidade"]],hostBindings:function(t,o){t&1&&f("keydown.escape",function(){return o.handleEscapeKey()},!1,F)("keydown.tab",function(v){return o.handleTabKey(v)},!1,F)},decls:5,vars:2,consts:[[1,"pb-28","pt-44"],["class","grid grid-cols-1 md:grid-cols-4 lg:grid-cols-12 lg:flex flex-wrap items-center justify-center gap-4",4,"ngIf"],["class","fixed inset-0 z-50 md:p-4 flex items-center justify-center bg-black bg-opacity-50 overflow-y-scroll","role","dialog","aria-modal","true","aria-labelledby","modal-title",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-4","lg:grid-cols-12","lg:flex","flex-wrap","items-center","justify-center","gap-4"],["class","shadow-2xl p-3 rounded-2xl flex flex-col items-center justify-center cursor-pointer border-2 relative transition-transform duration-300 hover:scale-105 hover:opacity-50","tabindex","0","role","button",3,"ngStyle","click","keydown.enter","keydown.space",4,"ngFor","ngForOf"],["tabindex","0","role","button",1,"shadow-2xl","p-3","rounded-2xl","flex","flex-col","items-center","justify-center","cursor-pointer","border-2","relative","transition-transform","duration-300","hover:scale-105","hover:opacity-50",3,"click","keydown.enter","keydown.space","ngStyle"],["class","absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm","aria-label","Este ve\xEDculo possui coment\xE1rios",4,"ngIf"],["class","absolute top-2 left-2 bg-amber-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm","aria-label","Este ve\xEDculo precisa de troca de \xF3leo",4,"ngIf"],[1,"text-black","font-bold","mb-2","text-3xl"],[1,"p-1.5","rounded-xl","w-full","flex","justify-center","gap-1",2,"background-color","#141416"],["class","w-7 h-7 rounded-full flex items-center justify-center",3,"ngStyle",4,"ngFor","ngForOf"],["aria-label","Este ve\xEDculo possui coment\xE1rios",1,"absolute","-top-2","-right-2","bg-red-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"],["aria-label","Este ve\xEDculo precisa de troca de \xF3leo",1,"absolute","top-2","left-2","bg-amber-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"],[1,"text-xs"],["src","assets/water_drop.svg","alt","Alerta de troca de \xF3leo"],[1,"w-7","h-7","rounded-full","flex","items-center","justify-center",3,"ngStyle"],[3,"src","alt"],["role","dialog","aria-modal","true","aria-labelledby","modal-title",1,"fixed","inset-0","z-50","md:p-4","flex","items-center","justify-center","bg-black","bg-opacity-50","overflow-y-scroll"],[1,"rounded-3xl","shadow-lg","w-max","max-w-[90vw]","h-max","2xl:max-w-[100vw]","2xl:max-h-[100vh]","overflow-y-auto","animate-fade-in","relative",2,"background-color","#141416"],[1,"absolute","right-6","top-6","2xl:top-12","2xl:right-12"],["id","modal-close-button","aria-label","Fechar modal",1,"text-lg","xl:text-4xl","font-semibold","text-gray-500","hover:text-amber-400",3,"click","keydown.enter"],[1,"rounded-3xl","flex","flex-col-reverse","lg:flex-row","justify-center","w-max","2xl:max-w-[100vw]","h-max","2xl:max-h-[100vh]"],[1,"grid","grid-cols-1","md:grid-cols-3","lg:grid-cols-1","lg:flex","lg:flex-col","justify-center","rounded-3xl","gap-3","w-full","2xl:max-h-[100vh]","p-6","2xl:p-24",2,"background-color","#242427"],["class","flex flex-col lg:flex-row justify-between gap-3 2xl:gap-8 p-2 rounded-lg",4,"ngFor","ngForOf"],[1,"p-8","2xl:p-20","flex","flex-col","justify-between","w-full","2xl:max-w-[100vw]","2xl:max-h-[100vh]"],[1,"flex","flex-col","mb-10"],[1,"font-bold","text-2xl","lg:text-4xl","2xl:text-6xl","text-amber-400"],[1,"flex","gap-4","text-sm","2xl:text-2xl","mb-1","font-bold","text-white"],[1,"flex","flex-col","justify-between","gap-6","mb-4"],[1,"text-amber-400","text-md","lg:text-lg","2xl:text-3xl","font-bold","mb-2"],[1,"text-white"],[1,"text-lg","text-white"],[1,"text-amber-400","text-md","lg:text-lg","2xl:text-2xl","font-bold","mb-2",3,"ngClass"],["class","ml-2 text-red-400",4,"ngIf"],[1,"flex","items-center","gap-2"],["class","ml-2 bg-amber-600 text-white text-xs px-2 py-1 rounded hover:bg-amber-700","aria-label","Registrar troca de \xF3leo",3,"click",4,"ngIf"],["class","mt-4 mb-4 w-full bg-gray-800 rounded-lg p-4 border border-gray-700 animate-fade-in",4,"ngIf"],[1,"pt-10"],[1,"w-full","text-gray-300","flex","flex-col","gap-4","pb-6"],[1,"flex","justify-between","py-2","border-b","border-gray-700","2xl:text-2xl"],[3,"ngClass"],["class","flex justify-between py-2 border-b border-gray-700 2xl:text-2xl",4,"ngIf"],["class","mt-4 w-full bg-gray-800 rounded-lg p-4 border border-gray-700",4,"ngIf"],[1,"flex","justify-between","mt-4","gap-4","w-full"],[1,"flex","gap-4"],["aria-label","Cancelar altera\xE7\xF5es",1,"px-4","py-2","bg-gray-600","text-white","rounded-2xl","hover:bg-gray-700","transition","2xl:text-xl",3,"click"],["aria-label","Salvar altera\xE7\xF5es",1,"px-4","py-2","bg-amber-600","text-white","rounded-2xl","hover:bg-amber-700","transition","2xl:text-xl",3,"click"],["title","Gr\xE1fico",1,"px-4","py-2","text-white","rounded-2xl","hover:bg-amber-600","transition","2xl:text-xl",2,"background-color","#242427"],["src","assets/bar_chart.svg","alt","gr\xE1fico",1,"2xl:w-20"],["title","Registros","aria-label","Mostrar registros",1,"px-4","py-4","text-white","rounded-2xl","hover:bg-amber-600","transition","2xl:text-xl","relative",2,"background-color","#242427",3,"click","ngClass"],["src","assets/overview.svg","alt","vis\xE3o geral",1,"2xl:w-20"],["class","absolute -top-2 -right-2 bg-amber-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm",4,"ngIf"],["title","Coment\xE1rios","aria-label","Mostrar coment\xE1rios",1,"px-4","py-4","text-white","rounded-2xl","hover:bg-amber-600","transition","2xl:text-xl","relative",2,"background-color","#242427",3,"click","ngClass"],["src","assets/chat.svg","alt","chat",1,"2xl:w-20"],["class","absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm",4,"ngIf"],[1,"flex","flex-col","lg:flex-row","justify-between","gap-3","2xl:gap-8","p-2","rounded-lg"],[1,"flex","items-center","gap-3","xl:gap-8"],[1,"w-8","h-8","lg:w-14","lg:h-14","2xl:w-20","2xl:h-20","rounded-full","flex","items-center","justify-center",3,"ngStyle"],[1,"w-4","h-4","lg:w-7","lg:h-7","2xl:w-10","2xl:h-10",3,"src","alt"],[1,"flex","flex-col"],[1,"text-white","text-sm","2xl:text-2xl","lg:text-nowrap","font-bold"],[1,"text-amber-500","2xl:text-2xl","font-bold"],[1,"ml-2","text-red-400"],["aria-label","Registrar troca de \xF3leo",1,"ml-2","bg-amber-600","text-white","text-xs","px-2","py-1","rounded","hover:bg-amber-700",3,"click"],[1,"mt-4","mb-4","w-full","bg-gray-800","rounded-lg","p-4","border","border-gray-700","animate-fade-in"],[1,"text-amber-400","text-lg","2xl:text-3xl","font-bold","mb-3"],[1,"flex","flex-col","gap-3"],[1,"flex","gap-3","justify-between","items-center"],[1,"flex","gap-2"],[1,"bg-gray-600","text-white","px-4","py-1","rounded","hover:bg-gray-700",3,"click"],[1,"bg-amber-600","text-white","px-4","py-1","rounded","hover:bg-amber-700",3,"click"],[1,"mt-4","w-full","bg-gray-800","rounded-lg","p-4","border","border-gray-700"],[1,"flex","flex-col","gap-3","max-h-44","overflow-y-auto"],["class","bg-gray-900 p-3 mb-2 rounded-md",4,"ngFor","ngForOf"],[1,"mt-2","flex","gap-2"],["type","text","placeholder","Adicionar coment\xE1rio...",1,"w-full","bg-gray-900","border","border-gray-700","rounded-lg","px-3","py-2","text-white",3,"ngModelChange","ngModel"],[1,"bg-amber-600","text-white","rounded-lg","px-4","py-2","hover:bg-amber-700",3,"click"],[1,"bg-gray-900","p-3","mb-2","rounded-md"],[1,"flex","justify-between","mb-1"],[1,"text-amber-400","font-semibold"],[1,"text-gray-500","text-sm"],["class","text-gray-400 text-center p-4",4,"ngIf"],[1,"text-gray-400","text-center","p-4"],[1,"absolute","-top-2","-right-2","bg-amber-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"],[1,"absolute","-top-2","-right-2","bg-red-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"]],template:function(t,o){t&1&&(u(0,"app-header-dsveiculos"),n(1,"section",0),p(2,yn,2,1,"div",1),r(),u(3,"app-footer-dsveiculos"),p(4,Rn,67,35,"div",2)),t&2&&(a(2),s("ngIf",o.veiculos.length>0),a(2),s("ngIf",o.isHelpDialogOpen&&o.selectedVehicle))},dependencies:[V,P,D,S,N,H,K,J,W,G,Y],styles:["@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out forwards}.bg-gray-800[_ngcontent-%COMP%]{background-color:#242427}.bg-gray-900[_ngcontent-%COMP%]{background-color:#1a1a1d}.bg-amber-500[_ngcontent-%COMP%]{background-color:#f59e0b}.bg-amber-600[_ngcontent-%COMP%]{background-color:#d97706}.bg-amber-700[_ngcontent-%COMP%]{background-color:#b45309}.hover\\:bg-amber-600[_ngcontent-%COMP%]:hover{background-color:#d97706}button[_ngcontent-%COMP%]:focus, input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{outline:2px solid #F59E0B;outline-offset:2px}button[_ngcontent-%COMP%]{transition:background-color .2s,transform .1s}button[_ngcontent-%COMP%]:active{transform:scale(.98)}"]})}return i})();var Ue=i=>({"background-color":i}),Nn=i=>({"text-red-400":i}),Hn=(i,c,e,t)=>({"text-green-400":i,"text-orange-400":c,"text-red-400":e,"text-gray-400":t}),Un=(i,c)=>({"text-red-400":i,"text-green-400":c}),Wt=i=>({"bg-amber-700":i});function Bn(i,c){if(i&1&&(n(0,"div",11),l(1),r()),i&2){let e=m().$implicit;a(),_(" ",e.comentarios.length," ")}}function Ln(i,c){i&1&&(n(0,"div",12)(1,"span",13),u(2,"img",14),r()())}function $n(i,c){if(i&1&&(n(0,"span",15),u(1,"img",16),r()),i&2){let e=c.$implicit,t=c.index,o=m(3);s("ngStyle",b(3,Ue,e.cor)),a(),s("src",e.icone,E)("alt",o.getAttributeName(t))}}function qn(i,c){if(i&1){let e=C();n(0,"div",5),f("click",function(){let o=g(e).$implicit,d=m(2);return x(d.openHelpDialog(o))})("keydown.enter",function(){let o=g(e).$implicit,d=m(2);return x(d.openHelpDialog(o))})("keydown.space",function(o){let d=g(e).$implicit;return m(2).openHelpDialog(d),x(o.preventDefault())}),p(1,Bn,2,1,"div",6)(2,Ln,3,0,"div",7),n(3,"h3",8),l(4),r(),n(5,"div",9),p(6,$n,2,5,"span",10),r()()}if(i&2){let e=c.$implicit,t=m(2);s("ngStyle",b(6,Ue,t.getBackgroundColor(e.status)+"99")),U("aria-label","Mostrar detalhes do ve\xEDculo "+e.id),a(),s("ngIf",e.comentarios&&e.comentarios.length>0),a(),s("ngIf",t.shouldShowOilChangeAlert(e)),a(2),h(e.id),a(2),s("ngForOf",e.atributos)}}function zn(i,c){if(i&1&&(n(0,"div",3),p(1,qn,7,8,"div",4),r()),i&2){let e=m();a(),s("ngForOf",e.veiculos)}}function Kn(i,c){if(i&1&&(n(0,"div",55)(1,"div",56)(2,"span",57),u(3,"img",58),r(),n(4,"div",59)(5,"span",60),l(6),r(),n(7,"span",61),l(8,"0"),r()()()()),i&2){let e=c.$implicit,t=c.index,o=m(2);a(2),s("ngStyle",b(4,Ue,e.cor)),a(),s("src",e.icone,E)("alt",o.getAttributeName(t)),a(3),h(o.getAttributeName(t))}}function Jn(i,c){i&1&&u(0,"span",62)}function Wn(i,c){if(i&1){let e=C();n(0,"button",63),f("click",function(){g(e);let o=m(2);return x(o.toggleOilChangeForm())}),l(1," Registrar troca "),r()}}function Gn(i,c){if(i&1){let e=C();n(0,"div",64)(1,"h4",65),l(2," Registrar Troca de \xD3leo "),r(),n(3,"div",66)(4,"div",67)(5,"p",30),l(6),r(),n(7,"div",68)(8,"button",69),f("click",function(){g(e);let o=m(2);return x(o.toggleOilChangeForm())}),l(9," Cancelar "),r(),n(10,"button",70),f("click",function(){g(e);let o=m(2);return x(o.registrarTrocaOleo())}),l(11," Confirmar "),r()()()()()}if(i&2){let e=m(2);a(6),_(" Confirma a troca de \xF3leo para o ve\xEDculo ",e.selectedVehicle.id,"? ")}}function Yn(i,c){if(i&1&&(n(0,"div",39)(1,"span"),l(2,"UltPedidoID:"),r(),n(3,"span"),l(4),r()()),i&2){let e=m(2);a(4),h(e.selectedVehicle.ultPedidoID)}}function Zn(i,c){if(i&1&&(n(0,"div",39)(1,"span"),l(2,"Integra\xE7\xE3o:"),r(),n(3,"span"),l(4),r()()),i&2){let e=m(2);a(4),h(e.selectedVehicle.ultIntegracao)}}function Qn(i,c){if(i&1&&(n(0,"div",77)(1,"div",78)(2,"span",79),l(3),r(),n(4,"span",80),l(5),r()(),n(6,"p",30),l(7),r()()),i&2){let e=c.$implicit;a(3),h(e.author),a(2),h(e.date),a(2),h(e.text)}}function Xn(i,c){if(i&1){let e=C();n(0,"div",71)(1,"h4",65),l(2," Coment\xE1rios "),r(),n(3,"div",72),p(4,Qn,8,3,"div",73),r(),n(5,"div",74)(6,"input",75),$("ngModelChange",function(o){g(e);let d=m(2);return L(d.newComment,o)||(d.newComment=o),x(o)}),r(),n(7,"button",76),f("click",function(){g(e);let o=m(2);return x(o.addComment())}),l(8," Enviar "),r()()()}if(i&2){let e=m(2);s("@slideUpDown",e.showComments?"open":"closed"),a(4),s("ngForOf",e.selectedVehicle.comentarios),a(2),B("ngModel",e.newComment)}}function er(i,c){if(i&1&&(n(0,"div",77)(1,"div",78)(2,"span",79),l(3),r(),n(4,"span",80),l(5),r()(),n(6,"p",30),l(7),r()()),i&2){let e=c.$implicit;a(3),h(e.author),a(2),h(e.date),a(2),h(e.text)}}function tr(i,c){i&1&&(n(0,"div",82),l(1," Nenhum registro. "),r())}function ir(i,c){if(i&1&&(n(0,"div",71)(1,"h4",65),l(2," Registros "),r(),n(3,"div",72),p(4,er,8,3,"div",73)(5,tr,2,0,"div",81),r()()),i&2){let e=m(2);s("@slideUpDown",e.showOilChangeRecords?"open":"closed"),a(4),s("ngForOf",e.selectedVehicle.trocasOleo),a(),s("ngIf",!e.selectedVehicle.trocasOleo||e.selectedVehicle.trocasOleo.length===0)}}function or(i,c){if(i&1&&(n(0,"div",83),l(1),r()),i&2){let e=m(2);a(),_(" ",e.selectedVehicle.trocasOleo.length," ")}}function nr(i,c){if(i&1&&(n(0,"div",84),l(1),r()),i&2){let e=m(2);a(),_(" ",e.selectedVehicle.comentarios.length," ")}}function rr(i,c){if(i&1){let e=C();n(0,"div",17)(1,"div",18)(2,"div",19)(3,"button",20),f("click",function(){g(e);let o=m();return x(o.closeHelpDialog())})("keydown.enter",function(){g(e);let o=m();return x(o.closeHelpDialog())}),l(4," \u2715 "),r()(),n(5,"div",21)(6,"div",22),p(7,Kn,9,6,"div",23),r(),n(8,"div",24)(9,"div",25)(10,"h3",26),l(11),r(),n(12,"div",27)(13,"span"),l(14,"Euro 5"),r(),n(15,"span"),l(16,"1721"),r()()(),n(17,"div",28)(18,"div")(19,"p",29),l(20," Od\xF4metro: "),n(21,"span",30),l(22),r()(),n(23,"span",31),l(24,"Registro: 24/04/2025 03:00"),r()(),n(25,"div")(26,"p",32),l(27," KM desde \xFAltima troca: "),n(28,"span",30),l(29),r(),p(30,Jn,1,0,"span",33),r(),n(31,"div",34)(32,"span",31),l(33),r(),p(34,Wn,2,0,"button",35),r()()(),p(35,Gn,12,1,"div",36),n(36,"div",37)(37,"div",38)(38,"div",39)(39,"span"),l(40,"Status:"),r(),n(41,"span",40),l(42),r()(),p(43,Yn,5,1,"div",41)(44,Zn,5,1,"div",41),n(45,"div",39)(46,"span"),l(47,"Troca de \xD3leo:"),r(),n(48,"span",40),l(49),r()()(),p(50,Xn,9,3,"div",42)(51,ir,6,3,"div",42),n(52,"div",43)(53,"div",44)(54,"button",45),f("click",function(){g(e);let o=m();return x(o.cancelChanges())}),l(55," Cancelar "),r(),n(56,"button",46),f("click",function(){g(e);let o=m();return x(o.saveChanges())}),l(57," Salvar "),r()(),n(58,"div",44)(59,"button",47),u(60,"img",48),r(),n(61,"button",49),f("click",function(){g(e);let o=m();return x(o.toggleOilChangeRecords())}),u(62,"img",50),p(63,or,2,1,"div",51),r(),n(64,"button",52),f("click",function(){g(e);let o=m();return x(o.toggleComments())}),u(65,"img",53),p(66,nr,2,1,"div",54),r()()()()()()()()}if(i&2){let e=m();a(7),s("ngForOf",e.selectedVehicle.atributos),a(4),_(" ",e.selectedVehicle.id," "),a(11),h(e.selectedVehicle.odoAtual),a(4),s("ngClass",b(21,Nn,e.selectedVehicle.precisaTrocaOleo)),a(3),h(e.selectedVehicle.odoDesdeUltimaTroca||0),a(),s("ngIf",e.selectedVehicle.precisaTrocaOleo),a(3),_("\xDAltima troca de \xF3leo: ",e.selectedVehicle.ultimaTrocaOleo||"N\xE3o registrada",""),a(),s("ngIf",e.selectedVehicle.precisaTrocaOleo),a(),s("ngIf",e.showOilChangeForm),a(6),s("ngClass",q(23,Hn,e.selectedVehicle.status==="OK",e.selectedVehicle.status==="Oficina",e.selectedVehicle.status==="Sem Comunicar",e.selectedVehicle.status==="Inativo")),a(),h(e.selectedVehicle.status),a(),s("ngIf",e.selectedVehicle.ultPedidoID),a(),s("ngIf",e.selectedVehicle.ultIntegracao),a(4),s("ngClass",T(28,Un,e.selectedVehicle.precisaTrocaOleo,!e.selectedVehicle.precisaTrocaOleo)),a(),_(" ",e.selectedVehicle.precisaTrocaOleo?"Necess\xE1ria":"OK"," "),a(),s("ngIf",e.showComments),a(),s("ngIf",e.showOilChangeRecords),a(10),s("ngClass",b(31,Wt,e.showOilChangeRecords)),a(2),s("ngIf",e.selectedVehicle.trocasOleo&&e.selectedVehicle.trocasOleo.length>0),a(),s("ngClass",b(33,Wt,e.showComments)),a(2),s("ngIf",e.selectedVehicle.comentarios&&e.selectedVehicle.comentarios.length>0)}}var Gt=(()=>{class i{http;renderer;cdRef;veiculos=[];selectedVehicle=null;isHelpDialogOpen=!1;originalData=null;originalVehicleState=null;showComments=!1;newComment="";showOilChangeForm=!1;lastOilChangeDate="";showOilChangeRecords=!1;icones=["assets/device_thermostat.svg","assets/shutter_speed_minus.svg","assets/compress.svg","assets/do_not_step.svg","assets/air.svg","assets/speed.svg"];constructor(e,t,o){this.http=e,this.renderer=t,this.cdRef=o}ngOnInit(){console.log("CardVeiculoComponent initialized"),this.loadVehicleData()}loadVehicleData(){this.http.get("assets/mocks/veiculos_mock.json").subscribe({next:e=>{console.log("Data loaded:",e),this.originalData=JSON.parse(JSON.stringify(e)),this.veiculos=e.veiculos.map(t=>M(I({},t),{atributos:t.cores.map((o,d)=>({cor:o,icone:this.icones[d]||""})),comentarios:t.comentarios||[],odoAtual:t.odoAtual||0,ultimaTrocaOleo:t.ultimaTrocaOleo||null,odoNaUltimaTroca:t.odoNaUltimaTroca||0,trocasOleo:t.trocasOleo||[]})),this.veiculos.forEach(t=>{t.atributos.forEach((o,d)=>{o.cor=this.getClosestColorMatch(o.cor)}),this.calcularodoDesdeUltimaTroca(t)})},error:e=>{console.error("Erro ao carregar o JSON:",e)}})}calcularodoDesdeUltimaTroca(e){e.odoAtual&&e.odoNaUltimaTroca?e.odoDesdeUltimaTroca=e.odoAtual-e.odoNaUltimaTroca:e.odoDesdeUltimaTroca=e.odoAtual||0,e.precisaTrocaOleo=e.odoDesdeUltimaTroca>=1e4}registrarTrocaOleo(){if(!this.selectedVehicle)return;let e=new Date,t=`${e.toLocaleDateString("pt-BR")} ${e.getHours()}:${e.getMinutes().toString().padStart(2,"0")}`;this.selectedVehicle.ultimaTrocaOleo=e.toLocaleDateString("pt-BR"),this.selectedVehicle.odoNaUltimaTroca=this.selectedVehicle.odoAtual,this.selectedVehicle.odoDesdeUltimaTroca=0,this.selectedVehicle.precisaTrocaOleo=!1,this.selectedVehicle.trocasOleo||(this.selectedVehicle.trocasOleo=[]),this.selectedVehicle.trocasOleo.unshift({author:"Sistema",date:t,text:`Troca de \xF3leo realizada com od\xF4metro ${this.selectedVehicle.odoAtual}.`}),this.showOilChangeForm=!1,this.showOilChangeRecords=!0,this.cdRef.detectChanges()}toggleOilChangeForm(){this.showOilChangeForm=!this.showOilChangeForm}toggleOilChangeRecords(){this.showOilChangeRecords=!this.showOilChangeRecords,this.showOilChangeRecords&&(this.showComments=!1,this.selectedVehicle.trocasOleo||(this.selectedVehicle.trocasOleo=[]),this.cdRef.detectChanges())}shouldShowOilChangeAlert(e){return e.precisaTrocaOleo===!0}getClosestColorMatch(e){let t=this.getAllAttributeColors();return t.includes(e)?e:t[0]}getBackgroundColor(e){switch(e){case"OK":return"white";case"Oficina":return"#FF9858";case"Sem Comunicar":return"#E25652";case"Inativo":return"#B9B9B9";default:return"white"}}getIconPath(e){return this.icones[e]||""}getAttributeName(e){return["Temperatura","Torque","Press\xE3o Turbina","Pedal","Ar Comprimido","Max. Velocidade"][e]||`Atributo ${e+1}`}getColorOptions(){return[{label:"Inativo",value:"#242427"},{label:"Verde",value:"#387E38"},{label:"Laranja",value:"#F56B15"},{label:"Vermelho",value:"#AE2724"},{label:"Roxo",value:"#6224AE"}]}openHelpDialog(e){this.selectedVehicle=JSON.parse(JSON.stringify(e)),this.originalVehicleState=JSON.parse(JSON.stringify(e)),this.selectedVehicle.atributos.forEach(t=>{t.cor=this.getClosestColorMatch(t.cor)}),this.selectedVehicle.comentarios||(this.selectedVehicle.comentarios=[]),this.selectedVehicle.trocasOleo||(this.selectedVehicle.trocasOleo=[]),this.isHelpDialogOpen=!0,this.renderer.addClass(document.body,"overflow-hidden"),this.showComments=!1,this.showOilChangeRecords=!1,this.showOilChangeForm=!1,this.newComment="",setTimeout(()=>{let t=document.querySelector("#modal-close-button");t&&t.focus()},100)}closeHelpDialog(){this.isHelpDialogOpen=!1,this.renderer.removeClass(document.body,"overflow-hidden"),this.selectedVehicle=null,this.originalVehicleState=null,this.showComments=!1,this.showOilChangeForm=!1,this.showOilChangeRecords=!1,this.newComment=""}toggleComments(){this.showComments=!this.showComments,this.showComments&&(this.showOilChangeRecords=!1,this.cdRef.detectChanges())}addComment(){if(this.newComment.trim()&&this.selectedVehicle){let e=new Date,t=`${e.toLocaleDateString("pt-BR")} ${e.getHours()}:${e.getMinutes().toString().padStart(2,"0")}`;this.selectedVehicle.comentarios||(this.selectedVehicle.comentarios=[]),this.selectedVehicle.comentarios.unshift({author:"Usu\xE1rio Atual",date:t,text:this.newComment.trim()});let o=this.veiculos.findIndex(d=>d.id===this.selectedVehicle.id);o!==-1&&(this.veiculos[o].comentarios||(this.veiculos[o].comentarios=[]),this.veiculos[o].comentarios=[...this.selectedVehicle.comentarios]),this.newComment="",this.cdRef.detectChanges()}}getAllAttributeColors(){return this.getColorOptions().map(e=>e.value)}updateAttributeColor(e,t){if(!this.selectedVehicle)return;let d=t.target.value;this.selectedVehicle.atributos[e].cor=d}cancelChanges(){this.closeHelpDialog()}saveChanges(){if(this.selectedVehicle){let e=this.veiculos.findIndex(t=>t.id===this.selectedVehicle.id);e!==-1&&(this.veiculos[e].atributos.forEach((t,o)=>{o<this.selectedVehicle.atributos.length&&(t.cor=this.selectedVehicle.atributos[o].cor)}),this.veiculos[e].comentarios=[...this.selectedVehicle.comentarios],this.veiculos[e].trocasOleo=[...this.selectedVehicle.trocasOleo||[]],this.veiculos[e].ultimaTrocaOleo=this.selectedVehicle.ultimaTrocaOleo,this.veiculos[e].odoNaUltimaTroca=this.selectedVehicle.odoNaUltimaTroca,this.veiculos[e].odoDesdeUltimaTroca=this.selectedVehicle.odoDesdeUltimaTroca,this.veiculos[e].precisaTrocaOleo=this.selectedVehicle.precisaTrocaOleo,this.originalData&&this.originalData.veiculos&&this.originalData.veiculos[e]&&(this.originalData.veiculos[e].cores&&this.selectedVehicle.atributos.forEach((t,o)=>{o<this.originalData.veiculos[e].cores.length&&(this.originalData.veiculos[e].cores[o]=t.cor)}),this.originalData.veiculos[e].comentarios=[...this.selectedVehicle.comentarios],this.originalData.veiculos[e].trocasOleo=[...this.selectedVehicle.trocasOleo||[]],this.originalData.veiculos[e].ultimaTrocaOleo=this.selectedVehicle.ultimaTrocaOleo,this.originalData.veiculos[e].odoNaUltimaTroca=this.selectedVehicle.odoNaUltimaTroca),this.calcularodoDesdeUltimaTroca(this.veiculos[e]),this.saveChangesToJson())}this.closeHelpDialog()}saveChangesToJson(){console.log("Salvando altera\xE7\xF5es:",this.originalData)}handleEscapeKey(){this.isHelpDialogOpen&&this.closeHelpDialog()}handleTabKey(e){if(!this.isHelpDialogOpen)return;let t=document.querySelector('[role="dialog"]');if(!t)return;let o=t.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(o.length===0)return;let d=o[0],v=o[o.length-1];e.shiftKey&&document.activeElement===d?(v.focus(),e.preventDefault()):!e.shiftKey&&document.activeElement===v&&(d.focus(),e.preventDefault())}static \u0275fac=function(t){return new(t||i)(w(z),w(R),w(j))};static \u0275cmp=y({type:i,selectors:[["app-card-veiculo"]],hostBindings:function(t,o){t&1&&f("keydown.escape",function(){return o.handleEscapeKey()},!1,F)("keydown.tab",function(v){return o.handleTabKey(v)},!1,F)},decls:5,vars:2,consts:[[1,"pb-28","pt-44"],["class","grid grid-cols-1 md:grid-cols-4 lg:grid-cols-12 lg:flex flex-wrap items-center justify-center gap-4",4,"ngIf"],["class","fixed inset-0 z-50 md:p-4 flex items-center justify-center bg-black bg-opacity-50 overflow-y-scroll","role","dialog","aria-modal","true","aria-labelledby","modal-title",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-4","lg:grid-cols-12","lg:flex","flex-wrap","items-center","justify-center","gap-4"],["class","shadow-2xl p-3 rounded-2xl flex flex-col items-center justify-center cursor-pointer border-2 relative transition-transform duration-300 hover:scale-105 hover:opacity-50","tabindex","0","role","button",3,"ngStyle","click","keydown.enter","keydown.space",4,"ngFor","ngForOf"],["tabindex","0","role","button",1,"shadow-2xl","p-3","rounded-2xl","flex","flex-col","items-center","justify-center","cursor-pointer","border-2","relative","transition-transform","duration-300","hover:scale-105","hover:opacity-50",3,"click","keydown.enter","keydown.space","ngStyle"],["class","absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm","aria-label","Este ve\xEDculo possui coment\xE1rios",4,"ngIf"],["class","absolute top-2 left-2 bg-amber-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm","aria-label","Este ve\xEDculo precisa de troca de \xF3leo",4,"ngIf"],[1,"text-black","font-bold","mb-2","text-3xl"],[1,"p-1.5","rounded-xl","w-full","flex","justify-center","gap-1",2,"background-color","#141416"],["class","w-7 h-7 rounded-full flex items-center justify-center",3,"ngStyle",4,"ngFor","ngForOf"],["aria-label","Este ve\xEDculo possui coment\xE1rios",1,"absolute","-top-2","-right-2","bg-red-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"],["aria-label","Este ve\xEDculo precisa de troca de \xF3leo",1,"absolute","top-2","left-2","bg-amber-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"],[1,"text-xs"],["src","assets/water_drop.svg","alt","Alerta de troca de \xF3leo"],[1,"w-7","h-7","rounded-full","flex","items-center","justify-center",3,"ngStyle"],[3,"src","alt"],["role","dialog","aria-modal","true","aria-labelledby","modal-title",1,"fixed","inset-0","z-50","md:p-4","flex","items-center","justify-center","bg-black","bg-opacity-50","overflow-y-scroll"],[1,"rounded-3xl","shadow-lg","w-max","max-w-[90vw]","h-max","2xl:max-w-[100vw]","2xl:max-h-[100vh]","overflow-y-auto","animate-fade-in","relative",2,"background-color","#141416"],[1,"absolute","right-6","top-6","2xl:top-12","2xl:right-12"],["id","modal-close-button","aria-label","Fechar modal",1,"text-lg","xl:text-4xl","font-semibold","text-gray-500","hover:text-amber-400",3,"click","keydown.enter"],[1,"rounded-3xl","flex","flex-col-reverse","lg:flex-row","justify-center","w-max","2xl:max-w-[100vw]","h-max","2xl:max-h-[100vh]"],[1,"grid","grid-cols-1","md:grid-cols-3","lg:grid-cols-1","lg:flex","lg:flex-col","justify-center","rounded-3xl","gap-3","w-full","2xl:max-h-[100vh]","p-6","2xl:p-24",2,"background-color","#242427"],["class","flex flex-col lg:flex-row justify-between gap-3 2xl:gap-8 p-2 rounded-lg",4,"ngFor","ngForOf"],[1,"p-8","2xl:p-20","flex","flex-col","justify-between","w-full","2xl:max-w-[100vw]","2xl:max-h-[100vh]"],[1,"flex","flex-col","mb-10"],[1,"font-bold","text-2xl","lg:text-4xl","2xl:text-6xl","text-amber-400"],[1,"flex","gap-4","text-sm","2xl:text-2xl","mb-1","font-bold","text-white"],[1,"flex","flex-col","justify-between","gap-6","mb-4"],[1,"text-amber-400","text-md","lg:text-lg","2xl:text-3xl","font-bold","mb-2"],[1,"text-white"],[1,"text-lg","text-white"],[1,"text-amber-400","text-md","lg:text-lg","2xl:text-2xl","font-bold","mb-2",3,"ngClass"],["class","ml-2 text-red-400",4,"ngIf"],[1,"flex","items-center","gap-2"],["class","ml-2 bg-amber-600 text-white text-xs px-2 py-1 rounded hover:bg-amber-700","aria-label","Registrar troca de \xF3leo",3,"click",4,"ngIf"],["class","mt-4 mb-4 w-full bg-gray-800 rounded-lg p-4 border border-gray-700 animate-fade-in",4,"ngIf"],[1,"pt-10"],[1,"w-full","text-gray-300","flex","flex-col","gap-4","pb-6"],[1,"flex","justify-between","py-2","border-b","border-gray-700","2xl:text-2xl"],[3,"ngClass"],["class","flex justify-between py-2 border-b border-gray-700 2xl:text-2xl",4,"ngIf"],["class","mt-4 w-full bg-gray-800 rounded-lg p-4 border border-gray-700",4,"ngIf"],[1,"flex","justify-between","mt-4","gap-4","w-full"],[1,"flex","gap-4"],["aria-label","Cancelar altera\xE7\xF5es",1,"px-4","py-2","bg-gray-600","text-white","rounded-2xl","hover:bg-gray-700","transition","2xl:text-xl",3,"click"],["aria-label","Salvar altera\xE7\xF5es",1,"px-4","py-2","bg-amber-600","text-white","rounded-2xl","hover:bg-amber-700","transition","2xl:text-xl",3,"click"],["title","Gr\xE1fico",1,"px-4","py-2","text-white","rounded-2xl","hover:bg-amber-600","transition","2xl:text-xl",2,"background-color","#242427"],["src","assets/bar_chart.svg","alt","gr\xE1fico",1,"2xl:w-20"],["title","Registros","aria-label","Mostrar registros",1,"px-4","py-4","text-white","rounded-2xl","hover:bg-amber-600","transition","2xl:text-xl","relative",2,"background-color","#242427",3,"click","ngClass"],["src","assets/overview.svg","alt","vis\xE3o geral",1,"2xl:w-20"],["class","absolute -top-2 -right-2 bg-amber-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm",4,"ngIf"],["title","Coment\xE1rios","aria-label","Mostrar coment\xE1rios",1,"px-4","py-4","text-white","rounded-2xl","hover:bg-amber-600","transition","2xl:text-xl","relative",2,"background-color","#242427",3,"click","ngClass"],["src","assets/chat.svg","alt","chat",1,"2xl:w-20"],["class","absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm",4,"ngIf"],[1,"flex","flex-col","lg:flex-row","justify-between","gap-3","2xl:gap-8","p-2","rounded-lg"],[1,"flex","items-center","gap-3","xl:gap-8"],[1,"w-8","h-8","lg:w-14","lg:h-14","2xl:w-20","2xl:h-20","rounded-full","flex","items-center","justify-center",3,"ngStyle"],[1,"w-4","h-4","lg:w-7","lg:h-7","2xl:w-10","2xl:h-10",3,"src","alt"],[1,"flex","flex-col"],[1,"text-white","text-sm","2xl:text-2xl","lg:text-nowrap","font-bold"],[1,"text-amber-500","2xl:text-2xl","font-bold"],[1,"ml-2","text-red-400"],["aria-label","Registrar troca de \xF3leo",1,"ml-2","bg-amber-600","text-white","text-xs","px-2","py-1","rounded","hover:bg-amber-700",3,"click"],[1,"mt-4","mb-4","w-full","bg-gray-800","rounded-lg","p-4","border","border-gray-700","animate-fade-in"],[1,"text-amber-400","text-lg","2xl:text-3xl","font-bold","mb-3"],[1,"flex","flex-col","gap-3"],[1,"flex","gap-3","justify-between","items-center"],[1,"flex","gap-2"],[1,"bg-gray-600","text-white","px-4","py-1","rounded","hover:bg-gray-700",3,"click"],[1,"bg-amber-600","text-white","px-4","py-1","rounded","hover:bg-amber-700",3,"click"],[1,"mt-4","w-full","bg-gray-800","rounded-lg","p-4","border","border-gray-700"],[1,"flex","flex-col","gap-3","max-h-44","overflow-y-auto"],["class","bg-gray-900 p-3 mb-2 rounded-md",4,"ngFor","ngForOf"],[1,"mt-2","flex","gap-2"],["type","text","placeholder","Adicionar coment\xE1rio...",1,"w-full","bg-gray-900","border","border-gray-700","rounded-lg","px-3","py-2","text-white",3,"ngModelChange","ngModel"],[1,"bg-amber-600","text-white","rounded-lg","px-4","py-2","hover:bg-amber-700",3,"click"],[1,"bg-gray-900","p-3","mb-2","rounded-md"],[1,"flex","justify-between","mb-1"],[1,"text-amber-400","font-semibold"],[1,"text-gray-500","text-sm"],["class","text-gray-400 text-center p-4",4,"ngIf"],[1,"text-gray-400","text-center","p-4"],[1,"absolute","-top-2","-right-2","bg-amber-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"],[1,"absolute","-top-2","-right-2","bg-red-500","text-white","rounded-full","w-7","h-7","flex","items-center","justify-center","text-sm"]],template:function(t,o){t&1&&(u(0,"app-header-dsveiculos"),n(1,"section",0),p(2,zn,2,1,"div",1),r(),u(3,"app-footer-dsveiculos"),p(4,rr,67,35,"div",2)),t&2&&(a(2),s("ngIf",o.veiculos.length>0),a(2),s("ngIf",o.isHelpDialogOpen&&o.selectedVehicle))},dependencies:[V,P,D,S,N,H,K,J,W,G,Y],styles:["@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out forwards}.bg-gray-800[_ngcontent-%COMP%]{background-color:#242427}.bg-gray-900[_ngcontent-%COMP%]{background-color:#1a1a1d}.bg-amber-500[_ngcontent-%COMP%]{background-color:#f59e0b}.bg-amber-600[_ngcontent-%COMP%]{background-color:#d97706}.bg-amber-700[_ngcontent-%COMP%]{background-color:#b45309}.hover\\:bg-amber-600[_ngcontent-%COMP%]:hover{background-color:#d97706}button[_ngcontent-%COMP%]:focus, input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{outline:2px solid #F59E0B;outline-offset:2px}button[_ngcontent-%COMP%]{transition:background-color .2s,transform .1s}button[_ngcontent-%COMP%]:active{transform:scale(.98)}"]})}return i})();var Yt=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=y({type:i,selectors:[["app-dash-veiculos"]],decls:2,vars:0,template:function(t,o){t&1&&(n(0,"section"),u(1,"app-card-veiculo"),r())},dependencies:[Gt,V],encapsulation:2})}return i})();var ar=["chart"],Zt=(()=>{class i{constructor(){this.chart=O(),this.annotations=O(),this.colors=O(),this.dataLabels=O(),this.series=O(),this.stroke=O(),this.labels=O(),this.legend=O(),this.markers=O(),this.noData=O(),this.fill=O(),this.tooltip=O(),this.plotOptions=O(),this.responsive=O(),this.xaxis=O(),this.yaxis=O(),this.forecastDataPoints=O(),this.grid=O(),this.states=O(),this.title=O(),this.subtitle=O(),this.theme=O(),this.autoUpdateSeries=O(!0),this.chartReady=We(),this.chartInstance=Ge(null),this.chartElement=Ze.required("chart"),this.ngZone=De(Je),this.isBrowser=st(De(Ye))}ngOnChanges(e){this.isBrowser&&this.ngZone.runOutsideAngular(()=>{Le.schedule(()=>this.hydrate(e))})}ngOnDestroy(){this.destroy()}hydrate(e){if(this.autoUpdateSeries()&&Object.keys(e).filter(o=>o!=="series").length===0){this.updateSeries(this.series(),!0);return}this.createElement()}createElement(){return _e(this,null,function*(){let{default:e}=yield import("./chunk-OFYZ6HBG.js");window.ApexCharts||=e;let t={};["annotations","chart","colors","dataLabels","series","stroke","labels","legend","fill","tooltip","plotOptions","responsive","markers","noData","xaxis","yaxis","forecastDataPoints","grid","states","title","subtitle","theme"].forEach(v=>{let A=this[v]();A&&(t[v]=A)}),this.destroy();let d=this.ngZone.runOutsideAngular(()=>new e(this.chartElement().nativeElement,t));this.chartInstance.set(d),this.render(),this.chartReady.emit({chartObj:d})})}render(){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.render())}updateOptions(e,t,o,d){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.updateOptions(e,t,o,d))}updateSeries(e,t){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.updateSeries(e,t))}appendSeries(e,t){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.appendSeries(e,t))}appendData(e){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.appendData(e))}highlightSeries(e){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.highlightSeries(e))}toggleSeries(e){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.toggleSeries(e))}showSeries(e){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.showSeries(e))}hideSeries(e){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.hideSeries(e))}resetSeries(){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.resetSeries())}zoomX(e,t){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.zoomX(e,t))}toggleDataPointSelection(e,t){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.toggleDataPointSelection(e,t))}destroy(){this.chartInstance()?.destroy(),this.chartInstance.set(null)}setLocale(e){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.setLocale(e))}paper(){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.paper())}addXaxisAnnotation(e,t,o){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.addXaxisAnnotation(e,t,o))}addYaxisAnnotation(e,t,o){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.addYaxisAnnotation(e,t,o))}addPointAnnotation(e,t,o){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.addPointAnnotation(e,t,o))}removeAnnotation(e,t){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.removeAnnotation(e,t))}clearAnnotations(e){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.clearAnnotations(e))}dataURI(e){return this.chartInstance()?.dataURI(e)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=y({type:i,selectors:[["apx-chart"]],viewQuery:function(t,o){t&1&&it(o.chartElement,ar,5),t&2&&ot()},inputs:{chart:[1,"chart"],annotations:[1,"annotations"],colors:[1,"colors"],dataLabels:[1,"dataLabels"],series:[1,"series"],stroke:[1,"stroke"],labels:[1,"labels"],legend:[1,"legend"],markers:[1,"markers"],noData:[1,"noData"],fill:[1,"fill"],tooltip:[1,"tooltip"],plotOptions:[1,"plotOptions"],responsive:[1,"responsive"],xaxis:[1,"xaxis"],yaxis:[1,"yaxis"],forecastDataPoints:[1,"forecastDataPoints"],grid:[1,"grid"],states:[1,"states"],title:[1,"title"],subtitle:[1,"subtitle"],theme:[1,"theme"],autoUpdateSeries:[1,"autoUpdateSeries"]},outputs:{chartReady:"chartReady"},features:[Ke],decls:2,vars:0,consts:[["chart",""]],template:function(t,o){t&1&&u(0,"div",null,0)},encapsulation:2,changeDetection:0})}}return i})();var Qt=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=Qe({type:i})}static{this.\u0275inj=ze({})}}return i})();var sr=["chart"];function cr(i,c){i&1&&(n(0,"div",6),u(1,"div",7),r())}function dr(i,c){if(i&1&&(n(0,"div",8)(1,"div",9),l(2),r(),n(3,"div",10)(4,"span",11),l(5),r(),n(6,"span",12),l(7),r()()()),i&2){let e=c.$implicit;a(2),_(" ",e.nome," "),a(3),h(e.valor),a(),s("ngClass",e.tendencia>0?"text-green-500":e.tendencia<0?"text-red-500":"text-gray-500"),a(),nt(" ",e.tendencia>0?"\u2191":e.tendencia<0?"\u2193":"\u2192"," ",e.unidade," ")}}function mr(i,c){if(i&1&&(n(0,"div",30)(1,"h2",16),l(2,"Insufici\xEAncias por Linha"),r(),n(3,"div",23),u(4,"apx-chart",31,0),r()()),i&2){let e=m(2);a(4),s("series",e.heatmapOptions.series)("chart",e.heatmapOptions.chart)("dataLabels",e.heatmapOptions.dataLabels)("plotOptions",e.heatmapOptions.plotOptions)("xaxis",e.heatmapOptions.xaxis)("tooltip",e.heatmapOptions.tooltip)}}function ur(i,c){if(i&1&&(n(0,"div",22)(1,"h2",16),l(2,"Insufici\xEAncias por Linha"),r(),n(3,"div",23),u(4,"apx-chart",32,0),r()()),i&2){let e=m(2);a(4),s("series",e.barChartOptions.series)("chart",e.barChartOptions.chart)("xaxis",e.barChartOptions.xaxis)("yaxis",e.barChartOptions.yaxis)("plotOptions",e.barChartOptions.plotOptions)("tooltip",e.barChartOptions.tooltip)("legend",e.barChartOptions.legend)("fill",e.barChartOptions.fill)}}function pr(i,c){i&1&&(n(0,"div",33),l(1," Clique em uma linha no gr\xE1fico para ver os motoristas "),r())}function hr(i,c){i&1&&(n(0,"div",33),l(1," Nenhum motorista insuficiente nesta linha "),r())}function gr(i,c){if(i&1){let e=C();n(0,"li",36),f("click",function(){let o=g(e).$implicit,d=m(3);return x(d.selecionarMotorista(o))})("keydown.enter",function(){let o=g(e).$implicit,d=m(3);return x(d.selecionarMotorista(o))}),l(1),r()}if(i&2){let e=c.$implicit;a(),_(" ",e," ")}}function xr(i,c){if(i&1&&(n(0,"div")(1,"ul",34),p(2,gr,2,1,"li",35),r()()),i&2){let e=m(2);a(2),s("ngForOf",e.motoristasSelecionados)}}function fr(i,c){if(i&1){let e=C();n(0,"div",13)(1,"div",14)(2,"div",15)(3,"h2",16),l(4,"\xA0"),r(),n(5,"div",17)(6,"button",18),f("click",function(){g(e);let o=m();return x(o.toggleViewMode())}),l(7),r(),n(8,"button",19),f("click",function(){g(e);let o=m();return x(o.exportarDados())}),l(9," Exportar "),r()()(),p(10,mr,6,6,"div",20)(11,ur,6,8,"div",21),n(12,"div")(13,"div",22)(14,"h3",16),l(15,"Giro do Motor"),r(),n(16,"div",23),u(17,"apx-chart",24),r()()()(),n(18,"div",25)(19,"h2",26),l(20),r(),p(21,pr,2,0,"div",27)(22,hr,2,0,"div",27)(23,xr,3,1,"div",28),n(24,"div",22)(25,"h3",16),l(26,"Taxa Insuficientes"),r(),n(27,"div",23),u(28,"apx-chart",29),r()()()()}if(i&2){let e=m();a(7),_(" Ver ",e.viewMode==="heatmap"?"Gr\xE1fico de Barras":"Heatmap"," "),a(3),s("ngIf",e.viewMode==="heatmap"),a(),s("ngIf",e.viewMode==="barras"),a(6),s("series",e.giroChartOptions.series)("chart",e.giroChartOptions.chart)("xaxis",e.giroChartOptions.xaxis)("fill",e.giroChartOptions.fill)("markers",e.giroChartOptions.markers)("colors",e.giroChartOptions.colors),a(3),_(" ",e.linhaSelecionada?"Motoristas da Linha "+e.linhaSelecionada:"Selecione uma linha"," "),a(),s("ngIf",!e.linhaSelecionada),a(),s("ngIf",e.linhaSelecionada&&e.motoristasSelecionados.length===0),a(),s("ngIf",e.linhaSelecionada&&e.motoristasSelecionados.length>0),a(5),s("series",e.pontuacaoChartOptions.series)("chart",e.pontuacaoChartOptions.chart)("plotOptions",e.pontuacaoChartOptions.plotOptions)("colors",e.pontuacaoChartOptions.colors)("labels",e.pontuacaoChartOptions.labels)}}var Xt=(()=>{class i{fb;cdr;renderer;chart;heatmapOptions={series:[],chart:{height:350,type:"heatmap",toolbar:{show:!0},events:{dataPointSelection:(e,t,o)=>{let d=o.seriesIndex,v=o.dataPointIndex;d!==void 0&&v!==void 0&&this.onChartClick({seriesIndex:d,dataPointIndex:v})}}},dataLabels:{enabled:!0,formatter:(e,t)=>{let o=t.seriesIndex,d=t.dataPointIndex,v=o*5+d,A=this.insuficientesData[v];return A?`${A.linha}
${e.toFixed(0)}%`:""},style:{colors:["#000"],fontSize:"20px",fontWeight:"bold"}},plotOptions:{heatmap:{shadeIntensity:.5,colorScale:{ranges:[{from:0,to:10,color:"#BBDEFB",name:"Baixo"},{from:10.1,to:30,color:"#64B5F6",name:"M\xE9dio"},{from:30.1,to:100,color:"#1565C0",name:"Alto"}]}}},xaxis:{type:"category",categories:[],labels:{show:!1}},legend:{show:!1}};barChartOptions={series:[],chart:{height:350,type:"bar",toolbar:{show:!0},events:{dataPointSelection:(e,t,o)=>{if(o.dataPointIndex!==void 0&&o.dataPointIndex>=0){let d=this.insuficientesData[o.dataPointIndex];d&&this.selecionarLinha(d.linha)}}}},plotOptions:{bar:{horizontal:!1,columnWidth:"65%",borderRadius:4,dataLabels:{position:"top"}}},dataLabels:{enabled:!0,formatter:e=>`${e}%`,offsetY:-20,style:{fontSize:"12px",colors:["#fff"]}},fill:{colors:["#1565C0"],type:"gradient",gradient:{shade:"dark",type:"vertical",shadeIntensity:.3,gradientToColors:["#64B5F6"],inverseColors:!1,opacityFrom:1,opacityTo:.8}},xaxis:{categories:[],title:{text:"Linhas",style:{color:"#fff",fontSize:"14px"}},labels:{style:{colors:"#fff"}}},yaxis:{title:{text:"Percentual",style:{color:"#fff",fontSize:"14px"}},labels:{formatter:e=>`${e}%`,style:{colors:"#fff"}}},tooltip:{y:{formatter:e=>`${e}%`},theme:"dark"},legend:{position:"top",labels:{colors:"#fff"}}};pontuacaoChartOptions={series:[0],chart:{height:250,type:"radialBar",background:"transparent"},plotOptions:{radialBar:{hollow:{size:"70%"},track:{background:"#2c2c2e"},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontWeight:600,offsetY:-10,color:"#fff"},value:{show:!0,fontSize:"30px",fontWeight:700,formatter:e=>`${e}%`,color:"#fff"}}}},colors:["#64B5F6"],labels:["Taxa"]};giroChartOptions={chart:{type:"area",height:250,background:"transparent",toolbar:{show:!1},zoom:{enabled:!1}},colors:["#64B5F6"],stroke:{curve:"smooth",width:3},fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.7,opacityTo:.1,stops:[0,90,100]}},tooltip:{theme:"dark"},xaxis:{categories:[],labels:{style:{colors:"#fff"}}},yaxis:{labels:{style:{colors:"#fff"}}},series:[{name:"Giro do Motor",data:[]}],markers:{size:5,colors:["#1565C0"],strokeWidth:0,hover:{size:7}}};consumoChartOptions={chart:{type:"line",height:250,background:"transparent",toolbar:{show:!1},zoom:{enabled:!1}},series:[{name:"Consumo (km/l)",data:[]}],colors:["#4CAF50"],stroke:{curve:"smooth",width:3},xaxis:{categories:[],labels:{style:{colors:"#fff"}}},yaxis:{labels:{style:{colors:"#fff"},formatter:e=>e.toFixed(2)}},markers:{size:5,colors:["#4CAF50"],strokeWidth:0},tooltip:{theme:"dark",y:{formatter:e=>`${e.toFixed(2)} km/l`}}};freioChartOptions={chart:{type:"bar",height:250,background:"transparent",toolbar:{show:!1},stacked:!0},series:[{name:"Freio",data:[]},{name:"Pedal",data:[]}],colors:["#FF9800","#F44336"],plotOptions:{bar:{horizontal:!1,columnWidth:"70%",borderRadius:4}},xaxis:{categories:[],labels:{style:{colors:"#fff"}}},yaxis:{labels:{style:{colors:"#fff"},formatter:e=>`${e}%`}},tooltip:{theme:"dark",y:{formatter:e=>`${e}%`}},legend:{position:"top",horizontalAlign:"right",labels:{colors:"#fff"}}};filterForm;insuficientesData=[];filterOptions={empresas:["Empresa A","Empresa B","Empresa C"],garagens:["Garagem 1","Garagem 2","Garagem 3"],tiposTurno:["Manh\xE3","Tarde","Noite"]};viewMode="heatmap";isLoading=!1;linhaSelecionada=null;motoristasSelecionados=[];motoristaSelecionado=null;indicadoresMotorista=[];constructor(e,t,o){this.fb=e,this.cdr=t,this.renderer=o,this.filterForm=this.fb.group({periodoInicio:[this.getDefaultStartDate()],periodoFim:[new Date],empresa:[""],garagem:[""],tipoTurno:[""]})}ngOnInit(){this.carregarDadosMockados(),this.filterForm.valueChanges.subscribe(()=>{this.carregarDadosMockados()})}getDefaultStartDate(){let e=new Date;return e.setMonth(e.getMonth()-1),e}carregarDadosMockados(){this.isLoading=!0,this.resetSelecoes();let e=["Jo\xE3o Silva","Maria Oliveira","Pedro Santos","Ana Costa","Carlos Ferreira","Luiza Souza","Roberto Almeida","Juliana Lima","Marcos Ribeiro","Fernanda Gomes","Ricardo Martins","Paula Cardoso","Andr\xE9 Pereira","Camila Rodrigues","Bruno Carvalho"],t=o=>o===0?[]:[...e].sort(()=>.5-Math.random()).slice(0,Math.min(o,e.length));setTimeout(()=>{this.insuficientesData=[{linha:"117",quantidade:6,percentual:6,motoristas:t(6)},{linha:"133",quantidade:0,percentual:0,motoristas:[]},{linha:"161",quantidade:0,percentual:0,motoristas:[]},{linha:"201",quantidade:2,percentual:20,motoristas:t(2)},{linha:"202",quantidade:2,percentual:20,motoristas:t(2)},{linha:"415",quantidade:56,percentual:56,motoristas:t(10)},{linha:"426",quantidade:33,percentual:33,motoristas:t(8)},{linha:"539",quantidade:2,percentual:20,motoristas:t(2)},{linha:"585",quantidade:0,percentual:0,motoristas:[]},{linha:"626",quantidade:0,percentual:0,motoristas:[]},{linha:"700",quantidade:12,percentual:12,motoristas:t(5)},{linha:"701",quantidade:15,percentual:15,motoristas:t(6)}],this.insuficientesData.sort((o,d)=>parseInt(o.linha)-parseInt(d.linha)),this.carregarIndicadoresGerais(),this.updateCharts(),this.isLoading=!1},500)}carregarIndicadoresGerais(){this.indicadoresMotorista=[{nome:"Efici\xEAncia",valor:"82",tendencia:1,unidade:"%"},{nome:"KM/L",valor:"3.45",tendencia:-1,unidade:"km/l"},{nome:"KM Total",valor:"1456",tendencia:1,unidade:"km"},{nome:"Insuficientes",valor:"24",tendencia:-1,unidade:"%"},{nome:"RPM M\xE9dio",valor:"2210",tendencia:1,unidade:"rpm"},{nome:"Linhas",valor:"12",tendencia:0,unidade:""}]}updateCharts(){this.viewMode==="heatmap"?this.updateHeatmap():this.updateBarChart(),this.atualizarGraficosGerais()}updateHeatmap(){if(this.insuficientesData.length===0)return;let e=5,t=[],o=[];for(let v=0;v<e;v++)t.push("");let d=[];for(let v=0;v<this.insuficientesData.length;v+=e)d.push(this.insuficientesData.slice(v,v+e));d.forEach((v,A)=>{let ae=t.map((ie,ve)=>{let Be=v[ve];return{x:ie,y:Be?Be.percentual:0}});o.push({name:`Linha ${A+1}`,data:ae})}),this.heatmapOptions=M(I({},this.heatmapOptions),{chart:M(I({},this.heatmapOptions.chart||{}),{type:"heatmap",height:d.length*80,events:{dataPointSelection:(v,A,ae)=>{let ie=ae.seriesIndex,ve=ae.dataPointIndex;ie!==void 0&&ve!==void 0&&this.onChartClick({seriesIndex:ie,dataPointIndex:ve})}}}),series:o,xaxis:{labels:{show:!1},title:{text:""}},tooltip:{custom:({seriesIndex:v,dataPointIndex:A})=>{let ae=v*e+A,ie=this.insuficientesData[ae];return ie?`
            <div class="p-2 bg-gray-800 shadow-lg rounded-md border border-gray-700 text-white">
              <div class="font-bold mb-1">Linha: ${ie.linha}</div>
              <div>Quantidade: ${ie.quantidade}</div>
              <div>Percentual: ${ie.percentual}%</div>
              <div class="text-xs text-gray-300 mt-1">Clique para ver detalhes</div>
            </div>
          `:'<div class="custom-tooltip">Sem dados</div>'}}})}updateBarChart(){if(this.insuficientesData.length===0)return;let e=this.insuficientesData.map(o=>o.linha),t=this.insuficientesData.map(o=>o.percentual);this.barChartOptions=M(I({},this.barChartOptions),{series:[{name:"Percentual",data:t}],xaxis:M(I({},this.barChartOptions.xaxis),{categories:e}),chart:M(I({},this.barChartOptions.chart),{events:{dataPointSelection:(o,d,v)=>{if(v.dataPointIndex!==void 0&&v.dataPointIndex>=0){let A=this.insuficientesData[v.dataPointIndex];A&&this.selecionarLinha(A.linha)}}}})})}atualizarGraficosGerais(){let e=Array.from({length:7},(o,d)=>{let v=new Date;return v.setDate(v.getDate()-(6-d)),`${v.getDate()}/${v.getMonth()+1}`}),t=Math.floor(65+Math.random()*30);this.pontuacaoChartOptions.series=[t],this.giroChartOptions.series=[{name:"Giro do Motor",data:e.map(()=>Math.floor(1600+Math.random()*800))}],this.giroChartOptions.xaxis={categories:e,labels:{style:{colors:"#fff"}}},this.consumoChartOptions.series=[{name:"Consumo (km/l)",data:e.map(()=>+(2.5+Math.random()*1.2).toFixed(2))}],this.consumoChartOptions.xaxis={categories:e,labels:{style:{colors:"#fff"}}},this.freioChartOptions.series=[{name:"Freio",data:e.map(()=>Math.floor(15+Math.random()*40))},{name:"Pedal",data:e.map(()=>Math.floor(20+Math.random()*45))}],this.freioChartOptions.xaxis={categories:e,labels:{style:{colors:"#fff"}}}}toggleViewMode(){this.viewMode=this.viewMode==="heatmap"?"barras":"heatmap",setTimeout(()=>this.updateCharts(),0)}exportarDados(){let e=`data:text/csv;charset=utf-8,Linha,Quantidade,Percentual,Motoristas
`+this.insuficientesData.map(d=>`${d.linha},${d.quantidade},${d.percentual},"${(d.motoristas||[]).join("; ")}"`).join(`
`),t=encodeURI(e),o=document.createElement("a");o.setAttribute("href",t),o.setAttribute("download","insuficientes_por_linha.csv"),document.body.appendChild(o),o.click(),document.body.removeChild(o)}onChartClick(e){let o=e.seriesIndex*5+e.dataPointIndex;if(o>=0&&o<this.insuficientesData.length){let d=this.insuficientesData[o];d&&this.selecionarLinha(d.linha)}}selecionarLinha(e){if(this.linhaSelecionada===e){this.resetSelecoes(),this.cdr.detectChanges();return}this.linhaSelecionada=e,this.motoristaSelecionado=null;let t=this.insuficientesData.find(o=>o.linha===e);t&&t.motoristas&&t.motoristas.length>0?this.motoristasSelecionados=t.motoristas:this.motoristasSelecionados=[],this.cdr.detectChanges()}selecionarMotorista(e){this.motoristaSelecionado=e,this.carregarDadosMotorista(e)}resetSelecoes(){this.linhaSelecionada=null,this.motoristasSelecionados=[],this.motoristaSelecionado=null}carregarDadosMotorista(e){let t=Array.from({length:7},(o,d)=>{let v=new Date;return v.setDate(v.getDate()-(6-d)),`${v.getDate()}/${v.getMonth()+1}`});this.giroChartOptions.series=[{name:"Giro do Motor",data:t.map(()=>Math.floor(1600+Math.random()*800))}],this.giroChartOptions.xaxis={categories:t,labels:{style:{colors:"#fff"}}},this.consumoChartOptions.series=[{name:"Consumo (km/l)",data:t.map(()=>+(2.5+Math.random()*1.2).toFixed(2))}],this.consumoChartOptions.xaxis={categories:t,labels:{style:{colors:"#fff"}}},this.freioChartOptions.series=[{name:"Freio",data:t.map(()=>Math.floor(15+Math.random()*40))},{name:"Pedal",data:t.map(()=>Math.floor(20+Math.random()*45))}],this.freioChartOptions.xaxis={categories:t,labels:{style:{colors:"#fff"}}}}static \u0275fac=function(t){return new(t||i)(w(Ot),w(j),w(R))};static \u0275cmp=y({type:i,selectors:[["app-insuficientes-linha"]],viewQuery:function(t,o){if(t&1&&we(sr,5),t&2){let d;ye(d=Ve())&&(o.chart=d.first)}},decls:5,vars:3,consts:[["chart",""],[1,"p-4","text-black"],["class","flex justify-center items-center p-8",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-6","text-center","gap-6","mb-4"],["class","bg-black text-white p-3 rounded-2xl flex flex-col items-center justify-center card",4,"ngFor","ngForOf"],["class","grid grid-cols-1 lg:grid-cols-3 gap-4",4,"ngIf"],[1,"flex","justify-center","items-center","p-8"],[1,"animate-spin","rounded-full","h-10","w-10","border-t-2","border-b-2","border-gray-900"],[1,"bg-black","text-white","p-3","rounded-2xl","flex","flex-col","items-center","justify-center","card"],[1,"text-xl","text-amber-500","font-bold","mb-2"],[1,"flex","items-end"],[1,"text-3xl","font-bold"],[1,"ml-2","text-xl","font-bold",3,"ngClass"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],[1,"lg:col-span-2","rounded-2xl","p-4"],[1,"flex","justify-between","items-center","mb-4"],[1,"title"],[1,"flex","gap-2"],[1,"px-3","py-3","rounded-md","text-xs","font-bold","text-white","border","border-cyan-100",3,"click"],[1,"px-3","py-1","rounded-md","text-xs","font-bold","text-white","bg-cyan-500",3,"click"],["class","text-black",4,"ngIf"],["class","card",4,"ngIf"],[1,"card"],["id","chart"],[3,"series","chart","xaxis","fill","markers","colors"],[1,"bg-black","text-white","rounded-2xl","p-4","h-fit"],[1,"font-bold","text-lg","mb-4"],["class","text-center text-gray-500 py-8",4,"ngIf"],[4,"ngIf"],[3,"series","chart","plotOptions","colors","labels"],[1,"text-black"],[3,"series","chart","dataLabels","plotOptions","xaxis","tooltip"],[3,"series","chart","xaxis","yaxis","plotOptions","tooltip","legend","fill"],[1,"text-center","text-gray-500","py-8"],[1,"divide-y","divide-gray-200"],["class","py-3 px-2 hover:bg-gray-25 focus:bg-gray-25 cursor-pointer focus:outline-none cursor-pointer transition-colors","tabindex","0","role","button",3,"click","keydown.enter",4,"ngFor","ngForOf"],["tabindex","0","role","button",1,"py-3","px-2","hover:bg-gray-25","focus:bg-gray-25","cursor-pointer","focus:outline-none","cursor-pointer","transition-colors",3,"click","keydown.enter"]],template:function(t,o){t&1&&(n(0,"div",1),p(1,cr,2,0,"div",2),n(2,"div",3),p(3,dr,8,5,"div",4),r(),p(4,fr,29,18,"div",5),r()),t&2&&(a(),s("ngIf",o.isLoading),a(2),s("ngForOf",o.indicadoresMotorista),a(),s("ngIf",!o.isLoading))},dependencies:[V,P,D,S,St,Qt,Zt],styles:['@charset "UTF-8";.card[_ngcontent-%COMP%]{border:1px solid #2c2c2e;border-radius:1rem;padding:1rem;margin-bottom:1rem}.title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#fff;margin-bottom:.5rem}.subtitle[_ngcontent-%COMP%]{font-size:.875rem;color:#a1a1aa}.apexcharts-tooltip[_ngcontent-%COMP%]{background-color:#2c2c2e!important;color:#fff!important;border:none!important}[_nghost-%COMP%]{display:block;font-family:Inter,sans-serif;color:#e5e7eb;padding:1rem;border-radius:1rem;box-shadow:0 0 20px #00000080}.bg-white[_ngcontent-%COMP%]{transition:all .2s ease}.bg-white[_ngcontent-%COMP%]:hover{box-shadow:0 10px 15px -3px #0000001a}button[_ngcontent-%COMP%]{transition:all .2s ease}button[_ngcontent-%COMP%]:hover{opacity:.9;transform:translateY(-1px)}button[_ngcontent-%COMP%]:active{transform:translateY(0)}.motorista-item[_ngcontent-%COMP%]{border-left:3px solid transparent;transition:all .2s ease}.motorista-item[_ngcontent-%COMP%]:hover{border-left-color:#e53935;background-color:#e539350d}.motorista-item.selected[_ngcontent-%COMP%]{border-left-color:#e53935;background-color:#e539351a;font-weight:500}.indicador-card[_ngcontent-%COMP%]{transition:all .3s ease}.indicador-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 6px #0000001a}.tendencia-up[_ngcontent-%COMP%]{color:#4caf50}.tendencia-down[_ngcontent-%COMP%]{color:#f44336}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translateY(-20px)}to{transform:translateY(0)}}.animate-fadeIn[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out,_ngcontent-%COMP%_slideIn .3s ease-out}.max-h-90vh[_ngcontent-%COMP%]{max-height:90vh}.overflow-y-auto[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:#E53935 #f5f5f5}.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f5f5f5;border-radius:10px}.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#e53935;border-radius:10px}.bg-black.bg-opacity-50[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}']})}return i})();var ei=(()=>{class i{scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=y({type:i,selectors:[["app-header"]],features:[Q([],[ee({matNotificationsNone:Ct})])],decls:5,vars:0,consts:[[1,"w-full","py-8","px-8","md:px-20","flex","items-center","justify-center","fixed","z-50",2,"background-color","#141416"],[1,"flex","items-center"],["src","assets/Logo_AceCopilot 1.png","alt","Logo da ACE Copilot",1,"h-10"],[1,"text-1xl","2xl:text-3xl","ms-3","font-semibold","text-white"]],template:function(t,o){t&1&&(n(0,"header",0)(1,"div",1),u(2,"img",2),n(3,"h1",3),l(4," DashDrive "),r()()())},dependencies:[V,X],encapsulation:2})}return i})();var ti=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=y({type:i,selectors:[["app-dash-drive"]],decls:3,vars:0,consts:[[1,"px-20","pb-28","pt-36","w-full","h-full","bg-black",2,"background-color","#09090B"]],template:function(t,o){t&1&&(u(0,"app-header"),n(1,"section",0),u(2,"app-insuficientes-linha"),r())},dependencies:[Xt,ei],encapsulation:2})}return i})();var xe=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=y({type:i,selectors:[["app-game"]],decls:45,vars:28,consts:[[1,"flex-1","px-4","md:container","py-28"],[1,"container","mt-12","grid","xs:grid-cols-2","gap-3","md:gap-4","xl:px-52","pb-6","md:pb-10","dark:border-b-4",2,"border-color","#1d1d1d"],["hlmBtn","","variant","ghost","routerLink","/ranking-empresa",1,"group","bg-amber-400","hover:bg-white","flex","justify-between","md:p-5","gap-4","h-20","md:h-24","rounded-2xl","md:rounded-3xl","relative","overflow-hidden","transition-all","duration-300","hover:shadow-lg","hover:-translate-y-1"],[1,"absolute","inset-0","bg-gradient-to-r","from-amber-300","to-amber-500","opacity-0","group-hover:opacity-10","transition-opacity","duration-300"],[1,"flex","items-center","gap-4","z-10"],[1,"w-10","md:w-12","h-10","md:h-12","bg-black","bg-opacity-10","rounded-xl","flex","items-center","justify-center","group-hover:scale-110","transition-transform","duration-300"],["src","assets/crown.svg","alt","Icone Ranking Empresa",1,"w-6","md:w-8"],[1,"text-black","font-bold","text-start","text-xs","sm:text-sm","md:text-lg"],["hlmBtn","","variant","ghost","routerLink","/ranking-geral",1,"group","bg-amber-400","hover:bg-white","flex","justify-between","md:p-5","gap-4","h-20","md:h-24","rounded-2xl","md:rounded-3xl","relative","overflow-hidden","transition-all","duration-300","hover:shadow-lg","hover:-translate-y-1"],["src","assets/crown.svg","alt","Icone Ranking Geral",1,"w-6","md:w-8"],["hlmBtn","","variant","ghost","routerLink","/game-dia",1,"group","bg-amber-400","hover:bg-white","flex","justify-between","md:p-5","gap-4","h-20","md:h-24","rounded-2xl","md:rounded-3xl","relative","overflow-hidden","transition-all","duration-300","hover:shadow-lg","hover:-translate-y-1"],["src","assets/calendar_month.svg","alt","Icone Game Dia",1,"w-6","md:w-8"],["hlmBtn","","variant","ghost","routerLink","/quiz",1,"group","bg-amber-400","hover:bg-white","flex","justify-between","md:p-5","gap-4","h-20","md:h-24","rounded-2xl","md:rounded-3xl","relative","overflow-hidden","transition-all","duration-300","hover:shadow-lg","hover:-translate-y-1"],["src","assets/cognition_2.svg","alt","Icone Quiz",1,"w-6","md:w-8"],[1,"container","xl:px-52","pt-6","md:pt-10","pb-6","md:pb-10",2,"border-color","#1d1d1d"],[1,"font-bold","text-2xl","md:text-3xl"],[3,"label","quantity","current","icon"],[1,"container","xl:px-52","pt-6","md:pt-10","pb-6","md:pb-10","dark:border-b-4",2,"border-color","#1d1d1d"]],template:function(t,o){t&1&&(u(0,"app-header"),n(1,"div",0)(2,"section",1)(3,"button",2),u(4,"div",3),n(5,"div",4)(6,"div",5),u(7,"img",6),r(),n(8,"p",7),l(9,"Ranking Empresa"),r()()(),n(10,"button",8),u(11,"div",3),n(12,"div",4)(13,"div",5),u(14,"img",9),r(),n(15,"p",7),l(16,"Ranking Geral"),r()()(),n(17,"button",10),u(18,"div",3),n(19,"div",4)(20,"div",5),u(21,"img",11),r(),n(22,"p",7),l(23,"Game Dia"),r()()(),n(24,"button",12),u(25,"div",3),n(26,"div",4)(27,"div",5),u(28,"img",13),r(),n(29,"p",7),l(30,"Quiz"),r()()()(),n(31,"section",14)(32,"h2",15),l(33,"Tarefas Di\xE1rias"),r(),u(34,"app-task",16)(35,"app-task",16)(36,"app-task",16)(37,"app-task",16),r(),n(38,"section",17)(39,"h2",15),l(40,"Tarefas Mensais"),r(),u(41,"app-task",16)(42,"app-task",16)(43,"app-task",16),r()(),u(44,"app-footer")),t&2&&(a(34),s("label","Abrir o Aplicativo")("quantity",1)("current",0)("icon","matAddToHomeScreenRound"),a(),s("label","Abrir Pontua\xE7\xE3o ACE")("quantity",1)("current",0)("icon","matLocalPlayRound"),a(),s("label","Responder a um Quiz")("quantity",1)("current",0)("icon","matQuizRound"),a(),s("label","Ler uma Dica de Economia")("quantity",1)("current",0)("icon","matAddCommentRound"),a(4),s("label","Refazer o treinamento")("quantity",10)("current",10)("icon","matVideoLibraryRound"),a(),s("label","5 Acessos ao Aplicativo")("quantity",5)("current",2)("icon","matAddToHomeScreenRound"),a(),s("label","20 Acessos ao Aplicativo")("quantity",20)("current",2)("icon","matAddToHomeScreenRound"))},dependencies:[V,X,Se,de,ue,pe,It],styles:["@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_buttonHover{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}.group[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.4,0,.2,1)}.group[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d}.group[_ngcontent-%COMP%]:active{transform:translateY(0)}.w-10[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.4,0,.2,1)}.group[_ngcontent-%COMP%]:hover   .w-10[_ngcontent-%COMP%]{transform:scale(1.1)}.progress-bar[_ngcontent-%COMP%]{transition:width .6s ease}button.text-amber-400[_ngcontent-%COMP%]:hover{transform:translate(5px);transition:transform .3s ease}@media (max-width: 768px){.grid-cols-1[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{animation:slideIn .5s ease-out}}ng-icon[_ngcontent-%COMP%]{transition:transform .3s ease}button[_ngcontent-%COMP%]:hover   ng-icon[_ngcontent-%COMP%]{transform:translate(5px)}"]})}return i})();function vr(i,c){if(i&1&&(n(0,"div",19)(1,"span",20),l(2),r()()),i&2){let e=m().$implicit;a(2),_("",e.cupons," cupons")}}function _r(i,c){if(i&1&&(n(0,"div",11)(1,"div",12),u(2,"img",13),p(3,vr,3,1,"div",14),r(),n(4,"h3",15),l(5),r(),n(6,"div",16),u(7,"ng-icon",17),n(8,"span",18),l(9),r()()()),i&2){let e=c.$implicit,t=m(2);a(),se("blur-sm",!t.isAvailable(e.cupons))("bg-[#1d1d1d]",!t.isAvailable(e.cupons)),a(),s("src",e.imagem,E)("alt",e.nome),a(),s("ngIf",!t.isAvailable(e.cupons)),a(2),h(e.nome),a(4),_("",e.cupons," cupons")}}function br(i,c){if(i&1&&(n(0,"div",5)(1,"div")(2,"div",6),u(3,"ng-icon",7),n(4,"h2",8),l(5),r()()(),n(6,"div",9),p(7,_r,10,9,"div",10),r()()),i&2){let e=c.$implicit;a(),ke("p-4 "+e.bgColor),a(2),ke("text-2xl "+e.cor),a(2),_("Fase ",e.nome,""),a(2),s("ngForOf",e.premios)}}var ii=(()=>{class i{couponService;availableCoupons=0;fases=[{nome:"Bronze",cor:"text-orange-700",bgColor:"bg-orange-950",premios:[{nome:'Smart TV 43"',imagem:"/assets/premios/tv-43.jpeg",cupons:50},{nome:"Airfryer 4L",imagem:"/assets/premios/airfryer.jpeg",cupons:30},{nome:"Fone Bluetooth",imagem:"/assets/premios/fone.jpeg",cupons:20}]},{nome:"Prata",cor:"text-gray-400",bgColor:"bg-gray-800",premios:[{nome:'Smart TV 50"',imagem:"/assets/premios/tv-50.jpeg",cupons:80},{nome:"Smartphone",imagem:"/assets/premios/smartphone.jpeg",cupons:60},{nome:"Notebook",imagem:"/assets/premios/notebook.jpeg",cupons:100}]},{nome:"Ouro",cor:"text-yellow-500",bgColor:"bg-yellow-950",premios:[{nome:'Smart TV 65"',imagem:"/assets/premios/tv-65.jpeg",cupons:120},{nome:"iPhone",imagem:"/assets/premios/iphone.jpeg",cupons:150},{nome:"Playstation 5",imagem:"/assets/premios/ps5.jpeg",cupons:100}]},{nome:"Ouro C",cor:"text-yellow-400",bgColor:"bg-yellow-900",premios:[{nome:'Smart TV 75"',imagem:"/assets/premios/tv-75.jpeg",cupons:200},{nome:"MacBook Pro",imagem:"/assets/premios/macbook.jpeg",cupons:180},{nome:"iPad Pro",imagem:"/assets/premios/ipad.jpeg",cupons:150}]}];constructor(e){this.couponService=e}ngOnInit(){this.couponService.getAvailableCoupons().subscribe(e=>{this.availableCoupons=e})}isAvailable(e){return this.availableCoupons>=e}resgatar(e){this.couponService.useCoupons(e.cupons)?alert(`Parab\xE9ns! Voc\xEA resgatou ${e.nome}`):alert("Cupons insuficientes para resgatar este pr\xEAmio.")}static \u0275fac=function(t){return new(t||i)(w(Mt))};static \u0275cmp=y({type:i,selectors:[["app-premiacoes"]],features:[Q([ee({matConfirmationNumberRound:Dt,matStarRound:kt})])],decls:8,vars:1,consts:[[1,"flex-1","md:container","py-28"],[1,"container","mx-auto","px-4"],[1,"text-3xl","md:text-4xl","font-bold","mb-8"],[1,"space-y-8"],["class","rounded-2xl overflow-hidden",4,"ngFor","ngForOf"],[1,"rounded-2xl","overflow-hidden"],[1,"flex","items-center","gap-3"],["name","matStarRound"],[1,"text-xl","md:text-2xl","font-bold"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4","p-4","bg-[#1e1e1e]"],["class","bg-[#2a2a2a] rounded-xl p-4 flex flex-col",4,"ngFor","ngForOf"],[1,"bg-[#2a2a2a]","rounded-xl","p-4","flex","flex-col"],[1,"relative"],[1,"w-full","h-48","object-contain","mb-4",3,"src","alt"],["class","absolute inset-0 flex items-center justify-center",4,"ngIf"],[1,"text-lg","font-semibold","mb-2"],[1,"flex","items-center","gap-2","mt-auto"],["name","matConfirmationNumberRound",1,"text-amber-400"],[1,"text-amber-400","font-semibold"],[1,"absolute","inset-0","flex","items-center","justify-center"],[1,"text-amber-400","font-semibold","text-lg"]],template:function(t,o){t&1&&(u(0,"app-header"),n(1,"div",0)(2,"div",1)(3,"h1",2),l(4,"Premia\xE7\xF5es"),r(),n(5,"div",3),p(6,br,8,6,"div",4),r()()(),u(7,"app-footer")),t&2&&(a(6),s("ngForOf",o.fases))},dependencies:[V,D,S,pe,ue,oe],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;min-height:100vh}"]})}return i})();var oi=(()=>{class i{kmlAnterior=0;kmlAtual=0;giro=0;freio=0;pedal=0;placa="";linha="";data="";turno="";turnos=[{turno:"Madrugada",start:"00:00",end:"05:59"},{turno:"Manh\xE3",start:"06:00",end:"11:59"},{turno:"Intervalo",start:"12:00",end:"13:59"},{turno:"Tarde",start:"14:00",end:"19:59"},{turno:"Noite",start:"20:00",end:"23:59"}];get horaTurno(){return this.turnos.find(t=>t.turno===this.turno)??{turno:this.turno,start:"",end:""}}get kmlAnteriorClass(){return this.kmlAnterior===this.kmlAtual?"bg-gray-600":this.kmlAnterior>this.kmlAtual?"bg-red-600":"bg-green-600"}get kmlAtualClass(){return this.kmlAtual===2.5?"bg-yellow-500":this.kmlAtual<2.5?"bg-red-600":"bg-green-600"}get giroClass(){return this.giro===7?"bg-yellow-500":this.giro>7?"bg-red-600":"bg-green-600"}get freioClass(){return this.freio===7?"bg-yellow-500":this.freio>7?"bg-red-600":"bg-green-600"}get pedalClass(){return this.pedal===7?"bg-yellow-500":this.pedal>7?"bg-red-600":"bg-green-600"}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=y({type:i,selectors:[["app-card-turno"]],inputs:{kmlAnterior:"kmlAnterior",kmlAtual:"kmlAtual",giro:"giro",freio:"freio",pedal:"pedal",placa:"placa",linha:"linha",data:"data",turno:"turno"},features:[Q([],[ee({matDirectionsBus:vt})])],decls:56,vars:16,consts:[[1,"py-4","mt-4","shadow-lg","dark:bg-[#242427]",2,"border-radius","20px"],[1,"flex","px-4","justify-between","rounded-lg"],[1,"flex","w-max","items-center","rounded-full","font-bold","shadow-md","px-4","py-2","text-xs","text-white","md:text-sm","gap-1",2,"background-color","#313135"],[1,"ml-1"],[1,"flex","w-max","items-center","rounded-full","overflow-hidden","text-black","font-bold","shadow-md"],[1,"relative","bg-yellow-400","font-bold","ps-4","py-2","text-lg","flex","items-center"],[1,"z-30","text-xs","md:text-lg"],[1,"absolute","right-0","left-6","md:left-11","top-1/2","-translate-y-1/2","w-8","h-8","md:w-10","md:h-10","bg-yellow-400","rotate-45","rounded-xl","origin-center"],[1,"bg-yellow-500","font-bold","ps-5","md:ps-9","pe-4","py-2","text-lg","flex","items-center"],[1,"text-xs","md:text-lg"],[1,"flex","justify-center","mt-4","p-3","md:p-4","gap-2","md:gap-4","text-white",2,"background-color","#141416"],[1,"rounded-lg","md:rounded-2xl","w-screen","p-2","text-center","flex","flex-col","justify-center",3,"ngClass"],[1,"text-xs","font-bold",2,"font-size","8px"],[1,"font-bold","md:text-2xl"],[1,"font-bold","text-xs"],[1,"rounded-lg","md:rounded-2xl","w-screen","md:p-3","text-center","flex","flex-col","justify-center",3,"ngClass"],[1,"flex","gap-4","items-center","text-white"],[1,"rounded-full","ms-4","mt-4","w-12","h-12","border-4","border-yellow-400","flex","items-center","justify-center"],["name","matDirectionsBus",1,"text-[#1D1D1D]","dark:text-white",2,"font-size","24px"],[1,"flex","flex-col","font-bold","pt-3","text-[#1D1D1D]","dark:text-white"],[1,"text-lg"],[1,"text-sm"]],template:function(t,o){t&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),l(4),r(),n(5,"span",3),l(6),r()(),n(7,"div",4)(8,"div",5)(9,"p",6),l(10),r(),u(11,"div",7),r(),n(12,"div",8)(13,"p",9),l(14),r()()()(),n(15,"div",10)(16,"div",11)(17,"p",12),l(18,"Semana Anterior"),r(),n(19,"span",13),l(20),r(),n(21,"p",14),l(22,"KM/L"),r()(),n(23,"div",15)(24,"span",13),l(25),r(),n(26,"p",14),l(27,"KM/L"),r()(),n(28,"div",15)(29,"span",13),l(30),r(),n(31,"p",14),l(32,"Giro"),r()(),n(33,"div",15)(34,"span",13),l(35),r(),n(36,"p",14),l(37,"Freio"),r()(),n(38,"div",15)(39,"span",13),l(40),r(),n(41,"p",14),l(42,"Pedal"),r()()(),n(43,"div",16)(44,"div",17),u(45,"ng-icon",18),r(),n(46,"div",19)(47,"p",20),l(48),r(),n(49,"small",21),l(50,"Placa"),r()(),n(51,"div",19)(52,"p",20),l(53),r(),n(54,"small",21),l(55,"Linha"),r()()()()),t&2&&(a(4),h(o.turno),a(2),h(o.data),a(4),h(o.horaTurno.start),a(4),h(o.horaTurno.end),a(2),s("ngClass",o.kmlAnteriorClass),a(4),h(o.kmlAnterior),a(3),s("ngClass",o.kmlAtualClass),a(2),h(o.kmlAtual),a(3),s("ngClass",o.giroClass),a(2),h(o.giro),a(3),s("ngClass",o.freioClass),a(2),h(o.freio),a(3),s("ngClass",o.pedalClass),a(2),h(o.pedal),a(8),h(o.placa),a(5),h(o.linha))},dependencies:[V,P,oe],encapsulation:2})}return i})();var Cr=["carouselContainer"],fe=()=>({minWidth:"280px"});function wr(i,c){if(i&1&&u(0,"app-card-turno",51),i&2){let e=c.$implicit;s("kmlAnterior",e.kmlAnterior)("kmlAtual",e.kmlAtual)("giro",e.giro)("freio",e.freio)("pedal",e.pedal)("placa",e.placa)("linha",e.linha)("turno",e.turno)("data",e.data)}}function yr(i,c){if(i&1&&(et(0),p(1,wr,1,9,"app-card-turno",50),tt()),i&2){let e=m();a(),s("ngForOf",e.filteredTurnos)}}function Vr(i,c){if(i&1&&(n(0,"div",52),u(1,"ng-icon",53),n(2,"p",54),l(3),r(),n(4,"p",55),l(5,"Tente selecionar outra data"),r()()),i&2){let e=m();a(),se("text-amber-400",e.isDarkMode)("text-amber-500",!e.isDarkMode),a(2),_("Nenhum turno encontrado para ",e.currentDate,"")}}var ni=(()=>{class i{cdr;carouselContainer;currentIndex=0;itemWidth=300;gapWidth=16;totalItems=5;scrollTimeout;isScrolling=!1;currentDate=this.formatDate(new Date);selectedDate=new Date;maxDate=new Date;isDarkMode=document.documentElement.classList.contains("dark");allTurnos=[{kmlAnterior:2.51,kmlAtual:2.08,giro:3,freio:7,pedal:10,placa:"51540",linha:"624",turno:"Intervalo",data:"08/04"},{kmlAnterior:2.51,kmlAtual:2.4,giro:2,freio:7,pedal:4,placa:"51540",linha:"624",turno:"Manh\xE3",data:"08/04"},{kmlAnterior:2.51,kmlAtual:3.01,giro:2,freio:10,pedal:4,placa:"51540",linha:"624",turno:"Madrugada",data:"08/04"},{kmlAnterior:2.51,kmlAtual:2.96,giro:0,freio:2,pedal:4,placa:"51540",linha:"624",turno:"Intervalo",data:"07/04"},{kmlAnterior:2.51,kmlAtual:2.51,giro:2,freio:8,pedal:3,placa:"51540",linha:"624",turno:"Manh\xE3",data:"07/04"}];filteredTurnos=[];constructor(e){this.cdr=e,new MutationObserver(o=>{o.forEach(d=>{d.attributeName==="class"&&(this.isDarkMode=document.documentElement.classList.contains("dark"),this.cdr.detectChanges())})}).observe(document.documentElement,{attributes:!0,attributeFilter:["class"]})}ngOnInit(){this.updateLayout(),this.filterTurnosByDate(this.currentDate)}ngAfterViewInit(){this.carouselContainer&&this.carouselContainer.nativeElement.addEventListener("scroll",()=>{this.isScrolling||this.handleScroll()},{passive:!0})}handleScroll(){this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(()=>{if(this.carouselContainer){let t=this.carouselContainer.nativeElement.scrollLeft;this.currentIndex=Math.round(t/(this.itemWidth+this.gapWidth)),this.cdr.detectChanges()}},50)}updateLayout(){if(this.carouselContainer){let e=this.carouselContainer.nativeElement,t=e.scrollWidth-e.clientWidth;e.scrollLeft>t&&(e.scrollLeft=t)}}get canScrollPrev(){return this.carouselContainer?this.carouselContainer.nativeElement.scrollLeft>0:!1}get canScrollNext(){if(!this.carouselContainer)return!1;let e=this.carouselContainer.nativeElement,t=e.scrollWidth-e.clientWidth;return e.scrollLeft<t-1}prevSlide(){if(this.carouselContainer&&this.canScrollPrev){this.isScrolling=!0;let e=this.carouselContainer.nativeElement,t=e.scrollLeft,o=Math.max(0,t-(this.itemWidth+this.gapWidth));e.scrollTo({left:o,behavior:"smooth"}),this.currentIndex=Math.floor(o/(this.itemWidth+this.gapWidth)),setTimeout(()=>{this.isScrolling=!1,this.cdr.detectChanges()},500)}}nextSlide(){if(this.carouselContainer&&this.canScrollNext){this.isScrolling=!0;let e=this.carouselContainer.nativeElement,t=e.scrollLeft,o=e.scrollWidth-e.clientWidth,d=Math.min(o,t+(this.itemWidth+this.gapWidth));e.scrollTo({left:d,behavior:"smooth"}),this.currentIndex=Math.floor(d/(this.itemWidth+this.gapWidth)),setTimeout(()=>{this.isScrolling=!1,this.cdr.detectChanges()},500)}}filterTurnosByDate(e){this.currentDate=e,this.filteredTurnos=this.allTurnos.filter(t=>t.data===e),this.totalItems=this.filteredTurnos.length,this.cdr.detectChanges()}canNavigatePrevious(){return!0}canNavigateForward(){let[e,t]=this.currentDate.split("/").map(Number),o=new Date,d=this.formatDate(o),[v,A]=d.split("/").map(Number);return t>A?!1:t===A?e<v:!0}formatDate(e){let t=String(e.getDate()).padStart(2,"0"),o=String(e.getMonth()+1).padStart(2,"0");return`${t}/${o}`}formatDateForInput(e){let t=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),d=String(e.getDate()).padStart(2,"0");return`${t}-${o}-${d}`}get inputDateValue(){return this.formatDateForInput(this.selectedDate)}nextDate(){let[e,t]=this.currentDate.split("/").map(Number),o=new Date(new Date().getFullYear(),t-1,e);o.setDate(o.getDate()-1);let d=this.formatDate(o);this.filterTurnosByDate(d)}previousDate(){if(this.canNavigateForward()){let[e,t]=this.currentDate.split("/").map(Number),o=new Date(new Date().getFullYear(),t-1,e);o.setDate(o.getDate()+1);let d=this.formatDate(o);this.filterTurnosByDate(d)}}onDateSelected(e){try{let t=e.target.value?new Date(e.target.value+"T00:00:00"):e.value;if(!(t instanceof Date)||isNaN(t.getTime())){console.error("Invalid date input:",e);return}this.selectedDate=t,this.currentDate=this.formatDate(t),this.filterTurnosByDate(this.currentDate)}catch(t){console.error("Error processing date selection:",t)}}get datesWithShifts(){return this.allTurnos.filter(e=>e.kmlAtual>0||e.giro>0||e.freio>0||e.pedal>0).map(e=>e.data)}static \u0275fac=function(t){return new(t||i)(w(j))};static \u0275cmp=y({type:i,selectors:[["app-score"]],viewQuery:function(t,o){if(t&1&&we(Cr,5),t&2){let d;ye(d=Ve())&&(o.carouselContainer=d.first)}},features:[Q([],[ee({matArrowBackIos:pt,matArrowForwardIos:gt,matArrowDownward:ht,matWorkspacePremium:Vt,matArrowUpward:xt,matCalendarMonth:ft,matWorkHistory:yt})])],decls:116,vars:18,consts:[["carouselContainer",""],["dateInput",""],["noTurnos",""],[1,"flex-1","px-4","md:container","py-28"],["id","resumo",1,"container","mx-auto","mt-10","px-2","sm:px-4","pb-6","md:pb-10","dark:border-b-4","flex","flex-col",2,"border-color","#1d1d1d"],[1,"flex","justify-between","items-center","mb-4"],[1,"font-bold","text-xl","sm:text-2xl","md:text-3xl"],[1,"flex"],[1,"rounded-full","w-7","h-7","sm:w-8","sm:h-8","border-2","border-yellow-400","flex","items-center","justify-center","mr-2","ps-1","disabled:opacity-50","disabled:cursor-not-allowed","z-10",3,"click","disabled"],["name","matArrowBackIos",1,"text-[10px]","sm:text-xs"],[1,"rounded-full","w-7","h-7","sm:w-8","sm:h-8","border-2","border-yellow-400","flex","items-center","justify-center","disabled:opacity-50","disabled:cursor-not-allowed","z-10",3,"click","disabled"],["name","matArrowForwardIos",1,"text-[10px]","sm:text-xs"],[1,"carousel-wrapper","relative"],[1,"carousel-container","mt-2","sm:mt-4","overflow-x-auto","touch-pan-x","snap-x","snap-mandatory","hide-scrollbar"],[1,"carousel-track","flex","gap-3","min-w-max"],[1,"carousel-item","flex-shrink-0","w-[280px]","snap-start",3,"ngStyle"],[1,"bg-amber-400","h-48","text-black","p-4","sm:p-6","flex","flex-col","justify-between","rounded-2xl","sm:rounded-3xl","shadow-lg"],[1,"font-bold","text-lg","sm:text-xl"],[1,"font-light","text-sm"],[1,"font-bold","text-4xl","sm:text-5xl"],[1,"mt-2"],[1,"progress-bar","bg-black","bg-opacity-20"],[1,"progress-fill","bg-black",2,"width","70%"],[1,"text-xs","whitespace-normal"],[1,"h-48","p-4","sm:p-6","flex","flex-col","justify-between","text-white","card-gradient","rounded-2xl","sm:rounded-3xl","shadow-lg","border","border-gray-800"],[1,"font-light","text-sm","text-gray-400"],[1,"flex","items-end","justify-between"],["name","matArrowDownward",1,"text-red-500",2,"font-size","34px"],[1,"progress-bar","bg-gray-700"],[1,"progress-fill","bg-red-500",2,"width","40%"],[1,"text-xs","text-gray-400","whitespace-normal"],["name","matArrowUpward",1,"text-green-500",2,"font-size","34px"],[1,"progress-fill","bg-green-500",2,"width","25%"],[1,"text-green-500"],[1,"fas","fa-arrow-up","text-3xl"],[1,"progress-fill","bg-amber-400",2,"width","78%"],[1,"container","mx-auto","px-4","pt-6","md:pt-10"],[1,"flex","justify-between","items-center"],[1,"font-bold","text-2xl","md:text-3xl"],[1,"flex","gap-2"],[1,"rounded-full","w-8","h-8","border-2","border-yellow-400","flex","items-center","justify-center",3,"click"],["name","matArrowBackIos",1,"ml-1.5",2,"font-size","12px"],[1,"relative"],[1,"rounded-full","font-semibold","shadow-md","px-4","py-2","text-sm","text-white","bg-[#313135]","flex","items-center",3,"click"],["name","matCalendarMonth",1,"mr-2","text-amber-400",2,"font-size","16px"],["type","date",1,"absolute","opacity-100","w-0","h-0","top-0","left-0","cursor-pointer",2,"color-scheme","dark",3,"change","max","value"],[1,"rounded-full","w-8","h-8","border-2","border-yellow-400","flex","items-center","justify-center","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["name","matArrowForwardIos",2,"font-size","12px"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-4","md:gap-8","mt-4","flex-wrap"],[4,"ngIf","ngIfElse"],[3,"kmlAnterior","kmlAtual","giro","freio","pedal","placa","linha","turno","data",4,"ngFor","ngForOf"],[3,"kmlAnterior","kmlAtual","giro","freio","pedal","placa","linha","turno","data"],[1,"col-span-full","flex","flex-col","items-center","justify-center","py-16","text-gray-500","dark:text-gray-400"],["name","matWorkHistory",1,"text-5xl","mb-4"],[1,"text-lg","font-medium"],[1,"text-sm","mt-2"]],template:function(t,o){if(t&1){let d=C();u(0,"app-header"),n(1,"div",3),u(2,"app-statistic"),n(3,"section",4)(4,"div",5)(5,"h2",6),l(6,"Resumo"),r(),n(7,"div",7)(8,"button",8),f("click",function(){return g(d),x(o.prevSlide())}),u(9,"ng-icon",9),r(),n(10,"button",10),f("click",function(){return g(d),x(o.nextSlide())}),u(11,"ng-icon",11),r()()(),n(12,"div",12)(13,"div",13,0)(15,"div",14)(16,"div",15)(17,"div",16)(18,"div")(19,"p",17),l(20,"Acessos"),r(),n(21,"small",18),l(22,"App"),r()(),n(23,"span",19),l(24,"28"),r(),n(25,"div",20)(26,"div",21),u(27,"div",22),r(),n(28,"small",23),l(29,"+12% em rela\xE7\xE3o ao m\xEAs passado"),r()()()(),n(30,"div",15)(31,"div",24)(32,"div")(33,"p",17),l(34,"Giro"),r(),n(35,"small",25),l(36,"M\xEAs"),r()(),n(37,"div",26)(38,"span",19),l(39,"8"),r(),u(40,"ng-icon",27),r(),n(41,"div",20)(42,"div",28),u(43,"div",29),r(),n(44,"small",30),l(45,"-20% em rela\xE7\xE3o ao m\xEAs passado"),r()()()(),n(46,"div",15)(47,"div",24)(48,"div")(49,"p",17),l(50,"Freio"),r(),n(51,"small",25),l(52,"M\xEAs"),r()(),n(53,"div",26)(54,"span",19),l(55,"5"),r(),u(56,"ng-icon",31),r(),n(57,"div",20)(58,"div",28),u(59,"div",32),r(),n(60,"small",30),l(61,"+15% em rela\xE7\xE3o ao m\xEAs passado"),r()()()(),n(62,"div",15)(63,"div",24)(64,"div")(65,"p",17),l(66,"Pedal"),r(),n(67,"small",25),l(68,"M\xEAs"),r()(),n(69,"div",26)(70,"span",19),l(71,"8"),r(),u(72,"ng-icon",27),r(),n(73,"div",20)(74,"div",28),u(75,"div",29),r(),n(76,"small",30),l(77,"-12% em rela\xE7\xE3o ao m\xEAs passado"),r()()()(),n(78,"div",15)(79,"div",24)(80,"div")(81,"p",17),l(82,"Efici\xEAncia"),r(),n(83,"small",25),l(84,"M\xEAs"),r()(),n(85,"div",26)(86,"span",19),l(87,"78%"),r(),n(88,"div",33),u(89,"i",34),r()(),n(90,"div",20)(91,"div",28),u(92,"div",35),r(),n(93,"small",30),l(94,"+8% em rela\xE7\xE3o ao m\xEAs passado"),r()()()()()()()(),n(95,"section",36)(96,"div",37)(97,"h2",38),l(98,"\xDAltimos Turnos"),r(),n(99,"div",39)(100,"button",40),f("click",function(){return g(d),x(o.nextDate())}),u(101,"ng-icon",41),r(),n(102,"div",42)(103,"button",43),f("click",function(){g(d);let A=Ie(108);return x(A.click())}),u(104,"ng-icon",44),n(105,"span"),l(106),r()(),n(107,"input",45,1),f("change",function(A){return g(d),x(o.onDateSelected(A))}),r()(),n(109,"button",46),f("click",function(){return g(d),x(o.previousDate())}),u(110,"ng-icon",47),r()()(),n(111,"div",48),p(112,yr,2,1,"ng-container",49)(113,Vr,6,5,"ng-template",null,2,rt),r()()(),u(115,"app-footer")}if(t&2){let d=Ie(114);a(8),s("disabled",!o.canScrollPrev),a(2),s("disabled",!o.canScrollNext),a(6),s("ngStyle",ce(13,fe)),a(14),s("ngStyle",ce(14,fe)),a(16),s("ngStyle",ce(15,fe)),a(16),s("ngStyle",ce(16,fe)),a(16),s("ngStyle",ce(17,fe)),a(28),h(o.currentDate),a(),s("max",o.maxDate)("value",o.inputDateValue),a(2),s("disabled",!o.canNavigateForward()),a(3),s("ngIf",o.filteredTurnos.length>0)("ngIfElse",d)}},dependencies:[V,D,S,N,X,oe,oi,Tt,pe,ue,H],styles:["body[_ngcontent-%COMP%]{font-family:Inter,sans-serif;background-color:#0f0f0f;color:#fff}.card-gradient[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a1a1a,#2d2d2d)}.carousel-wrapper[_ngcontent-%COMP%]{position:relative;width:100%}.carousel-container[_ngcontent-%COMP%]{position:relative;width:100%;-webkit-overflow-scrolling:touch;scroll-behavior:smooth}.hide-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.hide-scrollbar[_ngcontent-%COMP%]{-ms-overflow-style:none;scrollbar-width:none}.carousel-track[_ngcontent-%COMP%]{transition:transform .3s ease-out;will-change:transform;display:flex;align-items:stretch}.carousel-item[_ngcontent-%COMP%]{transition:all .3s ease;height:100%}.carousel-item[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}.stat-card[_ngcontent-%COMP%]{transition:all .3s ease}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 20px #0003}.nav-button[_ngcontent-%COMP%]{transition:all .2s ease}.nav-button[_ngcontent-%COMP%]:hover{background-color:#fbbf2433}.turno-card[_ngcontent-%COMP%]{transition:all .3s ease}.turno-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 8px 15px #0000004d}.progress-bar[_ngcontent-%COMP%]{height:4px;border-radius:2px;overflow:hidden}@media (min-width: 640px){.progress-bar[_ngcontent-%COMP%]{height:6px;border-radius:3px}}.progress-fill[_ngcontent-%COMP%]{height:100%;transition:width .5s ease}@media (max-width: 640px){.carousel-container[_ngcontent-%COMP%]{margin-left:-.5rem;margin-right:-.5rem;padding:0 .5rem}}@media (min-width: 641px){.carousel-container[_ngcontent-%COMP%]{margin-left:-1rem;margin-right:-1rem;padding:0 1rem}}input[type=date][_ngcontent-%COMP%]{appearance:none;-webkit-appearance:none;position:relative;z-index:50}input[type=date][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{background-color:#fbbf24;padding:4px;cursor:pointer;border-radius:4px}input[type=date][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator:hover{background-color:#f59e0b}input[type=date][_ngcontent-%COMP%]::-moz-calendar-picker-indicator{display:none}input[type=date][_ngcontent-%COMP%]:focus{background-color:#313135;color:#fff}"]})}return i})();var ri=(()=>{class i{authService;router;constructor(e,t){this.authService=e,this.router=t}canActivate(){return this.authService.isAdmin()?!0:(this.router.navigate(["/home"]),!1)}static \u0275fac=function(t){return new(t||i)(le(me),le(te))};static \u0275prov=Ce({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Ee=(()=>{class i{authService;router;constructor(e,t){this.authService=e,this.router=t}canActivate(){return this.authService.isLoggedIn().pipe(qe(1),$e(e=>e?!0:(this.router.navigate(["/login"]),!1)))}static \u0275fac=function(t){return new(t||i)(le(me),le(te))};static \u0275prov=Ce({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var ai=[{path:"login",loadComponent:()=>import("./chunk-QKFKXMXS.js").then(i=>i.LoginComponent)},{path:"register",loadComponent:()=>import("./chunk-RPKFPEAQ.js").then(i=>i.RegisterComponent)},{path:"user-management",loadComponent:()=>import("./chunk-TOAQSKKN.js").then(i=>i.UserManagementComponent),canActivate:[Ee,ri]},{path:"home",loadComponent:()=>import("./chunk-NPBSEDB7.js").then(i=>i.HomeComponent),canActivate:[Ee]},{path:"profile",loadComponent:()=>import("./chunk-FWIBYWFX.js").then(i=>i.ProfileComponent),canActivate:[Ee]},{path:"",redirectTo:"/login",pathMatch:"full"},{path:"awaiting-approval",component:At},{path:"dsbcarros",component:Yt},{path:"dash-drive",component:ti},{path:"dsb-carros-temp",component:Bt},{path:"dsb-carros-torque",component:$t},{path:"dsb-carros-turbina",component:zt},{path:"dsb-carros-pedal",component:Ht},{path:"dsb-carros-ar-comprimido",component:Rt},{path:"dsb-carros-velocidade",component:Jt},{path:"pontuacao-ace",component:ni},{path:"as-no-ace",component:xe},{path:"premiacoes",component:ii},{path:"ranking-empresa",component:xe},{path:"ranking-geral",component:xe},{path:"game-dia",component:xe},{path:"quiz",component:xe}];var li={providers:[dt(),at({eventCoalescing:!0}),ut(ai)]};var si=(()=>{class i{themeService;title="app-ace-copilot";constructor(e){this.themeService=e}ngOnInit(){}static \u0275fac=function(t){return new(t||i)(w(Et))};static \u0275cmp=y({type:i,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"min-h-screen","flex","flex-col"],[1,"flex-1"]],template:function(t,o){t&1&&(n(0,"div",0)(1,"main",1),u(2,"router-outlet"),r()())},dependencies:[X,mt],encapsulation:2})}return i})();ct(si,li).catch(i=>console.error(i));
