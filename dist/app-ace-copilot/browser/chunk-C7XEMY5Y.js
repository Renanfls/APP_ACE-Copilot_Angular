import{a as i,c as l,m as r}from"./chunk-RVYV3GKE.js";import{a as e,b as n}from"./chunk-4CLCTAJ7.js";var p=(()=>{class o{couponStats=new l({total:0,available:0,used:0});constructor(){this.loadCouponStats()}loadCouponStats(){let t=localStorage.getItem("couponStats");if(t)this.couponStats.next(JSON.parse(t));else{let a={total:15,available:10,used:5};this.couponStats.next(a),this.saveCouponStats()}}saveCouponStats(){localStorage.setItem("couponStats",JSON.stringify(this.couponStats.value))}getCouponStats(){return this.couponStats.asObservable()}getAvailableCoupons(){return new i(t=>{this.couponStats.subscribe(a=>{t.next(a.available)})})}addCoupons(t){let a=this.couponStats.value,s=n(e({},a),{total:a.total+t,available:a.available+t});this.couponStats.next(s),this.saveCouponStats()}useCoupons(t){let a=this.couponStats.value;if(a.available<t)return!1;let s=n(e({},a),{available:a.available-t,used:a.used+t});return this.couponStats.next(s),this.saveCouponStats(),!0}rewardDailyTasks(t=1){this.addCoupons(t)}static \u0275fac=function(a){return new(a||o)};static \u0275prov=r({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();export{p as a};
