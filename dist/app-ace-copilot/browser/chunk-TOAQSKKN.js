import{a as R,d as W}from"./chunk-RJPSEO76.js";import{$a as B,Bb as O,Cb as A,I as i,Ia as w,Ja as E,K as h,Lb as H,M as C,Na as I,Nb as N,Ob as q,Pa as M,Q as _,T as u,V as y,X as r,Y as a,Z as s,_a as j,aa as v,ba as b,ca as c,hb as V,ib as F,ja as o,ka as k,la as l,lb as P,mb as $,pb as D,qa as S,s as g,t as x,wa as T,xa as U}from"./chunk-RVYV3GKE.js";import{d as f}from"./chunk-4CLCTAJ7.js";function G(n,d){if(n&1){let e=v();r(0,"button",10),b("click",function(){let m=g(e).$implicit,p=c();return x(p.currentTab=m.value)}),o(1),r(2,"span",11),o(3),a()()}if(n&2){let e=d.$implicit,t=c();y("border-amber-500",t.currentTab===e.value)("text-amber-500",t.currentTab===e.value)("border-transparent",t.currentTab!==e.value)("text-gray-500",t.currentTab!==e.value),i(),l(" ",e.label," "),i(),y("bg-amber-100",t.currentTab===e.value)("text-amber-600",t.currentTab===e.value)("bg-gray-100",t.currentTab!==e.value)("text-gray-600",t.currentTab!==e.value),i(),l(" ",t.getUsersByStatus(e.value).length," ")}}function z(n,d){if(n&1){let e=v();r(0,"button",26),b("click",function(){g(e);let m=c().$implicit,p=c();return x(p.approveUser(m))}),s(1,"ng-icon",27),o(2," Aprovar "),a()}}function J(n,d){if(n&1){let e=v();r(0,"button",28),b("click",function(){g(e);let m=c().$implicit,p=c();return x(p.rejectUser(m))}),s(1,"ng-icon",29),o(2," Rejeitar "),a()}}function K(n,d){if(n&1){let e=v();r(0,"button",28),b("click",function(){g(e);let m=c().$implicit,p=c();return x(p.blockUser(m))}),s(1,"ng-icon",30),o(2," Bloquear "),a()}}function L(n,d){if(n&1&&(r(0,"div",12)(1,"div",13)(2,"div",14),s(3,"ng-icon",15),r(4,"h3",16),o(5),a()(),r(6,"div",17)(7,"div",14),s(8,"ng-icon",18),o(9),a(),r(10,"div",14),s(11,"ng-icon",19),o(12),a(),r(13,"div",14),s(14,"ng-icon",20),o(15),a(),r(16,"div",14),s(17,"ng-icon",21),o(18),a()(),r(19,"div",22),o(20),T(21,"date"),a()(),r(22,"div",23),_(23,z,3,0,"button",24)(24,J,3,0,"button",25)(25,K,3,0,"button",25),a()()),n&2){let e=d.$implicit,t=c();i(5),k(e.name),i(4),l(" ",e.email," "),i(3),l(" ",e.phone," "),i(3),l(" Empresa: ",e.companyCode," "),i(3),l(" ",e.role," "),i(2),l(" Solicitado em: ",U(21,9,e.createdAt,"dd/MM/yyyy HH:mm")," "),i(3),u("ngIf",t.currentTab==="pending"),i(),u("ngIf",t.currentTab==="pending"),i(),u("ngIf",t.currentTab==="approved")}}function Q(n,d){if(n&1&&(r(0,"div",31)(1,"p",32),o(2),a()()),n&2){let e=c();i(2),l("Nenhum usu\xE1rio ",e.getEmptyStateText(),"")}}var se=(()=>{class n{authService;tabs=[{label:"Pendentes",value:"pending"},{label:"Aprovados",value:"approved"},{label:"Rejeitados",value:"rejected"}];currentTab="pending";users=[];constructor(e){this.authService=e}ngOnInit(){this.loadUsers()}loadUsers(){this.authService.getPendingUsers().subscribe(e=>{this.users=e})}getUsersByStatus(e){return this.users.filter(t=>t.status===e)}getEmptyStateText(){switch(this.currentTab){case"pending":return"pendente";case"approved":return"aprovado";case"rejected":return"rejeitado";default:return""}}approveUser(e){return f(this,null,function*(){if(confirm(`Deseja aprovar o acesso para ${e.name}?`))try{yield this.authService.approveUser(e.id),this.loadUsers()}catch{alert("Erro ao aprovar usu\xE1rio. Tente novamente.")}})}rejectUser(e){return f(this,null,function*(){if(confirm(`Deseja rejeitar o acesso para ${e.name}?`))try{yield this.authService.rejectUser(e.id),this.loadUsers()}catch{alert("Erro ao rejeitar usu\xE1rio. Tente novamente.")}})}blockUser(e){return f(this,null,function*(){if(confirm(`Deseja bloquear o acesso de ${e.name}?`))try{yield this.authService.blockUser(e.id),this.loadUsers()}catch{alert("Erro ao bloquear usu\xE1rio. Tente novamente.")}})}static \u0275fac=function(t){return new(t||n)(h(q))};static \u0275cmp=C({type:n,selectors:[["app-user-management"]],features:[S([],[j({matCheckCircle:P,matClose:$,matPerson:O,matPhone:A,matEmail:D,matBusiness:F,matWork:H,matBlock:V})])],decls:13,vars:3,consts:[[1,"min-h-screen","bg-white","dark:bg-[#09090B]"],[1,"container","mx-auto","py-28"],[1,"bg-white","dark:bg-[#141416]","rounded-xl","shadow-lg","p-8"],[1,"text-2xl","font-bold","mb-8","dark:text-white"],[1,"border-b","border-gray-200","dark:border-gray-700","mb-8"],[1,"flex","space-x-8"],["class","py-4 px-1 border-b-2 font-medium text-sm",3,"border-amber-500","text-amber-500","border-transparent","text-gray-500","click",4,"ngFor","ngForOf"],[1,"space-y-6"],["class","bg-gray-50 dark:bg-gray-800 rounded-lg p-6 flex flex-col md:flex-row items-start md:items-center justify-between gap-4",4,"ngFor","ngForOf"],["class","text-center py-12 text-gray-500 dark:text-gray-400",4,"ngIf"],[1,"py-4","px-1","border-b-2","font-medium","text-sm",3,"click"],[1,"ml-2","py-0.5","px-2","rounded-full","text-xs"],[1,"bg-gray-50","dark:bg-gray-800","rounded-lg","p-6","flex","flex-col","md:flex-row","items-start","md:items-center","justify-between","gap-4"],[1,"flex-grow","space-y-2"],[1,"flex","items-center","gap-2"],["name","matPerson",1,"text-amber-400"],[1,"font-medium","dark:text-white"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-2","text-sm","text-gray-500","dark:text-gray-400"],["name","matEmail",1,"text-gray-400"],["name","matPhone",1,"text-gray-400"],["name","matBusiness",1,"text-gray-400"],["name","matWork",1,"text-gray-400"],[1,"text-xs","text-gray-400"],[1,"flex","items-center","gap-2","self-end","md:self-center"],["hlmBtn","","variant","default","class","flex items-center gap-2 px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg",3,"click",4,"ngIf"],["hlmBtn","","variant","destructive","class","flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg",3,"click",4,"ngIf"],["hlmBtn","","variant","default",1,"flex","items-center","gap-2","px-4","py-2","bg-green-500","hover:bg-green-600","text-white","rounded-lg",3,"click"],["name","matCheckCircle"],["hlmBtn","","variant","destructive",1,"flex","items-center","gap-2","px-4","py-2","bg-red-500","hover:bg-red-600","text-white","rounded-lg",3,"click"],["name","matClose"],["name","matBlock"],[1,"text-center","py-12","text-gray-500","dark:text-gray-400"],[1,"text-lg"]],template:function(t,m){t&1&&(r(0,"div",0),s(1,"app-header"),r(2,"div",1)(3,"div",2)(4,"h2",3),o(5,"Gerenciamento de Usu\xE1rios"),a(),r(6,"div",4)(7,"nav",5),_(8,G,4,18,"button",6),a()(),r(9,"div",7),_(10,L,26,12,"div",8)(11,Q,3,1,"div",9),a()()(),s(12,"app-footer"),a()),t&2&&(i(8),u("ngForOf",m.tabs),i(2),u("ngForOf",m.getUsersByStatus(m.currentTab)),i(),u("ngIf",m.getUsersByStatus(m.currentTab).length===0))},dependencies:[M,w,E,I,B,N,W,R],encapsulation:2})}return n})();export{se as UserManagementComponent};
